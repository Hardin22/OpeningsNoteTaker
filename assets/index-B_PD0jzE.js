var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
(async () => {
  var _a2, _b2;
  (function() {
    const e = document.createElement("link").relList;
    if (e && e.supports && e.supports("modulepreload")) return;
    for (const i of document.querySelectorAll('link[rel="modulepreload"]')) r(i);
    new MutationObserver((i) => {
      for (const l of i) if (l.type === "childList") for (const c of l.addedNodes) c.tagName === "LINK" && c.rel === "modulepreload" && r(c);
    }).observe(document, {
      childList: true,
      subtree: true
    });
    function t(i) {
      const l = {};
      return i.integrity && (l.integrity = i.integrity), i.referrerPolicy && (l.referrerPolicy = i.referrerPolicy), i.crossOrigin === "use-credentials" ? l.credentials = "include" : i.crossOrigin === "anonymous" ? l.credentials = "omit" : l.credentials = "same-origin", l;
    }
    function r(i) {
      if (i.ep) return;
      i.ep = true;
      const l = t(i);
      fetch(i.href, l);
    }
  })();
  var Ow = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
  function Eu(n) {
    return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
  }
  var W0 = {
    exports: {}
  }, Jd = {}, H0 = {
    exports: {}
  }, _t = {};
  var Lw;
  function MS() {
    if (Lw) return _t;
    Lw = 1;
    var n = Symbol.for("react.element"), e = Symbol.for("react.portal"), t = Symbol.for("react.fragment"), r = Symbol.for("react.strict_mode"), i = Symbol.for("react.profiler"), l = Symbol.for("react.provider"), c = Symbol.for("react.context"), f = Symbol.for("react.forward_ref"), m = Symbol.for("react.suspense"), y = Symbol.for("react.memo"), x = Symbol.for("react.lazy"), C = Symbol.iterator;
    function S(X) {
      return X === null || typeof X != "object" ? null : (X = C && X[C] || X["@@iterator"], typeof X == "function" ? X : null);
    }
    var N = {
      isMounted: function() {
        return false;
      },
      enqueueForceUpdate: function() {
      },
      enqueueReplaceState: function() {
      },
      enqueueSetState: function() {
      }
    }, P = Object.assign, O = {};
    function L(X, oe, Se) {
      this.props = X, this.context = oe, this.refs = O, this.updater = Se || N;
    }
    L.prototype.isReactComponent = {}, L.prototype.setState = function(X, oe) {
      if (typeof X != "object" && typeof X != "function" && X != null) throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");
      this.updater.enqueueSetState(this, X, oe, "setState");
    }, L.prototype.forceUpdate = function(X) {
      this.updater.enqueueForceUpdate(this, X, "forceUpdate");
    };
    function H() {
    }
    H.prototype = L.prototype;
    function W(X, oe, Se) {
      this.props = X, this.context = oe, this.refs = O, this.updater = Se || N;
    }
    var T = W.prototype = new H();
    T.constructor = W, P(T, L.prototype), T.isPureReactComponent = true;
    var Y = Array.isArray, u = Object.prototype.hasOwnProperty, ge = {
      current: null
    }, j = {
      key: true,
      ref: true,
      __self: true,
      __source: true
    };
    function M(X, oe, Se) {
      var me, Re = {}, $e = null, ie = null;
      if (oe != null) for (me in oe.ref !== void 0 && (ie = oe.ref), oe.key !== void 0 && ($e = "" + oe.key), oe) u.call(oe, me) && !j.hasOwnProperty(me) && (Re[me] = oe[me]);
      var ye = arguments.length - 2;
      if (ye === 1) Re.children = Se;
      else if (1 < ye) {
        for (var ve = Array(ye), De = 0; De < ye; De++) ve[De] = arguments[De + 2];
        Re.children = ve;
      }
      if (X && X.defaultProps) for (me in ye = X.defaultProps, ye) Re[me] === void 0 && (Re[me] = ye[me]);
      return {
        $$typeof: n,
        type: X,
        key: $e,
        ref: ie,
        props: Re,
        _owner: ge.current
      };
    }
    function V(X, oe) {
      return {
        $$typeof: n,
        type: X.type,
        key: oe,
        ref: X.ref,
        props: X.props,
        _owner: X._owner
      };
    }
    function B(X) {
      return typeof X == "object" && X !== null && X.$$typeof === n;
    }
    function q(X) {
      var oe = {
        "=": "=0",
        ":": "=2"
      };
      return "$" + X.replace(/[=:]/g, function(Se) {
        return oe[Se];
      });
    }
    var G = /\/+/g;
    function F(X, oe) {
      return typeof X == "object" && X !== null && X.key != null ? q("" + X.key) : oe.toString(36);
    }
    function Oe(X, oe, Se, me, Re) {
      var $e = typeof X;
      ($e === "undefined" || $e === "boolean") && (X = null);
      var ie = false;
      if (X === null) ie = true;
      else switch ($e) {
        case "string":
        case "number":
          ie = true;
          break;
        case "object":
          switch (X.$$typeof) {
            case n:
            case e:
              ie = true;
          }
      }
      if (ie) return ie = X, Re = Re(ie), X = me === "" ? "." + F(ie, 0) : me, Y(Re) ? (Se = "", X != null && (Se = X.replace(G, "$&/") + "/"), Oe(Re, oe, Se, "", function(De) {
        return De;
      })) : Re != null && (B(Re) && (Re = V(Re, Se + (!Re.key || ie && ie.key === Re.key ? "" : ("" + Re.key).replace(G, "$&/") + "/") + X)), oe.push(Re)), 1;
      if (ie = 0, me = me === "" ? "." : me + ":", Y(X)) for (var ye = 0; ye < X.length; ye++) {
        $e = X[ye];
        var ve = me + F($e, ye);
        ie += Oe($e, oe, Se, ve, Re);
      }
      else if (ve = S(X), typeof ve == "function") for (X = ve.call(X), ye = 0; !($e = X.next()).done; ) $e = $e.value, ve = me + F($e, ye++), ie += Oe($e, oe, Se, ve, Re);
      else if ($e === "object") throw oe = String(X), Error("Objects are not valid as a React child (found: " + (oe === "[object Object]" ? "object with keys {" + Object.keys(X).join(", ") + "}" : oe) + "). If you meant to render a collection of children, use an array instead.");
      return ie;
    }
    function Le(X, oe, Se) {
      if (X == null) return X;
      var me = [], Re = 0;
      return Oe(X, me, "", "", function($e) {
        return oe.call(Se, $e, Re++);
      }), me;
    }
    function Ge(X) {
      if (X._status === -1) {
        var oe = X._result;
        oe = oe(), oe.then(function(Se) {
          (X._status === 0 || X._status === -1) && (X._status = 1, X._result = Se);
        }, function(Se) {
          (X._status === 0 || X._status === -1) && (X._status = 2, X._result = Se);
        }), X._status === -1 && (X._status = 0, X._result = oe);
      }
      if (X._status === 1) return X._result.default;
      throw X._result;
    }
    var Ye = {
      current: null
    }, he = {
      transition: null
    }, Pe = {
      ReactCurrentDispatcher: Ye,
      ReactCurrentBatchConfig: he,
      ReactCurrentOwner: ge
    };
    function pe() {
      throw Error("act(...) is not supported in production builds of React.");
    }
    return _t.Children = {
      map: Le,
      forEach: function(X, oe, Se) {
        Le(X, function() {
          oe.apply(this, arguments);
        }, Se);
      },
      count: function(X) {
        var oe = 0;
        return Le(X, function() {
          oe++;
        }), oe;
      },
      toArray: function(X) {
        return Le(X, function(oe) {
          return oe;
        }) || [];
      },
      only: function(X) {
        if (!B(X)) throw Error("React.Children.only expected to receive a single React element child.");
        return X;
      }
    }, _t.Component = L, _t.Fragment = t, _t.Profiler = i, _t.PureComponent = W, _t.StrictMode = r, _t.Suspense = m, _t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = Pe, _t.act = pe, _t.cloneElement = function(X, oe, Se) {
      if (X == null) throw Error("React.cloneElement(...): The argument must be a React element, but you passed " + X + ".");
      var me = P({}, X.props), Re = X.key, $e = X.ref, ie = X._owner;
      if (oe != null) {
        if (oe.ref !== void 0 && ($e = oe.ref, ie = ge.current), oe.key !== void 0 && (Re = "" + oe.key), X.type && X.type.defaultProps) var ye = X.type.defaultProps;
        for (ve in oe) u.call(oe, ve) && !j.hasOwnProperty(ve) && (me[ve] = oe[ve] === void 0 && ye !== void 0 ? ye[ve] : oe[ve]);
      }
      var ve = arguments.length - 2;
      if (ve === 1) me.children = Se;
      else if (1 < ve) {
        ye = Array(ve);
        for (var De = 0; De < ve; De++) ye[De] = arguments[De + 2];
        me.children = ye;
      }
      return {
        $$typeof: n,
        type: X.type,
        key: Re,
        ref: $e,
        props: me,
        _owner: ie
      };
    }, _t.createContext = function(X) {
      return X = {
        $$typeof: c,
        _currentValue: X,
        _currentValue2: X,
        _threadCount: 0,
        Provider: null,
        Consumer: null,
        _defaultValue: null,
        _globalName: null
      }, X.Provider = {
        $$typeof: l,
        _context: X
      }, X.Consumer = X;
    }, _t.createElement = M, _t.createFactory = function(X) {
      var oe = M.bind(null, X);
      return oe.type = X, oe;
    }, _t.createRef = function() {
      return {
        current: null
      };
    }, _t.forwardRef = function(X) {
      return {
        $$typeof: f,
        render: X
      };
    }, _t.isValidElement = B, _t.lazy = function(X) {
      return {
        $$typeof: x,
        _payload: {
          _status: -1,
          _result: X
        },
        _init: Ge
      };
    }, _t.memo = function(X, oe) {
      return {
        $$typeof: y,
        type: X,
        compare: oe === void 0 ? null : oe
      };
    }, _t.startTransition = function(X) {
      var oe = he.transition;
      he.transition = {};
      try {
        X();
      } finally {
        he.transition = oe;
      }
    }, _t.unstable_act = pe, _t.useCallback = function(X, oe) {
      return Ye.current.useCallback(X, oe);
    }, _t.useContext = function(X) {
      return Ye.current.useContext(X);
    }, _t.useDebugValue = function() {
    }, _t.useDeferredValue = function(X) {
      return Ye.current.useDeferredValue(X);
    }, _t.useEffect = function(X, oe) {
      return Ye.current.useEffect(X, oe);
    }, _t.useId = function() {
      return Ye.current.useId();
    }, _t.useImperativeHandle = function(X, oe, Se) {
      return Ye.current.useImperativeHandle(X, oe, Se);
    }, _t.useInsertionEffect = function(X, oe) {
      return Ye.current.useInsertionEffect(X, oe);
    }, _t.useLayoutEffect = function(X, oe) {
      return Ye.current.useLayoutEffect(X, oe);
    }, _t.useMemo = function(X, oe) {
      return Ye.current.useMemo(X, oe);
    }, _t.useReducer = function(X, oe, Se) {
      return Ye.current.useReducer(X, oe, Se);
    }, _t.useRef = function(X) {
      return Ye.current.useRef(X);
    }, _t.useState = function(X) {
      return Ye.current.useState(X);
    }, _t.useSyncExternalStore = function(X, oe, Se) {
      return Ye.current.useSyncExternalStore(X, oe, Se);
    }, _t.useTransition = function() {
      return Ye.current.useTransition();
    }, _t.version = "18.3.1", _t;
  }
  var Mw;
  function by() {
    return Mw || (Mw = 1, H0.exports = MS()), H0.exports;
  }
  var $w;
  function $S() {
    if ($w) return Jd;
    $w = 1;
    var n = by(), e = Symbol.for("react.element"), t = Symbol.for("react.fragment"), r = Object.prototype.hasOwnProperty, i = n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, l = {
      key: true,
      ref: true,
      __self: true,
      __source: true
    };
    function c(f, m, y) {
      var x, C = {}, S = null, N = null;
      y !== void 0 && (S = "" + y), m.key !== void 0 && (S = "" + m.key), m.ref !== void 0 && (N = m.ref);
      for (x in m) r.call(m, x) && !l.hasOwnProperty(x) && (C[x] = m[x]);
      if (f && f.defaultProps) for (x in m = f.defaultProps, m) C[x] === void 0 && (C[x] = m[x]);
      return {
        $$typeof: e,
        type: f,
        key: S,
        ref: N,
        props: C,
        _owner: i.current
      };
    }
    return Jd.Fragment = t, Jd.jsx = c, Jd.jsxs = c, Jd;
  }
  var Vw;
  function VS() {
    return Vw || (Vw = 1, W0.exports = $S()), W0.exports;
  }
  var h = VS(), R = by();
  const wo = Eu(R);
  var Zp = {}, q0 = {
    exports: {}
  }, qr = {}, K0 = {
    exports: {}
  }, G0 = {};
  var Fw;
  function FS() {
    return Fw || (Fw = 1, function(n) {
      function e(he, Pe) {
        var pe = he.length;
        he.push(Pe);
        e: for (; 0 < pe; ) {
          var X = pe - 1 >>> 1, oe = he[X];
          if (0 < i(oe, Pe)) he[X] = Pe, he[pe] = oe, pe = X;
          else break e;
        }
      }
      function t(he) {
        return he.length === 0 ? null : he[0];
      }
      function r(he) {
        if (he.length === 0) return null;
        var Pe = he[0], pe = he.pop();
        if (pe !== Pe) {
          he[0] = pe;
          e: for (var X = 0, oe = he.length, Se = oe >>> 1; X < Se; ) {
            var me = 2 * (X + 1) - 1, Re = he[me], $e = me + 1, ie = he[$e];
            if (0 > i(Re, pe)) $e < oe && 0 > i(ie, Re) ? (he[X] = ie, he[$e] = pe, X = $e) : (he[X] = Re, he[me] = pe, X = me);
            else if ($e < oe && 0 > i(ie, pe)) he[X] = ie, he[$e] = pe, X = $e;
            else break e;
          }
        }
        return Pe;
      }
      function i(he, Pe) {
        var pe = he.sortIndex - Pe.sortIndex;
        return pe !== 0 ? pe : he.id - Pe.id;
      }
      if (typeof performance == "object" && typeof performance.now == "function") {
        var l = performance;
        n.unstable_now = function() {
          return l.now();
        };
      } else {
        var c = Date, f = c.now();
        n.unstable_now = function() {
          return c.now() - f;
        };
      }
      var m = [], y = [], x = 1, C = null, S = 3, N = false, P = false, O = false, L = typeof setTimeout == "function" ? setTimeout : null, H = typeof clearTimeout == "function" ? clearTimeout : null, W = typeof setImmediate < "u" ? setImmediate : null;
      typeof navigator < "u" && navigator.scheduling !== void 0 && navigator.scheduling.isInputPending !== void 0 && navigator.scheduling.isInputPending.bind(navigator.scheduling);
      function T(he) {
        for (var Pe = t(y); Pe !== null; ) {
          if (Pe.callback === null) r(y);
          else if (Pe.startTime <= he) r(y), Pe.sortIndex = Pe.expirationTime, e(m, Pe);
          else break;
          Pe = t(y);
        }
      }
      function Y(he) {
        if (O = false, T(he), !P) if (t(m) !== null) P = true, Ge(u);
        else {
          var Pe = t(y);
          Pe !== null && Ye(Y, Pe.startTime - he);
        }
      }
      function u(he, Pe) {
        P = false, O && (O = false, H(M), M = -1), N = true;
        var pe = S;
        try {
          for (T(Pe), C = t(m); C !== null && (!(C.expirationTime > Pe) || he && !q()); ) {
            var X = C.callback;
            if (typeof X == "function") {
              C.callback = null, S = C.priorityLevel;
              var oe = X(C.expirationTime <= Pe);
              Pe = n.unstable_now(), typeof oe == "function" ? C.callback = oe : C === t(m) && r(m), T(Pe);
            } else r(m);
            C = t(m);
          }
          if (C !== null) var Se = true;
          else {
            var me = t(y);
            me !== null && Ye(Y, me.startTime - Pe), Se = false;
          }
          return Se;
        } finally {
          C = null, S = pe, N = false;
        }
      }
      var ge = false, j = null, M = -1, V = 5, B = -1;
      function q() {
        return !(n.unstable_now() - B < V);
      }
      function G() {
        if (j !== null) {
          var he = n.unstable_now();
          B = he;
          var Pe = true;
          try {
            Pe = j(true, he);
          } finally {
            Pe ? F() : (ge = false, j = null);
          }
        } else ge = false;
      }
      var F;
      if (typeof W == "function") F = function() {
        W(G);
      };
      else if (typeof MessageChannel < "u") {
        var Oe = new MessageChannel(), Le = Oe.port2;
        Oe.port1.onmessage = G, F = function() {
          Le.postMessage(null);
        };
      } else F = function() {
        L(G, 0);
      };
      function Ge(he) {
        j = he, ge || (ge = true, F());
      }
      function Ye(he, Pe) {
        M = L(function() {
          he(n.unstable_now());
        }, Pe);
      }
      n.unstable_IdlePriority = 5, n.unstable_ImmediatePriority = 1, n.unstable_LowPriority = 4, n.unstable_NormalPriority = 3, n.unstable_Profiling = null, n.unstable_UserBlockingPriority = 2, n.unstable_cancelCallback = function(he) {
        he.callback = null;
      }, n.unstable_continueExecution = function() {
        P || N || (P = true, Ge(u));
      }, n.unstable_forceFrameRate = function(he) {
        0 > he || 125 < he ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : V = 0 < he ? Math.floor(1e3 / he) : 5;
      }, n.unstable_getCurrentPriorityLevel = function() {
        return S;
      }, n.unstable_getFirstCallbackNode = function() {
        return t(m);
      }, n.unstable_next = function(he) {
        switch (S) {
          case 1:
          case 2:
          case 3:
            var Pe = 3;
            break;
          default:
            Pe = S;
        }
        var pe = S;
        S = Pe;
        try {
          return he();
        } finally {
          S = pe;
        }
      }, n.unstable_pauseExecution = function() {
      }, n.unstable_requestPaint = function() {
      }, n.unstable_runWithPriority = function(he, Pe) {
        switch (he) {
          case 1:
          case 2:
          case 3:
          case 4:
          case 5:
            break;
          default:
            he = 3;
        }
        var pe = S;
        S = he;
        try {
          return Pe();
        } finally {
          S = pe;
        }
      }, n.unstable_scheduleCallback = function(he, Pe, pe) {
        var X = n.unstable_now();
        switch (typeof pe == "object" && pe !== null ? (pe = pe.delay, pe = typeof pe == "number" && 0 < pe ? X + pe : X) : pe = X, he) {
          case 1:
            var oe = -1;
            break;
          case 2:
            oe = 250;
            break;
          case 5:
            oe = 1073741823;
            break;
          case 4:
            oe = 1e4;
            break;
          default:
            oe = 5e3;
        }
        return oe = pe + oe, he = {
          id: x++,
          callback: Pe,
          priorityLevel: he,
          startTime: pe,
          expirationTime: oe,
          sortIndex: -1
        }, pe > X ? (he.sortIndex = pe, e(y, he), t(m) === null && he === t(y) && (O ? (H(M), M = -1) : O = true, Ye(Y, pe - X))) : (he.sortIndex = oe, e(m, he), P || N || (P = true, Ge(u))), he;
      }, n.unstable_shouldYield = q, n.unstable_wrapCallback = function(he) {
        var Pe = S;
        return function() {
          var pe = S;
          S = Pe;
          try {
            return he.apply(this, arguments);
          } finally {
            S = pe;
          }
        };
      };
    }(G0)), G0;
  }
  var zw;
  function zS() {
    return zw || (zw = 1, K0.exports = FS()), K0.exports;
  }
  var Uw;
  function US() {
    if (Uw) return qr;
    Uw = 1;
    var n = by(), e = zS();
    function t(s) {
      for (var o = "https://reactjs.org/docs/error-decoder.html?invariant=" + s, d = 1; d < arguments.length; d++) o += "&args[]=" + encodeURIComponent(arguments[d]);
      return "Minified React error #" + s + "; visit " + o + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
    }
    var r = /* @__PURE__ */ new Set(), i = {};
    function l(s, o) {
      c(s, o), c(s + "Capture", o);
    }
    function c(s, o) {
      for (i[s] = o, s = 0; s < o.length; s++) r.add(o[s]);
    }
    var f = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u"), m = Object.prototype.hasOwnProperty, y = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, x = {}, C = {};
    function S(s) {
      return m.call(C, s) ? true : m.call(x, s) ? false : y.test(s) ? C[s] = true : (x[s] = true, false);
    }
    function N(s, o, d, v) {
      if (d !== null && d.type === 0) return false;
      switch (typeof o) {
        case "function":
        case "symbol":
          return true;
        case "boolean":
          return v ? false : d !== null ? !d.acceptsBooleans : (s = s.toLowerCase().slice(0, 5), s !== "data-" && s !== "aria-");
        default:
          return false;
      }
    }
    function P(s, o, d, v) {
      if (o === null || typeof o > "u" || N(s, o, d, v)) return true;
      if (v) return false;
      if (d !== null) switch (d.type) {
        case 3:
          return !o;
        case 4:
          return o === false;
        case 5:
          return isNaN(o);
        case 6:
          return isNaN(o) || 1 > o;
      }
      return false;
    }
    function O(s, o, d, v, _, b, D) {
      this.acceptsBooleans = o === 2 || o === 3 || o === 4, this.attributeName = v, this.attributeNamespace = _, this.mustUseProperty = d, this.propertyName = s, this.type = o, this.sanitizeURL = b, this.removeEmptyString = D;
    }
    var L = {};
    "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s) {
      L[s] = new O(s, 0, false, s, null, false, false);
    }), [
      [
        "acceptCharset",
        "accept-charset"
      ],
      [
        "className",
        "class"
      ],
      [
        "htmlFor",
        "for"
      ],
      [
        "httpEquiv",
        "http-equiv"
      ]
    ].forEach(function(s) {
      var o = s[0];
      L[o] = new O(o, 1, false, s[1], null, false, false);
    }), [
      "contentEditable",
      "draggable",
      "spellCheck",
      "value"
    ].forEach(function(s) {
      L[s] = new O(s, 2, false, s.toLowerCase(), null, false, false);
    }), [
      "autoReverse",
      "externalResourcesRequired",
      "focusable",
      "preserveAlpha"
    ].forEach(function(s) {
      L[s] = new O(s, 2, false, s, null, false, false);
    }), "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s) {
      L[s] = new O(s, 3, false, s.toLowerCase(), null, false, false);
    }), [
      "checked",
      "multiple",
      "muted",
      "selected"
    ].forEach(function(s) {
      L[s] = new O(s, 3, true, s, null, false, false);
    }), [
      "capture",
      "download"
    ].forEach(function(s) {
      L[s] = new O(s, 4, false, s, null, false, false);
    }), [
      "cols",
      "rows",
      "size",
      "span"
    ].forEach(function(s) {
      L[s] = new O(s, 6, false, s, null, false, false);
    }), [
      "rowSpan",
      "start"
    ].forEach(function(s) {
      L[s] = new O(s, 5, false, s.toLowerCase(), null, false, false);
    });
    var H = /[\-:]([a-z])/g;
    function W(s) {
      return s[1].toUpperCase();
    }
    "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s) {
      var o = s.replace(H, W);
      L[o] = new O(o, 1, false, s, null, false, false);
    }), "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s) {
      var o = s.replace(H, W);
      L[o] = new O(o, 1, false, s, "http://www.w3.org/1999/xlink", false, false);
    }), [
      "xml:base",
      "xml:lang",
      "xml:space"
    ].forEach(function(s) {
      var o = s.replace(H, W);
      L[o] = new O(o, 1, false, s, "http://www.w3.org/XML/1998/namespace", false, false);
    }), [
      "tabIndex",
      "crossOrigin"
    ].forEach(function(s) {
      L[s] = new O(s, 1, false, s.toLowerCase(), null, false, false);
    }), L.xlinkHref = new O("xlinkHref", 1, false, "xlink:href", "http://www.w3.org/1999/xlink", true, false), [
      "src",
      "href",
      "action",
      "formAction"
    ].forEach(function(s) {
      L[s] = new O(s, 1, false, s.toLowerCase(), null, true, true);
    });
    function T(s, o, d, v) {
      var _ = L.hasOwnProperty(o) ? L[o] : null;
      (_ !== null ? _.type !== 0 : v || !(2 < o.length) || o[0] !== "o" && o[0] !== "O" || o[1] !== "n" && o[1] !== "N") && (P(o, d, _, v) && (d = null), v || _ === null ? S(o) && (d === null ? s.removeAttribute(o) : s.setAttribute(o, "" + d)) : _.mustUseProperty ? s[_.propertyName] = d === null ? _.type === 3 ? false : "" : d : (o = _.attributeName, v = _.attributeNamespace, d === null ? s.removeAttribute(o) : (_ = _.type, d = _ === 3 || _ === 4 && d === true ? "" : "" + d, v ? s.setAttributeNS(v, o, d) : s.setAttribute(o, d))));
    }
    var Y = n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, u = Symbol.for("react.element"), ge = Symbol.for("react.portal"), j = Symbol.for("react.fragment"), M = Symbol.for("react.strict_mode"), V = Symbol.for("react.profiler"), B = Symbol.for("react.provider"), q = Symbol.for("react.context"), G = Symbol.for("react.forward_ref"), F = Symbol.for("react.suspense"), Oe = Symbol.for("react.suspense_list"), Le = Symbol.for("react.memo"), Ge = Symbol.for("react.lazy"), Ye = Symbol.for("react.offscreen"), he = Symbol.iterator;
    function Pe(s) {
      return s === null || typeof s != "object" ? null : (s = he && s[he] || s["@@iterator"], typeof s == "function" ? s : null);
    }
    var pe = Object.assign, X;
    function oe(s) {
      if (X === void 0) try {
        throw Error();
      } catch (d) {
        var o = d.stack.trim().match(/\n( *(at )?)/);
        X = o && o[1] || "";
      }
      return `
` + X + s;
    }
    var Se = false;
    function me(s, o) {
      if (!s || Se) return "";
      Se = true;
      var d = Error.prepareStackTrace;
      Error.prepareStackTrace = void 0;
      try {
        if (o) if (o = function() {
          throw Error();
        }, Object.defineProperty(o.prototype, "props", {
          set: function() {
            throw Error();
          }
        }), typeof Reflect == "object" && Reflect.construct) {
          try {
            Reflect.construct(o, []);
          } catch (ae) {
            var v = ae;
          }
          Reflect.construct(s, [], o);
        } else {
          try {
            o.call();
          } catch (ae) {
            v = ae;
          }
          s.call(o.prototype);
        }
        else {
          try {
            throw Error();
          } catch (ae) {
            v = ae;
          }
          s();
        }
      } catch (ae) {
        if (ae && v && typeof ae.stack == "string") {
          for (var _ = ae.stack.split(`
`), b = v.stack.split(`
`), D = _.length - 1, K = b.length - 1; 1 <= D && 0 <= K && _[D] !== b[K]; ) K--;
          for (; 1 <= D && 0 <= K; D--, K--) if (_[D] !== b[K]) {
            if (D !== 1 || K !== 1) do
              if (D--, K--, 0 > K || _[D] !== b[K]) {
                var J = `
` + _[D].replace(" at new ", " at ");
                return s.displayName && J.includes("<anonymous>") && (J = J.replace("<anonymous>", s.displayName)), J;
              }
            while (1 <= D && 0 <= K);
            break;
          }
        }
      } finally {
        Se = false, Error.prepareStackTrace = d;
      }
      return (s = s ? s.displayName || s.name : "") ? oe(s) : "";
    }
    function Re(s) {
      switch (s.tag) {
        case 5:
          return oe(s.type);
        case 16:
          return oe("Lazy");
        case 13:
          return oe("Suspense");
        case 19:
          return oe("SuspenseList");
        case 0:
        case 2:
        case 15:
          return s = me(s.type, false), s;
        case 11:
          return s = me(s.type.render, false), s;
        case 1:
          return s = me(s.type, true), s;
        default:
          return "";
      }
    }
    function $e(s) {
      if (s == null) return null;
      if (typeof s == "function") return s.displayName || s.name || null;
      if (typeof s == "string") return s;
      switch (s) {
        case j:
          return "Fragment";
        case ge:
          return "Portal";
        case V:
          return "Profiler";
        case M:
          return "StrictMode";
        case F:
          return "Suspense";
        case Oe:
          return "SuspenseList";
      }
      if (typeof s == "object") switch (s.$$typeof) {
        case q:
          return (s.displayName || "Context") + ".Consumer";
        case B:
          return (s._context.displayName || "Context") + ".Provider";
        case G:
          var o = s.render;
          return s = s.displayName, s || (s = o.displayName || o.name || "", s = s !== "" ? "ForwardRef(" + s + ")" : "ForwardRef"), s;
        case Le:
          return o = s.displayName || null, o !== null ? o : $e(s.type) || "Memo";
        case Ge:
          o = s._payload, s = s._init;
          try {
            return $e(s(o));
          } catch {
          }
      }
      return null;
    }
    function ie(s) {
      var o = s.type;
      switch (s.tag) {
        case 24:
          return "Cache";
        case 9:
          return (o.displayName || "Context") + ".Consumer";
        case 10:
          return (o._context.displayName || "Context") + ".Provider";
        case 18:
          return "DehydratedFragment";
        case 11:
          return s = o.render, s = s.displayName || s.name || "", o.displayName || (s !== "" ? "ForwardRef(" + s + ")" : "ForwardRef");
        case 7:
          return "Fragment";
        case 5:
          return o;
        case 4:
          return "Portal";
        case 3:
          return "Root";
        case 6:
          return "Text";
        case 16:
          return $e(o);
        case 8:
          return o === M ? "StrictMode" : "Mode";
        case 22:
          return "Offscreen";
        case 12:
          return "Profiler";
        case 21:
          return "Scope";
        case 13:
          return "Suspense";
        case 19:
          return "SuspenseList";
        case 25:
          return "TracingMarker";
        case 1:
        case 0:
        case 17:
        case 2:
        case 14:
        case 15:
          if (typeof o == "function") return o.displayName || o.name || null;
          if (typeof o == "string") return o;
      }
      return null;
    }
    function ye(s) {
      switch (typeof s) {
        case "boolean":
        case "number":
        case "string":
        case "undefined":
          return s;
        case "object":
          return s;
        default:
          return "";
      }
    }
    function ve(s) {
      var o = s.type;
      return (s = s.nodeName) && s.toLowerCase() === "input" && (o === "checkbox" || o === "radio");
    }
    function De(s) {
      var o = ve(s) ? "checked" : "value", d = Object.getOwnPropertyDescriptor(s.constructor.prototype, o), v = "" + s[o];
      if (!s.hasOwnProperty(o) && typeof d < "u" && typeof d.get == "function" && typeof d.set == "function") {
        var _ = d.get, b = d.set;
        return Object.defineProperty(s, o, {
          configurable: true,
          get: function() {
            return _.call(this);
          },
          set: function(D) {
            v = "" + D, b.call(this, D);
          }
        }), Object.defineProperty(s, o, {
          enumerable: d.enumerable
        }), {
          getValue: function() {
            return v;
          },
          setValue: function(D) {
            v = "" + D;
          },
          stopTracking: function() {
            s._valueTracker = null, delete s[o];
          }
        };
      }
    }
    function Be(s) {
      s._valueTracker || (s._valueTracker = De(s));
    }
    function et(s) {
      if (!s) return false;
      var o = s._valueTracker;
      if (!o) return true;
      var d = o.getValue(), v = "";
      return s && (v = ve(s) ? s.checked ? "true" : "false" : s.value), s = v, s !== d ? (o.setValue(s), true) : false;
    }
    function le(s) {
      if (s = s || (typeof document < "u" ? document : void 0), typeof s > "u") return null;
      try {
        return s.activeElement || s.body;
      } catch {
        return s.body;
      }
    }
    function Ne(s, o) {
      var d = o.checked;
      return pe({}, o, {
        defaultChecked: void 0,
        defaultValue: void 0,
        value: void 0,
        checked: d ?? s._wrapperState.initialChecked
      });
    }
    function Ke(s, o) {
      var d = o.defaultValue == null ? "" : o.defaultValue, v = o.checked != null ? o.checked : o.defaultChecked;
      d = ye(o.value != null ? o.value : d), s._wrapperState = {
        initialChecked: v,
        initialValue: d,
        controlled: o.type === "checkbox" || o.type === "radio" ? o.checked != null : o.value != null
      };
    }
    function at(s, o) {
      o = o.checked, o != null && T(s, "checked", o, false);
    }
    function pt(s, o) {
      at(s, o);
      var d = ye(o.value), v = o.type;
      if (d != null) v === "number" ? (d === 0 && s.value === "" || s.value != d) && (s.value = "" + d) : s.value !== "" + d && (s.value = "" + d);
      else if (v === "submit" || v === "reset") {
        s.removeAttribute("value");
        return;
      }
      o.hasOwnProperty("value") ? Fe(s, o.type, d) : o.hasOwnProperty("defaultValue") && Fe(s, o.type, ye(o.defaultValue)), o.checked == null && o.defaultChecked != null && (s.defaultChecked = !!o.defaultChecked);
    }
    function Vt(s, o, d) {
      if (o.hasOwnProperty("value") || o.hasOwnProperty("defaultValue")) {
        var v = o.type;
        if (!(v !== "submit" && v !== "reset" || o.value !== void 0 && o.value !== null)) return;
        o = "" + s._wrapperState.initialValue, d || o === s.value || (s.value = o), s.defaultValue = o;
      }
      d = s.name, d !== "" && (s.name = ""), s.defaultChecked = !!s._wrapperState.initialChecked, d !== "" && (s.name = d);
    }
    function Fe(s, o, d) {
      (o !== "number" || le(s.ownerDocument) !== s) && (d == null ? s.defaultValue = "" + s._wrapperState.initialValue : s.defaultValue !== "" + d && (s.defaultValue = "" + d));
    }
    var ke = Array.isArray;
    function ut(s, o, d, v) {
      if (s = s.options, o) {
        o = {};
        for (var _ = 0; _ < d.length; _++) o["$" + d[_]] = true;
        for (d = 0; d < s.length; d++) _ = o.hasOwnProperty("$" + s[d].value), s[d].selected !== _ && (s[d].selected = _), _ && v && (s[d].defaultSelected = true);
      } else {
        for (d = "" + ye(d), o = null, _ = 0; _ < s.length; _++) {
          if (s[_].value === d) {
            s[_].selected = true, v && (s[_].defaultSelected = true);
            return;
          }
          o !== null || s[_].disabled || (o = s[_]);
        }
        o !== null && (o.selected = true);
      }
    }
    function Pt(s, o) {
      if (o.dangerouslySetInnerHTML != null) throw Error(t(91));
      return pe({}, o, {
        value: void 0,
        defaultValue: void 0,
        children: "" + s._wrapperState.initialValue
      });
    }
    function It(s, o) {
      var d = o.value;
      if (d == null) {
        if (d = o.children, o = o.defaultValue, d != null) {
          if (o != null) throw Error(t(92));
          if (ke(d)) {
            if (1 < d.length) throw Error(t(93));
            d = d[0];
          }
          o = d;
        }
        o == null && (o = ""), d = o;
      }
      s._wrapperState = {
        initialValue: ye(d)
      };
    }
    function en(s, o) {
      var d = ye(o.value), v = ye(o.defaultValue);
      d != null && (d = "" + d, d !== s.value && (s.value = d), o.defaultValue == null && s.defaultValue !== d && (s.defaultValue = d)), v != null && (s.defaultValue = "" + v);
    }
    function on(s) {
      var o = s.textContent;
      o === s._wrapperState.initialValue && o !== "" && o !== null && (s.value = o);
    }
    function Dt(s) {
      switch (s) {
        case "svg":
          return "http://www.w3.org/2000/svg";
        case "math":
          return "http://www.w3.org/1998/Math/MathML";
        default:
          return "http://www.w3.org/1999/xhtml";
      }
    }
    function kt(s, o) {
      return s == null || s === "http://www.w3.org/1999/xhtml" ? Dt(o) : s === "http://www.w3.org/2000/svg" && o === "foreignObject" ? "http://www.w3.org/1999/xhtml" : s;
    }
    var En, Xr = function(s) {
      return typeof MSApp < "u" && MSApp.execUnsafeLocalFunction ? function(o, d, v, _) {
        MSApp.execUnsafeLocalFunction(function() {
          return s(o, d, v, _);
        });
      } : s;
    }(function(s, o) {
      if (s.namespaceURI !== "http://www.w3.org/2000/svg" || "innerHTML" in s) s.innerHTML = o;
      else {
        for (En = En || document.createElement("div"), En.innerHTML = "<svg>" + o.valueOf().toString() + "</svg>", o = En.firstChild; s.firstChild; ) s.removeChild(s.firstChild);
        for (; o.firstChild; ) s.appendChild(o.firstChild);
      }
    });
    function mr(s, o) {
      if (o) {
        var d = s.firstChild;
        if (d && d === s.lastChild && d.nodeType === 3) {
          d.nodeValue = o;
          return;
        }
      }
      s.textContent = o;
    }
    var Bn = {
      animationIterationCount: true,
      aspectRatio: true,
      borderImageOutset: true,
      borderImageSlice: true,
      borderImageWidth: true,
      boxFlex: true,
      boxFlexGroup: true,
      boxOrdinalGroup: true,
      columnCount: true,
      columns: true,
      flex: true,
      flexGrow: true,
      flexPositive: true,
      flexShrink: true,
      flexNegative: true,
      flexOrder: true,
      gridArea: true,
      gridRow: true,
      gridRowEnd: true,
      gridRowSpan: true,
      gridRowStart: true,
      gridColumn: true,
      gridColumnEnd: true,
      gridColumnSpan: true,
      gridColumnStart: true,
      fontWeight: true,
      lineClamp: true,
      lineHeight: true,
      opacity: true,
      order: true,
      orphans: true,
      tabSize: true,
      widows: true,
      zIndex: true,
      zoom: true,
      fillOpacity: true,
      floodOpacity: true,
      stopOpacity: true,
      strokeDasharray: true,
      strokeDashoffset: true,
      strokeMiterlimit: true,
      strokeOpacity: true,
      strokeWidth: true
    }, er = [
      "Webkit",
      "ms",
      "Moz",
      "O"
    ];
    Object.keys(Bn).forEach(function(s) {
      er.forEach(function(o) {
        o = o + s.charAt(0).toUpperCase() + s.substring(1), Bn[o] = Bn[s];
      });
    });
    function Jr(s, o, d) {
      return o == null || typeof o == "boolean" || o === "" ? "" : d || typeof o != "number" || o === 0 || Bn.hasOwnProperty(s) && Bn[s] ? ("" + o).trim() : o + "px";
    }
    function dn(s, o) {
      s = s.style;
      for (var d in o) if (o.hasOwnProperty(d)) {
        var v = d.indexOf("--") === 0, _ = Jr(d, o[d], v);
        d === "float" && (d = "cssFloat"), v ? s.setProperty(d, _) : s[d] = _;
      }
    }
    var tr = pe({
      menuitem: true
    }, {
      area: true,
      base: true,
      br: true,
      col: true,
      embed: true,
      hr: true,
      img: true,
      input: true,
      keygen: true,
      link: true,
      meta: true,
      param: true,
      source: true,
      track: true,
      wbr: true
    });
    function Zr(s, o) {
      if (o) {
        if (tr[s] && (o.children != null || o.dangerouslySetInnerHTML != null)) throw Error(t(137, s));
        if (o.dangerouslySetInnerHTML != null) {
          if (o.children != null) throw Error(t(60));
          if (typeof o.dangerouslySetInnerHTML != "object" || !("__html" in o.dangerouslySetInnerHTML)) throw Error(t(61));
        }
        if (o.style != null && typeof o.style != "object") throw Error(t(62));
      }
    }
    function es(s, o) {
      if (s.indexOf("-") === -1) return typeof o.is == "string";
      switch (s) {
        case "annotation-xml":
        case "color-profile":
        case "font-face":
        case "font-face-src":
        case "font-face-uri":
        case "font-face-format":
        case "font-face-name":
        case "missing-glyph":
          return false;
        default:
          return true;
      }
    }
    var Ir = null;
    function kr(s) {
      return s = s.target || s.srcElement || window, s.correspondingUseElement && (s = s.correspondingUseElement), s.nodeType === 3 ? s.parentNode : s;
    }
    var nr = null, fn = null, Nn = null;
    function ce(s) {
      if (s = ul(s)) {
        if (typeof nr != "function") throw Error(t(280));
        var o = s.stateNode;
        o && (o = fc(o), nr(s.stateNode, s.type, o));
      }
    }
    function je(s) {
      fn ? Nn ? Nn.push(s) : Nn = [
        s
      ] : fn = s;
    }
    function tt() {
      if (fn) {
        var s = fn, o = Nn;
        if (Nn = fn = null, ce(s), o) for (s = 0; s < o.length; s++) ce(o[s]);
      }
    }
    function nt(s, o) {
      return s(o);
    }
    function Ot() {
    }
    var mt = false;
    function Pn(s, o, d) {
      if (mt) return s(o, d);
      mt = true;
      try {
        return nt(s, o, d);
      } finally {
        mt = false, (fn !== null || Nn !== null) && (Ot(), tt());
      }
    }
    function Ft(s, o) {
      var d = s.stateNode;
      if (d === null) return null;
      var v = fc(d);
      if (v === null) return null;
      d = v[o];
      e: switch (o) {
        case "onClick":
        case "onClickCapture":
        case "onDoubleClick":
        case "onDoubleClickCapture":
        case "onMouseDown":
        case "onMouseDownCapture":
        case "onMouseMove":
        case "onMouseMoveCapture":
        case "onMouseUp":
        case "onMouseUpCapture":
        case "onMouseEnter":
          (v = !v.disabled) || (s = s.type, v = !(s === "button" || s === "input" || s === "select" || s === "textarea")), s = !v;
          break e;
        default:
          s = false;
      }
      if (s) return null;
      if (d && typeof d != "function") throw Error(t(231, o, typeof d));
      return d;
    }
    var Wn = false;
    if (f) try {
      var Qt = {};
      Object.defineProperty(Qt, "passive", {
        get: function() {
          Wn = true;
        }
      }), window.addEventListener("test", Qt, Qt), window.removeEventListener("test", Qt, Qt);
    } catch {
      Wn = false;
    }
    function dt(s, o, d, v, _, b, D, K, J) {
      var ae = Array.prototype.slice.call(arguments, 3);
      try {
        o.apply(d, ae);
      } catch (be) {
        this.onError(be);
      }
    }
    var it = false, At = null, xt = false, bn = null, Dn = {
      onError: function(s) {
        it = true, At = s;
      }
    };
    function Ds(s, o, d, v, _, b, D, K, J) {
      it = false, At = null, dt.apply(Dn, arguments);
    }
    function $a(s, o, d, v, _, b, D, K, J) {
      if (Ds.apply(this, arguments), it) {
        if (it) {
          var ae = At;
          it = false, At = null;
        } else throw Error(t(198));
        xt || (xt = true, bn = ae);
      }
    }
    function Ar(s) {
      var o = s, d = s;
      if (s.alternate) for (; o.return; ) o = o.return;
      else {
        s = o;
        do
          o = s, (o.flags & 4098) !== 0 && (d = o.return), s = o.return;
        while (s);
      }
      return o.tag === 3 ? d : null;
    }
    function di(s) {
      if (s.tag === 13) {
        var o = s.memoizedState;
        if (o === null && (s = s.alternate, s !== null && (o = s.memoizedState)), o !== null) return o.dehydrated;
      }
      return null;
    }
    function Rr(s) {
      if (Ar(s) !== s) throw Error(t(188));
    }
    function Va(s) {
      var o = s.alternate;
      if (!o) {
        if (o = Ar(s), o === null) throw Error(t(188));
        return o !== s ? null : s;
      }
      for (var d = s, v = o; ; ) {
        var _ = d.return;
        if (_ === null) break;
        var b = _.alternate;
        if (b === null) {
          if (v = _.return, v !== null) {
            d = v;
            continue;
          }
          break;
        }
        if (_.child === b.child) {
          for (b = _.child; b; ) {
            if (b === d) return Rr(_), s;
            if (b === v) return Rr(_), o;
            b = b.sibling;
          }
          throw Error(t(188));
        }
        if (d.return !== v.return) d = _, v = b;
        else {
          for (var D = false, K = _.child; K; ) {
            if (K === d) {
              D = true, d = _, v = b;
              break;
            }
            if (K === v) {
              D = true, v = _, d = b;
              break;
            }
            K = K.sibling;
          }
          if (!D) {
            for (K = b.child; K; ) {
              if (K === d) {
                D = true, d = b, v = _;
                break;
              }
              if (K === v) {
                D = true, v = b, d = _;
                break;
              }
              K = K.sibling;
            }
            if (!D) throw Error(t(189));
          }
        }
        if (d.alternate !== v) throw Error(t(190));
      }
      if (d.tag !== 3) throw Error(t(188));
      return d.stateNode.current === d ? s : o;
    }
    function Do(s) {
      return s = Va(s), s !== null ? Hi(s) : null;
    }
    function Hi(s) {
      if (s.tag === 5 || s.tag === 6) return s;
      for (s = s.child; s !== null; ) {
        var o = Hi(s);
        if (o !== null) return o;
        s = s.sibling;
      }
      return null;
    }
    var qi = e.unstable_scheduleCallback, jo = e.unstable_cancelCallback, Fa = e.unstable_shouldYield, Gl = e.unstable_requestPaint, zt = e.unstable_now, za = e.unstable_getCurrentPriorityLevel, fi = e.unstable_ImmediatePriority, js = e.unstable_UserBlockingPriority, vr = e.unstable_NormalPriority, Oo = e.unstable_LowPriority, Ua = e.unstable_IdlePriority, hi = null, rr = null;
    function Ba(s) {
      if (rr && typeof rr.onCommitFiberRoot == "function") try {
        rr.onCommitFiberRoot(hi, s, void 0, (s.current.flags & 128) === 128);
      } catch {
      }
    }
    var jn = Math.clz32 ? Math.clz32 : Ha, Lo = Math.log, Wa = Math.LN2;
    function Ha(s) {
      return s >>>= 0, s === 0 ? 32 : 31 - (Lo(s) / Wa | 0) | 0;
    }
    var Ki = 64, Gi = 4194304;
    function Os(s) {
      switch (s & -s) {
        case 1:
          return 1;
        case 2:
          return 2;
        case 4:
          return 4;
        case 8:
          return 8;
        case 16:
          return 16;
        case 32:
          return 32;
        case 64:
        case 128:
        case 256:
        case 512:
        case 1024:
        case 2048:
        case 4096:
        case 8192:
        case 16384:
        case 32768:
        case 65536:
        case 131072:
        case 262144:
        case 524288:
        case 1048576:
        case 2097152:
          return s & 4194240;
        case 4194304:
        case 8388608:
        case 16777216:
        case 33554432:
        case 67108864:
          return s & 130023424;
        case 134217728:
          return 134217728;
        case 268435456:
          return 268435456;
        case 536870912:
          return 536870912;
        case 1073741824:
          return 1073741824;
        default:
          return s;
      }
    }
    function pi(s, o) {
      var d = s.pendingLanes;
      if (d === 0) return 0;
      var v = 0, _ = s.suspendedLanes, b = s.pingedLanes, D = d & 268435455;
      if (D !== 0) {
        var K = D & ~_;
        K !== 0 ? v = Os(K) : (b &= D, b !== 0 && (v = Os(b)));
      } else D = d & ~_, D !== 0 ? v = Os(D) : b !== 0 && (v = Os(b));
      if (v === 0) return 0;
      if (o !== 0 && o !== v && (o & _) === 0 && (_ = v & -v, b = o & -o, _ >= b || _ === 16 && (b & 4194240) !== 0)) return o;
      if ((v & 4) !== 0 && (v |= d & 16), o = s.entangledLanes, o !== 0) for (s = s.entanglements, o &= v; 0 < o; ) d = 31 - jn(o), _ = 1 << d, v |= s[d], o &= ~_;
      return v;
    }
    function Ql(s, o) {
      switch (s) {
        case 1:
        case 2:
        case 4:
          return o + 250;
        case 8:
        case 16:
        case 32:
        case 64:
        case 128:
        case 256:
        case 512:
        case 1024:
        case 2048:
        case 4096:
        case 8192:
        case 16384:
        case 32768:
        case 65536:
        case 131072:
        case 262144:
        case 524288:
        case 1048576:
        case 2097152:
          return o + 5e3;
        case 4194304:
        case 8388608:
        case 16777216:
        case 33554432:
        case 67108864:
          return -1;
        case 134217728:
        case 268435456:
        case 536870912:
        case 1073741824:
          return -1;
        default:
          return -1;
      }
    }
    function ps(s, o) {
      for (var d = s.suspendedLanes, v = s.pingedLanes, _ = s.expirationTimes, b = s.pendingLanes; 0 < b; ) {
        var D = 31 - jn(b), K = 1 << D, J = _[D];
        J === -1 ? ((K & d) === 0 || (K & v) !== 0) && (_[D] = Ql(K, o)) : J <= o && (s.expiredLanes |= K), b &= ~K;
      }
    }
    function sr(s) {
      return s = s.pendingLanes & -1073741825, s !== 0 ? s : s & 1073741824 ? 1073741824 : 0;
    }
    function gi() {
      var s = Ki;
      return Ki <<= 1, (Ki & 4194240) === 0 && (Ki = 64), s;
    }
    function Ls(s) {
      for (var o = [], d = 0; 31 > d; d++) o.push(s);
      return o;
    }
    function Ms(s, o, d) {
      s.pendingLanes |= o, o !== 536870912 && (s.suspendedLanes = 0, s.pingedLanes = 0), s = s.eventTimes, o = 31 - jn(o), s[o] = d;
    }
    function Lt(s, o) {
      var d = s.pendingLanes & ~o;
      s.pendingLanes = o, s.suspendedLanes = 0, s.pingedLanes = 0, s.expiredLanes &= o, s.mutableReadLanes &= o, s.entangledLanes &= o, o = s.entanglements;
      var v = s.eventTimes;
      for (s = s.expirationTimes; 0 < d; ) {
        var _ = 31 - jn(d), b = 1 << _;
        o[_] = 0, v[_] = -1, s[_] = -1, d &= ~b;
      }
    }
    function $s(s, o) {
      var d = s.entangledLanes |= o;
      for (s = s.entanglements; d; ) {
        var v = 31 - jn(d), _ = 1 << v;
        _ & o | s[v] & o && (s[v] |= o), d &= ~_;
      }
    }
    var yt = 0;
    function Vs(s) {
      return s &= -s, 1 < s ? 4 < s ? (s & 268435455) !== 0 ? 16 : 536870912 : 4 : 1;
    }
    var qa, Qi, Ka, Ga, Qa, Mo = false, ts = [], hn = null, Nr = null, Pr = null, Fs = /* @__PURE__ */ new Map(), yr = /* @__PURE__ */ new Map(), ns = [], Yl = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
    function Ya(s, o) {
      switch (s) {
        case "focusin":
        case "focusout":
          hn = null;
          break;
        case "dragenter":
        case "dragleave":
          Nr = null;
          break;
        case "mouseover":
        case "mouseout":
          Pr = null;
          break;
        case "pointerover":
        case "pointerout":
          Fs.delete(o.pointerId);
          break;
        case "gotpointercapture":
        case "lostpointercapture":
          yr.delete(o.pointerId);
      }
    }
    function Hn(s, o, d, v, _, b) {
      return s === null || s.nativeEvent !== b ? (s = {
        blockedOn: o,
        domEventName: d,
        eventSystemFlags: v,
        nativeEvent: b,
        targetContainers: [
          _
        ]
      }, o !== null && (o = ul(o), o !== null && Qi(o)), s) : (s.eventSystemFlags |= v, o = s.targetContainers, _ !== null && o.indexOf(_) === -1 && o.push(_), s);
    }
    function Xl(s, o, d, v, _) {
      switch (o) {
        case "focusin":
          return hn = Hn(hn, s, o, d, v, _), true;
        case "dragenter":
          return Nr = Hn(Nr, s, o, d, v, _), true;
        case "mouseover":
          return Pr = Hn(Pr, s, o, d, v, _), true;
        case "pointerover":
          var b = _.pointerId;
          return Fs.set(b, Hn(Fs.get(b) || null, s, o, d, v, _)), true;
        case "gotpointercapture":
          return b = _.pointerId, yr.set(b, Hn(yr.get(b) || null, s, o, d, v, _)), true;
      }
      return false;
    }
    function Xa(s) {
      var o = no(s.target);
      if (o !== null) {
        var d = Ar(o);
        if (d !== null) {
          if (o = d.tag, o === 13) {
            if (o = di(d), o !== null) {
              s.blockedOn = o, Qa(s.priority, function() {
                Ka(d);
              });
              return;
            }
          } else if (o === 3 && d.stateNode.current.memoizedState.isDehydrated) {
            s.blockedOn = d.tag === 3 ? d.stateNode.containerInfo : null;
            return;
          }
        }
      }
      s.blockedOn = null;
    }
    function gs(s) {
      if (s.blockedOn !== null) return false;
      for (var o = s.targetContainers; 0 < o.length; ) {
        var d = Us(s.domEventName, s.eventSystemFlags, o[0], s.nativeEvent);
        if (d === null) {
          d = s.nativeEvent;
          var v = new d.constructor(d.type, d);
          Ir = v, d.target.dispatchEvent(v), Ir = null;
        } else return o = ul(d), o !== null && Qi(o), s.blockedOn = d, false;
        o.shift();
      }
      return true;
    }
    function mi(s, o, d) {
      gs(s) && d.delete(o);
    }
    function Ja() {
      Mo = false, hn !== null && gs(hn) && (hn = null), Nr !== null && gs(Nr) && (Nr = null), Pr !== null && gs(Pr) && (Pr = null), Fs.forEach(mi), yr.forEach(mi);
    }
    function Dr(s, o) {
      s.blockedOn === o && (s.blockedOn = null, Mo || (Mo = true, e.unstable_scheduleCallback(e.unstable_NormalPriority, Ja)));
    }
    function jr(s) {
      function o(_) {
        return Dr(_, s);
      }
      if (0 < ts.length) {
        Dr(ts[0], s);
        for (var d = 1; d < ts.length; d++) {
          var v = ts[d];
          v.blockedOn === s && (v.blockedOn = null);
        }
      }
      for (hn !== null && Dr(hn, s), Nr !== null && Dr(Nr, s), Pr !== null && Dr(Pr, s), Fs.forEach(o), yr.forEach(o), d = 0; d < ns.length; d++) v = ns[d], v.blockedOn === s && (v.blockedOn = null);
      for (; 0 < ns.length && (d = ns[0], d.blockedOn === null); ) Xa(d), d.blockedOn === null && ns.shift();
    }
    var ms = Y.ReactCurrentBatchConfig, zs = true;
    function Wt(s, o, d, v) {
      var _ = yt, b = ms.transition;
      ms.transition = null;
      try {
        yt = 1, vi(s, o, d, v);
      } finally {
        yt = _, ms.transition = b;
      }
    }
    function Jl(s, o, d, v) {
      var _ = yt, b = ms.transition;
      ms.transition = null;
      try {
        yt = 4, vi(s, o, d, v);
      } finally {
        yt = _, ms.transition = b;
      }
    }
    function vi(s, o, d, v) {
      if (zs) {
        var _ = Us(s, o, d, v);
        if (_ === null) Wu(s, o, v, yi, d), Ya(s, v);
        else if (Xl(_, s, o, d, v)) v.stopPropagation();
        else if (Ya(s, v), o & 4 && -1 < Yl.indexOf(s)) {
          for (; _ !== null; ) {
            var b = ul(_);
            if (b !== null && qa(b), b = Us(s, o, d, v), b === null && Wu(s, o, v, yi, d), b === _) break;
            _ = b;
          }
          _ !== null && v.stopPropagation();
        } else Wu(s, o, v, null, d);
      }
    }
    var yi = null;
    function Us(s, o, d, v) {
      if (yi = null, s = kr(v), s = no(s), s !== null) if (o = Ar(s), o === null) s = null;
      else if (d = o.tag, d === 13) {
        if (s = di(o), s !== null) return s;
        s = null;
      } else if (d === 3) {
        if (o.stateNode.current.memoizedState.isDehydrated) return o.tag === 3 ? o.stateNode.containerInfo : null;
        s = null;
      } else o !== s && (s = null);
      return yi = s, null;
    }
    function vs(s) {
      switch (s) {
        case "cancel":
        case "click":
        case "close":
        case "contextmenu":
        case "copy":
        case "cut":
        case "auxclick":
        case "dblclick":
        case "dragend":
        case "dragstart":
        case "drop":
        case "focusin":
        case "focusout":
        case "input":
        case "invalid":
        case "keydown":
        case "keypress":
        case "keyup":
        case "mousedown":
        case "mouseup":
        case "paste":
        case "pause":
        case "play":
        case "pointercancel":
        case "pointerdown":
        case "pointerup":
        case "ratechange":
        case "reset":
        case "resize":
        case "seeked":
        case "submit":
        case "touchcancel":
        case "touchend":
        case "touchstart":
        case "volumechange":
        case "change":
        case "selectionchange":
        case "textInput":
        case "compositionstart":
        case "compositionend":
        case "compositionupdate":
        case "beforeblur":
        case "afterblur":
        case "beforeinput":
        case "blur":
        case "fullscreenchange":
        case "focus":
        case "hashchange":
        case "popstate":
        case "select":
        case "selectstart":
          return 1;
        case "drag":
        case "dragenter":
        case "dragexit":
        case "dragleave":
        case "dragover":
        case "mousemove":
        case "mouseout":
        case "mouseover":
        case "pointermove":
        case "pointerout":
        case "pointerover":
        case "scroll":
        case "toggle":
        case "touchmove":
        case "wheel":
        case "mouseenter":
        case "mouseleave":
        case "pointerenter":
        case "pointerleave":
          return 4;
        case "message":
          switch (za()) {
            case fi:
              return 1;
            case js:
              return 4;
            case vr:
            case Oo:
              return 16;
            case Ua:
              return 536870912;
            default:
              return 16;
          }
        default:
          return 16;
      }
    }
    var qn = null, Yi = null, Kn = null;
    function Xi() {
      if (Kn) return Kn;
      var s, o = Yi, d = o.length, v, _ = "value" in qn ? qn.value : qn.textContent, b = _.length;
      for (s = 0; s < d && o[s] === _[s]; s++) ;
      var D = d - s;
      for (v = 1; v <= D && o[d - v] === _[b - v]; v++) ;
      return Kn = _.slice(s, 1 < v ? 1 - v : void 0);
    }
    function Ji(s) {
      var o = s.keyCode;
      return "charCode" in s ? (s = s.charCode, s === 0 && o === 13 && (s = 13)) : s = o, s === 10 && (s = 13), 32 <= s || s === 13 ? s : 0;
    }
    function rs() {
      return true;
    }
    function $o() {
      return false;
    }
    function pn(s) {
      function o(d, v, _, b, D) {
        this._reactName = d, this._targetInst = _, this.type = v, this.nativeEvent = b, this.target = D, this.currentTarget = null;
        for (var K in s) s.hasOwnProperty(K) && (d = s[K], this[K] = d ? d(b) : b[K]);
        return this.isDefaultPrevented = (b.defaultPrevented != null ? b.defaultPrevented : b.returnValue === false) ? rs : $o, this.isPropagationStopped = $o, this;
      }
      return pe(o.prototype, {
        preventDefault: function() {
          this.defaultPrevented = true;
          var d = this.nativeEvent;
          d && (d.preventDefault ? d.preventDefault() : typeof d.returnValue != "unknown" && (d.returnValue = false), this.isDefaultPrevented = rs);
        },
        stopPropagation: function() {
          var d = this.nativeEvent;
          d && (d.stopPropagation ? d.stopPropagation() : typeof d.cancelBubble != "unknown" && (d.cancelBubble = true), this.isPropagationStopped = rs);
        },
        persist: function() {
        },
        isPersistent: rs
      }), o;
    }
    var Or = {
      eventPhase: 0,
      bubbles: 0,
      cancelable: 0,
      timeStamp: function(s) {
        return s.timeStamp || Date.now();
      },
      defaultPrevented: 0,
      isTrusted: 0
    }, Zi = pn(Or), ss = pe({}, Or, {
      view: 0,
      detail: 0
    }), Zl = pn(ss), wi, ys, Bs, _i = pe({}, ss, {
      screenX: 0,
      screenY: 0,
      clientX: 0,
      clientY: 0,
      pageX: 0,
      pageY: 0,
      ctrlKey: 0,
      shiftKey: 0,
      altKey: 0,
      metaKey: 0,
      getModifierState: ws,
      button: 0,
      buttons: 0,
      relatedTarget: function(s) {
        return s.relatedTarget === void 0 ? s.fromElement === s.srcElement ? s.toElement : s.fromElement : s.relatedTarget;
      },
      movementX: function(s) {
        return "movementX" in s ? s.movementX : (s !== Bs && (Bs && s.type === "mousemove" ? (wi = s.screenX - Bs.screenX, ys = s.screenY - Bs.screenY) : ys = wi = 0, Bs = s), wi);
      },
      movementY: function(s) {
        return "movementY" in s ? s.movementY : ys;
      }
    }), Ws = pn(_i), Za = pe({}, _i, {
      dataTransfer: 0
    }), ec = pn(Za), Vo = pe({}, ss, {
      relatedTarget: 0
    }), Fo = pn(Vo), tc = pe({}, Or, {
      animationName: 0,
      elapsedTime: 0,
      pseudoElement: 0
    }), Hs = pn(tc), nc = pe({}, Or, {
      clipboardData: function(s) {
        return "clipboardData" in s ? s.clipboardData : window.clipboardData;
      }
    }), rc = pn(nc), sc = pe({}, Or, {
      data: 0
    }), el = pn(sc), eo = {
      Esc: "Escape",
      Spacebar: " ",
      Left: "ArrowLeft",
      Up: "ArrowUp",
      Right: "ArrowRight",
      Down: "ArrowDown",
      Del: "Delete",
      Win: "OS",
      Menu: "ContextMenu",
      Apps: "ContextMenu",
      Scroll: "ScrollLock",
      MozPrintableKey: "Unidentified"
    }, On = {
      8: "Backspace",
      9: "Tab",
      12: "Clear",
      13: "Enter",
      16: "Shift",
      17: "Control",
      18: "Alt",
      19: "Pause",
      20: "CapsLock",
      27: "Escape",
      32: " ",
      33: "PageUp",
      34: "PageDown",
      35: "End",
      36: "Home",
      37: "ArrowLeft",
      38: "ArrowUp",
      39: "ArrowRight",
      40: "ArrowDown",
      45: "Insert",
      46: "Delete",
      112: "F1",
      113: "F2",
      114: "F3",
      115: "F4",
      116: "F5",
      117: "F6",
      118: "F7",
      119: "F8",
      120: "F9",
      121: "F10",
      122: "F11",
      123: "F12",
      144: "NumLock",
      145: "ScrollLock",
      224: "Meta"
    }, tl = {
      Alt: "altKey",
      Control: "ctrlKey",
      Meta: "metaKey",
      Shift: "shiftKey"
    };
    function nl(s) {
      var o = this.nativeEvent;
      return o.getModifierState ? o.getModifierState(s) : (s = tl[s]) ? !!o[s] : false;
    }
    function ws() {
      return nl;
    }
    var p = pe({}, ss, {
      key: function(s) {
        if (s.key) {
          var o = eo[s.key] || s.key;
          if (o !== "Unidentified") return o;
        }
        return s.type === "keypress" ? (s = Ji(s), s === 13 ? "Enter" : String.fromCharCode(s)) : s.type === "keydown" || s.type === "keyup" ? On[s.keyCode] || "Unidentified" : "";
      },
      code: 0,
      location: 0,
      ctrlKey: 0,
      shiftKey: 0,
      altKey: 0,
      metaKey: 0,
      repeat: 0,
      locale: 0,
      getModifierState: ws,
      charCode: function(s) {
        return s.type === "keypress" ? Ji(s) : 0;
      },
      keyCode: function(s) {
        return s.type === "keydown" || s.type === "keyup" ? s.keyCode : 0;
      },
      which: function(s) {
        return s.type === "keypress" ? Ji(s) : s.type === "keydown" || s.type === "keyup" ? s.keyCode : 0;
      }
    }), E = pn(p), k = pe({}, _i, {
      pointerId: 0,
      width: 0,
      height: 0,
      pressure: 0,
      tangentialPressure: 0,
      tiltX: 0,
      tiltY: 0,
      twist: 0,
      pointerType: 0,
      isPrimary: 0
    }), $ = pn(k), ne = pe({}, ss, {
      touches: 0,
      targetTouches: 0,
      changedTouches: 0,
      altKey: 0,
      metaKey: 0,
      ctrlKey: 0,
      shiftKey: 0,
      getModifierState: ws
    }), ue = pn(ne), Ae = pe({}, Or, {
      propertyName: 0,
      elapsedTime: 0,
      pseudoElement: 0
    }), Rt = pn(Ae), an = pe({}, _i, {
      deltaX: function(s) {
        return "deltaX" in s ? s.deltaX : "wheelDeltaX" in s ? -s.wheelDeltaX : 0;
      },
      deltaY: function(s) {
        return "deltaY" in s ? s.deltaY : "wheelDeltaY" in s ? -s.wheelDeltaY : "wheelDelta" in s ? -s.wheelDelta : 0;
      },
      deltaZ: 0,
      deltaMode: 0
    }), bt = pn(an), gn = [
      9,
      13,
      27,
      32
    ], tn = f && "CompositionEvent" in window, wr = null;
    f && "documentMode" in document && (wr = document.documentMode);
    var ir = f && "TextEvent" in window && !wr, xi = f && (!tn || wr && 8 < wr && 11 >= wr), zo = " ", Kf = false;
    function Gf(s, o) {
      switch (s) {
        case "keyup":
          return gn.indexOf(o.keyCode) !== -1;
        case "keydown":
          return o.keyCode !== 229;
        case "keypress":
        case "mousedown":
        case "focusout":
          return true;
        default:
          return false;
      }
    }
    function Qf(s) {
      return s = s.detail, typeof s == "object" && "data" in s ? s.data : null;
    }
    var Uo = false;
    function jm(s, o) {
      switch (s) {
        case "compositionend":
          return Qf(o);
        case "keypress":
          return o.which !== 32 ? null : (Kf = true, zo);
        case "textInput":
          return s = o.data, s === zo && Kf ? null : s;
        default:
          return null;
      }
    }
    function Om(s, o) {
      if (Uo) return s === "compositionend" || !tn && Gf(s, o) ? (s = Xi(), Kn = Yi = qn = null, Uo = false, s) : null;
      switch (s) {
        case "paste":
          return null;
        case "keypress":
          if (!(o.ctrlKey || o.altKey || o.metaKey) || o.ctrlKey && o.altKey) {
            if (o.char && 1 < o.char.length) return o.char;
            if (o.which) return String.fromCharCode(o.which);
          }
          return null;
        case "compositionend":
          return xi && o.locale !== "ko" ? null : o.data;
        default:
          return null;
      }
    }
    var Lm = {
      color: true,
      date: true,
      datetime: true,
      "datetime-local": true,
      email: true,
      month: true,
      number: true,
      password: true,
      range: true,
      search: true,
      tel: true,
      text: true,
      time: true,
      url: true,
      week: true
    };
    function Yf(s) {
      var o = s && s.nodeName && s.nodeName.toLowerCase();
      return o === "input" ? !!Lm[s.type] : o === "textarea";
    }
    function Xf(s, o, d, v) {
      je(v), o = cc(o, "onChange"), 0 < o.length && (d = new Zi("onChange", "change", null, d, v), s.push({
        event: d,
        listeners: o
      }));
    }
    var rl = null, Bo = null;
    function Mm(s) {
      ph(s, 0);
    }
    function ic(s) {
      var o = Go(s);
      if (et(o)) return s;
    }
    function $m(s, o) {
      if (s === "change") return o;
    }
    var Jf = false;
    if (f) {
      var ju;
      if (f) {
        var Ou = "oninput" in document;
        if (!Ou) {
          var Zf = document.createElement("div");
          Zf.setAttribute("oninput", "return;"), Ou = typeof Zf.oninput == "function";
        }
        ju = Ou;
      } else ju = false;
      Jf = ju && (!document.documentMode || 9 < document.documentMode);
    }
    function to() {
      rl && (rl.detachEvent("onpropertychange", Lu), Bo = rl = null);
    }
    function Lu(s) {
      if (s.propertyName === "value" && ic(Bo)) {
        var o = [];
        Xf(o, Bo, s, kr(s)), Pn(Mm, o);
      }
    }
    function eh(s, o, d) {
      s === "focusin" ? (to(), rl = o, Bo = d, rl.attachEvent("onpropertychange", Lu)) : s === "focusout" && to();
    }
    function Vm(s) {
      if (s === "selectionchange" || s === "keyup" || s === "keydown") return ic(Bo);
    }
    function Ei(s, o) {
      if (s === "click") return ic(o);
    }
    function _r(s, o) {
      if (s === "input" || s === "change") return ic(o);
    }
    function Fm(s, o) {
      return s === o && (s !== 0 || 1 / s === 1 / o) || s !== s && o !== o;
    }
    var Lr = typeof Object.is == "function" ? Object.is : Fm;
    function sl(s, o) {
      if (Lr(s, o)) return true;
      if (typeof s != "object" || s === null || typeof o != "object" || o === null) return false;
      var d = Object.keys(s), v = Object.keys(o);
      if (d.length !== v.length) return false;
      for (v = 0; v < d.length; v++) {
        var _ = d[v];
        if (!m.call(o, _) || !Lr(s[_], o[_])) return false;
      }
      return true;
    }
    function th(s) {
      for (; s && s.firstChild; ) s = s.firstChild;
      return s;
    }
    function nh(s, o) {
      var d = th(s);
      s = 0;
      for (var v; d; ) {
        if (d.nodeType === 3) {
          if (v = s + d.textContent.length, s <= o && v >= o) return {
            node: d,
            offset: o - s
          };
          s = v;
        }
        e: {
          for (; d; ) {
            if (d.nextSibling) {
              d = d.nextSibling;
              break e;
            }
            d = d.parentNode;
          }
          d = void 0;
        }
        d = th(d);
      }
    }
    function rh(s, o) {
      return s && o ? s === o ? true : s && s.nodeType === 3 ? false : o && o.nodeType === 3 ? rh(s, o.parentNode) : "contains" in s ? s.contains(o) : s.compareDocumentPosition ? !!(s.compareDocumentPosition(o) & 16) : false : false;
    }
    function sh() {
      for (var s = window, o = le(); o instanceof s.HTMLIFrameElement; ) {
        try {
          var d = typeof o.contentWindow.location.href == "string";
        } catch {
          d = false;
        }
        if (d) s = o.contentWindow;
        else break;
        o = le(s.document);
      }
      return o;
    }
    function Mu(s) {
      var o = s && s.nodeName && s.nodeName.toLowerCase();
      return o && (o === "input" && (s.type === "text" || s.type === "search" || s.type === "tel" || s.type === "url" || s.type === "password") || o === "textarea" || s.contentEditable === "true");
    }
    function zm(s) {
      var o = sh(), d = s.focusedElem, v = s.selectionRange;
      if (o !== d && d && d.ownerDocument && rh(d.ownerDocument.documentElement, d)) {
        if (v !== null && Mu(d)) {
          if (o = v.start, s = v.end, s === void 0 && (s = o), "selectionStart" in d) d.selectionStart = o, d.selectionEnd = Math.min(s, d.value.length);
          else if (s = (o = d.ownerDocument || document) && o.defaultView || window, s.getSelection) {
            s = s.getSelection();
            var _ = d.textContent.length, b = Math.min(v.start, _);
            v = v.end === void 0 ? b : Math.min(v.end, _), !s.extend && b > v && (_ = v, v = b, b = _), _ = nh(d, b);
            var D = nh(d, v);
            _ && D && (s.rangeCount !== 1 || s.anchorNode !== _.node || s.anchorOffset !== _.offset || s.focusNode !== D.node || s.focusOffset !== D.offset) && (o = o.createRange(), o.setStart(_.node, _.offset), s.removeAllRanges(), b > v ? (s.addRange(o), s.extend(D.node, D.offset)) : (o.setEnd(D.node, D.offset), s.addRange(o)));
          }
        }
        for (o = [], s = d; s = s.parentNode; ) s.nodeType === 1 && o.push({
          element: s,
          left: s.scrollLeft,
          top: s.scrollTop
        });
        for (typeof d.focus == "function" && d.focus(), d = 0; d < o.length; d++) s = o[d], s.element.scrollLeft = s.left, s.element.scrollTop = s.top;
      }
    }
    var Um = f && "documentMode" in document && 11 >= document.documentMode, Wo = null, $u = null, il = null, Vu = false;
    function ih(s, o, d) {
      var v = d.window === d ? d.document : d.nodeType === 9 ? d : d.ownerDocument;
      Vu || Wo == null || Wo !== le(v) || (v = Wo, "selectionStart" in v && Mu(v) ? v = {
        start: v.selectionStart,
        end: v.selectionEnd
      } : (v = (v.ownerDocument && v.ownerDocument.defaultView || window).getSelection(), v = {
        anchorNode: v.anchorNode,
        anchorOffset: v.anchorOffset,
        focusNode: v.focusNode,
        focusOffset: v.focusOffset
      }), il && sl(il, v) || (il = v, v = cc($u, "onSelect"), 0 < v.length && (o = new Zi("onSelect", "select", null, o, d), s.push({
        event: o,
        listeners: v
      }), o.target = Wo)));
    }
    function oc(s, o) {
      var d = {};
      return d[s.toLowerCase()] = o.toLowerCase(), d["Webkit" + s] = "webkit" + o, d["Moz" + s] = "moz" + o, d;
    }
    var Ho = {
      animationend: oc("Animation", "AnimationEnd"),
      animationiteration: oc("Animation", "AnimationIteration"),
      animationstart: oc("Animation", "AnimationStart"),
      transitionend: oc("Transition", "TransitionEnd")
    }, Fu = {}, oh = {};
    f && (oh = document.createElement("div").style, "AnimationEvent" in window || (delete Ho.animationend.animation, delete Ho.animationiteration.animation, delete Ho.animationstart.animation), "TransitionEvent" in window || delete Ho.transitionend.transition);
    function ac(s) {
      if (Fu[s]) return Fu[s];
      if (!Ho[s]) return s;
      var o = Ho[s], d;
      for (d in o) if (o.hasOwnProperty(d) && d in oh) return Fu[s] = o[d];
      return s;
    }
    var ah = ac("animationend"), lh = ac("animationiteration"), ch = ac("animationstart"), uh = ac("transitionend"), dh = /* @__PURE__ */ new Map(), fh = "abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");
    function bi(s, o) {
      dh.set(s, o), l(o, [
        s
      ]);
    }
    for (var zu = 0; zu < fh.length; zu++) {
      var Uu = fh[zu], Bm = Uu.toLowerCase(), Wm = Uu[0].toUpperCase() + Uu.slice(1);
      bi(Bm, "on" + Wm);
    }
    bi(ah, "onAnimationEnd"), bi(lh, "onAnimationIteration"), bi(ch, "onAnimationStart"), bi("dblclick", "onDoubleClick"), bi("focusin", "onFocus"), bi("focusout", "onBlur"), bi(uh, "onTransitionEnd"), c("onMouseEnter", [
      "mouseout",
      "mouseover"
    ]), c("onMouseLeave", [
      "mouseout",
      "mouseover"
    ]), c("onPointerEnter", [
      "pointerout",
      "pointerover"
    ]), c("onPointerLeave", [
      "pointerout",
      "pointerover"
    ]), l("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" ")), l("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")), l("onBeforeInput", [
      "compositionend",
      "keypress",
      "textInput",
      "paste"
    ]), l("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" ")), l("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" ")), l("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" "));
    var ol = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), Hm = new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));
    function hh(s, o, d) {
      var v = s.type || "unknown-event";
      s.currentTarget = d, $a(v, o, void 0, s), s.currentTarget = null;
    }
    function ph(s, o) {
      o = (o & 4) !== 0;
      for (var d = 0; d < s.length; d++) {
        var v = s[d], _ = v.event;
        v = v.listeners;
        e: {
          var b = void 0;
          if (o) for (var D = v.length - 1; 0 <= D; D--) {
            var K = v[D], J = K.instance, ae = K.currentTarget;
            if (K = K.listener, J !== b && _.isPropagationStopped()) break e;
            hh(_, K, ae), b = J;
          }
          else for (D = 0; D < v.length; D++) {
            if (K = v[D], J = K.instance, ae = K.currentTarget, K = K.listener, J !== b && _.isPropagationStopped()) break e;
            hh(_, K, ae), b = J;
          }
        }
      }
      if (xt) throw s = bn, xt = false, bn = null, s;
    }
    function Ht(s, o) {
      var d = o[Yu];
      d === void 0 && (d = o[Yu] = /* @__PURE__ */ new Set());
      var v = s + "__bubble";
      d.has(v) || (gh(o, s, 2, false), d.add(v));
    }
    function Bu(s, o, d) {
      var v = 0;
      o && (v |= 4), gh(d, s, v, o);
    }
    var lc = "_reactListening" + Math.random().toString(36).slice(2);
    function al(s) {
      if (!s[lc]) {
        s[lc] = true, r.forEach(function(d) {
          d !== "selectionchange" && (Hm.has(d) || Bu(d, false, s), Bu(d, true, s));
        });
        var o = s.nodeType === 9 ? s : s.ownerDocument;
        o === null || o[lc] || (o[lc] = true, Bu("selectionchange", false, o));
      }
    }
    function gh(s, o, d, v) {
      switch (vs(o)) {
        case 1:
          var _ = Wt;
          break;
        case 4:
          _ = Jl;
          break;
        default:
          _ = vi;
      }
      d = _.bind(null, o, d, s), _ = void 0, !Wn || o !== "touchstart" && o !== "touchmove" && o !== "wheel" || (_ = true), v ? _ !== void 0 ? s.addEventListener(o, d, {
        capture: true,
        passive: _
      }) : s.addEventListener(o, d, true) : _ !== void 0 ? s.addEventListener(o, d, {
        passive: _
      }) : s.addEventListener(o, d, false);
    }
    function Wu(s, o, d, v, _) {
      var b = v;
      if ((o & 1) === 0 && (o & 2) === 0 && v !== null) e: for (; ; ) {
        if (v === null) return;
        var D = v.tag;
        if (D === 3 || D === 4) {
          var K = v.stateNode.containerInfo;
          if (K === _ || K.nodeType === 8 && K.parentNode === _) break;
          if (D === 4) for (D = v.return; D !== null; ) {
            var J = D.tag;
            if ((J === 3 || J === 4) && (J = D.stateNode.containerInfo, J === _ || J.nodeType === 8 && J.parentNode === _)) return;
            D = D.return;
          }
          for (; K !== null; ) {
            if (D = no(K), D === null) return;
            if (J = D.tag, J === 5 || J === 6) {
              v = b = D;
              continue e;
            }
            K = K.parentNode;
          }
        }
        v = v.return;
      }
      Pn(function() {
        var ae = b, be = kr(d), Te = [];
        e: {
          var Ee = dh.get(s);
          if (Ee !== void 0) {
            var Me = Zi, We = s;
            switch (s) {
              case "keypress":
                if (Ji(d) === 0) break e;
              case "keydown":
              case "keyup":
                Me = E;
                break;
              case "focusin":
                We = "focus", Me = Fo;
                break;
              case "focusout":
                We = "blur", Me = Fo;
                break;
              case "beforeblur":
              case "afterblur":
                Me = Fo;
                break;
              case "click":
                if (d.button === 2) break e;
              case "auxclick":
              case "dblclick":
              case "mousedown":
              case "mousemove":
              case "mouseup":
              case "mouseout":
              case "mouseover":
              case "contextmenu":
                Me = Ws;
                break;
              case "drag":
              case "dragend":
              case "dragenter":
              case "dragexit":
              case "dragleave":
              case "dragover":
              case "dragstart":
              case "drop":
                Me = ec;
                break;
              case "touchcancel":
              case "touchend":
              case "touchmove":
              case "touchstart":
                Me = ue;
                break;
              case ah:
              case lh:
              case ch:
                Me = Hs;
                break;
              case uh:
                Me = Rt;
                break;
              case "scroll":
                Me = Zl;
                break;
              case "wheel":
                Me = bt;
                break;
              case "copy":
              case "cut":
              case "paste":
                Me = rc;
                break;
              case "gotpointercapture":
              case "lostpointercapture":
              case "pointercancel":
              case "pointerdown":
              case "pointermove":
              case "pointerout":
              case "pointerover":
              case "pointerup":
                Me = $;
            }
            var qe = (o & 4) !== 0, rn = !qe && s === "scroll", re = qe ? Ee !== null ? Ee + "Capture" : null : Ee;
            qe = [];
            for (var te = ae, se; te !== null; ) {
              se = te;
              var Ie = se.stateNode;
              if (se.tag === 5 && Ie !== null && (se = Ie, re !== null && (Ie = Ft(te, re), Ie != null && qe.push(ll(te, Ie, se)))), rn) break;
              te = te.return;
            }
            0 < qe.length && (Ee = new Me(Ee, We, null, d, be), Te.push({
              event: Ee,
              listeners: qe
            }));
          }
        }
        if ((o & 7) === 0) {
          e: {
            if (Ee = s === "mouseover" || s === "pointerover", Me = s === "mouseout" || s === "pointerout", Ee && d !== Ir && (We = d.relatedTarget || d.fromElement) && (no(We) || We[qs])) break e;
            if ((Me || Ee) && (Ee = be.window === be ? be : (Ee = be.ownerDocument) ? Ee.defaultView || Ee.parentWindow : window, Me ? (We = d.relatedTarget || d.toElement, Me = ae, We = We ? no(We) : null, We !== null && (rn = Ar(We), We !== rn || We.tag !== 5 && We.tag !== 6) && (We = null)) : (Me = null, We = ae), Me !== We)) {
              if (qe = Ws, Ie = "onMouseLeave", re = "onMouseEnter", te = "mouse", (s === "pointerout" || s === "pointerover") && (qe = $, Ie = "onPointerLeave", re = "onPointerEnter", te = "pointer"), rn = Me == null ? Ee : Go(Me), se = We == null ? Ee : Go(We), Ee = new qe(Ie, te + "leave", Me, d, be), Ee.target = rn, Ee.relatedTarget = se, Ie = null, no(be) === ae && (qe = new qe(re, te + "enter", We, d, be), qe.target = se, qe.relatedTarget = rn, Ie = qe), rn = Ie, Me && We) t: {
                for (qe = Me, re = We, te = 0, se = qe; se; se = qo(se)) te++;
                for (se = 0, Ie = re; Ie; Ie = qo(Ie)) se++;
                for (; 0 < te - se; ) qe = qo(qe), te--;
                for (; 0 < se - te; ) re = qo(re), se--;
                for (; te--; ) {
                  if (qe === re || re !== null && qe === re.alternate) break t;
                  qe = qo(qe), re = qo(re);
                }
                qe = null;
              }
              else qe = null;
              Me !== null && mh(Te, Ee, Me, qe, false), We !== null && rn !== null && mh(Te, rn, We, qe, true);
            }
          }
          e: {
            if (Ee = ae ? Go(ae) : window, Me = Ee.nodeName && Ee.nodeName.toLowerCase(), Me === "select" || Me === "input" && Ee.type === "file") var Qe = $m;
            else if (Yf(Ee)) if (Jf) Qe = _r;
            else {
              Qe = Vm;
              var g = eh;
            }
            else (Me = Ee.nodeName) && Me.toLowerCase() === "input" && (Ee.type === "checkbox" || Ee.type === "radio") && (Qe = Ei);
            if (Qe && (Qe = Qe(s, ae))) {
              Xf(Te, Qe, d, be);
              break e;
            }
            g && g(s, Ee, ae), s === "focusout" && (g = Ee._wrapperState) && g.controlled && Ee.type === "number" && Fe(Ee, "number", Ee.value);
          }
          switch (g = ae ? Go(ae) : window, s) {
            case "focusin":
              (Yf(g) || g.contentEditable === "true") && (Wo = g, $u = ae, il = null);
              break;
            case "focusout":
              il = $u = Wo = null;
              break;
            case "mousedown":
              Vu = true;
              break;
            case "contextmenu":
            case "mouseup":
            case "dragend":
              Vu = false, ih(Te, d, be);
              break;
            case "selectionchange":
              if (Um) break;
            case "keydown":
            case "keyup":
              ih(Te, d, be);
          }
          var Q;
          if (tn) e: {
            switch (s) {
              case "compositionstart":
                var Je = "onCompositionStart";
                break e;
              case "compositionend":
                Je = "onCompositionEnd";
                break e;
              case "compositionupdate":
                Je = "onCompositionUpdate";
                break e;
            }
            Je = void 0;
          }
          else Uo ? Gf(s, d) && (Je = "onCompositionEnd") : s === "keydown" && d.keyCode === 229 && (Je = "onCompositionStart");
          Je && (xi && d.locale !== "ko" && (Uo || Je !== "onCompositionStart" ? Je === "onCompositionEnd" && Uo && (Q = Xi()) : (qn = be, Yi = "value" in qn ? qn.value : qn.textContent, Uo = true)), g = cc(ae, Je), 0 < g.length && (Je = new el(Je, s, null, d, be), Te.push({
            event: Je,
            listeners: g
          }), Q ? Je.data = Q : (Q = Qf(d), Q !== null && (Je.data = Q)))), (Q = ir ? jm(s, d) : Om(s, d)) && (ae = cc(ae, "onBeforeInput"), 0 < ae.length && (be = new el("onBeforeInput", "beforeinput", null, d, be), Te.push({
            event: be,
            listeners: ae
          }), be.data = Q));
        }
        ph(Te, o);
      });
    }
    function ll(s, o, d) {
      return {
        instance: s,
        listener: o,
        currentTarget: d
      };
    }
    function cc(s, o) {
      for (var d = o + "Capture", v = []; s !== null; ) {
        var _ = s, b = _.stateNode;
        _.tag === 5 && b !== null && (_ = b, b = Ft(s, d), b != null && v.unshift(ll(s, b, _)), b = Ft(s, o), b != null && v.push(ll(s, b, _))), s = s.return;
      }
      return v;
    }
    function qo(s) {
      if (s === null) return null;
      do
        s = s.return;
      while (s && s.tag !== 5);
      return s || null;
    }
    function mh(s, o, d, v, _) {
      for (var b = o._reactName, D = []; d !== null && d !== v; ) {
        var K = d, J = K.alternate, ae = K.stateNode;
        if (J !== null && J === v) break;
        K.tag === 5 && ae !== null && (K = ae, _ ? (J = Ft(d, b), J != null && D.unshift(ll(d, J, K))) : _ || (J = Ft(d, b), J != null && D.push(ll(d, J, K)))), d = d.return;
      }
      D.length !== 0 && s.push({
        event: o,
        listeners: D
      });
    }
    var qm = /\r\n?/g, Km = /\u0000|\uFFFD/g;
    function vh(s) {
      return (typeof s == "string" ? s : "" + s).replace(qm, `
`).replace(Km, "");
    }
    function uc(s, o, d) {
      if (o = vh(o), vh(s) !== o && d) throw Error(t(425));
    }
    function dc() {
    }
    var Hu = null, qu = null;
    function Ku(s, o) {
      return s === "textarea" || s === "noscript" || typeof o.children == "string" || typeof o.children == "number" || typeof o.dangerouslySetInnerHTML == "object" && o.dangerouslySetInnerHTML !== null && o.dangerouslySetInnerHTML.__html != null;
    }
    var Gu = typeof setTimeout == "function" ? setTimeout : void 0, Gm = typeof clearTimeout == "function" ? clearTimeout : void 0, yh = typeof Promise == "function" ? Promise : void 0, Qm = typeof queueMicrotask == "function" ? queueMicrotask : typeof yh < "u" ? function(s) {
      return yh.resolve(null).then(s).catch(Ym);
    } : Gu;
    function Ym(s) {
      setTimeout(function() {
        throw s;
      });
    }
    function Qu(s, o) {
      var d = o, v = 0;
      do {
        var _ = d.nextSibling;
        if (s.removeChild(d), _ && _.nodeType === 8) if (d = _.data, d === "/$") {
          if (v === 0) {
            s.removeChild(_), jr(o);
            return;
          }
          v--;
        } else d !== "$" && d !== "$?" && d !== "$!" || v++;
        d = _;
      } while (d);
      jr(o);
    }
    function Ti(s) {
      for (; s != null; s = s.nextSibling) {
        var o = s.nodeType;
        if (o === 1 || o === 3) break;
        if (o === 8) {
          if (o = s.data, o === "$" || o === "$!" || o === "$?") break;
          if (o === "/$") return null;
        }
      }
      return s;
    }
    function wh(s) {
      s = s.previousSibling;
      for (var o = 0; s; ) {
        if (s.nodeType === 8) {
          var d = s.data;
          if (d === "$" || d === "$!" || d === "$?") {
            if (o === 0) return s;
            o--;
          } else d === "/$" && o++;
        }
        s = s.previousSibling;
      }
      return null;
    }
    var Ko = Math.random().toString(36).slice(2), _s = "__reactFiber$" + Ko, cl = "__reactProps$" + Ko, qs = "__reactContainer$" + Ko, Yu = "__reactEvents$" + Ko, Xm = "__reactListeners$" + Ko, Jm = "__reactHandles$" + Ko;
    function no(s) {
      var o = s[_s];
      if (o) return o;
      for (var d = s.parentNode; d; ) {
        if (o = d[qs] || d[_s]) {
          if (d = o.alternate, o.child !== null || d !== null && d.child !== null) for (s = wh(s); s !== null; ) {
            if (d = s[_s]) return d;
            s = wh(s);
          }
          return o;
        }
        s = d, d = s.parentNode;
      }
      return null;
    }
    function ul(s) {
      return s = s[_s] || s[qs], !s || s.tag !== 5 && s.tag !== 6 && s.tag !== 13 && s.tag !== 3 ? null : s;
    }
    function Go(s) {
      if (s.tag === 5 || s.tag === 6) return s.stateNode;
      throw Error(t(33));
    }
    function fc(s) {
      return s[cl] || null;
    }
    var Xu = [], Qo = -1;
    function Ci(s) {
      return {
        current: s
      };
    }
    function qt(s) {
      0 > Qo || (s.current = Xu[Qo], Xu[Qo] = null, Qo--);
    }
    function Bt(s, o) {
      Qo++, Xu[Qo] = s.current, s.current = o;
    }
    var Si = {}, Ln = Ci(Si), or = Ci(false), ro = Si;
    function Yo(s, o) {
      var d = s.type.contextTypes;
      if (!d) return Si;
      var v = s.stateNode;
      if (v && v.__reactInternalMemoizedUnmaskedChildContext === o) return v.__reactInternalMemoizedMaskedChildContext;
      var _ = {}, b;
      for (b in d) _[b] = o[b];
      return v && (s = s.stateNode, s.__reactInternalMemoizedUnmaskedChildContext = o, s.__reactInternalMemoizedMaskedChildContext = _), _;
    }
    function ar(s) {
      return s = s.childContextTypes, s != null;
    }
    function hc() {
      qt(or), qt(Ln);
    }
    function _h(s, o, d) {
      if (Ln.current !== Si) throw Error(t(168));
      Bt(Ln, o), Bt(or, d);
    }
    function xh(s, o, d) {
      var v = s.stateNode;
      if (o = o.childContextTypes, typeof v.getChildContext != "function") return d;
      v = v.getChildContext();
      for (var _ in v) if (!(_ in o)) throw Error(t(108, ie(s) || "Unknown", _));
      return pe({}, d, v);
    }
    function pc(s) {
      return s = (s = s.stateNode) && s.__reactInternalMemoizedMergedChildContext || Si, ro = Ln.current, Bt(Ln, s), Bt(or, or.current), true;
    }
    function Eh(s, o, d) {
      var v = s.stateNode;
      if (!v) throw Error(t(169));
      d ? (s = xh(s, o, ro), v.__reactInternalMemoizedMergedChildContext = s, qt(or), qt(Ln), Bt(Ln, s)) : qt(or), Bt(or, d);
    }
    var Ks = null, gc = false, Ju = false;
    function bh(s) {
      Ks === null ? Ks = [
        s
      ] : Ks.push(s);
    }
    function Zm(s) {
      gc = true, bh(s);
    }
    function Ii() {
      if (!Ju && Ks !== null) {
        Ju = true;
        var s = 0, o = yt;
        try {
          var d = Ks;
          for (yt = 1; s < d.length; s++) {
            var v = d[s];
            do
              v = v(true);
            while (v !== null);
          }
          Ks = null, gc = false;
        } catch (_) {
          throw Ks !== null && (Ks = Ks.slice(s + 1)), qi(fi, Ii), _;
        } finally {
          yt = o, Ju = false;
        }
      }
      return null;
    }
    var Xo = [], Jo = 0, mc = null, vc = 0, Mr = [], $r = 0, so = null, Gs = 1, Qs = "";
    function io(s, o) {
      Xo[Jo++] = vc, Xo[Jo++] = mc, mc = s, vc = o;
    }
    function Th(s, o, d) {
      Mr[$r++] = Gs, Mr[$r++] = Qs, Mr[$r++] = so, so = s;
      var v = Gs;
      s = Qs;
      var _ = 32 - jn(v) - 1;
      v &= ~(1 << _), d += 1;
      var b = 32 - jn(o) + _;
      if (30 < b) {
        var D = _ - _ % 5;
        b = (v & (1 << D) - 1).toString(32), v >>= D, _ -= D, Gs = 1 << 32 - jn(o) + _ | d << _ | v, Qs = b + s;
      } else Gs = 1 << b | d << _ | v, Qs = s;
    }
    function Zu(s) {
      s.return !== null && (io(s, 1), Th(s, 1, 0));
    }
    function ed(s) {
      for (; s === mc; ) mc = Xo[--Jo], Xo[Jo] = null, vc = Xo[--Jo], Xo[Jo] = null;
      for (; s === so; ) so = Mr[--$r], Mr[$r] = null, Qs = Mr[--$r], Mr[$r] = null, Gs = Mr[--$r], Mr[$r] = null;
    }
    var xr = null, Er = null, Kt = false, is = null;
    function Ch(s, o) {
      var d = Br(5, null, null, 0);
      d.elementType = "DELETED", d.stateNode = o, d.return = s, o = s.deletions, o === null ? (s.deletions = [
        d
      ], s.flags |= 16) : o.push(d);
    }
    function Sh(s, o) {
      switch (s.tag) {
        case 5:
          var d = s.type;
          return o = o.nodeType !== 1 || d.toLowerCase() !== o.nodeName.toLowerCase() ? null : o, o !== null ? (s.stateNode = o, xr = s, Er = Ti(o.firstChild), true) : false;
        case 6:
          return o = s.pendingProps === "" || o.nodeType !== 3 ? null : o, o !== null ? (s.stateNode = o, xr = s, Er = null, true) : false;
        case 13:
          return o = o.nodeType !== 8 ? null : o, o !== null ? (d = so !== null ? {
            id: Gs,
            overflow: Qs
          } : null, s.memoizedState = {
            dehydrated: o,
            treeContext: d,
            retryLane: 1073741824
          }, d = Br(18, null, null, 0), d.stateNode = o, d.return = s, s.child = d, xr = s, Er = null, true) : false;
        default:
          return false;
      }
    }
    function td(s) {
      return (s.mode & 1) !== 0 && (s.flags & 128) === 0;
    }
    function nd(s) {
      if (Kt) {
        var o = Er;
        if (o) {
          var d = o;
          if (!Sh(s, o)) {
            if (td(s)) throw Error(t(418));
            o = Ti(d.nextSibling);
            var v = xr;
            o && Sh(s, o) ? Ch(v, d) : (s.flags = s.flags & -4097 | 2, Kt = false, xr = s);
          }
        } else {
          if (td(s)) throw Error(t(418));
          s.flags = s.flags & -4097 | 2, Kt = false, xr = s;
        }
      }
    }
    function Ih(s) {
      for (s = s.return; s !== null && s.tag !== 5 && s.tag !== 3 && s.tag !== 13; ) s = s.return;
      xr = s;
    }
    function yc(s) {
      if (s !== xr) return false;
      if (!Kt) return Ih(s), Kt = true, false;
      var o;
      if ((o = s.tag !== 3) && !(o = s.tag !== 5) && (o = s.type, o = o !== "head" && o !== "body" && !Ku(s.type, s.memoizedProps)), o && (o = Er)) {
        if (td(s)) throw kh(), Error(t(418));
        for (; o; ) Ch(s, o), o = Ti(o.nextSibling);
      }
      if (Ih(s), s.tag === 13) {
        if (s = s.memoizedState, s = s !== null ? s.dehydrated : null, !s) throw Error(t(317));
        e: {
          for (s = s.nextSibling, o = 0; s; ) {
            if (s.nodeType === 8) {
              var d = s.data;
              if (d === "/$") {
                if (o === 0) {
                  Er = Ti(s.nextSibling);
                  break e;
                }
                o--;
              } else d !== "$" && d !== "$!" && d !== "$?" || o++;
            }
            s = s.nextSibling;
          }
          Er = null;
        }
      } else Er = xr ? Ti(s.stateNode.nextSibling) : null;
      return true;
    }
    function kh() {
      for (var s = Er; s; ) s = Ti(s.nextSibling);
    }
    function Zo() {
      Er = xr = null, Kt = false;
    }
    function rd(s) {
      is === null ? is = [
        s
      ] : is.push(s);
    }
    var e0 = Y.ReactCurrentBatchConfig;
    function dl(s, o, d) {
      if (s = d.ref, s !== null && typeof s != "function" && typeof s != "object") {
        if (d._owner) {
          if (d = d._owner, d) {
            if (d.tag !== 1) throw Error(t(309));
            var v = d.stateNode;
          }
          if (!v) throw Error(t(147, s));
          var _ = v, b = "" + s;
          return o !== null && o.ref !== null && typeof o.ref == "function" && o.ref._stringRef === b ? o.ref : (o = function(D) {
            var K = _.refs;
            D === null ? delete K[b] : K[b] = D;
          }, o._stringRef = b, o);
        }
        if (typeof s != "string") throw Error(t(284));
        if (!d._owner) throw Error(t(290, s));
      }
      return s;
    }
    function wc(s, o) {
      throw s = Object.prototype.toString.call(o), Error(t(31, s === "[object Object]" ? "object with keys {" + Object.keys(o).join(", ") + "}" : s));
    }
    function Ah(s) {
      var o = s._init;
      return o(s._payload);
    }
    function Rh(s) {
      function o(re, te) {
        if (s) {
          var se = re.deletions;
          se === null ? (re.deletions = [
            te
          ], re.flags |= 16) : se.push(te);
        }
      }
      function d(re, te) {
        if (!s) return null;
        for (; te !== null; ) o(re, te), te = te.sibling;
        return null;
      }
      function v(re, te) {
        for (re = /* @__PURE__ */ new Map(); te !== null; ) te.key !== null ? re.set(te.key, te) : re.set(te.index, te), te = te.sibling;
        return re;
      }
      function _(re, te) {
        return re = Oi(re, te), re.index = 0, re.sibling = null, re;
      }
      function b(re, te, se) {
        return re.index = se, s ? (se = re.alternate, se !== null ? (se = se.index, se < te ? (re.flags |= 2, te) : se) : (re.flags |= 2, te)) : (re.flags |= 1048576, te);
      }
      function D(re) {
        return s && re.alternate === null && (re.flags |= 2), re;
      }
      function K(re, te, se, Ie) {
        return te === null || te.tag !== 6 ? (te = Bd(se, re.mode, Ie), te.return = re, te) : (te = _(te, se), te.return = re, te);
      }
      function J(re, te, se, Ie) {
        var Qe = se.type;
        return Qe === j ? be(re, te, se.props.children, Ie, se.key) : te !== null && (te.elementType === Qe || typeof Qe == "object" && Qe !== null && Qe.$$typeof === Ge && Ah(Qe) === te.type) ? (Ie = _(te, se.props), Ie.ref = dl(re, te, se), Ie.return = re, Ie) : (Ie = Gc(se.type, se.key, se.props, null, re.mode, Ie), Ie.ref = dl(re, te, se), Ie.return = re, Ie);
      }
      function ae(re, te, se, Ie) {
        return te === null || te.tag !== 4 || te.stateNode.containerInfo !== se.containerInfo || te.stateNode.implementation !== se.implementation ? (te = Wd(se, re.mode, Ie), te.return = re, te) : (te = _(te, se.children || []), te.return = re, te);
      }
      function be(re, te, se, Ie, Qe) {
        return te === null || te.tag !== 7 ? (te = go(se, re.mode, Ie, Qe), te.return = re, te) : (te = _(te, se), te.return = re, te);
      }
      function Te(re, te, se) {
        if (typeof te == "string" && te !== "" || typeof te == "number") return te = Bd("" + te, re.mode, se), te.return = re, te;
        if (typeof te == "object" && te !== null) {
          switch (te.$$typeof) {
            case u:
              return se = Gc(te.type, te.key, te.props, null, re.mode, se), se.ref = dl(re, null, te), se.return = re, se;
            case ge:
              return te = Wd(te, re.mode, se), te.return = re, te;
            case Ge:
              var Ie = te._init;
              return Te(re, Ie(te._payload), se);
          }
          if (ke(te) || Pe(te)) return te = go(te, re.mode, se, null), te.return = re, te;
          wc(re, te);
        }
        return null;
      }
      function Ee(re, te, se, Ie) {
        var Qe = te !== null ? te.key : null;
        if (typeof se == "string" && se !== "" || typeof se == "number") return Qe !== null ? null : K(re, te, "" + se, Ie);
        if (typeof se == "object" && se !== null) {
          switch (se.$$typeof) {
            case u:
              return se.key === Qe ? J(re, te, se, Ie) : null;
            case ge:
              return se.key === Qe ? ae(re, te, se, Ie) : null;
            case Ge:
              return Qe = se._init, Ee(re, te, Qe(se._payload), Ie);
          }
          if (ke(se) || Pe(se)) return Qe !== null ? null : be(re, te, se, Ie, null);
          wc(re, se);
        }
        return null;
      }
      function Me(re, te, se, Ie, Qe) {
        if (typeof Ie == "string" && Ie !== "" || typeof Ie == "number") return re = re.get(se) || null, K(te, re, "" + Ie, Qe);
        if (typeof Ie == "object" && Ie !== null) {
          switch (Ie.$$typeof) {
            case u:
              return re = re.get(Ie.key === null ? se : Ie.key) || null, J(te, re, Ie, Qe);
            case ge:
              return re = re.get(Ie.key === null ? se : Ie.key) || null, ae(te, re, Ie, Qe);
            case Ge:
              var g = Ie._init;
              return Me(re, te, se, g(Ie._payload), Qe);
          }
          if (ke(Ie) || Pe(Ie)) return re = re.get(se) || null, be(te, re, Ie, Qe, null);
          wc(te, Ie);
        }
        return null;
      }
      function We(re, te, se, Ie) {
        for (var Qe = null, g = null, Q = te, Je = te = 0, Mt = null; Q !== null && Je < se.length; Je++) {
          Q.index > Je ? (Mt = Q, Q = null) : Mt = Q.sibling;
          var Et = Ee(re, Q, se[Je], Ie);
          if (Et === null) {
            Q === null && (Q = Mt);
            break;
          }
          s && Q && Et.alternate === null && o(re, Q), te = b(Et, te, Je), g === null ? Qe = Et : g.sibling = Et, g = Et, Q = Mt;
        }
        if (Je === se.length) return d(re, Q), Kt && io(re, Je), Qe;
        if (Q === null) {
          for (; Je < se.length; Je++) Q = Te(re, se[Je], Ie), Q !== null && (te = b(Q, te, Je), g === null ? Qe = Q : g.sibling = Q, g = Q);
          return Kt && io(re, Je), Qe;
        }
        for (Q = v(re, Q); Je < se.length; Je++) Mt = Me(Q, re, Je, se[Je], Ie), Mt !== null && (s && Mt.alternate !== null && Q.delete(Mt.key === null ? Je : Mt.key), te = b(Mt, te, Je), g === null ? Qe = Mt : g.sibling = Mt, g = Mt);
        return s && Q.forEach(function(z) {
          return o(re, z);
        }), Kt && io(re, Je), Qe;
      }
      function qe(re, te, se, Ie) {
        var Qe = Pe(se);
        if (typeof Qe != "function") throw Error(t(150));
        if (se = Qe.call(se), se == null) throw Error(t(151));
        for (var g = Qe = null, Q = te, Je = te = 0, Mt = null, Et = se.next(); Q !== null && !Et.done; Je++, Et = se.next()) {
          Q.index > Je ? (Mt = Q, Q = null) : Mt = Q.sibling;
          var z = Ee(re, Q, Et.value, Ie);
          if (z === null) {
            Q === null && (Q = Mt);
            break;
          }
          s && Q && z.alternate === null && o(re, Q), te = b(z, te, Je), g === null ? Qe = z : g.sibling = z, g = z, Q = Mt;
        }
        if (Et.done) return d(re, Q), Kt && io(re, Je), Qe;
        if (Q === null) {
          for (; !Et.done; Je++, Et = se.next()) Et = Te(re, Et.value, Ie), Et !== null && (te = b(Et, te, Je), g === null ? Qe = Et : g.sibling = Et, g = Et);
          return Kt && io(re, Je), Qe;
        }
        for (Q = v(re, Q); !Et.done; Je++, Et = se.next()) Et = Me(Q, re, Je, Et.value, Ie), Et !== null && (s && Et.alternate !== null && Q.delete(Et.key === null ? Je : Et.key), te = b(Et, te, Je), g === null ? Qe = Et : g.sibling = Et, g = Et);
        return s && Q.forEach(function(Cl) {
          return o(re, Cl);
        }), Kt && io(re, Je), Qe;
      }
      function rn(re, te, se, Ie) {
        if (typeof se == "object" && se !== null && se.type === j && se.key === null && (se = se.props.children), typeof se == "object" && se !== null) {
          switch (se.$$typeof) {
            case u:
              e: {
                for (var Qe = se.key, g = te; g !== null; ) {
                  if (g.key === Qe) {
                    if (Qe = se.type, Qe === j) {
                      if (g.tag === 7) {
                        d(re, g.sibling), te = _(g, se.props.children), te.return = re, re = te;
                        break e;
                      }
                    } else if (g.elementType === Qe || typeof Qe == "object" && Qe !== null && Qe.$$typeof === Ge && Ah(Qe) === g.type) {
                      d(re, g.sibling), te = _(g, se.props), te.ref = dl(re, g, se), te.return = re, re = te;
                      break e;
                    }
                    d(re, g);
                    break;
                  } else o(re, g);
                  g = g.sibling;
                }
                se.type === j ? (te = go(se.props.children, re.mode, Ie, se.key), te.return = re, re = te) : (Ie = Gc(se.type, se.key, se.props, null, re.mode, Ie), Ie.ref = dl(re, te, se), Ie.return = re, re = Ie);
              }
              return D(re);
            case ge:
              e: {
                for (g = se.key; te !== null; ) {
                  if (te.key === g) if (te.tag === 4 && te.stateNode.containerInfo === se.containerInfo && te.stateNode.implementation === se.implementation) {
                    d(re, te.sibling), te = _(te, se.children || []), te.return = re, re = te;
                    break e;
                  } else {
                    d(re, te);
                    break;
                  }
                  else o(re, te);
                  te = te.sibling;
                }
                te = Wd(se, re.mode, Ie), te.return = re, re = te;
              }
              return D(re);
            case Ge:
              return g = se._init, rn(re, te, g(se._payload), Ie);
          }
          if (ke(se)) return We(re, te, se, Ie);
          if (Pe(se)) return qe(re, te, se, Ie);
          wc(re, se);
        }
        return typeof se == "string" && se !== "" || typeof se == "number" ? (se = "" + se, te !== null && te.tag === 6 ? (d(re, te.sibling), te = _(te, se), te.return = re, re = te) : (d(re, te), te = Bd(se, re.mode, Ie), te.return = re, re = te), D(re)) : d(re, te);
      }
      return rn;
    }
    var ea = Rh(true), Nh = Rh(false), _c = Ci(null), xc = null, ta = null, sd = null;
    function id() {
      sd = ta = xc = null;
    }
    function od(s) {
      var o = _c.current;
      qt(_c), s._currentValue = o;
    }
    function ad(s, o, d) {
      for (; s !== null; ) {
        var v = s.alternate;
        if ((s.childLanes & o) !== o ? (s.childLanes |= o, v !== null && (v.childLanes |= o)) : v !== null && (v.childLanes & o) !== o && (v.childLanes |= o), s === d) break;
        s = s.return;
      }
    }
    function na(s, o) {
      xc = s, sd = ta = null, s = s.dependencies, s !== null && s.firstContext !== null && ((s.lanes & o) !== 0 && (lr = true), s.firstContext = null);
    }
    function Vr(s) {
      var o = s._currentValue;
      if (sd !== s) if (s = {
        context: s,
        memoizedValue: o,
        next: null
      }, ta === null) {
        if (xc === null) throw Error(t(308));
        ta = s, xc.dependencies = {
          lanes: 0,
          firstContext: s
        };
      } else ta = ta.next = s;
      return o;
    }
    var oo = null;
    function ld(s) {
      oo === null ? oo = [
        s
      ] : oo.push(s);
    }
    function Ph(s, o, d, v) {
      var _ = o.interleaved;
      return _ === null ? (d.next = d, ld(o)) : (d.next = _.next, _.next = d), o.interleaved = d, Ys(s, v);
    }
    function Ys(s, o) {
      s.lanes |= o;
      var d = s.alternate;
      for (d !== null && (d.lanes |= o), d = s, s = s.return; s !== null; ) s.childLanes |= o, d = s.alternate, d !== null && (d.childLanes |= o), d = s, s = s.return;
      return d.tag === 3 ? d.stateNode : null;
    }
    var ki = false;
    function cd(s) {
      s.updateQueue = {
        baseState: s.memoizedState,
        firstBaseUpdate: null,
        lastBaseUpdate: null,
        shared: {
          pending: null,
          interleaved: null,
          lanes: 0
        },
        effects: null
      };
    }
    function Dh(s, o) {
      s = s.updateQueue, o.updateQueue === s && (o.updateQueue = {
        baseState: s.baseState,
        firstBaseUpdate: s.firstBaseUpdate,
        lastBaseUpdate: s.lastBaseUpdate,
        shared: s.shared,
        effects: s.effects
      });
    }
    function Xs(s, o) {
      return {
        eventTime: s,
        lane: o,
        tag: 0,
        payload: null,
        callback: null,
        next: null
      };
    }
    function Ai(s, o, d) {
      var v = s.updateQueue;
      if (v === null) return null;
      if (v = v.shared, (St & 2) !== 0) {
        var _ = v.pending;
        return _ === null ? o.next = o : (o.next = _.next, _.next = o), v.pending = o, Ys(s, d);
      }
      return _ = v.interleaved, _ === null ? (o.next = o, ld(v)) : (o.next = _.next, _.next = o), v.interleaved = o, Ys(s, d);
    }
    function fl(s, o, d) {
      if (o = o.updateQueue, o !== null && (o = o.shared, (d & 4194240) !== 0)) {
        var v = o.lanes;
        v &= s.pendingLanes, d |= v, o.lanes = d, $s(s, d);
      }
    }
    function ao(s, o) {
      var d = s.updateQueue, v = s.alternate;
      if (v !== null && (v = v.updateQueue, d === v)) {
        var _ = null, b = null;
        if (d = d.firstBaseUpdate, d !== null) {
          do {
            var D = {
              eventTime: d.eventTime,
              lane: d.lane,
              tag: d.tag,
              payload: d.payload,
              callback: d.callback,
              next: null
            };
            b === null ? _ = b = D : b = b.next = D, d = d.next;
          } while (d !== null);
          b === null ? _ = b = o : b = b.next = o;
        } else _ = b = o;
        d = {
          baseState: v.baseState,
          firstBaseUpdate: _,
          lastBaseUpdate: b,
          shared: v.shared,
          effects: v.effects
        }, s.updateQueue = d;
        return;
      }
      s = d.lastBaseUpdate, s === null ? d.firstBaseUpdate = o : s.next = o, d.lastBaseUpdate = o;
    }
    function hl(s, o, d, v) {
      var _ = s.updateQueue;
      ki = false;
      var b = _.firstBaseUpdate, D = _.lastBaseUpdate, K = _.shared.pending;
      if (K !== null) {
        _.shared.pending = null;
        var J = K, ae = J.next;
        J.next = null, D === null ? b = ae : D.next = ae, D = J;
        var be = s.alternate;
        be !== null && (be = be.updateQueue, K = be.lastBaseUpdate, K !== D && (K === null ? be.firstBaseUpdate = ae : K.next = ae, be.lastBaseUpdate = J));
      }
      if (b !== null) {
        var Te = _.baseState;
        D = 0, be = ae = J = null, K = b;
        do {
          var Ee = K.lane, Me = K.eventTime;
          if ((v & Ee) === Ee) {
            be !== null && (be = be.next = {
              eventTime: Me,
              lane: 0,
              tag: K.tag,
              payload: K.payload,
              callback: K.callback,
              next: null
            });
            e: {
              var We = s, qe = K;
              switch (Ee = o, Me = d, qe.tag) {
                case 1:
                  if (We = qe.payload, typeof We == "function") {
                    Te = We.call(Me, Te, Ee);
                    break e;
                  }
                  Te = We;
                  break e;
                case 3:
                  We.flags = We.flags & -65537 | 128;
                case 0:
                  if (We = qe.payload, Ee = typeof We == "function" ? We.call(Me, Te, Ee) : We, Ee == null) break e;
                  Te = pe({}, Te, Ee);
                  break e;
                case 2:
                  ki = true;
              }
            }
            K.callback !== null && K.lane !== 0 && (s.flags |= 64, Ee = _.effects, Ee === null ? _.effects = [
              K
            ] : Ee.push(K));
          } else Me = {
            eventTime: Me,
            lane: Ee,
            tag: K.tag,
            payload: K.payload,
            callback: K.callback,
            next: null
          }, be === null ? (ae = be = Me, J = Te) : be = be.next = Me, D |= Ee;
          if (K = K.next, K === null) {
            if (K = _.shared.pending, K === null) break;
            Ee = K, K = Ee.next, Ee.next = null, _.lastBaseUpdate = Ee, _.shared.pending = null;
          }
        } while (true);
        if (be === null && (J = Te), _.baseState = J, _.firstBaseUpdate = ae, _.lastBaseUpdate = be, o = _.shared.interleaved, o !== null) {
          _ = o;
          do
            D |= _.lane, _ = _.next;
          while (_ !== o);
        } else b === null && (_.shared.lanes = 0);
        uo |= D, s.lanes = D, s.memoizedState = Te;
      }
    }
    function ud(s, o, d) {
      if (s = o.effects, o.effects = null, s !== null) for (o = 0; o < s.length; o++) {
        var v = s[o], _ = v.callback;
        if (_ !== null) {
          if (v.callback = null, v = d, typeof _ != "function") throw Error(t(191, _));
          _.call(v);
        }
      }
    }
    var Ri = {}, xs = Ci(Ri), ra = Ci(Ri), Fr = Ci(Ri);
    function Es(s) {
      if (s === Ri) throw Error(t(174));
      return s;
    }
    function Gn(s, o) {
      switch (Bt(Fr, o), Bt(ra, s), Bt(xs, Ri), s = o.nodeType, s) {
        case 9:
        case 11:
          o = (o = o.documentElement) ? o.namespaceURI : kt(null, "");
          break;
        default:
          s = s === 8 ? o.parentNode : o, o = s.namespaceURI || null, s = s.tagName, o = kt(o, s);
      }
      qt(xs), Bt(xs, o);
    }
    function os() {
      qt(xs), qt(ra), qt(Fr);
    }
    function Ec(s) {
      Es(Fr.current);
      var o = Es(xs.current), d = kt(o, s.type);
      o !== d && (Bt(ra, s), Bt(xs, d));
    }
    function dd(s) {
      ra.current === s && (qt(xs), qt(ra));
    }
    var Gt = Ci(0);
    function pl(s) {
      for (var o = s; o !== null; ) {
        if (o.tag === 13) {
          var d = o.memoizedState;
          if (d !== null && (d = d.dehydrated, d === null || d.data === "$?" || d.data === "$!")) return o;
        } else if (o.tag === 19 && o.memoizedProps.revealOrder !== void 0) {
          if ((o.flags & 128) !== 0) return o;
        } else if (o.child !== null) {
          o.child.return = o, o = o.child;
          continue;
        }
        if (o === s) break;
        for (; o.sibling === null; ) {
          if (o.return === null || o.return === s) return null;
          o = o.return;
        }
        o.sibling.return = o.return, o = o.sibling;
      }
      return null;
    }
    var gl = [];
    function bc() {
      for (var s = 0; s < gl.length; s++) gl[s]._workInProgressVersionPrimary = null;
      gl.length = 0;
    }
    var Tc = Y.ReactCurrentDispatcher, fd = Y.ReactCurrentBatchConfig, lo = 0, Yt = null, nn = null, mn = null, Cc = false, co = false, ml = 0, t0 = 0;
    function Tn() {
      throw Error(t(321));
    }
    function Sc(s, o) {
      if (o === null) return false;
      for (var d = 0; d < o.length && d < s.length; d++) if (!Lr(s[d], o[d])) return false;
      return true;
    }
    function Ic(s, o, d, v, _, b) {
      if (lo = b, Yt = o, o.memoizedState = null, o.updateQueue = null, o.lanes = 0, Tc.current = s === null || s.memoizedState === null ? i0 : o0, s = d(v, _), co) {
        b = 0;
        do {
          if (co = false, ml = 0, 25 <= b) throw Error(t(301));
          b += 1, mn = nn = null, o.updateQueue = null, Tc.current = a0, s = d(v, _);
        } while (co);
      }
      if (Tc.current = Nc, o = nn !== null && nn.next !== null, lo = 0, mn = nn = Yt = null, Cc = false, o) throw Error(t(300));
      return s;
    }
    function sa() {
      var s = ml !== 0;
      return ml = 0, s;
    }
    function bs() {
      var s = {
        memoizedState: null,
        baseState: null,
        baseQueue: null,
        queue: null,
        next: null
      };
      return mn === null ? Yt.memoizedState = mn = s : mn = mn.next = s, mn;
    }
    function zr() {
      if (nn === null) {
        var s = Yt.alternate;
        s = s !== null ? s.memoizedState : null;
      } else s = nn.next;
      var o = mn === null ? Yt.memoizedState : mn.next;
      if (o !== null) mn = o, nn = s;
      else {
        if (s === null) throw Error(t(310));
        nn = s, s = {
          memoizedState: nn.memoizedState,
          baseState: nn.baseState,
          baseQueue: nn.baseQueue,
          queue: nn.queue,
          next: null
        }, mn === null ? Yt.memoizedState = mn = s : mn = mn.next = s;
      }
      return mn;
    }
    function vl(s, o) {
      return typeof o == "function" ? o(s) : o;
    }
    function hd(s) {
      var o = zr(), d = o.queue;
      if (d === null) throw Error(t(311));
      d.lastRenderedReducer = s;
      var v = nn, _ = v.baseQueue, b = d.pending;
      if (b !== null) {
        if (_ !== null) {
          var D = _.next;
          _.next = b.next, b.next = D;
        }
        v.baseQueue = _ = b, d.pending = null;
      }
      if (_ !== null) {
        b = _.next, v = v.baseState;
        var K = D = null, J = null, ae = b;
        do {
          var be = ae.lane;
          if ((lo & be) === be) J !== null && (J = J.next = {
            lane: 0,
            action: ae.action,
            hasEagerState: ae.hasEagerState,
            eagerState: ae.eagerState,
            next: null
          }), v = ae.hasEagerState ? ae.eagerState : s(v, ae.action);
          else {
            var Te = {
              lane: be,
              action: ae.action,
              hasEagerState: ae.hasEagerState,
              eagerState: ae.eagerState,
              next: null
            };
            J === null ? (K = J = Te, D = v) : J = J.next = Te, Yt.lanes |= be, uo |= be;
          }
          ae = ae.next;
        } while (ae !== null && ae !== b);
        J === null ? D = v : J.next = K, Lr(v, o.memoizedState) || (lr = true), o.memoizedState = v, o.baseState = D, o.baseQueue = J, d.lastRenderedState = v;
      }
      if (s = d.interleaved, s !== null) {
        _ = s;
        do
          b = _.lane, Yt.lanes |= b, uo |= b, _ = _.next;
        while (_ !== s);
      } else _ === null && (d.lanes = 0);
      return [
        o.memoizedState,
        d.dispatch
      ];
    }
    function pd(s) {
      var o = zr(), d = o.queue;
      if (d === null) throw Error(t(311));
      d.lastRenderedReducer = s;
      var v = d.dispatch, _ = d.pending, b = o.memoizedState;
      if (_ !== null) {
        d.pending = null;
        var D = _ = _.next;
        do
          b = s(b, D.action), D = D.next;
        while (D !== _);
        Lr(b, o.memoizedState) || (lr = true), o.memoizedState = b, o.baseQueue === null && (o.baseState = b), d.lastRenderedState = b;
      }
      return [
        b,
        v
      ];
    }
    function jh() {
    }
    function Oh(s, o) {
      var d = Yt, v = zr(), _ = o(), b = !Lr(v.memoizedState, _);
      if (b && (v.memoizedState = _, lr = true), v = v.queue, md($h.bind(null, d, v, s), [
        s
      ]), v.getSnapshot !== o || b || mn !== null && mn.memoizedState.tag & 1) {
        if (d.flags |= 2048, yl(9, Mh.bind(null, d, v, _, o), void 0, null), vn === null) throw Error(t(349));
        (lo & 30) !== 0 || Lh(d, o, _);
      }
      return _;
    }
    function Lh(s, o, d) {
      s.flags |= 16384, s = {
        getSnapshot: o,
        value: d
      }, o = Yt.updateQueue, o === null ? (o = {
        lastEffect: null,
        stores: null
      }, Yt.updateQueue = o, o.stores = [
        s
      ]) : (d = o.stores, d === null ? o.stores = [
        s
      ] : d.push(s));
    }
    function Mh(s, o, d, v) {
      o.value = d, o.getSnapshot = v, Vh(o) && Fh(s);
    }
    function $h(s, o, d) {
      return d(function() {
        Vh(o) && Fh(s);
      });
    }
    function Vh(s) {
      var o = s.getSnapshot;
      s = s.value;
      try {
        var d = o();
        return !Lr(s, d);
      } catch {
        return true;
      }
    }
    function Fh(s) {
      var o = Ys(s, 1);
      o !== null && us(o, s, 1, -1);
    }
    function zh(s) {
      var o = bs();
      return typeof s == "function" && (s = s()), o.memoizedState = o.baseState = s, s = {
        pending: null,
        interleaved: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: vl,
        lastRenderedState: s
      }, o.queue = s, s = s.dispatch = s0.bind(null, Yt, s), [
        o.memoizedState,
        s
      ];
    }
    function yl(s, o, d, v) {
      return s = {
        tag: s,
        create: o,
        destroy: d,
        deps: v,
        next: null
      }, o = Yt.updateQueue, o === null ? (o = {
        lastEffect: null,
        stores: null
      }, Yt.updateQueue = o, o.lastEffect = s.next = s) : (d = o.lastEffect, d === null ? o.lastEffect = s.next = s : (v = d.next, d.next = s, s.next = v, o.lastEffect = s)), s;
    }
    function Uh() {
      return zr().memoizedState;
    }
    function kc(s, o, d, v) {
      var _ = bs();
      Yt.flags |= s, _.memoizedState = yl(1 | o, d, void 0, v === void 0 ? null : v);
    }
    function Ac(s, o, d, v) {
      var _ = zr();
      v = v === void 0 ? null : v;
      var b = void 0;
      if (nn !== null) {
        var D = nn.memoizedState;
        if (b = D.destroy, v !== null && Sc(v, D.deps)) {
          _.memoizedState = yl(o, d, b, v);
          return;
        }
      }
      Yt.flags |= s, _.memoizedState = yl(1 | o, d, b, v);
    }
    function gd(s, o) {
      return kc(8390656, 8, s, o);
    }
    function md(s, o) {
      return Ac(2048, 8, s, o);
    }
    function Bh(s, o) {
      return Ac(4, 2, s, o);
    }
    function Wh(s, o) {
      return Ac(4, 4, s, o);
    }
    function Hh(s, o) {
      if (typeof o == "function") return s = s(), o(s), function() {
        o(null);
      };
      if (o != null) return s = s(), o.current = s, function() {
        o.current = null;
      };
    }
    function qh(s, o, d) {
      return d = d != null ? d.concat([
        s
      ]) : null, Ac(4, 4, Hh.bind(null, o, s), d);
    }
    function Rc() {
    }
    function Kh(s, o) {
      var d = zr();
      o = o === void 0 ? null : o;
      var v = d.memoizedState;
      return v !== null && o !== null && Sc(o, v[1]) ? v[0] : (d.memoizedState = [
        s,
        o
      ], s);
    }
    function Gh(s, o) {
      var d = zr();
      o = o === void 0 ? null : o;
      var v = d.memoizedState;
      return v !== null && o !== null && Sc(o, v[1]) ? v[0] : (s = s(), d.memoizedState = [
        s,
        o
      ], s);
    }
    function Qh(s, o, d) {
      return (lo & 21) === 0 ? (s.baseState && (s.baseState = false, lr = true), s.memoizedState = d) : (Lr(d, o) || (d = gi(), Yt.lanes |= d, uo |= d, s.baseState = true), o);
    }
    function n0(s, o) {
      var d = yt;
      yt = d !== 0 && 4 > d ? d : 4, s(true);
      var v = fd.transition;
      fd.transition = {};
      try {
        s(false), o();
      } finally {
        yt = d, fd.transition = v;
      }
    }
    function Yh() {
      return zr().memoizedState;
    }
    function r0(s, o, d) {
      var v = ji(s);
      if (d = {
        lane: v,
        action: d,
        hasEagerState: false,
        eagerState: null,
        next: null
      }, Xh(s)) Jh(o, d);
      else if (d = Ph(s, o, d, v), d !== null) {
        var _ = Qn();
        us(d, s, v, _), Zh(d, o, v);
      }
    }
    function s0(s, o, d) {
      var v = ji(s), _ = {
        lane: v,
        action: d,
        hasEagerState: false,
        eagerState: null,
        next: null
      };
      if (Xh(s)) Jh(o, _);
      else {
        var b = s.alternate;
        if (s.lanes === 0 && (b === null || b.lanes === 0) && (b = o.lastRenderedReducer, b !== null)) try {
          var D = o.lastRenderedState, K = b(D, d);
          if (_.hasEagerState = true, _.eagerState = K, Lr(K, D)) {
            var J = o.interleaved;
            J === null ? (_.next = _, ld(o)) : (_.next = J.next, J.next = _), o.interleaved = _;
            return;
          }
        } catch {
        } finally {
        }
        d = Ph(s, o, _, v), d !== null && (_ = Qn(), us(d, s, v, _), Zh(d, o, v));
      }
    }
    function Xh(s) {
      var o = s.alternate;
      return s === Yt || o !== null && o === Yt;
    }
    function Jh(s, o) {
      co = Cc = true;
      var d = s.pending;
      d === null ? o.next = o : (o.next = d.next, d.next = o), s.pending = o;
    }
    function Zh(s, o, d) {
      if ((d & 4194240) !== 0) {
        var v = o.lanes;
        v &= s.pendingLanes, d |= v, o.lanes = d, $s(s, d);
      }
    }
    var Nc = {
      readContext: Vr,
      useCallback: Tn,
      useContext: Tn,
      useEffect: Tn,
      useImperativeHandle: Tn,
      useInsertionEffect: Tn,
      useLayoutEffect: Tn,
      useMemo: Tn,
      useReducer: Tn,
      useRef: Tn,
      useState: Tn,
      useDebugValue: Tn,
      useDeferredValue: Tn,
      useTransition: Tn,
      useMutableSource: Tn,
      useSyncExternalStore: Tn,
      useId: Tn,
      unstable_isNewReconciler: false
    }, i0 = {
      readContext: Vr,
      useCallback: function(s, o) {
        return bs().memoizedState = [
          s,
          o === void 0 ? null : o
        ], s;
      },
      useContext: Vr,
      useEffect: gd,
      useImperativeHandle: function(s, o, d) {
        return d = d != null ? d.concat([
          s
        ]) : null, kc(4194308, 4, Hh.bind(null, o, s), d);
      },
      useLayoutEffect: function(s, o) {
        return kc(4194308, 4, s, o);
      },
      useInsertionEffect: function(s, o) {
        return kc(4, 2, s, o);
      },
      useMemo: function(s, o) {
        var d = bs();
        return o = o === void 0 ? null : o, s = s(), d.memoizedState = [
          s,
          o
        ], s;
      },
      useReducer: function(s, o, d) {
        var v = bs();
        return o = d !== void 0 ? d(o) : o, v.memoizedState = v.baseState = o, s = {
          pending: null,
          interleaved: null,
          lanes: 0,
          dispatch: null,
          lastRenderedReducer: s,
          lastRenderedState: o
        }, v.queue = s, s = s.dispatch = r0.bind(null, Yt, s), [
          v.memoizedState,
          s
        ];
      },
      useRef: function(s) {
        var o = bs();
        return s = {
          current: s
        }, o.memoizedState = s;
      },
      useState: zh,
      useDebugValue: Rc,
      useDeferredValue: function(s) {
        return bs().memoizedState = s;
      },
      useTransition: function() {
        var s = zh(false), o = s[0];
        return s = n0.bind(null, s[1]), bs().memoizedState = s, [
          o,
          s
        ];
      },
      useMutableSource: function() {
      },
      useSyncExternalStore: function(s, o, d) {
        var v = Yt, _ = bs();
        if (Kt) {
          if (d === void 0) throw Error(t(407));
          d = d();
        } else {
          if (d = o(), vn === null) throw Error(t(349));
          (lo & 30) !== 0 || Lh(v, o, d);
        }
        _.memoizedState = d;
        var b = {
          value: d,
          getSnapshot: o
        };
        return _.queue = b, gd($h.bind(null, v, b, s), [
          s
        ]), v.flags |= 2048, yl(9, Mh.bind(null, v, b, d, o), void 0, null), d;
      },
      useId: function() {
        var s = bs(), o = vn.identifierPrefix;
        if (Kt) {
          var d = Qs, v = Gs;
          d = (v & ~(1 << 32 - jn(v) - 1)).toString(32) + d, o = ":" + o + "R" + d, d = ml++, 0 < d && (o += "H" + d.toString(32)), o += ":";
        } else d = t0++, o = ":" + o + "r" + d.toString(32) + ":";
        return s.memoizedState = o;
      },
      unstable_isNewReconciler: false
    }, o0 = {
      readContext: Vr,
      useCallback: Kh,
      useContext: Vr,
      useEffect: md,
      useImperativeHandle: qh,
      useInsertionEffect: Bh,
      useLayoutEffect: Wh,
      useMemo: Gh,
      useReducer: hd,
      useRef: Uh,
      useState: function() {
        return hd(vl);
      },
      useDebugValue: Rc,
      useDeferredValue: function(s) {
        var o = zr();
        return Qh(o, nn.memoizedState, s);
      },
      useTransition: function() {
        var s = hd(vl)[0], o = zr().memoizedState;
        return [
          s,
          o
        ];
      },
      useMutableSource: jh,
      useSyncExternalStore: Oh,
      useId: Yh,
      unstable_isNewReconciler: false
    }, a0 = {
      readContext: Vr,
      useCallback: Kh,
      useContext: Vr,
      useEffect: md,
      useImperativeHandle: qh,
      useInsertionEffect: Bh,
      useLayoutEffect: Wh,
      useMemo: Gh,
      useReducer: pd,
      useRef: Uh,
      useState: function() {
        return pd(vl);
      },
      useDebugValue: Rc,
      useDeferredValue: function(s) {
        var o = zr();
        return nn === null ? o.memoizedState = s : Qh(o, nn.memoizedState, s);
      },
      useTransition: function() {
        var s = pd(vl)[0], o = zr().memoizedState;
        return [
          s,
          o
        ];
      },
      useMutableSource: jh,
      useSyncExternalStore: Oh,
      useId: Yh,
      unstable_isNewReconciler: false
    };
    function as(s, o) {
      if (s && s.defaultProps) {
        o = pe({}, o), s = s.defaultProps;
        for (var d in s) o[d] === void 0 && (o[d] = s[d]);
        return o;
      }
      return o;
    }
    function vd(s, o, d, v) {
      o = s.memoizedState, d = d(v, o), d = d == null ? o : pe({}, o, d), s.memoizedState = d, s.lanes === 0 && (s.updateQueue.baseState = d);
    }
    var Pc = {
      isMounted: function(s) {
        return (s = s._reactInternals) ? Ar(s) === s : false;
      },
      enqueueSetState: function(s, o, d) {
        s = s._reactInternals;
        var v = Qn(), _ = ji(s), b = Xs(v, _);
        b.payload = o, d != null && (b.callback = d), o = Ai(s, b, _), o !== null && (us(o, s, _, v), fl(o, s, _));
      },
      enqueueReplaceState: function(s, o, d) {
        s = s._reactInternals;
        var v = Qn(), _ = ji(s), b = Xs(v, _);
        b.tag = 1, b.payload = o, d != null && (b.callback = d), o = Ai(s, b, _), o !== null && (us(o, s, _, v), fl(o, s, _));
      },
      enqueueForceUpdate: function(s, o) {
        s = s._reactInternals;
        var d = Qn(), v = ji(s), _ = Xs(d, v);
        _.tag = 2, o != null && (_.callback = o), o = Ai(s, _, v), o !== null && (us(o, s, v, d), fl(o, s, v));
      }
    };
    function ep(s, o, d, v, _, b, D) {
      return s = s.stateNode, typeof s.shouldComponentUpdate == "function" ? s.shouldComponentUpdate(v, b, D) : o.prototype && o.prototype.isPureReactComponent ? !sl(d, v) || !sl(_, b) : true;
    }
    function tp(s, o, d) {
      var v = false, _ = Si, b = o.contextType;
      return typeof b == "object" && b !== null ? b = Vr(b) : (_ = ar(o) ? ro : Ln.current, v = o.contextTypes, b = (v = v != null) ? Yo(s, _) : Si), o = new o(d, b), s.memoizedState = o.state !== null && o.state !== void 0 ? o.state : null, o.updater = Pc, s.stateNode = o, o._reactInternals = s, v && (s = s.stateNode, s.__reactInternalMemoizedUnmaskedChildContext = _, s.__reactInternalMemoizedMaskedChildContext = b), o;
    }
    function np(s, o, d, v) {
      s = o.state, typeof o.componentWillReceiveProps == "function" && o.componentWillReceiveProps(d, v), typeof o.UNSAFE_componentWillReceiveProps == "function" && o.UNSAFE_componentWillReceiveProps(d, v), o.state !== s && Pc.enqueueReplaceState(o, o.state, null);
    }
    function yd(s, o, d, v) {
      var _ = s.stateNode;
      _.props = d, _.state = s.memoizedState, _.refs = {}, cd(s);
      var b = o.contextType;
      typeof b == "object" && b !== null ? _.context = Vr(b) : (b = ar(o) ? ro : Ln.current, _.context = Yo(s, b)), _.state = s.memoizedState, b = o.getDerivedStateFromProps, typeof b == "function" && (vd(s, o, b, d), _.state = s.memoizedState), typeof o.getDerivedStateFromProps == "function" || typeof _.getSnapshotBeforeUpdate == "function" || typeof _.UNSAFE_componentWillMount != "function" && typeof _.componentWillMount != "function" || (o = _.state, typeof _.componentWillMount == "function" && _.componentWillMount(), typeof _.UNSAFE_componentWillMount == "function" && _.UNSAFE_componentWillMount(), o !== _.state && Pc.enqueueReplaceState(_, _.state, null), hl(s, d, _, v), _.state = s.memoizedState), typeof _.componentDidMount == "function" && (s.flags |= 4194308);
    }
    function ia(s, o) {
      try {
        var d = "", v = o;
        do
          d += Re(v), v = v.return;
        while (v);
        var _ = d;
      } catch (b) {
        _ = `
Error generating stack: ` + b.message + `
` + b.stack;
      }
      return {
        value: s,
        source: o,
        stack: _,
        digest: null
      };
    }
    function wd(s, o, d) {
      return {
        value: s,
        source: null,
        stack: d ?? null,
        digest: o ?? null
      };
    }
    function _d(s, o) {
      try {
        console.error(o.value);
      } catch (d) {
        setTimeout(function() {
          throw d;
        });
      }
    }
    var l0 = typeof WeakMap == "function" ? WeakMap : Map;
    function rp(s, o, d) {
      d = Xs(-1, d), d.tag = 3, d.payload = {
        element: null
      };
      var v = o.value;
      return d.callback = function() {
        Vc || (Vc = true, Ld = v), _d(s, o);
      }, d;
    }
    function sp(s, o, d) {
      d = Xs(-1, d), d.tag = 3;
      var v = s.type.getDerivedStateFromError;
      if (typeof v == "function") {
        var _ = o.value;
        d.payload = function() {
          return v(_);
        }, d.callback = function() {
          _d(s, o);
        };
      }
      var b = s.stateNode;
      return b !== null && typeof b.componentDidCatch == "function" && (d.callback = function() {
        _d(s, o), typeof v != "function" && (Pi === null ? Pi = /* @__PURE__ */ new Set([
          this
        ]) : Pi.add(this));
        var D = o.stack;
        this.componentDidCatch(o.value, {
          componentStack: D !== null ? D : ""
        });
      }), d;
    }
    function ip(s, o, d) {
      var v = s.pingCache;
      if (v === null) {
        v = s.pingCache = new l0();
        var _ = /* @__PURE__ */ new Set();
        v.set(o, _);
      } else _ = v.get(o), _ === void 0 && (_ = /* @__PURE__ */ new Set(), v.set(o, _));
      _.has(d) || (_.add(d), s = x0.bind(null, s, o, d), o.then(s, s));
    }
    function op(s) {
      do {
        var o;
        if ((o = s.tag === 13) && (o = s.memoizedState, o = o !== null ? o.dehydrated !== null : true), o) return s;
        s = s.return;
      } while (s !== null);
      return null;
    }
    function ap(s, o, d, v, _) {
      return (s.mode & 1) === 0 ? (s === o ? s.flags |= 65536 : (s.flags |= 128, d.flags |= 131072, d.flags &= -52805, d.tag === 1 && (d.alternate === null ? d.tag = 17 : (o = Xs(-1, 1), o.tag = 2, Ai(d, o, 1))), d.lanes |= 1), s) : (s.flags |= 65536, s.lanes = _, s);
    }
    var c0 = Y.ReactCurrentOwner, lr = false;
    function Mn(s, o, d, v) {
      o.child = s === null ? Nh(o, null, d, v) : ea(o, s.child, d, v);
    }
    function lp(s, o, d, v, _) {
      d = d.render;
      var b = o.ref;
      return na(o, _), v = Ic(s, o, d, v, b, _), d = sa(), s !== null && !lr ? (o.updateQueue = s.updateQueue, o.flags &= -2053, s.lanes &= ~_, Js(s, o, _)) : (Kt && d && Zu(o), o.flags |= 1, Mn(s, o, v, _), o.child);
    }
    function cp(s, o, d, v, _) {
      if (s === null) {
        var b = d.type;
        return typeof b == "function" && !Ud(b) && b.defaultProps === void 0 && d.compare === null && d.defaultProps === void 0 ? (o.tag = 15, o.type = b, up(s, o, b, v, _)) : (s = Gc(d.type, null, v, o, o.mode, _), s.ref = o.ref, s.return = o, o.child = s);
      }
      if (b = s.child, (s.lanes & _) === 0) {
        var D = b.memoizedProps;
        if (d = d.compare, d = d !== null ? d : sl, d(D, v) && s.ref === o.ref) return Js(s, o, _);
      }
      return o.flags |= 1, s = Oi(b, v), s.ref = o.ref, s.return = o, o.child = s;
    }
    function up(s, o, d, v, _) {
      if (s !== null) {
        var b = s.memoizedProps;
        if (sl(b, v) && s.ref === o.ref) if (lr = false, o.pendingProps = v = b, (s.lanes & _) !== 0) (s.flags & 131072) !== 0 && (lr = true);
        else return o.lanes = s.lanes, Js(s, o, _);
      }
      return Ed(s, o, d, v, _);
    }
    function xd(s, o, d) {
      var v = o.pendingProps, _ = v.children, b = s !== null ? s.memoizedState : null;
      if (v.mode === "hidden") if ((o.mode & 1) === 0) o.memoizedState = {
        baseLanes: 0,
        cachePool: null,
        transitions: null
      }, Bt(aa, br), br |= d;
      else {
        if ((d & 1073741824) === 0) return s = b !== null ? b.baseLanes | d : d, o.lanes = o.childLanes = 1073741824, o.memoizedState = {
          baseLanes: s,
          cachePool: null,
          transitions: null
        }, o.updateQueue = null, Bt(aa, br), br |= s, null;
        o.memoizedState = {
          baseLanes: 0,
          cachePool: null,
          transitions: null
        }, v = b !== null ? b.baseLanes : d, Bt(aa, br), br |= v;
      }
      else b !== null ? (v = b.baseLanes | d, o.memoizedState = null) : v = d, Bt(aa, br), br |= v;
      return Mn(s, o, _, d), o.child;
    }
    function dp(s, o) {
      var d = o.ref;
      (s === null && d !== null || s !== null && s.ref !== d) && (o.flags |= 512, o.flags |= 2097152);
    }
    function Ed(s, o, d, v, _) {
      var b = ar(d) ? ro : Ln.current;
      return b = Yo(o, b), na(o, _), d = Ic(s, o, d, v, b, _), v = sa(), s !== null && !lr ? (o.updateQueue = s.updateQueue, o.flags &= -2053, s.lanes &= ~_, Js(s, o, _)) : (Kt && v && Zu(o), o.flags |= 1, Mn(s, o, d, _), o.child);
    }
    function fp(s, o, d, v, _) {
      if (ar(d)) {
        var b = true;
        pc(o);
      } else b = false;
      if (na(o, _), o.stateNode === null) jc(s, o), tp(o, d, v), yd(o, d, v, _), v = true;
      else if (s === null) {
        var D = o.stateNode, K = o.memoizedProps;
        D.props = K;
        var J = D.context, ae = d.contextType;
        typeof ae == "object" && ae !== null ? ae = Vr(ae) : (ae = ar(d) ? ro : Ln.current, ae = Yo(o, ae));
        var be = d.getDerivedStateFromProps, Te = typeof be == "function" || typeof D.getSnapshotBeforeUpdate == "function";
        Te || typeof D.UNSAFE_componentWillReceiveProps != "function" && typeof D.componentWillReceiveProps != "function" || (K !== v || J !== ae) && np(o, D, v, ae), ki = false;
        var Ee = o.memoizedState;
        D.state = Ee, hl(o, v, D, _), J = o.memoizedState, K !== v || Ee !== J || or.current || ki ? (typeof be == "function" && (vd(o, d, be, v), J = o.memoizedState), (K = ki || ep(o, d, K, v, Ee, J, ae)) ? (Te || typeof D.UNSAFE_componentWillMount != "function" && typeof D.componentWillMount != "function" || (typeof D.componentWillMount == "function" && D.componentWillMount(), typeof D.UNSAFE_componentWillMount == "function" && D.UNSAFE_componentWillMount()), typeof D.componentDidMount == "function" && (o.flags |= 4194308)) : (typeof D.componentDidMount == "function" && (o.flags |= 4194308), o.memoizedProps = v, o.memoizedState = J), D.props = v, D.state = J, D.context = ae, v = K) : (typeof D.componentDidMount == "function" && (o.flags |= 4194308), v = false);
      } else {
        D = o.stateNode, Dh(s, o), K = o.memoizedProps, ae = o.type === o.elementType ? K : as(o.type, K), D.props = ae, Te = o.pendingProps, Ee = D.context, J = d.contextType, typeof J == "object" && J !== null ? J = Vr(J) : (J = ar(d) ? ro : Ln.current, J = Yo(o, J));
        var Me = d.getDerivedStateFromProps;
        (be = typeof Me == "function" || typeof D.getSnapshotBeforeUpdate == "function") || typeof D.UNSAFE_componentWillReceiveProps != "function" && typeof D.componentWillReceiveProps != "function" || (K !== Te || Ee !== J) && np(o, D, v, J), ki = false, Ee = o.memoizedState, D.state = Ee, hl(o, v, D, _);
        var We = o.memoizedState;
        K !== Te || Ee !== We || or.current || ki ? (typeof Me == "function" && (vd(o, d, Me, v), We = o.memoizedState), (ae = ki || ep(o, d, ae, v, Ee, We, J) || false) ? (be || typeof D.UNSAFE_componentWillUpdate != "function" && typeof D.componentWillUpdate != "function" || (typeof D.componentWillUpdate == "function" && D.componentWillUpdate(v, We, J), typeof D.UNSAFE_componentWillUpdate == "function" && D.UNSAFE_componentWillUpdate(v, We, J)), typeof D.componentDidUpdate == "function" && (o.flags |= 4), typeof D.getSnapshotBeforeUpdate == "function" && (o.flags |= 1024)) : (typeof D.componentDidUpdate != "function" || K === s.memoizedProps && Ee === s.memoizedState || (o.flags |= 4), typeof D.getSnapshotBeforeUpdate != "function" || K === s.memoizedProps && Ee === s.memoizedState || (o.flags |= 1024), o.memoizedProps = v, o.memoizedState = We), D.props = v, D.state = We, D.context = J, v = ae) : (typeof D.componentDidUpdate != "function" || K === s.memoizedProps && Ee === s.memoizedState || (o.flags |= 4), typeof D.getSnapshotBeforeUpdate != "function" || K === s.memoizedProps && Ee === s.memoizedState || (o.flags |= 1024), v = false);
      }
      return bd(s, o, d, v, b, _);
    }
    function bd(s, o, d, v, _, b) {
      dp(s, o);
      var D = (o.flags & 128) !== 0;
      if (!v && !D) return _ && Eh(o, d, false), Js(s, o, b);
      v = o.stateNode, c0.current = o;
      var K = D && typeof d.getDerivedStateFromError != "function" ? null : v.render();
      return o.flags |= 1, s !== null && D ? (o.child = ea(o, s.child, null, b), o.child = ea(o, null, K, b)) : Mn(s, o, K, b), o.memoizedState = v.state, _ && Eh(o, d, true), o.child;
    }
    function hp(s) {
      var o = s.stateNode;
      o.pendingContext ? _h(s, o.pendingContext, o.pendingContext !== o.context) : o.context && _h(s, o.context, false), Gn(s, o.containerInfo);
    }
    function pp(s, o, d, v, _) {
      return Zo(), rd(_), o.flags |= 256, Mn(s, o, d, v), o.child;
    }
    var Td = {
      dehydrated: null,
      treeContext: null,
      retryLane: 0
    };
    function Cd(s) {
      return {
        baseLanes: s,
        cachePool: null,
        transitions: null
      };
    }
    function gp(s, o, d) {
      var v = o.pendingProps, _ = Gt.current, b = false, D = (o.flags & 128) !== 0, K;
      if ((K = D) || (K = s !== null && s.memoizedState === null ? false : (_ & 2) !== 0), K ? (b = true, o.flags &= -129) : (s === null || s.memoizedState !== null) && (_ |= 1), Bt(Gt, _ & 1), s === null) return nd(o), s = o.memoizedState, s !== null && (s = s.dehydrated, s !== null) ? ((o.mode & 1) === 0 ? o.lanes = 1 : s.data === "$!" ? o.lanes = 8 : o.lanes = 1073741824, null) : (D = v.children, s = v.fallback, b ? (v = o.mode, b = o.child, D = {
        mode: "hidden",
        children: D
      }, (v & 1) === 0 && b !== null ? (b.childLanes = 0, b.pendingProps = D) : b = Qc(D, v, 0, null), s = go(s, v, d, null), b.return = o, s.return = o, b.sibling = s, o.child = b, o.child.memoizedState = Cd(d), o.memoizedState = Td, s) : Sd(o, D));
      if (_ = s.memoizedState, _ !== null && (K = _.dehydrated, K !== null)) return u0(s, o, D, v, K, _, d);
      if (b) {
        b = v.fallback, D = o.mode, _ = s.child, K = _.sibling;
        var J = {
          mode: "hidden",
          children: v.children
        };
        return (D & 1) === 0 && o.child !== _ ? (v = o.child, v.childLanes = 0, v.pendingProps = J, o.deletions = null) : (v = Oi(_, J), v.subtreeFlags = _.subtreeFlags & 14680064), K !== null ? b = Oi(K, b) : (b = go(b, D, d, null), b.flags |= 2), b.return = o, v.return = o, v.sibling = b, o.child = v, v = b, b = o.child, D = s.child.memoizedState, D = D === null ? Cd(d) : {
          baseLanes: D.baseLanes | d,
          cachePool: null,
          transitions: D.transitions
        }, b.memoizedState = D, b.childLanes = s.childLanes & ~d, o.memoizedState = Td, v;
      }
      return b = s.child, s = b.sibling, v = Oi(b, {
        mode: "visible",
        children: v.children
      }), (o.mode & 1) === 0 && (v.lanes = d), v.return = o, v.sibling = null, s !== null && (d = o.deletions, d === null ? (o.deletions = [
        s
      ], o.flags |= 16) : d.push(s)), o.child = v, o.memoizedState = null, v;
    }
    function Sd(s, o) {
      return o = Qc({
        mode: "visible",
        children: o
      }, s.mode, 0, null), o.return = s, s.child = o;
    }
    function Dc(s, o, d, v) {
      return v !== null && rd(v), ea(o, s.child, null, d), s = Sd(o, o.pendingProps.children), s.flags |= 2, o.memoizedState = null, s;
    }
    function u0(s, o, d, v, _, b, D) {
      if (d) return o.flags & 256 ? (o.flags &= -257, v = wd(Error(t(422))), Dc(s, o, D, v)) : o.memoizedState !== null ? (o.child = s.child, o.flags |= 128, null) : (b = v.fallback, _ = o.mode, v = Qc({
        mode: "visible",
        children: v.children
      }, _, 0, null), b = go(b, _, D, null), b.flags |= 2, v.return = o, b.return = o, v.sibling = b, o.child = v, (o.mode & 1) !== 0 && ea(o, s.child, null, D), o.child.memoizedState = Cd(D), o.memoizedState = Td, b);
      if ((o.mode & 1) === 0) return Dc(s, o, D, null);
      if (_.data === "$!") {
        if (v = _.nextSibling && _.nextSibling.dataset, v) var K = v.dgst;
        return v = K, b = Error(t(419)), v = wd(b, v, void 0), Dc(s, o, D, v);
      }
      if (K = (D & s.childLanes) !== 0, lr || K) {
        if (v = vn, v !== null) {
          switch (D & -D) {
            case 4:
              _ = 2;
              break;
            case 16:
              _ = 8;
              break;
            case 64:
            case 128:
            case 256:
            case 512:
            case 1024:
            case 2048:
            case 4096:
            case 8192:
            case 16384:
            case 32768:
            case 65536:
            case 131072:
            case 262144:
            case 524288:
            case 1048576:
            case 2097152:
            case 4194304:
            case 8388608:
            case 16777216:
            case 33554432:
            case 67108864:
              _ = 32;
              break;
            case 536870912:
              _ = 268435456;
              break;
            default:
              _ = 0;
          }
          _ = (_ & (v.suspendedLanes | D)) !== 0 ? 0 : _, _ !== 0 && _ !== b.retryLane && (b.retryLane = _, Ys(s, _), us(v, s, _, -1));
        }
        return qc(), v = wd(Error(t(421))), Dc(s, o, D, v);
      }
      return _.data === "$?" ? (o.flags |= 128, o.child = s.child, o = E0.bind(null, s), _._reactRetry = o, null) : (s = b.treeContext, Er = Ti(_.nextSibling), xr = o, Kt = true, is = null, s !== null && (Mr[$r++] = Gs, Mr[$r++] = Qs, Mr[$r++] = so, Gs = s.id, Qs = s.overflow, so = o), o = Sd(o, v.children), o.flags |= 4096, o);
    }
    function mp(s, o, d) {
      s.lanes |= o;
      var v = s.alternate;
      v !== null && (v.lanes |= o), ad(s.return, o, d);
    }
    function Id(s, o, d, v, _) {
      var b = s.memoizedState;
      b === null ? s.memoizedState = {
        isBackwards: o,
        rendering: null,
        renderingStartTime: 0,
        last: v,
        tail: d,
        tailMode: _
      } : (b.isBackwards = o, b.rendering = null, b.renderingStartTime = 0, b.last = v, b.tail = d, b.tailMode = _);
    }
    function vp(s, o, d) {
      var v = o.pendingProps, _ = v.revealOrder, b = v.tail;
      if (Mn(s, o, v.children, d), v = Gt.current, (v & 2) !== 0) v = v & 1 | 2, o.flags |= 128;
      else {
        if (s !== null && (s.flags & 128) !== 0) e: for (s = o.child; s !== null; ) {
          if (s.tag === 13) s.memoizedState !== null && mp(s, d, o);
          else if (s.tag === 19) mp(s, d, o);
          else if (s.child !== null) {
            s.child.return = s, s = s.child;
            continue;
          }
          if (s === o) break e;
          for (; s.sibling === null; ) {
            if (s.return === null || s.return === o) break e;
            s = s.return;
          }
          s.sibling.return = s.return, s = s.sibling;
        }
        v &= 1;
      }
      if (Bt(Gt, v), (o.mode & 1) === 0) o.memoizedState = null;
      else switch (_) {
        case "forwards":
          for (d = o.child, _ = null; d !== null; ) s = d.alternate, s !== null && pl(s) === null && (_ = d), d = d.sibling;
          d = _, d === null ? (_ = o.child, o.child = null) : (_ = d.sibling, d.sibling = null), Id(o, false, _, d, b);
          break;
        case "backwards":
          for (d = null, _ = o.child, o.child = null; _ !== null; ) {
            if (s = _.alternate, s !== null && pl(s) === null) {
              o.child = _;
              break;
            }
            s = _.sibling, _.sibling = d, d = _, _ = s;
          }
          Id(o, true, d, null, b);
          break;
        case "together":
          Id(o, false, null, null, void 0);
          break;
        default:
          o.memoizedState = null;
      }
      return o.child;
    }
    function jc(s, o) {
      (o.mode & 1) === 0 && s !== null && (s.alternate = null, o.alternate = null, o.flags |= 2);
    }
    function Js(s, o, d) {
      if (s !== null && (o.dependencies = s.dependencies), uo |= o.lanes, (d & o.childLanes) === 0) return null;
      if (s !== null && o.child !== s.child) throw Error(t(153));
      if (o.child !== null) {
        for (s = o.child, d = Oi(s, s.pendingProps), o.child = d, d.return = o; s.sibling !== null; ) s = s.sibling, d = d.sibling = Oi(s, s.pendingProps), d.return = o;
        d.sibling = null;
      }
      return o.child;
    }
    function d0(s, o, d) {
      switch (o.tag) {
        case 3:
          hp(o), Zo();
          break;
        case 5:
          Ec(o);
          break;
        case 1:
          ar(o.type) && pc(o);
          break;
        case 4:
          Gn(o, o.stateNode.containerInfo);
          break;
        case 10:
          var v = o.type._context, _ = o.memoizedProps.value;
          Bt(_c, v._currentValue), v._currentValue = _;
          break;
        case 13:
          if (v = o.memoizedState, v !== null) return v.dehydrated !== null ? (Bt(Gt, Gt.current & 1), o.flags |= 128, null) : (d & o.child.childLanes) !== 0 ? gp(s, o, d) : (Bt(Gt, Gt.current & 1), s = Js(s, o, d), s !== null ? s.sibling : null);
          Bt(Gt, Gt.current & 1);
          break;
        case 19:
          if (v = (d & o.childLanes) !== 0, (s.flags & 128) !== 0) {
            if (v) return vp(s, o, d);
            o.flags |= 128;
          }
          if (_ = o.memoizedState, _ !== null && (_.rendering = null, _.tail = null, _.lastEffect = null), Bt(Gt, Gt.current), v) break;
          return null;
        case 22:
        case 23:
          return o.lanes = 0, xd(s, o, d);
      }
      return Js(s, o, d);
    }
    var yp, kd, wp, _p;
    yp = function(s, o) {
      for (var d = o.child; d !== null; ) {
        if (d.tag === 5 || d.tag === 6) s.appendChild(d.stateNode);
        else if (d.tag !== 4 && d.child !== null) {
          d.child.return = d, d = d.child;
          continue;
        }
        if (d === o) break;
        for (; d.sibling === null; ) {
          if (d.return === null || d.return === o) return;
          d = d.return;
        }
        d.sibling.return = d.return, d = d.sibling;
      }
    }, kd = function() {
    }, wp = function(s, o, d, v) {
      var _ = s.memoizedProps;
      if (_ !== v) {
        s = o.stateNode, Es(xs.current);
        var b = null;
        switch (d) {
          case "input":
            _ = Ne(s, _), v = Ne(s, v), b = [];
            break;
          case "select":
            _ = pe({}, _, {
              value: void 0
            }), v = pe({}, v, {
              value: void 0
            }), b = [];
            break;
          case "textarea":
            _ = Pt(s, _), v = Pt(s, v), b = [];
            break;
          default:
            typeof _.onClick != "function" && typeof v.onClick == "function" && (s.onclick = dc);
        }
        Zr(d, v);
        var D;
        d = null;
        for (ae in _) if (!v.hasOwnProperty(ae) && _.hasOwnProperty(ae) && _[ae] != null) if (ae === "style") {
          var K = _[ae];
          for (D in K) K.hasOwnProperty(D) && (d || (d = {}), d[D] = "");
        } else ae !== "dangerouslySetInnerHTML" && ae !== "children" && ae !== "suppressContentEditableWarning" && ae !== "suppressHydrationWarning" && ae !== "autoFocus" && (i.hasOwnProperty(ae) ? b || (b = []) : (b = b || []).push(ae, null));
        for (ae in v) {
          var J = v[ae];
          if (K = _ == null ? void 0 : _[ae], v.hasOwnProperty(ae) && J !== K && (J != null || K != null)) if (ae === "style") if (K) {
            for (D in K) !K.hasOwnProperty(D) || J && J.hasOwnProperty(D) || (d || (d = {}), d[D] = "");
            for (D in J) J.hasOwnProperty(D) && K[D] !== J[D] && (d || (d = {}), d[D] = J[D]);
          } else d || (b || (b = []), b.push(ae, d)), d = J;
          else ae === "dangerouslySetInnerHTML" ? (J = J ? J.__html : void 0, K = K ? K.__html : void 0, J != null && K !== J && (b = b || []).push(ae, J)) : ae === "children" ? typeof J != "string" && typeof J != "number" || (b = b || []).push(ae, "" + J) : ae !== "suppressContentEditableWarning" && ae !== "suppressHydrationWarning" && (i.hasOwnProperty(ae) ? (J != null && ae === "onScroll" && Ht("scroll", s), b || K === J || (b = [])) : (b = b || []).push(ae, J));
        }
        d && (b = b || []).push("style", d);
        var ae = b;
        (o.updateQueue = ae) && (o.flags |= 4);
      }
    }, _p = function(s, o, d, v) {
      d !== v && (o.flags |= 4);
    };
    function wl(s, o) {
      if (!Kt) switch (s.tailMode) {
        case "hidden":
          o = s.tail;
          for (var d = null; o !== null; ) o.alternate !== null && (d = o), o = o.sibling;
          d === null ? s.tail = null : d.sibling = null;
          break;
        case "collapsed":
          d = s.tail;
          for (var v = null; d !== null; ) d.alternate !== null && (v = d), d = d.sibling;
          v === null ? o || s.tail === null ? s.tail = null : s.tail.sibling = null : v.sibling = null;
      }
    }
    function $n(s) {
      var o = s.alternate !== null && s.alternate.child === s.child, d = 0, v = 0;
      if (o) for (var _ = s.child; _ !== null; ) d |= _.lanes | _.childLanes, v |= _.subtreeFlags & 14680064, v |= _.flags & 14680064, _.return = s, _ = _.sibling;
      else for (_ = s.child; _ !== null; ) d |= _.lanes | _.childLanes, v |= _.subtreeFlags, v |= _.flags, _.return = s, _ = _.sibling;
      return s.subtreeFlags |= v, s.childLanes = d, o;
    }
    function f0(s, o, d) {
      var v = o.pendingProps;
      switch (ed(o), o.tag) {
        case 2:
        case 16:
        case 15:
        case 0:
        case 11:
        case 7:
        case 8:
        case 12:
        case 9:
        case 14:
          return $n(o), null;
        case 1:
          return ar(o.type) && hc(), $n(o), null;
        case 3:
          return v = o.stateNode, os(), qt(or), qt(Ln), bc(), v.pendingContext && (v.context = v.pendingContext, v.pendingContext = null), (s === null || s.child === null) && (yc(o) ? o.flags |= 4 : s === null || s.memoizedState.isDehydrated && (o.flags & 256) === 0 || (o.flags |= 1024, is !== null && (Vd(is), is = null))), kd(s, o), $n(o), null;
        case 5:
          dd(o);
          var _ = Es(Fr.current);
          if (d = o.type, s !== null && o.stateNode != null) wp(s, o, d, v, _), s.ref !== o.ref && (o.flags |= 512, o.flags |= 2097152);
          else {
            if (!v) {
              if (o.stateNode === null) throw Error(t(166));
              return $n(o), null;
            }
            if (s = Es(xs.current), yc(o)) {
              v = o.stateNode, d = o.type;
              var b = o.memoizedProps;
              switch (v[_s] = o, v[cl] = b, s = (o.mode & 1) !== 0, d) {
                case "dialog":
                  Ht("cancel", v), Ht("close", v);
                  break;
                case "iframe":
                case "object":
                case "embed":
                  Ht("load", v);
                  break;
                case "video":
                case "audio":
                  for (_ = 0; _ < ol.length; _++) Ht(ol[_], v);
                  break;
                case "source":
                  Ht("error", v);
                  break;
                case "img":
                case "image":
                case "link":
                  Ht("error", v), Ht("load", v);
                  break;
                case "details":
                  Ht("toggle", v);
                  break;
                case "input":
                  Ke(v, b), Ht("invalid", v);
                  break;
                case "select":
                  v._wrapperState = {
                    wasMultiple: !!b.multiple
                  }, Ht("invalid", v);
                  break;
                case "textarea":
                  It(v, b), Ht("invalid", v);
              }
              Zr(d, b), _ = null;
              for (var D in b) if (b.hasOwnProperty(D)) {
                var K = b[D];
                D === "children" ? typeof K == "string" ? v.textContent !== K && (b.suppressHydrationWarning !== true && uc(v.textContent, K, s), _ = [
                  "children",
                  K
                ]) : typeof K == "number" && v.textContent !== "" + K && (b.suppressHydrationWarning !== true && uc(v.textContent, K, s), _ = [
                  "children",
                  "" + K
                ]) : i.hasOwnProperty(D) && K != null && D === "onScroll" && Ht("scroll", v);
              }
              switch (d) {
                case "input":
                  Be(v), Vt(v, b, true);
                  break;
                case "textarea":
                  Be(v), on(v);
                  break;
                case "select":
                case "option":
                  break;
                default:
                  typeof b.onClick == "function" && (v.onclick = dc);
              }
              v = _, o.updateQueue = v, v !== null && (o.flags |= 4);
            } else {
              D = _.nodeType === 9 ? _ : _.ownerDocument, s === "http://www.w3.org/1999/xhtml" && (s = Dt(d)), s === "http://www.w3.org/1999/xhtml" ? d === "script" ? (s = D.createElement("div"), s.innerHTML = "<script><\/script>", s = s.removeChild(s.firstChild)) : typeof v.is == "string" ? s = D.createElement(d, {
                is: v.is
              }) : (s = D.createElement(d), d === "select" && (D = s, v.multiple ? D.multiple = true : v.size && (D.size = v.size))) : s = D.createElementNS(s, d), s[_s] = o, s[cl] = v, yp(s, o, false, false), o.stateNode = s;
              e: {
                switch (D = es(d, v), d) {
                  case "dialog":
                    Ht("cancel", s), Ht("close", s), _ = v;
                    break;
                  case "iframe":
                  case "object":
                  case "embed":
                    Ht("load", s), _ = v;
                    break;
                  case "video":
                  case "audio":
                    for (_ = 0; _ < ol.length; _++) Ht(ol[_], s);
                    _ = v;
                    break;
                  case "source":
                    Ht("error", s), _ = v;
                    break;
                  case "img":
                  case "image":
                  case "link":
                    Ht("error", s), Ht("load", s), _ = v;
                    break;
                  case "details":
                    Ht("toggle", s), _ = v;
                    break;
                  case "input":
                    Ke(s, v), _ = Ne(s, v), Ht("invalid", s);
                    break;
                  case "option":
                    _ = v;
                    break;
                  case "select":
                    s._wrapperState = {
                      wasMultiple: !!v.multiple
                    }, _ = pe({}, v, {
                      value: void 0
                    }), Ht("invalid", s);
                    break;
                  case "textarea":
                    It(s, v), _ = Pt(s, v), Ht("invalid", s);
                    break;
                  default:
                    _ = v;
                }
                Zr(d, _), K = _;
                for (b in K) if (K.hasOwnProperty(b)) {
                  var J = K[b];
                  b === "style" ? dn(s, J) : b === "dangerouslySetInnerHTML" ? (J = J ? J.__html : void 0, J != null && Xr(s, J)) : b === "children" ? typeof J == "string" ? (d !== "textarea" || J !== "") && mr(s, J) : typeof J == "number" && mr(s, "" + J) : b !== "suppressContentEditableWarning" && b !== "suppressHydrationWarning" && b !== "autoFocus" && (i.hasOwnProperty(b) ? J != null && b === "onScroll" && Ht("scroll", s) : J != null && T(s, b, J, D));
                }
                switch (d) {
                  case "input":
                    Be(s), Vt(s, v, false);
                    break;
                  case "textarea":
                    Be(s), on(s);
                    break;
                  case "option":
                    v.value != null && s.setAttribute("value", "" + ye(v.value));
                    break;
                  case "select":
                    s.multiple = !!v.multiple, b = v.value, b != null ? ut(s, !!v.multiple, b, false) : v.defaultValue != null && ut(s, !!v.multiple, v.defaultValue, true);
                    break;
                  default:
                    typeof _.onClick == "function" && (s.onclick = dc);
                }
                switch (d) {
                  case "button":
                  case "input":
                  case "select":
                  case "textarea":
                    v = !!v.autoFocus;
                    break e;
                  case "img":
                    v = true;
                    break e;
                  default:
                    v = false;
                }
              }
              v && (o.flags |= 4);
            }
            o.ref !== null && (o.flags |= 512, o.flags |= 2097152);
          }
          return $n(o), null;
        case 6:
          if (s && o.stateNode != null) _p(s, o, s.memoizedProps, v);
          else {
            if (typeof v != "string" && o.stateNode === null) throw Error(t(166));
            if (d = Es(Fr.current), Es(xs.current), yc(o)) {
              if (v = o.stateNode, d = o.memoizedProps, v[_s] = o, (b = v.nodeValue !== d) && (s = xr, s !== null)) switch (s.tag) {
                case 3:
                  uc(v.nodeValue, d, (s.mode & 1) !== 0);
                  break;
                case 5:
                  s.memoizedProps.suppressHydrationWarning !== true && uc(v.nodeValue, d, (s.mode & 1) !== 0);
              }
              b && (o.flags |= 4);
            } else v = (d.nodeType === 9 ? d : d.ownerDocument).createTextNode(v), v[_s] = o, o.stateNode = v;
          }
          return $n(o), null;
        case 13:
          if (qt(Gt), v = o.memoizedState, s === null || s.memoizedState !== null && s.memoizedState.dehydrated !== null) {
            if (Kt && Er !== null && (o.mode & 1) !== 0 && (o.flags & 128) === 0) kh(), Zo(), o.flags |= 98560, b = false;
            else if (b = yc(o), v !== null && v.dehydrated !== null) {
              if (s === null) {
                if (!b) throw Error(t(318));
                if (b = o.memoizedState, b = b !== null ? b.dehydrated : null, !b) throw Error(t(317));
                b[_s] = o;
              } else Zo(), (o.flags & 128) === 0 && (o.memoizedState = null), o.flags |= 4;
              $n(o), b = false;
            } else is !== null && (Vd(is), is = null), b = true;
            if (!b) return o.flags & 65536 ? o : null;
          }
          return (o.flags & 128) !== 0 ? (o.lanes = d, o) : (v = v !== null, v !== (s !== null && s.memoizedState !== null) && v && (o.child.flags |= 8192, (o.mode & 1) !== 0 && (s === null || (Gt.current & 1) !== 0 ? cn === 0 && (cn = 3) : qc())), o.updateQueue !== null && (o.flags |= 4), $n(o), null);
        case 4:
          return os(), kd(s, o), s === null && al(o.stateNode.containerInfo), $n(o), null;
        case 10:
          return od(o.type._context), $n(o), null;
        case 17:
          return ar(o.type) && hc(), $n(o), null;
        case 19:
          if (qt(Gt), b = o.memoizedState, b === null) return $n(o), null;
          if (v = (o.flags & 128) !== 0, D = b.rendering, D === null) if (v) wl(b, false);
          else {
            if (cn !== 0 || s !== null && (s.flags & 128) !== 0) for (s = o.child; s !== null; ) {
              if (D = pl(s), D !== null) {
                for (o.flags |= 128, wl(b, false), v = D.updateQueue, v !== null && (o.updateQueue = v, o.flags |= 4), o.subtreeFlags = 0, v = d, d = o.child; d !== null; ) b = d, s = v, b.flags &= 14680066, D = b.alternate, D === null ? (b.childLanes = 0, b.lanes = s, b.child = null, b.subtreeFlags = 0, b.memoizedProps = null, b.memoizedState = null, b.updateQueue = null, b.dependencies = null, b.stateNode = null) : (b.childLanes = D.childLanes, b.lanes = D.lanes, b.child = D.child, b.subtreeFlags = 0, b.deletions = null, b.memoizedProps = D.memoizedProps, b.memoizedState = D.memoizedState, b.updateQueue = D.updateQueue, b.type = D.type, s = D.dependencies, b.dependencies = s === null ? null : {
                  lanes: s.lanes,
                  firstContext: s.firstContext
                }), d = d.sibling;
                return Bt(Gt, Gt.current & 1 | 2), o.child;
              }
              s = s.sibling;
            }
            b.tail !== null && zt() > la && (o.flags |= 128, v = true, wl(b, false), o.lanes = 4194304);
          }
          else {
            if (!v) if (s = pl(D), s !== null) {
              if (o.flags |= 128, v = true, d = s.updateQueue, d !== null && (o.updateQueue = d, o.flags |= 4), wl(b, true), b.tail === null && b.tailMode === "hidden" && !D.alternate && !Kt) return $n(o), null;
            } else 2 * zt() - b.renderingStartTime > la && d !== 1073741824 && (o.flags |= 128, v = true, wl(b, false), o.lanes = 4194304);
            b.isBackwards ? (D.sibling = o.child, o.child = D) : (d = b.last, d !== null ? d.sibling = D : o.child = D, b.last = D);
          }
          return b.tail !== null ? (o = b.tail, b.rendering = o, b.tail = o.sibling, b.renderingStartTime = zt(), o.sibling = null, d = Gt.current, Bt(Gt, v ? d & 1 | 2 : d & 1), o) : ($n(o), null);
        case 22:
        case 23:
          return Hc(), v = o.memoizedState !== null, s !== null && s.memoizedState !== null !== v && (o.flags |= 8192), v && (o.mode & 1) !== 0 ? (br & 1073741824) !== 0 && ($n(o), o.subtreeFlags & 6 && (o.flags |= 8192)) : $n(o), null;
        case 24:
          return null;
        case 25:
          return null;
      }
      throw Error(t(156, o.tag));
    }
    function h0(s, o) {
      switch (ed(o), o.tag) {
        case 1:
          return ar(o.type) && hc(), s = o.flags, s & 65536 ? (o.flags = s & -65537 | 128, o) : null;
        case 3:
          return os(), qt(or), qt(Ln), bc(), s = o.flags, (s & 65536) !== 0 && (s & 128) === 0 ? (o.flags = s & -65537 | 128, o) : null;
        case 5:
          return dd(o), null;
        case 13:
          if (qt(Gt), s = o.memoizedState, s !== null && s.dehydrated !== null) {
            if (o.alternate === null) throw Error(t(340));
            Zo();
          }
          return s = o.flags, s & 65536 ? (o.flags = s & -65537 | 128, o) : null;
        case 19:
          return qt(Gt), null;
        case 4:
          return os(), null;
        case 10:
          return od(o.type._context), null;
        case 22:
        case 23:
          return Hc(), null;
        case 24:
          return null;
        default:
          return null;
      }
    }
    var Oc = false, Vn = false, p0 = typeof WeakSet == "function" ? WeakSet : Set, ze = null;
    function oa(s, o) {
      var d = s.ref;
      if (d !== null) if (typeof d == "function") try {
        d(null);
      } catch (v) {
        Jt(s, o, v);
      }
      else d.current = null;
    }
    function Ad(s, o, d) {
      try {
        d();
      } catch (v) {
        Jt(s, o, v);
      }
    }
    var xp = false;
    function g0(s, o) {
      if (Hu = zs, s = sh(), Mu(s)) {
        if ("selectionStart" in s) var d = {
          start: s.selectionStart,
          end: s.selectionEnd
        };
        else e: {
          d = (d = s.ownerDocument) && d.defaultView || window;
          var v = d.getSelection && d.getSelection();
          if (v && v.rangeCount !== 0) {
            d = v.anchorNode;
            var _ = v.anchorOffset, b = v.focusNode;
            v = v.focusOffset;
            try {
              d.nodeType, b.nodeType;
            } catch {
              d = null;
              break e;
            }
            var D = 0, K = -1, J = -1, ae = 0, be = 0, Te = s, Ee = null;
            t: for (; ; ) {
              for (var Me; Te !== d || _ !== 0 && Te.nodeType !== 3 || (K = D + _), Te !== b || v !== 0 && Te.nodeType !== 3 || (J = D + v), Te.nodeType === 3 && (D += Te.nodeValue.length), (Me = Te.firstChild) !== null; ) Ee = Te, Te = Me;
              for (; ; ) {
                if (Te === s) break t;
                if (Ee === d && ++ae === _ && (K = D), Ee === b && ++be === v && (J = D), (Me = Te.nextSibling) !== null) break;
                Te = Ee, Ee = Te.parentNode;
              }
              Te = Me;
            }
            d = K === -1 || J === -1 ? null : {
              start: K,
              end: J
            };
          } else d = null;
        }
        d = d || {
          start: 0,
          end: 0
        };
      } else d = null;
      for (qu = {
        focusedElem: s,
        selectionRange: d
      }, zs = false, ze = o; ze !== null; ) if (o = ze, s = o.child, (o.subtreeFlags & 1028) !== 0 && s !== null) s.return = o, ze = s;
      else for (; ze !== null; ) {
        o = ze;
        try {
          var We = o.alternate;
          if ((o.flags & 1024) !== 0) switch (o.tag) {
            case 0:
            case 11:
            case 15:
              break;
            case 1:
              if (We !== null) {
                var qe = We.memoizedProps, rn = We.memoizedState, re = o.stateNode, te = re.getSnapshotBeforeUpdate(o.elementType === o.type ? qe : as(o.type, qe), rn);
                re.__reactInternalSnapshotBeforeUpdate = te;
              }
              break;
            case 3:
              var se = o.stateNode.containerInfo;
              se.nodeType === 1 ? se.textContent = "" : se.nodeType === 9 && se.documentElement && se.removeChild(se.documentElement);
              break;
            case 5:
            case 6:
            case 4:
            case 17:
              break;
            default:
              throw Error(t(163));
          }
        } catch (Ie) {
          Jt(o, o.return, Ie);
        }
        if (s = o.sibling, s !== null) {
          s.return = o.return, ze = s;
          break;
        }
        ze = o.return;
      }
      return We = xp, xp = false, We;
    }
    function _l(s, o, d) {
      var v = o.updateQueue;
      if (v = v !== null ? v.lastEffect : null, v !== null) {
        var _ = v = v.next;
        do {
          if ((_.tag & s) === s) {
            var b = _.destroy;
            _.destroy = void 0, b !== void 0 && Ad(o, d, b);
          }
          _ = _.next;
        } while (_ !== v);
      }
    }
    function Lc(s, o) {
      if (o = o.updateQueue, o = o !== null ? o.lastEffect : null, o !== null) {
        var d = o = o.next;
        do {
          if ((d.tag & s) === s) {
            var v = d.create;
            d.destroy = v();
          }
          d = d.next;
        } while (d !== o);
      }
    }
    function Rd(s) {
      var o = s.ref;
      if (o !== null) {
        var d = s.stateNode;
        switch (s.tag) {
          case 5:
            s = d;
            break;
          default:
            s = d;
        }
        typeof o == "function" ? o(s) : o.current = s;
      }
    }
    function Ep(s) {
      var o = s.alternate;
      o !== null && (s.alternate = null, Ep(o)), s.child = null, s.deletions = null, s.sibling = null, s.tag === 5 && (o = s.stateNode, o !== null && (delete o[_s], delete o[cl], delete o[Yu], delete o[Xm], delete o[Jm])), s.stateNode = null, s.return = null, s.dependencies = null, s.memoizedProps = null, s.memoizedState = null, s.pendingProps = null, s.stateNode = null, s.updateQueue = null;
    }
    function bp(s) {
      return s.tag === 5 || s.tag === 3 || s.tag === 4;
    }
    function Tp(s) {
      e: for (; ; ) {
        for (; s.sibling === null; ) {
          if (s.return === null || bp(s.return)) return null;
          s = s.return;
        }
        for (s.sibling.return = s.return, s = s.sibling; s.tag !== 5 && s.tag !== 6 && s.tag !== 18; ) {
          if (s.flags & 2 || s.child === null || s.tag === 4) continue e;
          s.child.return = s, s = s.child;
        }
        if (!(s.flags & 2)) return s.stateNode;
      }
    }
    function Nd(s, o, d) {
      var v = s.tag;
      if (v === 5 || v === 6) s = s.stateNode, o ? d.nodeType === 8 ? d.parentNode.insertBefore(s, o) : d.insertBefore(s, o) : (d.nodeType === 8 ? (o = d.parentNode, o.insertBefore(s, d)) : (o = d, o.appendChild(s)), d = d._reactRootContainer, d != null || o.onclick !== null || (o.onclick = dc));
      else if (v !== 4 && (s = s.child, s !== null)) for (Nd(s, o, d), s = s.sibling; s !== null; ) Nd(s, o, d), s = s.sibling;
    }
    function Pd(s, o, d) {
      var v = s.tag;
      if (v === 5 || v === 6) s = s.stateNode, o ? d.insertBefore(s, o) : d.appendChild(s);
      else if (v !== 4 && (s = s.child, s !== null)) for (Pd(s, o, d), s = s.sibling; s !== null; ) Pd(s, o, d), s = s.sibling;
    }
    var Cn = null, ls = false;
    function Ni(s, o, d) {
      for (d = d.child; d !== null; ) Cp(s, o, d), d = d.sibling;
    }
    function Cp(s, o, d) {
      if (rr && typeof rr.onCommitFiberUnmount == "function") try {
        rr.onCommitFiberUnmount(hi, d);
      } catch {
      }
      switch (d.tag) {
        case 5:
          Vn || oa(d, o);
        case 6:
          var v = Cn, _ = ls;
          Cn = null, Ni(s, o, d), Cn = v, ls = _, Cn !== null && (ls ? (s = Cn, d = d.stateNode, s.nodeType === 8 ? s.parentNode.removeChild(d) : s.removeChild(d)) : Cn.removeChild(d.stateNode));
          break;
        case 18:
          Cn !== null && (ls ? (s = Cn, d = d.stateNode, s.nodeType === 8 ? Qu(s.parentNode, d) : s.nodeType === 1 && Qu(s, d), jr(s)) : Qu(Cn, d.stateNode));
          break;
        case 4:
          v = Cn, _ = ls, Cn = d.stateNode.containerInfo, ls = true, Ni(s, o, d), Cn = v, ls = _;
          break;
        case 0:
        case 11:
        case 14:
        case 15:
          if (!Vn && (v = d.updateQueue, v !== null && (v = v.lastEffect, v !== null))) {
            _ = v = v.next;
            do {
              var b = _, D = b.destroy;
              b = b.tag, D !== void 0 && ((b & 2) !== 0 || (b & 4) !== 0) && Ad(d, o, D), _ = _.next;
            } while (_ !== v);
          }
          Ni(s, o, d);
          break;
        case 1:
          if (!Vn && (oa(d, o), v = d.stateNode, typeof v.componentWillUnmount == "function")) try {
            v.props = d.memoizedProps, v.state = d.memoizedState, v.componentWillUnmount();
          } catch (K) {
            Jt(d, o, K);
          }
          Ni(s, o, d);
          break;
        case 21:
          Ni(s, o, d);
          break;
        case 22:
          d.mode & 1 ? (Vn = (v = Vn) || d.memoizedState !== null, Ni(s, o, d), Vn = v) : Ni(s, o, d);
          break;
        default:
          Ni(s, o, d);
      }
    }
    function Sp(s) {
      var o = s.updateQueue;
      if (o !== null) {
        s.updateQueue = null;
        var d = s.stateNode;
        d === null && (d = s.stateNode = new p0()), o.forEach(function(v) {
          var _ = b0.bind(null, s, v);
          d.has(v) || (d.add(v), v.then(_, _));
        });
      }
    }
    function cs(s, o) {
      var d = o.deletions;
      if (d !== null) for (var v = 0; v < d.length; v++) {
        var _ = d[v];
        try {
          var b = s, D = o, K = D;
          e: for (; K !== null; ) {
            switch (K.tag) {
              case 5:
                Cn = K.stateNode, ls = false;
                break e;
              case 3:
                Cn = K.stateNode.containerInfo, ls = true;
                break e;
              case 4:
                Cn = K.stateNode.containerInfo, ls = true;
                break e;
            }
            K = K.return;
          }
          if (Cn === null) throw Error(t(160));
          Cp(b, D, _), Cn = null, ls = false;
          var J = _.alternate;
          J !== null && (J.return = null), _.return = null;
        } catch (ae) {
          Jt(_, o, ae);
        }
      }
      if (o.subtreeFlags & 12854) for (o = o.child; o !== null; ) Ip(o, s), o = o.sibling;
    }
    function Ip(s, o) {
      var d = s.alternate, v = s.flags;
      switch (s.tag) {
        case 0:
        case 11:
        case 14:
        case 15:
          if (cs(o, s), Ts(s), v & 4) {
            try {
              _l(3, s, s.return), Lc(3, s);
            } catch (qe) {
              Jt(s, s.return, qe);
            }
            try {
              _l(5, s, s.return);
            } catch (qe) {
              Jt(s, s.return, qe);
            }
          }
          break;
        case 1:
          cs(o, s), Ts(s), v & 512 && d !== null && oa(d, d.return);
          break;
        case 5:
          if (cs(o, s), Ts(s), v & 512 && d !== null && oa(d, d.return), s.flags & 32) {
            var _ = s.stateNode;
            try {
              mr(_, "");
            } catch (qe) {
              Jt(s, s.return, qe);
            }
          }
          if (v & 4 && (_ = s.stateNode, _ != null)) {
            var b = s.memoizedProps, D = d !== null ? d.memoizedProps : b, K = s.type, J = s.updateQueue;
            if (s.updateQueue = null, J !== null) try {
              K === "input" && b.type === "radio" && b.name != null && at(_, b), es(K, D);
              var ae = es(K, b);
              for (D = 0; D < J.length; D += 2) {
                var be = J[D], Te = J[D + 1];
                be === "style" ? dn(_, Te) : be === "dangerouslySetInnerHTML" ? Xr(_, Te) : be === "children" ? mr(_, Te) : T(_, be, Te, ae);
              }
              switch (K) {
                case "input":
                  pt(_, b);
                  break;
                case "textarea":
                  en(_, b);
                  break;
                case "select":
                  var Ee = _._wrapperState.wasMultiple;
                  _._wrapperState.wasMultiple = !!b.multiple;
                  var Me = b.value;
                  Me != null ? ut(_, !!b.multiple, Me, false) : Ee !== !!b.multiple && (b.defaultValue != null ? ut(_, !!b.multiple, b.defaultValue, true) : ut(_, !!b.multiple, b.multiple ? [] : "", false));
              }
              _[cl] = b;
            } catch (qe) {
              Jt(s, s.return, qe);
            }
          }
          break;
        case 6:
          if (cs(o, s), Ts(s), v & 4) {
            if (s.stateNode === null) throw Error(t(162));
            _ = s.stateNode, b = s.memoizedProps;
            try {
              _.nodeValue = b;
            } catch (qe) {
              Jt(s, s.return, qe);
            }
          }
          break;
        case 3:
          if (cs(o, s), Ts(s), v & 4 && d !== null && d.memoizedState.isDehydrated) try {
            jr(o.containerInfo);
          } catch (qe) {
            Jt(s, s.return, qe);
          }
          break;
        case 4:
          cs(o, s), Ts(s);
          break;
        case 13:
          cs(o, s), Ts(s), _ = s.child, _.flags & 8192 && (b = _.memoizedState !== null, _.stateNode.isHidden = b, !b || _.alternate !== null && _.alternate.memoizedState !== null || (Od = zt())), v & 4 && Sp(s);
          break;
        case 22:
          if (be = d !== null && d.memoizedState !== null, s.mode & 1 ? (Vn = (ae = Vn) || be, cs(o, s), Vn = ae) : cs(o, s), Ts(s), v & 8192) {
            if (ae = s.memoizedState !== null, (s.stateNode.isHidden = ae) && !be && (s.mode & 1) !== 0) for (ze = s, be = s.child; be !== null; ) {
              for (Te = ze = be; ze !== null; ) {
                switch (Ee = ze, Me = Ee.child, Ee.tag) {
                  case 0:
                  case 11:
                  case 14:
                  case 15:
                    _l(4, Ee, Ee.return);
                    break;
                  case 1:
                    oa(Ee, Ee.return);
                    var We = Ee.stateNode;
                    if (typeof We.componentWillUnmount == "function") {
                      v = Ee, d = Ee.return;
                      try {
                        o = v, We.props = o.memoizedProps, We.state = o.memoizedState, We.componentWillUnmount();
                      } catch (qe) {
                        Jt(v, d, qe);
                      }
                    }
                    break;
                  case 5:
                    oa(Ee, Ee.return);
                    break;
                  case 22:
                    if (Ee.memoizedState !== null) {
                      Rp(Te);
                      continue;
                    }
                }
                Me !== null ? (Me.return = Ee, ze = Me) : Rp(Te);
              }
              be = be.sibling;
            }
            e: for (be = null, Te = s; ; ) {
              if (Te.tag === 5) {
                if (be === null) {
                  be = Te;
                  try {
                    _ = Te.stateNode, ae ? (b = _.style, typeof b.setProperty == "function" ? b.setProperty("display", "none", "important") : b.display = "none") : (K = Te.stateNode, J = Te.memoizedProps.style, D = J != null && J.hasOwnProperty("display") ? J.display : null, K.style.display = Jr("display", D));
                  } catch (qe) {
                    Jt(s, s.return, qe);
                  }
                }
              } else if (Te.tag === 6) {
                if (be === null) try {
                  Te.stateNode.nodeValue = ae ? "" : Te.memoizedProps;
                } catch (qe) {
                  Jt(s, s.return, qe);
                }
              } else if ((Te.tag !== 22 && Te.tag !== 23 || Te.memoizedState === null || Te === s) && Te.child !== null) {
                Te.child.return = Te, Te = Te.child;
                continue;
              }
              if (Te === s) break e;
              for (; Te.sibling === null; ) {
                if (Te.return === null || Te.return === s) break e;
                be === Te && (be = null), Te = Te.return;
              }
              be === Te && (be = null), Te.sibling.return = Te.return, Te = Te.sibling;
            }
          }
          break;
        case 19:
          cs(o, s), Ts(s), v & 4 && Sp(s);
          break;
        case 21:
          break;
        default:
          cs(o, s), Ts(s);
      }
    }
    function Ts(s) {
      var o = s.flags;
      if (o & 2) {
        try {
          e: {
            for (var d = s.return; d !== null; ) {
              if (bp(d)) {
                var v = d;
                break e;
              }
              d = d.return;
            }
            throw Error(t(160));
          }
          switch (v.tag) {
            case 5:
              var _ = v.stateNode;
              v.flags & 32 && (mr(_, ""), v.flags &= -33);
              var b = Tp(s);
              Pd(s, b, _);
              break;
            case 3:
            case 4:
              var D = v.stateNode.containerInfo, K = Tp(s);
              Nd(s, K, D);
              break;
            default:
              throw Error(t(161));
          }
        } catch (J) {
          Jt(s, s.return, J);
        }
        s.flags &= -3;
      }
      o & 4096 && (s.flags &= -4097);
    }
    function m0(s, o, d) {
      ze = s, kp(s);
    }
    function kp(s, o, d) {
      for (var v = (s.mode & 1) !== 0; ze !== null; ) {
        var _ = ze, b = _.child;
        if (_.tag === 22 && v) {
          var D = _.memoizedState !== null || Oc;
          if (!D) {
            var K = _.alternate, J = K !== null && K.memoizedState !== null || Vn;
            K = Oc;
            var ae = Vn;
            if (Oc = D, (Vn = J) && !ae) for (ze = _; ze !== null; ) D = ze, J = D.child, D.tag === 22 && D.memoizedState !== null ? Np(_) : J !== null ? (J.return = D, ze = J) : Np(_);
            for (; b !== null; ) ze = b, kp(b), b = b.sibling;
            ze = _, Oc = K, Vn = ae;
          }
          Ap(s);
        } else (_.subtreeFlags & 8772) !== 0 && b !== null ? (b.return = _, ze = b) : Ap(s);
      }
    }
    function Ap(s) {
      for (; ze !== null; ) {
        var o = ze;
        if ((o.flags & 8772) !== 0) {
          var d = o.alternate;
          try {
            if ((o.flags & 8772) !== 0) switch (o.tag) {
              case 0:
              case 11:
              case 15:
                Vn || Lc(5, o);
                break;
              case 1:
                var v = o.stateNode;
                if (o.flags & 4 && !Vn) if (d === null) v.componentDidMount();
                else {
                  var _ = o.elementType === o.type ? d.memoizedProps : as(o.type, d.memoizedProps);
                  v.componentDidUpdate(_, d.memoizedState, v.__reactInternalSnapshotBeforeUpdate);
                }
                var b = o.updateQueue;
                b !== null && ud(o, b, v);
                break;
              case 3:
                var D = o.updateQueue;
                if (D !== null) {
                  if (d = null, o.child !== null) switch (o.child.tag) {
                    case 5:
                      d = o.child.stateNode;
                      break;
                    case 1:
                      d = o.child.stateNode;
                  }
                  ud(o, D, d);
                }
                break;
              case 5:
                var K = o.stateNode;
                if (d === null && o.flags & 4) {
                  d = K;
                  var J = o.memoizedProps;
                  switch (o.type) {
                    case "button":
                    case "input":
                    case "select":
                    case "textarea":
                      J.autoFocus && d.focus();
                      break;
                    case "img":
                      J.src && (d.src = J.src);
                  }
                }
                break;
              case 6:
                break;
              case 4:
                break;
              case 12:
                break;
              case 13:
                if (o.memoizedState === null) {
                  var ae = o.alternate;
                  if (ae !== null) {
                    var be = ae.memoizedState;
                    if (be !== null) {
                      var Te = be.dehydrated;
                      Te !== null && jr(Te);
                    }
                  }
                }
                break;
              case 19:
              case 17:
              case 21:
              case 22:
              case 23:
              case 25:
                break;
              default:
                throw Error(t(163));
            }
            Vn || o.flags & 512 && Rd(o);
          } catch (Ee) {
            Jt(o, o.return, Ee);
          }
        }
        if (o === s) {
          ze = null;
          break;
        }
        if (d = o.sibling, d !== null) {
          d.return = o.return, ze = d;
          break;
        }
        ze = o.return;
      }
    }
    function Rp(s) {
      for (; ze !== null; ) {
        var o = ze;
        if (o === s) {
          ze = null;
          break;
        }
        var d = o.sibling;
        if (d !== null) {
          d.return = o.return, ze = d;
          break;
        }
        ze = o.return;
      }
    }
    function Np(s) {
      for (; ze !== null; ) {
        var o = ze;
        try {
          switch (o.tag) {
            case 0:
            case 11:
            case 15:
              var d = o.return;
              try {
                Lc(4, o);
              } catch (J) {
                Jt(o, d, J);
              }
              break;
            case 1:
              var v = o.stateNode;
              if (typeof v.componentDidMount == "function") {
                var _ = o.return;
                try {
                  v.componentDidMount();
                } catch (J) {
                  Jt(o, _, J);
                }
              }
              var b = o.return;
              try {
                Rd(o);
              } catch (J) {
                Jt(o, b, J);
              }
              break;
            case 5:
              var D = o.return;
              try {
                Rd(o);
              } catch (J) {
                Jt(o, D, J);
              }
          }
        } catch (J) {
          Jt(o, o.return, J);
        }
        if (o === s) {
          ze = null;
          break;
        }
        var K = o.sibling;
        if (K !== null) {
          K.return = o.return, ze = K;
          break;
        }
        ze = o.return;
      }
    }
    var v0 = Math.ceil, Mc = Y.ReactCurrentDispatcher, Dd = Y.ReactCurrentOwner, Ur = Y.ReactCurrentBatchConfig, St = 0, vn = null, ln = null, Sn = 0, br = 0, aa = Ci(0), cn = 0, xl = null, uo = 0, $c = 0, jd = 0, El = null, cr = null, Od = 0, la = 1 / 0, Zs = null, Vc = false, Ld = null, Pi = null, Fc = false, Di = null, zc = 0, bl = 0, Md = null, Uc = -1, Bc = 0;
    function Qn() {
      return (St & 6) !== 0 ? zt() : Uc !== -1 ? Uc : Uc = zt();
    }
    function ji(s) {
      return (s.mode & 1) === 0 ? 1 : (St & 2) !== 0 && Sn !== 0 ? Sn & -Sn : e0.transition !== null ? (Bc === 0 && (Bc = gi()), Bc) : (s = yt, s !== 0 || (s = window.event, s = s === void 0 ? 16 : vs(s.type)), s);
    }
    function us(s, o, d, v) {
      if (50 < bl) throw bl = 0, Md = null, Error(t(185));
      Ms(s, d, v), ((St & 2) === 0 || s !== vn) && (s === vn && ((St & 2) === 0 && ($c |= d), cn === 4 && ei(s, Sn)), Yn(s, v), d === 1 && St === 0 && (o.mode & 1) === 0 && (la = zt() + 500, gc && Ii()));
    }
    function Yn(s, o) {
      var d = s.callbackNode;
      ps(s, o);
      var v = pi(s, s === vn ? Sn : 0);
      if (v === 0) d !== null && jo(d), s.callbackNode = null, s.callbackPriority = 0;
      else if (o = v & -v, s.callbackPriority !== o) {
        if (d != null && jo(d), o === 1) s.tag === 0 ? Zm(Dp.bind(null, s)) : bh(Dp.bind(null, s)), Qm(function() {
          (St & 6) === 0 && Ii();
        }), d = null;
        else {
          switch (Vs(v)) {
            case 1:
              d = fi;
              break;
            case 4:
              d = js;
              break;
            case 16:
              d = vr;
              break;
            case 536870912:
              d = Ua;
              break;
            default:
              d = vr;
          }
          d = Fp(d, Pp.bind(null, s));
        }
        s.callbackPriority = o, s.callbackNode = d;
      }
    }
    function Pp(s, o) {
      if (Uc = -1, Bc = 0, (St & 6) !== 0) throw Error(t(327));
      var d = s.callbackNode;
      if (ca() && s.callbackNode !== d) return null;
      var v = pi(s, s === vn ? Sn : 0);
      if (v === 0) return null;
      if ((v & 30) !== 0 || (v & s.expiredLanes) !== 0 || o) o = Kc(s, v);
      else {
        o = v;
        var _ = St;
        St |= 2;
        var b = jp();
        (vn !== s || Sn !== o) && (Zs = null, la = zt() + 500, ho(s, o));
        do
          try {
            w0();
            break;
          } catch (K) {
            Fd(s, K);
          }
        while (true);
        id(), Mc.current = b, St = _, ln !== null ? o = 0 : (vn = null, Sn = 0, o = cn);
      }
      if (o !== 0) {
        if (o === 2 && (_ = sr(s), _ !== 0 && (v = _, o = $d(s, _))), o === 1) throw d = xl, ho(s, 0), ei(s, v), Yn(s, zt()), d;
        if (o === 6) ei(s, v);
        else {
          if (_ = s.current.alternate, (v & 30) === 0 && !y0(_) && (o = Kc(s, v), o === 2 && (b = sr(s), b !== 0 && (v = b, o = $d(s, b))), o === 1)) throw d = xl, ho(s, 0), ei(s, v), Yn(s, zt()), d;
          switch (s.finishedWork = _, s.finishedLanes = v, o) {
            case 0:
            case 1:
              throw Error(t(345));
            case 2:
              po(s, cr, Zs);
              break;
            case 3:
              if (ei(s, v), (v & 130023424) === v && (o = Od + 500 - zt(), 10 < o)) {
                if (pi(s, 0) !== 0) break;
                if (_ = s.suspendedLanes, (_ & v) !== v) {
                  Qn(), s.pingedLanes |= s.suspendedLanes & _;
                  break;
                }
                s.timeoutHandle = Gu(po.bind(null, s, cr, Zs), o);
                break;
              }
              po(s, cr, Zs);
              break;
            case 4:
              if (ei(s, v), (v & 4194240) === v) break;
              for (o = s.eventTimes, _ = -1; 0 < v; ) {
                var D = 31 - jn(v);
                b = 1 << D, D = o[D], D > _ && (_ = D), v &= ~b;
              }
              if (v = _, v = zt() - v, v = (120 > v ? 120 : 480 > v ? 480 : 1080 > v ? 1080 : 1920 > v ? 1920 : 3e3 > v ? 3e3 : 4320 > v ? 4320 : 1960 * v0(v / 1960)) - v, 10 < v) {
                s.timeoutHandle = Gu(po.bind(null, s, cr, Zs), v);
                break;
              }
              po(s, cr, Zs);
              break;
            case 5:
              po(s, cr, Zs);
              break;
            default:
              throw Error(t(329));
          }
        }
      }
      return Yn(s, zt()), s.callbackNode === d ? Pp.bind(null, s) : null;
    }
    function $d(s, o) {
      var d = El;
      return s.current.memoizedState.isDehydrated && (ho(s, o).flags |= 256), s = Kc(s, o), s !== 2 && (o = cr, cr = d, o !== null && Vd(o)), s;
    }
    function Vd(s) {
      cr === null ? cr = s : cr.push.apply(cr, s);
    }
    function y0(s) {
      for (var o = s; ; ) {
        if (o.flags & 16384) {
          var d = o.updateQueue;
          if (d !== null && (d = d.stores, d !== null)) for (var v = 0; v < d.length; v++) {
            var _ = d[v], b = _.getSnapshot;
            _ = _.value;
            try {
              if (!Lr(b(), _)) return false;
            } catch {
              return false;
            }
          }
        }
        if (d = o.child, o.subtreeFlags & 16384 && d !== null) d.return = o, o = d;
        else {
          if (o === s) break;
          for (; o.sibling === null; ) {
            if (o.return === null || o.return === s) return true;
            o = o.return;
          }
          o.sibling.return = o.return, o = o.sibling;
        }
      }
      return true;
    }
    function ei(s, o) {
      for (o &= ~jd, o &= ~$c, s.suspendedLanes |= o, s.pingedLanes &= ~o, s = s.expirationTimes; 0 < o; ) {
        var d = 31 - jn(o), v = 1 << d;
        s[d] = -1, o &= ~v;
      }
    }
    function Dp(s) {
      if ((St & 6) !== 0) throw Error(t(327));
      ca();
      var o = pi(s, 0);
      if ((o & 1) === 0) return Yn(s, zt()), null;
      var d = Kc(s, o);
      if (s.tag !== 0 && d === 2) {
        var v = sr(s);
        v !== 0 && (o = v, d = $d(s, v));
      }
      if (d === 1) throw d = xl, ho(s, 0), ei(s, o), Yn(s, zt()), d;
      if (d === 6) throw Error(t(345));
      return s.finishedWork = s.current.alternate, s.finishedLanes = o, po(s, cr, Zs), Yn(s, zt()), null;
    }
    function Wc(s, o) {
      var d = St;
      St |= 1;
      try {
        return s(o);
      } finally {
        St = d, St === 0 && (la = zt() + 500, gc && Ii());
      }
    }
    function fo(s) {
      Di !== null && Di.tag === 0 && (St & 6) === 0 && ca();
      var o = St;
      St |= 1;
      var d = Ur.transition, v = yt;
      try {
        if (Ur.transition = null, yt = 1, s) return s();
      } finally {
        yt = v, Ur.transition = d, St = o, (St & 6) === 0 && Ii();
      }
    }
    function Hc() {
      br = aa.current, qt(aa);
    }
    function ho(s, o) {
      s.finishedWork = null, s.finishedLanes = 0;
      var d = s.timeoutHandle;
      if (d !== -1 && (s.timeoutHandle = -1, Gm(d)), ln !== null) for (d = ln.return; d !== null; ) {
        var v = d;
        switch (ed(v), v.tag) {
          case 1:
            v = v.type.childContextTypes, v != null && hc();
            break;
          case 3:
            os(), qt(or), qt(Ln), bc();
            break;
          case 5:
            dd(v);
            break;
          case 4:
            os();
            break;
          case 13:
            qt(Gt);
            break;
          case 19:
            qt(Gt);
            break;
          case 10:
            od(v.type._context);
            break;
          case 22:
          case 23:
            Hc();
        }
        d = d.return;
      }
      if (vn = s, ln = s = Oi(s.current, null), Sn = br = o, cn = 0, xl = null, jd = $c = uo = 0, cr = El = null, oo !== null) {
        for (o = 0; o < oo.length; o++) if (d = oo[o], v = d.interleaved, v !== null) {
          d.interleaved = null;
          var _ = v.next, b = d.pending;
          if (b !== null) {
            var D = b.next;
            b.next = _, v.next = D;
          }
          d.pending = v;
        }
        oo = null;
      }
      return s;
    }
    function Fd(s, o) {
      do {
        var d = ln;
        try {
          if (id(), Tc.current = Nc, Cc) {
            for (var v = Yt.memoizedState; v !== null; ) {
              var _ = v.queue;
              _ !== null && (_.pending = null), v = v.next;
            }
            Cc = false;
          }
          if (lo = 0, mn = nn = Yt = null, co = false, ml = 0, Dd.current = null, d === null || d.return === null) {
            cn = 1, xl = o, ln = null;
            break;
          }
          e: {
            var b = s, D = d.return, K = d, J = o;
            if (o = Sn, K.flags |= 32768, J !== null && typeof J == "object" && typeof J.then == "function") {
              var ae = J, be = K, Te = be.tag;
              if ((be.mode & 1) === 0 && (Te === 0 || Te === 11 || Te === 15)) {
                var Ee = be.alternate;
                Ee ? (be.updateQueue = Ee.updateQueue, be.memoizedState = Ee.memoizedState, be.lanes = Ee.lanes) : (be.updateQueue = null, be.memoizedState = null);
              }
              var Me = op(D);
              if (Me !== null) {
                Me.flags &= -257, ap(Me, D, K, b, o), Me.mode & 1 && ip(b, ae, o), o = Me, J = ae;
                var We = o.updateQueue;
                if (We === null) {
                  var qe = /* @__PURE__ */ new Set();
                  qe.add(J), o.updateQueue = qe;
                } else We.add(J);
                break e;
              } else {
                if ((o & 1) === 0) {
                  ip(b, ae, o), qc();
                  break e;
                }
                J = Error(t(426));
              }
            } else if (Kt && K.mode & 1) {
              var rn = op(D);
              if (rn !== null) {
                (rn.flags & 65536) === 0 && (rn.flags |= 256), ap(rn, D, K, b, o), rd(ia(J, K));
                break e;
              }
            }
            b = J = ia(J, K), cn !== 4 && (cn = 2), El === null ? El = [
              b
            ] : El.push(b), b = D;
            do {
              switch (b.tag) {
                case 3:
                  b.flags |= 65536, o &= -o, b.lanes |= o;
                  var re = rp(b, J, o);
                  ao(b, re);
                  break e;
                case 1:
                  K = J;
                  var te = b.type, se = b.stateNode;
                  if ((b.flags & 128) === 0 && (typeof te.getDerivedStateFromError == "function" || se !== null && typeof se.componentDidCatch == "function" && (Pi === null || !Pi.has(se)))) {
                    b.flags |= 65536, o &= -o, b.lanes |= o;
                    var Ie = sp(b, K, o);
                    ao(b, Ie);
                    break e;
                  }
              }
              b = b.return;
            } while (b !== null);
          }
          Lp(d);
        } catch (Qe) {
          o = Qe, ln === d && d !== null && (ln = d = d.return);
          continue;
        }
        break;
      } while (true);
    }
    function jp() {
      var s = Mc.current;
      return Mc.current = Nc, s === null ? Nc : s;
    }
    function qc() {
      (cn === 0 || cn === 3 || cn === 2) && (cn = 4), vn === null || (uo & 268435455) === 0 && ($c & 268435455) === 0 || ei(vn, Sn);
    }
    function Kc(s, o) {
      var d = St;
      St |= 2;
      var v = jp();
      (vn !== s || Sn !== o) && (Zs = null, ho(s, o));
      do
        try {
          Op();
          break;
        } catch (_) {
          Fd(s, _);
        }
      while (true);
      if (id(), St = d, Mc.current = v, ln !== null) throw Error(t(261));
      return vn = null, Sn = 0, cn;
    }
    function Op() {
      for (; ln !== null; ) zd(ln);
    }
    function w0() {
      for (; ln !== null && !Fa(); ) zd(ln);
    }
    function zd(s) {
      var o = Vp(s.alternate, s, br);
      s.memoizedProps = s.pendingProps, o === null ? Lp(s) : ln = o, Dd.current = null;
    }
    function Lp(s) {
      var o = s;
      do {
        var d = o.alternate;
        if (s = o.return, (o.flags & 32768) === 0) {
          if (d = f0(d, o, br), d !== null) {
            ln = d;
            return;
          }
        } else {
          if (d = h0(d, o), d !== null) {
            d.flags &= 32767, ln = d;
            return;
          }
          if (s !== null) s.flags |= 32768, s.subtreeFlags = 0, s.deletions = null;
          else {
            cn = 6, ln = null;
            return;
          }
        }
        if (o = o.sibling, o !== null) {
          ln = o;
          return;
        }
        ln = o = s;
      } while (o !== null);
      cn === 0 && (cn = 5);
    }
    function po(s, o, d) {
      var v = yt, _ = Ur.transition;
      try {
        Ur.transition = null, yt = 1, _0(s, o, d, v);
      } finally {
        Ur.transition = _, yt = v;
      }
      return null;
    }
    function _0(s, o, d, v) {
      do
        ca();
      while (Di !== null);
      if ((St & 6) !== 0) throw Error(t(327));
      d = s.finishedWork;
      var _ = s.finishedLanes;
      if (d === null) return null;
      if (s.finishedWork = null, s.finishedLanes = 0, d === s.current) throw Error(t(177));
      s.callbackNode = null, s.callbackPriority = 0;
      var b = d.lanes | d.childLanes;
      if (Lt(s, b), s === vn && (ln = vn = null, Sn = 0), (d.subtreeFlags & 2064) === 0 && (d.flags & 2064) === 0 || Fc || (Fc = true, Fp(vr, function() {
        return ca(), null;
      })), b = (d.flags & 15990) !== 0, (d.subtreeFlags & 15990) !== 0 || b) {
        b = Ur.transition, Ur.transition = null;
        var D = yt;
        yt = 1;
        var K = St;
        St |= 4, Dd.current = null, g0(s, d), Ip(d, s), zm(qu), zs = !!Hu, qu = Hu = null, s.current = d, m0(d), Gl(), St = K, yt = D, Ur.transition = b;
      } else s.current = d;
      if (Fc && (Fc = false, Di = s, zc = _), b = s.pendingLanes, b === 0 && (Pi = null), Ba(d.stateNode), Yn(s, zt()), o !== null) for (v = s.onRecoverableError, d = 0; d < o.length; d++) _ = o[d], v(_.value, {
        componentStack: _.stack,
        digest: _.digest
      });
      if (Vc) throw Vc = false, s = Ld, Ld = null, s;
      return (zc & 1) !== 0 && s.tag !== 0 && ca(), b = s.pendingLanes, (b & 1) !== 0 ? s === Md ? bl++ : (bl = 0, Md = s) : bl = 0, Ii(), null;
    }
    function ca() {
      if (Di !== null) {
        var s = Vs(zc), o = Ur.transition, d = yt;
        try {
          if (Ur.transition = null, yt = 16 > s ? 16 : s, Di === null) var v = false;
          else {
            if (s = Di, Di = null, zc = 0, (St & 6) !== 0) throw Error(t(331));
            var _ = St;
            for (St |= 4, ze = s.current; ze !== null; ) {
              var b = ze, D = b.child;
              if ((ze.flags & 16) !== 0) {
                var K = b.deletions;
                if (K !== null) {
                  for (var J = 0; J < K.length; J++) {
                    var ae = K[J];
                    for (ze = ae; ze !== null; ) {
                      var be = ze;
                      switch (be.tag) {
                        case 0:
                        case 11:
                        case 15:
                          _l(8, be, b);
                      }
                      var Te = be.child;
                      if (Te !== null) Te.return = be, ze = Te;
                      else for (; ze !== null; ) {
                        be = ze;
                        var Ee = be.sibling, Me = be.return;
                        if (Ep(be), be === ae) {
                          ze = null;
                          break;
                        }
                        if (Ee !== null) {
                          Ee.return = Me, ze = Ee;
                          break;
                        }
                        ze = Me;
                      }
                    }
                  }
                  var We = b.alternate;
                  if (We !== null) {
                    var qe = We.child;
                    if (qe !== null) {
                      We.child = null;
                      do {
                        var rn = qe.sibling;
                        qe.sibling = null, qe = rn;
                      } while (qe !== null);
                    }
                  }
                  ze = b;
                }
              }
              if ((b.subtreeFlags & 2064) !== 0 && D !== null) D.return = b, ze = D;
              else e: for (; ze !== null; ) {
                if (b = ze, (b.flags & 2048) !== 0) switch (b.tag) {
                  case 0:
                  case 11:
                  case 15:
                    _l(9, b, b.return);
                }
                var re = b.sibling;
                if (re !== null) {
                  re.return = b.return, ze = re;
                  break e;
                }
                ze = b.return;
              }
            }
            var te = s.current;
            for (ze = te; ze !== null; ) {
              D = ze;
              var se = D.child;
              if ((D.subtreeFlags & 2064) !== 0 && se !== null) se.return = D, ze = se;
              else e: for (D = te; ze !== null; ) {
                if (K = ze, (K.flags & 2048) !== 0) try {
                  switch (K.tag) {
                    case 0:
                    case 11:
                    case 15:
                      Lc(9, K);
                  }
                } catch (Qe) {
                  Jt(K, K.return, Qe);
                }
                if (K === D) {
                  ze = null;
                  break e;
                }
                var Ie = K.sibling;
                if (Ie !== null) {
                  Ie.return = K.return, ze = Ie;
                  break e;
                }
                ze = K.return;
              }
            }
            if (St = _, Ii(), rr && typeof rr.onPostCommitFiberRoot == "function") try {
              rr.onPostCommitFiberRoot(hi, s);
            } catch {
            }
            v = true;
          }
          return v;
        } finally {
          yt = d, Ur.transition = o;
        }
      }
      return false;
    }
    function Mp(s, o, d) {
      o = ia(d, o), o = rp(s, o, 1), s = Ai(s, o, 1), o = Qn(), s !== null && (Ms(s, 1, o), Yn(s, o));
    }
    function Jt(s, o, d) {
      if (s.tag === 3) Mp(s, s, d);
      else for (; o !== null; ) {
        if (o.tag === 3) {
          Mp(o, s, d);
          break;
        } else if (o.tag === 1) {
          var v = o.stateNode;
          if (typeof o.type.getDerivedStateFromError == "function" || typeof v.componentDidCatch == "function" && (Pi === null || !Pi.has(v))) {
            s = ia(d, s), s = sp(o, s, 1), o = Ai(o, s, 1), s = Qn(), o !== null && (Ms(o, 1, s), Yn(o, s));
            break;
          }
        }
        o = o.return;
      }
    }
    function x0(s, o, d) {
      var v = s.pingCache;
      v !== null && v.delete(o), o = Qn(), s.pingedLanes |= s.suspendedLanes & d, vn === s && (Sn & d) === d && (cn === 4 || cn === 3 && (Sn & 130023424) === Sn && 500 > zt() - Od ? ho(s, 0) : jd |= d), Yn(s, o);
    }
    function $p(s, o) {
      o === 0 && ((s.mode & 1) === 0 ? o = 1 : (o = Gi, Gi <<= 1, (Gi & 130023424) === 0 && (Gi = 4194304)));
      var d = Qn();
      s = Ys(s, o), s !== null && (Ms(s, o, d), Yn(s, d));
    }
    function E0(s) {
      var o = s.memoizedState, d = 0;
      o !== null && (d = o.retryLane), $p(s, d);
    }
    function b0(s, o) {
      var d = 0;
      switch (s.tag) {
        case 13:
          var v = s.stateNode, _ = s.memoizedState;
          _ !== null && (d = _.retryLane);
          break;
        case 19:
          v = s.stateNode;
          break;
        default:
          throw Error(t(314));
      }
      v !== null && v.delete(o), $p(s, d);
    }
    var Vp;
    Vp = function(s, o, d) {
      if (s !== null) if (s.memoizedProps !== o.pendingProps || or.current) lr = true;
      else {
        if ((s.lanes & d) === 0 && (o.flags & 128) === 0) return lr = false, d0(s, o, d);
        lr = (s.flags & 131072) !== 0;
      }
      else lr = false, Kt && (o.flags & 1048576) !== 0 && Th(o, vc, o.index);
      switch (o.lanes = 0, o.tag) {
        case 2:
          var v = o.type;
          jc(s, o), s = o.pendingProps;
          var _ = Yo(o, Ln.current);
          na(o, d), _ = Ic(null, o, v, s, _, d);
          var b = sa();
          return o.flags |= 1, typeof _ == "object" && _ !== null && typeof _.render == "function" && _.$$typeof === void 0 ? (o.tag = 1, o.memoizedState = null, o.updateQueue = null, ar(v) ? (b = true, pc(o)) : b = false, o.memoizedState = _.state !== null && _.state !== void 0 ? _.state : null, cd(o), _.updater = Pc, o.stateNode = _, _._reactInternals = o, yd(o, v, s, d), o = bd(null, o, v, true, b, d)) : (o.tag = 0, Kt && b && Zu(o), Mn(null, o, _, d), o = o.child), o;
        case 16:
          v = o.elementType;
          e: {
            switch (jc(s, o), s = o.pendingProps, _ = v._init, v = _(v._payload), o.type = v, _ = o.tag = C0(v), s = as(v, s), _) {
              case 0:
                o = Ed(null, o, v, s, d);
                break e;
              case 1:
                o = fp(null, o, v, s, d);
                break e;
              case 11:
                o = lp(null, o, v, s, d);
                break e;
              case 14:
                o = cp(null, o, v, as(v.type, s), d);
                break e;
            }
            throw Error(t(306, v, ""));
          }
          return o;
        case 0:
          return v = o.type, _ = o.pendingProps, _ = o.elementType === v ? _ : as(v, _), Ed(s, o, v, _, d);
        case 1:
          return v = o.type, _ = o.pendingProps, _ = o.elementType === v ? _ : as(v, _), fp(s, o, v, _, d);
        case 3:
          e: {
            if (hp(o), s === null) throw Error(t(387));
            v = o.pendingProps, b = o.memoizedState, _ = b.element, Dh(s, o), hl(o, v, null, d);
            var D = o.memoizedState;
            if (v = D.element, b.isDehydrated) if (b = {
              element: v,
              isDehydrated: false,
              cache: D.cache,
              pendingSuspenseBoundaries: D.pendingSuspenseBoundaries,
              transitions: D.transitions
            }, o.updateQueue.baseState = b, o.memoizedState = b, o.flags & 256) {
              _ = ia(Error(t(423)), o), o = pp(s, o, v, d, _);
              break e;
            } else if (v !== _) {
              _ = ia(Error(t(424)), o), o = pp(s, o, v, d, _);
              break e;
            } else for (Er = Ti(o.stateNode.containerInfo.firstChild), xr = o, Kt = true, is = null, d = Nh(o, null, v, d), o.child = d; d; ) d.flags = d.flags & -3 | 4096, d = d.sibling;
            else {
              if (Zo(), v === _) {
                o = Js(s, o, d);
                break e;
              }
              Mn(s, o, v, d);
            }
            o = o.child;
          }
          return o;
        case 5:
          return Ec(o), s === null && nd(o), v = o.type, _ = o.pendingProps, b = s !== null ? s.memoizedProps : null, D = _.children, Ku(v, _) ? D = null : b !== null && Ku(v, b) && (o.flags |= 32), dp(s, o), Mn(s, o, D, d), o.child;
        case 6:
          return s === null && nd(o), null;
        case 13:
          return gp(s, o, d);
        case 4:
          return Gn(o, o.stateNode.containerInfo), v = o.pendingProps, s === null ? o.child = ea(o, null, v, d) : Mn(s, o, v, d), o.child;
        case 11:
          return v = o.type, _ = o.pendingProps, _ = o.elementType === v ? _ : as(v, _), lp(s, o, v, _, d);
        case 7:
          return Mn(s, o, o.pendingProps, d), o.child;
        case 8:
          return Mn(s, o, o.pendingProps.children, d), o.child;
        case 12:
          return Mn(s, o, o.pendingProps.children, d), o.child;
        case 10:
          e: {
            if (v = o.type._context, _ = o.pendingProps, b = o.memoizedProps, D = _.value, Bt(_c, v._currentValue), v._currentValue = D, b !== null) if (Lr(b.value, D)) {
              if (b.children === _.children && !or.current) {
                o = Js(s, o, d);
                break e;
              }
            } else for (b = o.child, b !== null && (b.return = o); b !== null; ) {
              var K = b.dependencies;
              if (K !== null) {
                D = b.child;
                for (var J = K.firstContext; J !== null; ) {
                  if (J.context === v) {
                    if (b.tag === 1) {
                      J = Xs(-1, d & -d), J.tag = 2;
                      var ae = b.updateQueue;
                      if (ae !== null) {
                        ae = ae.shared;
                        var be = ae.pending;
                        be === null ? J.next = J : (J.next = be.next, be.next = J), ae.pending = J;
                      }
                    }
                    b.lanes |= d, J = b.alternate, J !== null && (J.lanes |= d), ad(b.return, d, o), K.lanes |= d;
                    break;
                  }
                  J = J.next;
                }
              } else if (b.tag === 10) D = b.type === o.type ? null : b.child;
              else if (b.tag === 18) {
                if (D = b.return, D === null) throw Error(t(341));
                D.lanes |= d, K = D.alternate, K !== null && (K.lanes |= d), ad(D, d, o), D = b.sibling;
              } else D = b.child;
              if (D !== null) D.return = b;
              else for (D = b; D !== null; ) {
                if (D === o) {
                  D = null;
                  break;
                }
                if (b = D.sibling, b !== null) {
                  b.return = D.return, D = b;
                  break;
                }
                D = D.return;
              }
              b = D;
            }
            Mn(s, o, _.children, d), o = o.child;
          }
          return o;
        case 9:
          return _ = o.type, v = o.pendingProps.children, na(o, d), _ = Vr(_), v = v(_), o.flags |= 1, Mn(s, o, v, d), o.child;
        case 14:
          return v = o.type, _ = as(v, o.pendingProps), _ = as(v.type, _), cp(s, o, v, _, d);
        case 15:
          return up(s, o, o.type, o.pendingProps, d);
        case 17:
          return v = o.type, _ = o.pendingProps, _ = o.elementType === v ? _ : as(v, _), jc(s, o), o.tag = 1, ar(v) ? (s = true, pc(o)) : s = false, na(o, d), tp(o, v, _), yd(o, v, _, d), bd(null, o, v, true, s, d);
        case 19:
          return vp(s, o, d);
        case 22:
          return xd(s, o, d);
      }
      throw Error(t(156, o.tag));
    };
    function Fp(s, o) {
      return qi(s, o);
    }
    function T0(s, o, d, v) {
      this.tag = s, this.key = d, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.ref = null, this.pendingProps = o, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = v, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null;
    }
    function Br(s, o, d, v) {
      return new T0(s, o, d, v);
    }
    function Ud(s) {
      return s = s.prototype, !(!s || !s.isReactComponent);
    }
    function C0(s) {
      if (typeof s == "function") return Ud(s) ? 1 : 0;
      if (s != null) {
        if (s = s.$$typeof, s === G) return 11;
        if (s === Le) return 14;
      }
      return 2;
    }
    function Oi(s, o) {
      var d = s.alternate;
      return d === null ? (d = Br(s.tag, o, s.key, s.mode), d.elementType = s.elementType, d.type = s.type, d.stateNode = s.stateNode, d.alternate = s, s.alternate = d) : (d.pendingProps = o, d.type = s.type, d.flags = 0, d.subtreeFlags = 0, d.deletions = null), d.flags = s.flags & 14680064, d.childLanes = s.childLanes, d.lanes = s.lanes, d.child = s.child, d.memoizedProps = s.memoizedProps, d.memoizedState = s.memoizedState, d.updateQueue = s.updateQueue, o = s.dependencies, d.dependencies = o === null ? null : {
        lanes: o.lanes,
        firstContext: o.firstContext
      }, d.sibling = s.sibling, d.index = s.index, d.ref = s.ref, d;
    }
    function Gc(s, o, d, v, _, b) {
      var D = 2;
      if (v = s, typeof s == "function") Ud(s) && (D = 1);
      else if (typeof s == "string") D = 5;
      else e: switch (s) {
        case j:
          return go(d.children, _, b, o);
        case M:
          D = 8, _ |= 8;
          break;
        case V:
          return s = Br(12, d, o, _ | 2), s.elementType = V, s.lanes = b, s;
        case F:
          return s = Br(13, d, o, _), s.elementType = F, s.lanes = b, s;
        case Oe:
          return s = Br(19, d, o, _), s.elementType = Oe, s.lanes = b, s;
        case Ye:
          return Qc(d, _, b, o);
        default:
          if (typeof s == "object" && s !== null) switch (s.$$typeof) {
            case B:
              D = 10;
              break e;
            case q:
              D = 9;
              break e;
            case G:
              D = 11;
              break e;
            case Le:
              D = 14;
              break e;
            case Ge:
              D = 16, v = null;
              break e;
          }
          throw Error(t(130, s == null ? s : typeof s, ""));
      }
      return o = Br(D, d, o, _), o.elementType = s, o.type = v, o.lanes = b, o;
    }
    function go(s, o, d, v) {
      return s = Br(7, s, v, o), s.lanes = d, s;
    }
    function Qc(s, o, d, v) {
      return s = Br(22, s, v, o), s.elementType = Ye, s.lanes = d, s.stateNode = {
        isHidden: false
      }, s;
    }
    function Bd(s, o, d) {
      return s = Br(6, s, null, o), s.lanes = d, s;
    }
    function Wd(s, o, d) {
      return o = Br(4, s.children !== null ? s.children : [], s.key, o), o.lanes = d, o.stateNode = {
        containerInfo: s.containerInfo,
        pendingChildren: null,
        implementation: s.implementation
      }, o;
    }
    function S0(s, o, d, v, _) {
      this.tag = o, this.containerInfo = s, this.finishedWork = this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.callbackNode = this.pendingContext = this.context = null, this.callbackPriority = 0, this.eventTimes = Ls(0), this.expirationTimes = Ls(-1), this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = Ls(0), this.identifierPrefix = v, this.onRecoverableError = _, this.mutableSourceEagerHydrationData = null;
    }
    function Hd(s, o, d, v, _, b, D, K, J) {
      return s = new S0(s, o, d, K, J), o === 1 ? (o = 1, b === true && (o |= 8)) : o = 0, b = Br(3, null, null, o), s.current = b, b.stateNode = s, b.memoizedState = {
        element: v,
        isDehydrated: d,
        cache: null,
        transitions: null,
        pendingSuspenseBoundaries: null
      }, cd(b), s;
    }
    function I0(s, o, d) {
      var v = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null;
      return {
        $$typeof: ge,
        key: v == null ? null : "" + v,
        children: s,
        containerInfo: o,
        implementation: d
      };
    }
    function zp(s) {
      if (!s) return Si;
      s = s._reactInternals;
      e: {
        if (Ar(s) !== s || s.tag !== 1) throw Error(t(170));
        var o = s;
        do {
          switch (o.tag) {
            case 3:
              o = o.stateNode.context;
              break e;
            case 1:
              if (ar(o.type)) {
                o = o.stateNode.__reactInternalMemoizedMergedChildContext;
                break e;
              }
          }
          o = o.return;
        } while (o !== null);
        throw Error(t(171));
      }
      if (s.tag === 1) {
        var d = s.type;
        if (ar(d)) return xh(s, d, o);
      }
      return o;
    }
    function Up(s, o, d, v, _, b, D, K, J) {
      return s = Hd(d, v, true, s, _, b, D, K, J), s.context = zp(null), d = s.current, v = Qn(), _ = ji(d), b = Xs(v, _), b.callback = o ?? null, Ai(d, b, _), s.current.lanes = _, Ms(s, _, v), Yn(s, v), s;
    }
    function Yc(s, o, d, v) {
      var _ = o.current, b = Qn(), D = ji(_);
      return d = zp(d), o.context === null ? o.context = d : o.pendingContext = d, o = Xs(b, D), o.payload = {
        element: s
      }, v = v === void 0 ? null : v, v !== null && (o.callback = v), s = Ai(_, o, D), s !== null && (us(s, _, D, b), fl(s, _, D)), D;
    }
    function Xc(s) {
      if (s = s.current, !s.child) return null;
      switch (s.child.tag) {
        case 5:
          return s.child.stateNode;
        default:
          return s.child.stateNode;
      }
    }
    function Bp(s, o) {
      if (s = s.memoizedState, s !== null && s.dehydrated !== null) {
        var d = s.retryLane;
        s.retryLane = d !== 0 && d < o ? d : o;
      }
    }
    function qd(s, o) {
      Bp(s, o), (s = s.alternate) && Bp(s, o);
    }
    function k0() {
      return null;
    }
    var Wp = typeof reportError == "function" ? reportError : function(s) {
      console.error(s);
    };
    function Kd(s) {
      this._internalRoot = s;
    }
    Jc.prototype.render = Kd.prototype.render = function(s) {
      var o = this._internalRoot;
      if (o === null) throw Error(t(409));
      Yc(s, o, null, null);
    }, Jc.prototype.unmount = Kd.prototype.unmount = function() {
      var s = this._internalRoot;
      if (s !== null) {
        this._internalRoot = null;
        var o = s.containerInfo;
        fo(function() {
          Yc(null, s, null, null);
        }), o[qs] = null;
      }
    };
    function Jc(s) {
      this._internalRoot = s;
    }
    Jc.prototype.unstable_scheduleHydration = function(s) {
      if (s) {
        var o = Ga();
        s = {
          blockedOn: null,
          target: s,
          priority: o
        };
        for (var d = 0; d < ns.length && o !== 0 && o < ns[d].priority; d++) ;
        ns.splice(d, 0, s), d === 0 && Xa(s);
      }
    };
    function Gd(s) {
      return !(!s || s.nodeType !== 1 && s.nodeType !== 9 && s.nodeType !== 11);
    }
    function Zc(s) {
      return !(!s || s.nodeType !== 1 && s.nodeType !== 9 && s.nodeType !== 11 && (s.nodeType !== 8 || s.nodeValue !== " react-mount-point-unstable "));
    }
    function Hp() {
    }
    function A0(s, o, d, v, _) {
      if (_) {
        if (typeof v == "function") {
          var b = v;
          v = function() {
            var ae = Xc(D);
            b.call(ae);
          };
        }
        var D = Up(o, v, s, 0, null, false, false, "", Hp);
        return s._reactRootContainer = D, s[qs] = D.current, al(s.nodeType === 8 ? s.parentNode : s), fo(), D;
      }
      for (; _ = s.lastChild; ) s.removeChild(_);
      if (typeof v == "function") {
        var K = v;
        v = function() {
          var ae = Xc(J);
          K.call(ae);
        };
      }
      var J = Hd(s, 0, false, null, null, false, false, "", Hp);
      return s._reactRootContainer = J, s[qs] = J.current, al(s.nodeType === 8 ? s.parentNode : s), fo(function() {
        Yc(o, J, d, v);
      }), J;
    }
    function eu(s, o, d, v, _) {
      var b = d._reactRootContainer;
      if (b) {
        var D = b;
        if (typeof _ == "function") {
          var K = _;
          _ = function() {
            var J = Xc(D);
            K.call(J);
          };
        }
        Yc(o, D, s, _);
      } else D = A0(d, o, s, _, v);
      return Xc(D);
    }
    qa = function(s) {
      switch (s.tag) {
        case 3:
          var o = s.stateNode;
          if (o.current.memoizedState.isDehydrated) {
            var d = Os(o.pendingLanes);
            d !== 0 && ($s(o, d | 1), Yn(o, zt()), (St & 6) === 0 && (la = zt() + 500, Ii()));
          }
          break;
        case 13:
          fo(function() {
            var v = Ys(s, 1);
            if (v !== null) {
              var _ = Qn();
              us(v, s, 1, _);
            }
          }), qd(s, 1);
      }
    }, Qi = function(s) {
      if (s.tag === 13) {
        var o = Ys(s, 134217728);
        if (o !== null) {
          var d = Qn();
          us(o, s, 134217728, d);
        }
        qd(s, 134217728);
      }
    }, Ka = function(s) {
      if (s.tag === 13) {
        var o = ji(s), d = Ys(s, o);
        if (d !== null) {
          var v = Qn();
          us(d, s, o, v);
        }
        qd(s, o);
      }
    }, Ga = function() {
      return yt;
    }, Qa = function(s, o) {
      var d = yt;
      try {
        return yt = s, o();
      } finally {
        yt = d;
      }
    }, nr = function(s, o, d) {
      switch (o) {
        case "input":
          if (pt(s, d), o = d.name, d.type === "radio" && o != null) {
            for (d = s; d.parentNode; ) d = d.parentNode;
            for (d = d.querySelectorAll("input[name=" + JSON.stringify("" + o) + '][type="radio"]'), o = 0; o < d.length; o++) {
              var v = d[o];
              if (v !== s && v.form === s.form) {
                var _ = fc(v);
                if (!_) throw Error(t(90));
                et(v), pt(v, _);
              }
            }
          }
          break;
        case "textarea":
          en(s, d);
          break;
        case "select":
          o = d.value, o != null && ut(s, !!d.multiple, o, false);
      }
    }, nt = Wc, Ot = fo;
    var R0 = {
      usingClientEntryPoint: false,
      Events: [
        ul,
        Go,
        fc,
        je,
        tt,
        Wc
      ]
    }, Tl = {
      findFiberByHostInstance: no,
      bundleType: 0,
      version: "18.3.1",
      rendererPackageName: "react-dom"
    }, N0 = {
      bundleType: Tl.bundleType,
      version: Tl.version,
      rendererPackageName: Tl.rendererPackageName,
      rendererConfig: Tl.rendererConfig,
      overrideHookState: null,
      overrideHookStateDeletePath: null,
      overrideHookStateRenamePath: null,
      overrideProps: null,
      overridePropsDeletePath: null,
      overridePropsRenamePath: null,
      setErrorHandler: null,
      setSuspenseHandler: null,
      scheduleUpdate: null,
      currentDispatcherRef: Y.ReactCurrentDispatcher,
      findHostInstanceByFiber: function(s) {
        return s = Do(s), s === null ? null : s.stateNode;
      },
      findFiberByHostInstance: Tl.findFiberByHostInstance || k0,
      findHostInstancesForRefresh: null,
      scheduleRefresh: null,
      scheduleRoot: null,
      setRefreshHandler: null,
      getCurrentFiber: null,
      reconcilerVersion: "18.3.1-next-f1338f8080-20240426"
    };
    if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") {
      var tu = __REACT_DEVTOOLS_GLOBAL_HOOK__;
      if (!tu.isDisabled && tu.supportsFiber) try {
        hi = tu.inject(N0), rr = tu;
      } catch {
      }
    }
    return qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = R0, qr.createPortal = function(s, o) {
      var d = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null;
      if (!Gd(o)) throw Error(t(200));
      return I0(s, o, null, d);
    }, qr.createRoot = function(s, o) {
      if (!Gd(s)) throw Error(t(299));
      var d = false, v = "", _ = Wp;
      return o != null && (o.unstable_strictMode === true && (d = true), o.identifierPrefix !== void 0 && (v = o.identifierPrefix), o.onRecoverableError !== void 0 && (_ = o.onRecoverableError)), o = Hd(s, 1, false, null, null, d, false, v, _), s[qs] = o.current, al(s.nodeType === 8 ? s.parentNode : s), new Kd(o);
    }, qr.findDOMNode = function(s) {
      if (s == null) return null;
      if (s.nodeType === 1) return s;
      var o = s._reactInternals;
      if (o === void 0) throw typeof s.render == "function" ? Error(t(188)) : (s = Object.keys(s).join(","), Error(t(268, s)));
      return s = Do(o), s = s === null ? null : s.stateNode, s;
    }, qr.flushSync = function(s) {
      return fo(s);
    }, qr.hydrate = function(s, o, d) {
      if (!Zc(o)) throw Error(t(200));
      return eu(null, s, o, true, d);
    }, qr.hydrateRoot = function(s, o, d) {
      if (!Gd(s)) throw Error(t(405));
      var v = d != null && d.hydratedSources || null, _ = false, b = "", D = Wp;
      if (d != null && (d.unstable_strictMode === true && (_ = true), d.identifierPrefix !== void 0 && (b = d.identifierPrefix), d.onRecoverableError !== void 0 && (D = d.onRecoverableError)), o = Up(o, null, s, 1, d ?? null, _, false, b, D), s[qs] = o.current, al(s), v) for (s = 0; s < v.length; s++) d = v[s], _ = d._getVersion, _ = _(d._source), o.mutableSourceEagerHydrationData == null ? o.mutableSourceEagerHydrationData = [
        d,
        _
      ] : o.mutableSourceEagerHydrationData.push(d, _);
      return new Jc(o);
    }, qr.render = function(s, o, d) {
      if (!Zc(o)) throw Error(t(200));
      return eu(null, s, o, false, d);
    }, qr.unmountComponentAtNode = function(s) {
      if (!Zc(s)) throw Error(t(40));
      return s._reactRootContainer ? (fo(function() {
        eu(null, null, s, false, function() {
          s._reactRootContainer = null, s[qs] = null;
        });
      }), true) : false;
    }, qr.unstable_batchedUpdates = Wc, qr.unstable_renderSubtreeIntoContainer = function(s, o, d, v) {
      if (!Zc(d)) throw Error(t(200));
      if (s == null || s._reactInternals === void 0) throw Error(t(38));
      return eu(s, o, d, false, v);
    }, qr.version = "18.3.1-next-f1338f8080-20240426", qr;
  }
  var Bw;
  function BS() {
    if (Bw) return q0.exports;
    Bw = 1;
    function n() {
      if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function")) try {
        __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n);
      } catch (e) {
        console.error(e);
      }
    }
    return n(), q0.exports = US(), q0.exports;
  }
  var Ww;
  function WS() {
    if (Ww) return Zp;
    Ww = 1;
    var n = BS();
    return Zp.createRoot = n.createRoot, Zp.hydrateRoot = n.hydrateRoot, Zp;
  }
  var HS = WS();
  const qS = Eu(HS);
  var Zd = {}, Hw;
  function KS() {
    if (Hw) return Zd;
    Hw = 1, Object.defineProperty(Zd, "__esModule", {
      value: true
    }), Zd.parse = c, Zd.serialize = y;
    const n = /^[\u0021-\u003A\u003C\u003E-\u007E]+$/, e = /^[\u0021-\u003A\u003C-\u007E]*$/, t = /^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i, r = /^[\u0020-\u003A\u003D-\u007E]*$/, i = Object.prototype.toString, l = (() => {
      const S = function() {
      };
      return S.prototype = /* @__PURE__ */ Object.create(null), S;
    })();
    function c(S, N) {
      const P = new l(), O = S.length;
      if (O < 2) return P;
      const L = (N == null ? void 0 : N.decode) || x;
      let H = 0;
      do {
        const W = S.indexOf("=", H);
        if (W === -1) break;
        const T = S.indexOf(";", H), Y = T === -1 ? O : T;
        if (W > Y) {
          H = S.lastIndexOf(";", W - 1) + 1;
          continue;
        }
        const u = f(S, H, W), ge = m(S, W, u), j = S.slice(u, ge);
        if (P[j] === void 0) {
          let M = f(S, W + 1, Y), V = m(S, Y, M);
          const B = L(S.slice(M, V));
          P[j] = B;
        }
        H = Y + 1;
      } while (H < O);
      return P;
    }
    function f(S, N, P) {
      do {
        const O = S.charCodeAt(N);
        if (O !== 32 && O !== 9) return N;
      } while (++N < P);
      return P;
    }
    function m(S, N, P) {
      for (; N > P; ) {
        const O = S.charCodeAt(--N);
        if (O !== 32 && O !== 9) return N + 1;
      }
      return P;
    }
    function y(S, N, P) {
      const O = (P == null ? void 0 : P.encode) || encodeURIComponent;
      if (!n.test(S)) throw new TypeError(`argument name is invalid: ${S}`);
      const L = O(N);
      if (!e.test(L)) throw new TypeError(`argument val is invalid: ${N}`);
      let H = S + "=" + L;
      if (!P) return H;
      if (P.maxAge !== void 0) {
        if (!Number.isInteger(P.maxAge)) throw new TypeError(`option maxAge is invalid: ${P.maxAge}`);
        H += "; Max-Age=" + P.maxAge;
      }
      if (P.domain) {
        if (!t.test(P.domain)) throw new TypeError(`option domain is invalid: ${P.domain}`);
        H += "; Domain=" + P.domain;
      }
      if (P.path) {
        if (!r.test(P.path)) throw new TypeError(`option path is invalid: ${P.path}`);
        H += "; Path=" + P.path;
      }
      if (P.expires) {
        if (!C(P.expires) || !Number.isFinite(P.expires.valueOf())) throw new TypeError(`option expires is invalid: ${P.expires}`);
        H += "; Expires=" + P.expires.toUTCString();
      }
      if (P.httpOnly && (H += "; HttpOnly"), P.secure && (H += "; Secure"), P.partitioned && (H += "; Partitioned"), P.priority) switch (typeof P.priority == "string" ? P.priority.toLowerCase() : void 0) {
        case "low":
          H += "; Priority=Low";
          break;
        case "medium":
          H += "; Priority=Medium";
          break;
        case "high":
          H += "; Priority=High";
          break;
        default:
          throw new TypeError(`option priority is invalid: ${P.priority}`);
      }
      if (P.sameSite) switch (typeof P.sameSite == "string" ? P.sameSite.toLowerCase() : P.sameSite) {
        case true:
        case "strict":
          H += "; SameSite=Strict";
          break;
        case "lax":
          H += "; SameSite=Lax";
          break;
        case "none":
          H += "; SameSite=None";
          break;
        default:
          throw new TypeError(`option sameSite is invalid: ${P.sameSite}`);
      }
      return H;
    }
    function x(S) {
      if (S.indexOf("%") === -1) return S;
      try {
        return decodeURIComponent(S);
      } catch {
        return S;
      }
    }
    function C(S) {
      return i.call(S) === "[object Date]";
    }
    return Zd;
  }
  KS();
  var qw = "popstate";
  function GS(n = {}) {
    function e(r, i) {
      let { pathname: l, search: c, hash: f } = r.location;
      return Rv("", {
        pathname: l,
        search: c,
        hash: f
      }, i.state && i.state.usr || null, i.state && i.state.key || "default");
    }
    function t(r, i) {
      return typeof i == "string" ? i : Ef(i);
    }
    return YS(e, t, null, n);
  }
  function Zt(n, e) {
    if (n === false || n === null || typeof n > "u") throw new Error(e);
  }
  function oi(n, e) {
    if (!n) {
      typeof console < "u" && console.warn(e);
      try {
        throw new Error(e);
      } catch {
      }
    }
  }
  function QS() {
    return Math.random().toString(36).substring(2, 10);
  }
  function Kw(n, e) {
    return {
      usr: n.state,
      key: n.key,
      idx: e
    };
  }
  function Rv(n, e, t = null, r) {
    return {
      pathname: typeof n == "string" ? n : n.pathname,
      search: "",
      hash: "",
      ...typeof e == "string" ? bu(e) : e,
      state: t,
      key: e && e.key || r || QS()
    };
  }
  function Ef({ pathname: n = "/", search: e = "", hash: t = "" }) {
    return e && e !== "?" && (n += e.charAt(0) === "?" ? e : "?" + e), t && t !== "#" && (n += t.charAt(0) === "#" ? t : "#" + t), n;
  }
  function bu(n) {
    let e = {};
    if (n) {
      let t = n.indexOf("#");
      t >= 0 && (e.hash = n.substring(t), n = n.substring(0, t));
      let r = n.indexOf("?");
      r >= 0 && (e.search = n.substring(r), n = n.substring(0, r)), n && (e.pathname = n);
    }
    return e;
  }
  function YS(n, e, t, r = {}) {
    let { window: i = document.defaultView, v5Compat: l = false } = r, c = i.history, f = "POP", m = null, y = x();
    y == null && (y = 0, c.replaceState({
      ...c.state,
      idx: y
    }, ""));
    function x() {
      return (c.state || {
        idx: null
      }).idx;
    }
    function C() {
      f = "POP";
      let L = x(), H = L == null ? null : L - y;
      y = L, m && m({
        action: f,
        location: O.location,
        delta: H
      });
    }
    function S(L, H) {
      f = "PUSH";
      let W = Rv(O.location, L, H);
      y = x() + 1;
      let T = Kw(W, y), Y = O.createHref(W);
      try {
        c.pushState(T, "", Y);
      } catch (u) {
        if (u instanceof DOMException && u.name === "DataCloneError") throw u;
        i.location.assign(Y);
      }
      l && m && m({
        action: f,
        location: O.location,
        delta: 1
      });
    }
    function N(L, H) {
      f = "REPLACE";
      let W = Rv(O.location, L, H);
      y = x();
      let T = Kw(W, y), Y = O.createHref(W);
      c.replaceState(T, "", Y), l && m && m({
        action: f,
        location: O.location,
        delta: 0
      });
    }
    function P(L) {
      let H = i.location.origin !== "null" ? i.location.origin : i.location.href, W = typeof L == "string" ? L : Ef(L);
      return W = W.replace(/ $/, "%20"), Zt(H, `No window.location.(origin|href) available to create URL for href: ${W}`), new URL(W, H);
    }
    let O = {
      get action() {
        return f;
      },
      get location() {
        return n(i, c);
      },
      listen(L) {
        if (m) throw new Error("A history only accepts one active listener");
        return i.addEventListener(qw, C), m = L, () => {
          i.removeEventListener(qw, C), m = null;
        };
      },
      createHref(L) {
        return e(i, L);
      },
      createURL: P,
      encodeLocation(L) {
        let H = P(L);
        return {
          pathname: H.pathname,
          search: H.search,
          hash: H.hash
        };
      },
      push: S,
      replace: N,
      go(L) {
        return c.go(L);
      }
    };
    return O;
  }
  function CE(n, e, t = "/") {
    return XS(n, e, t, false);
  }
  function XS(n, e, t, r) {
    let i = typeof e == "string" ? bu(e) : e, l = Co(i.pathname || "/", t);
    if (l == null) return null;
    let c = SE(n);
    JS(c);
    let f = null;
    for (let m = 0; f == null && m < c.length; ++m) {
      let y = cI(l);
      f = aI(c[m], y, r);
    }
    return f;
  }
  function SE(n, e = [], t = [], r = "") {
    let i = (l, c, f) => {
      let m = {
        relativePath: f === void 0 ? l.path || "" : f,
        caseSensitive: l.caseSensitive === true,
        childrenIndex: c,
        route: l
      };
      m.relativePath.startsWith("/") && (Zt(m.relativePath.startsWith(r), `Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`), m.relativePath = m.relativePath.slice(r.length));
      let y = Eo([
        r,
        m.relativePath
      ]), x = t.concat(m);
      l.children && l.children.length > 0 && (Zt(l.index !== true, `Index routes must not have child routes. Please remove all child routes from route path "${y}".`), SE(l.children, e, x, y)), !(l.path == null && !l.index) && e.push({
        path: y,
        score: iI(y, l.index),
        routesMeta: x
      });
    };
    return n.forEach((l, c) => {
      var _a3;
      if (l.path === "" || !((_a3 = l.path) == null ? void 0 : _a3.includes("?"))) i(l, c);
      else for (let f of IE(l.path)) i(l, c, f);
    }), e;
  }
  function IE(n) {
    let e = n.split("/");
    if (e.length === 0) return [];
    let [t, ...r] = e, i = t.endsWith("?"), l = t.replace(/\?$/, "");
    if (r.length === 0) return i ? [
      l,
      ""
    ] : [
      l
    ];
    let c = IE(r.join("/")), f = [];
    return f.push(...c.map((m) => m === "" ? l : [
      l,
      m
    ].join("/"))), i && f.push(...c), f.map((m) => n.startsWith("/") && m === "" ? "/" : m);
  }
  function JS(n) {
    n.sort((e, t) => e.score !== t.score ? t.score - e.score : oI(e.routesMeta.map((r) => r.childrenIndex), t.routesMeta.map((r) => r.childrenIndex)));
  }
  var ZS = /^:[\w-]+$/, eI = 3, tI = 2, nI = 1, rI = 10, sI = -2, Gw = (n) => n === "*";
  function iI(n, e) {
    let t = n.split("/"), r = t.length;
    return t.some(Gw) && (r += sI), e && (r += tI), t.filter((i) => !Gw(i)).reduce((i, l) => i + (ZS.test(l) ? eI : l === "" ? nI : rI), r);
  }
  function oI(n, e) {
    return n.length === e.length && n.slice(0, -1).every((r, i) => r === e[i]) ? n[n.length - 1] - e[e.length - 1] : 0;
  }
  function aI(n, e, t = false) {
    let { routesMeta: r } = n, i = {}, l = "/", c = [];
    for (let f = 0; f < r.length; ++f) {
      let m = r[f], y = f === r.length - 1, x = l === "/" ? e : e.slice(l.length) || "/", C = Rg({
        path: m.relativePath,
        caseSensitive: m.caseSensitive,
        end: y
      }, x), S = m.route;
      if (!C && y && t && !r[r.length - 1].route.index && (C = Rg({
        path: m.relativePath,
        caseSensitive: m.caseSensitive,
        end: false
      }, x)), !C) return null;
      Object.assign(i, C.params), c.push({
        params: i,
        pathname: Eo([
          l,
          C.pathname
        ]),
        pathnameBase: hI(Eo([
          l,
          C.pathnameBase
        ])),
        route: S
      }), C.pathnameBase !== "/" && (l = Eo([
        l,
        C.pathnameBase
      ]));
    }
    return c;
  }
  function Rg(n, e) {
    typeof n == "string" && (n = {
      path: n,
      caseSensitive: false,
      end: true
    });
    let [t, r] = lI(n.path, n.caseSensitive, n.end), i = e.match(t);
    if (!i) return null;
    let l = i[0], c = l.replace(/(.)\/+$/, "$1"), f = i.slice(1);
    return {
      params: r.reduce((y, { paramName: x, isOptional: C }, S) => {
        if (x === "*") {
          let P = f[S] || "";
          c = l.slice(0, l.length - P.length).replace(/(.)\/+$/, "$1");
        }
        const N = f[S];
        return C && !N ? y[x] = void 0 : y[x] = (N || "").replace(/%2F/g, "/"), y;
      }, {}),
      pathname: l,
      pathnameBase: c,
      pattern: n
    };
  }
  function lI(n, e = false, t = true) {
    oi(n === "*" || !n.endsWith("*") || n.endsWith("/*"), `Route path "${n}" will be treated as if it were "${n.replace(/\*$/, "/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/, "/*")}".`);
    let r = [], i = "^" + n.replace(/\/*\*?$/, "").replace(/^\/*/, "/").replace(/[\\.*+^${}|()[\]]/g, "\\$&").replace(/\/:([\w-]+)(\?)?/g, (c, f, m) => (r.push({
      paramName: f,
      isOptional: m != null
    }), m ? "/?([^\\/]+)?" : "/([^\\/]+)"));
    return n.endsWith("*") ? (r.push({
      paramName: "*"
    }), i += n === "*" || n === "/*" ? "(.*)$" : "(?:\\/(.+)|\\/*)$") : t ? i += "\\/*$" : n !== "" && n !== "/" && (i += "(?:(?=\\/|$))"), [
      new RegExp(i, e ? void 0 : "i"),
      r
    ];
  }
  function cI(n) {
    try {
      return n.split("/").map((e) => decodeURIComponent(e).replace(/\//g, "%2F")).join("/");
    } catch (e) {
      return oi(false, `The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`), n;
    }
  }
  function Co(n, e) {
    if (e === "/") return n;
    if (!n.toLowerCase().startsWith(e.toLowerCase())) return null;
    let t = e.endsWith("/") ? e.length - 1 : e.length, r = n.charAt(t);
    return r && r !== "/" ? null : n.slice(t) || "/";
  }
  function uI(n, e = "/") {
    let { pathname: t, search: r = "", hash: i = "" } = typeof n == "string" ? bu(n) : n;
    return {
      pathname: t ? t.startsWith("/") ? t : dI(t, e) : e,
      search: pI(r),
      hash: gI(i)
    };
  }
  function dI(n, e) {
    let t = e.replace(/\/+$/, "").split("/");
    return n.split("/").forEach((i) => {
      i === ".." ? t.length > 1 && t.pop() : i !== "." && t.push(i);
    }), t.length > 1 ? t.join("/") : "/";
  }
  function Q0(n, e, t, r) {
    return `Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`;
  }
  function fI(n) {
    return n.filter((e, t) => t === 0 || e.route.path && e.route.path.length > 0);
  }
  function Ty(n) {
    let e = fI(n);
    return e.map((t, r) => r === e.length - 1 ? t.pathname : t.pathnameBase);
  }
  function Cy(n, e, t, r = false) {
    let i;
    typeof n == "string" ? i = bu(n) : (i = {
      ...n
    }, Zt(!i.pathname || !i.pathname.includes("?"), Q0("?", "pathname", "search", i)), Zt(!i.pathname || !i.pathname.includes("#"), Q0("#", "pathname", "hash", i)), Zt(!i.search || !i.search.includes("#"), Q0("#", "search", "hash", i)));
    let l = n === "" || i.pathname === "", c = l ? "/" : i.pathname, f;
    if (c == null) f = t;
    else {
      let C = e.length - 1;
      if (!r && c.startsWith("..")) {
        let S = c.split("/");
        for (; S[0] === ".."; ) S.shift(), C -= 1;
        i.pathname = S.join("/");
      }
      f = C >= 0 ? e[C] : "/";
    }
    let m = uI(i, f), y = c && c !== "/" && c.endsWith("/"), x = (l || c === ".") && t.endsWith("/");
    return !m.pathname.endsWith("/") && (y || x) && (m.pathname += "/"), m;
  }
  var Eo = (n) => n.join("/").replace(/\/\/+/g, "/"), hI = (n) => n.replace(/\/+$/, "").replace(/^\/*/, "/"), pI = (n) => !n || n === "?" ? "" : n.startsWith("?") ? n : "?" + n, gI = (n) => !n || n === "#" ? "" : n.startsWith("#") ? n : "#" + n;
  function mI(n) {
    return n != null && typeof n.status == "number" && typeof n.statusText == "string" && typeof n.internal == "boolean" && "data" in n;
  }
  var kE = [
    "POST",
    "PUT",
    "PATCH",
    "DELETE"
  ];
  new Set(kE);
  var vI = [
    "GET",
    ...kE
  ];
  new Set(vI);
  var Tu = R.createContext(null);
  Tu.displayName = "DataRouter";
  var tm = R.createContext(null);
  tm.displayName = "DataRouterState";
  var AE = R.createContext({
    isTransitioning: false
  });
  AE.displayName = "ViewTransition";
  var yI = R.createContext(/* @__PURE__ */ new Map());
  yI.displayName = "Fetchers";
  var wI = R.createContext(null);
  wI.displayName = "Await";
  var ci = R.createContext(null);
  ci.displayName = "Navigation";
  var jf = R.createContext(null);
  jf.displayName = "Location";
  var Wi = R.createContext({
    outlet: null,
    matches: [],
    isDataRoute: false
  });
  Wi.displayName = "Route";
  var Sy = R.createContext(null);
  Sy.displayName = "RouteError";
  function _I(n, { relative: e } = {}) {
    Zt(Cu(), "useHref() may be used only in the context of a <Router> component.");
    let { basename: t, navigator: r } = R.useContext(ci), { hash: i, pathname: l, search: c } = Of(n, {
      relative: e
    }), f = l;
    return t !== "/" && (f = l === "/" ? t : Eo([
      t,
      l
    ])), r.createHref({
      pathname: f,
      search: c,
      hash: i
    });
  }
  function Cu() {
    return R.useContext(jf) != null;
  }
  function ja() {
    return Zt(Cu(), "useLocation() may be used only in the context of a <Router> component."), R.useContext(jf).location;
  }
  var RE = "You should call navigate() in a React.useEffect(), not when your component is first rendered.";
  function NE(n) {
    R.useContext(ci).static || R.useLayoutEffect(n);
  }
  function nm() {
    let { isDataRoute: n } = R.useContext(Wi);
    return n ? DI() : xI();
  }
  function xI() {
    Zt(Cu(), "useNavigate() may be used only in the context of a <Router> component.");
    let n = R.useContext(Tu), { basename: e, navigator: t } = R.useContext(ci), { matches: r } = R.useContext(Wi), { pathname: i } = ja(), l = JSON.stringify(Ty(r)), c = R.useRef(false);
    return NE(() => {
      c.current = true;
    }), R.useCallback((m, y = {}) => {
      if (oi(c.current, RE), !c.current) return;
      if (typeof m == "number") {
        t.go(m);
        return;
      }
      let x = Cy(m, JSON.parse(l), i, y.relative === "path");
      n == null && e !== "/" && (x.pathname = x.pathname === "/" ? e : Eo([
        e,
        x.pathname
      ])), (y.replace ? t.replace : t.push)(x, y.state, y);
    }, [
      e,
      t,
      l,
      i,
      n
    ]);
  }
  R.createContext(null);
  function Of(n, { relative: e } = {}) {
    let { matches: t } = R.useContext(Wi), { pathname: r } = ja(), i = JSON.stringify(Ty(t));
    return R.useMemo(() => Cy(n, JSON.parse(i), r, e === "path"), [
      n,
      i,
      r,
      e
    ]);
  }
  function EI(n, e) {
    return PE(n, e);
  }
  function PE(n, e, t, r) {
    var _a3;
    Zt(Cu(), "useRoutes() may be used only in the context of a <Router> component.");
    let { navigator: i, static: l } = R.useContext(ci), { matches: c } = R.useContext(Wi), f = c[c.length - 1], m = f ? f.params : {}, y = f ? f.pathname : "/", x = f ? f.pathnameBase : "/", C = f && f.route;
    {
      let W = C && C.path || "";
      DE(y, !C || W.endsWith("*") || W.endsWith("*?"), `You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W === "/" ? "*" : `${W}/*`}">.`);
    }
    let S = ja(), N;
    if (e) {
      let W = typeof e == "string" ? bu(e) : e;
      Zt(x === "/" || ((_a3 = W.pathname) == null ? void 0 : _a3.startsWith(x)), `When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${W.pathname}" was given in the \`location\` prop.`), N = W;
    } else N = S;
    let P = N.pathname || "/", O = P;
    if (x !== "/") {
      let W = x.replace(/^\//, "").split("/");
      O = "/" + P.replace(/^\//, "").split("/").slice(W.length).join("/");
    }
    let L = !l && t && t.matches && t.matches.length > 0 ? t.matches : CE(n, {
      pathname: O
    });
    oi(C || L != null, `No routes matched location "${N.pathname}${N.search}${N.hash}" `), oi(L == null || L[L.length - 1].route.element !== void 0 || L[L.length - 1].route.Component !== void 0 || L[L.length - 1].route.lazy !== void 0, `Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);
    let H = II(L && L.map((W) => Object.assign({}, W, {
      params: Object.assign({}, m, W.params),
      pathname: Eo([
        x,
        i.encodeLocation ? i.encodeLocation(W.pathname).pathname : W.pathname
      ]),
      pathnameBase: W.pathnameBase === "/" ? x : Eo([
        x,
        i.encodeLocation ? i.encodeLocation(W.pathnameBase).pathname : W.pathnameBase
      ])
    })), c, t, r);
    return e && H ? R.createElement(jf.Provider, {
      value: {
        location: {
          pathname: "/",
          search: "",
          hash: "",
          state: null,
          key: "default",
          ...N
        },
        navigationType: "POP"
      }
    }, H) : H;
  }
  function bI() {
    let n = PI(), e = mI(n) ? `${n.status} ${n.statusText}` : n instanceof Error ? n.message : JSON.stringify(n), t = n instanceof Error ? n.stack : null, r = "rgba(200,200,200, 0.5)", i = {
      padding: "0.5rem",
      backgroundColor: r
    }, l = {
      padding: "2px 4px",
      backgroundColor: r
    }, c = null;
    return console.error("Error handled by React Router default ErrorBoundary:", n), c = R.createElement(R.Fragment, null, R.createElement("p", null, "\u{1F4BF} Hey developer \u{1F44B}"), R.createElement("p", null, "You can provide a way better UX than this when your app throws errors by providing your own ", R.createElement("code", {
      style: l
    }, "ErrorBoundary"), " or", " ", R.createElement("code", {
      style: l
    }, "errorElement"), " prop on your route.")), R.createElement(R.Fragment, null, R.createElement("h2", null, "Unexpected Application Error!"), R.createElement("h3", {
      style: {
        fontStyle: "italic"
      }
    }, e), t ? R.createElement("pre", {
      style: i
    }, t) : null, c);
  }
  var TI = R.createElement(bI, null), CI = class extends R.Component {
    constructor(n) {
      super(n), this.state = {
        location: n.location,
        revalidation: n.revalidation,
        error: n.error
      };
    }
    static getDerivedStateFromError(n) {
      return {
        error: n
      };
    }
    static getDerivedStateFromProps(n, e) {
      return e.location !== n.location || e.revalidation !== "idle" && n.revalidation === "idle" ? {
        error: n.error,
        location: n.location,
        revalidation: n.revalidation
      } : {
        error: n.error !== void 0 ? n.error : e.error,
        location: e.location,
        revalidation: n.revalidation || e.revalidation
      };
    }
    componentDidCatch(n, e) {
      console.error("React Router caught the following error during render", n, e);
    }
    render() {
      return this.state.error !== void 0 ? R.createElement(Wi.Provider, {
        value: this.props.routeContext
      }, R.createElement(Sy.Provider, {
        value: this.state.error,
        children: this.props.component
      })) : this.props.children;
    }
  };
  function SI({ routeContext: n, match: e, children: t }) {
    let r = R.useContext(Tu);
    return r && r.static && r.staticContext && (e.route.errorElement || e.route.ErrorBoundary) && (r.staticContext._deepestRenderedBoundaryId = e.route.id), R.createElement(Wi.Provider, {
      value: n
    }, t);
  }
  function II(n, e = [], t = null, r = null) {
    if (n == null) {
      if (!t) return null;
      if (t.errors) n = t.matches;
      else if (e.length === 0 && !t.initialized && t.matches.length > 0) n = t.matches;
      else return null;
    }
    let i = n, l = t == null ? void 0 : t.errors;
    if (l != null) {
      let m = i.findIndex((y) => y.route.id && (l == null ? void 0 : l[y.route.id]) !== void 0);
      Zt(m >= 0, `Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`), i = i.slice(0, Math.min(i.length, m + 1));
    }
    let c = false, f = -1;
    if (t) for (let m = 0; m < i.length; m++) {
      let y = i[m];
      if ((y.route.HydrateFallback || y.route.hydrateFallbackElement) && (f = m), y.route.id) {
        let { loaderData: x, errors: C } = t, S = y.route.loader && !x.hasOwnProperty(y.route.id) && (!C || C[y.route.id] === void 0);
        if (y.route.lazy || S) {
          c = true, f >= 0 ? i = i.slice(0, f + 1) : i = [
            i[0]
          ];
          break;
        }
      }
    }
    return i.reduceRight((m, y, x) => {
      let C, S = false, N = null, P = null;
      t && (C = l && y.route.id ? l[y.route.id] : void 0, N = y.route.errorElement || TI, c && (f < 0 && x === 0 ? (DE("route-fallback", false, "No `HydrateFallback` element provided to render during initial hydration"), S = true, P = null) : f === x && (S = true, P = y.route.hydrateFallbackElement || null)));
      let O = e.concat(i.slice(0, x + 1)), L = () => {
        let H;
        return C ? H = N : S ? H = P : y.route.Component ? H = R.createElement(y.route.Component, null) : y.route.element ? H = y.route.element : H = m, R.createElement(SI, {
          match: y,
          routeContext: {
            outlet: m,
            matches: O,
            isDataRoute: t != null
          },
          children: H
        });
      };
      return t && (y.route.ErrorBoundary || y.route.errorElement || x === 0) ? R.createElement(CI, {
        location: t.location,
        revalidation: t.revalidation,
        component: N,
        error: C,
        children: L(),
        routeContext: {
          outlet: null,
          matches: O,
          isDataRoute: true
        }
      }) : L();
    }, null);
  }
  function Iy(n) {
    return `${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`;
  }
  function kI(n) {
    let e = R.useContext(Tu);
    return Zt(e, Iy(n)), e;
  }
  function AI(n) {
    let e = R.useContext(tm);
    return Zt(e, Iy(n)), e;
  }
  function RI(n) {
    let e = R.useContext(Wi);
    return Zt(e, Iy(n)), e;
  }
  function ky(n) {
    let e = RI(n), t = e.matches[e.matches.length - 1];
    return Zt(t.route.id, `${n} can only be used on routes that contain a unique "id"`), t.route.id;
  }
  function NI() {
    return ky("useRouteId");
  }
  function PI() {
    var _a3;
    let n = R.useContext(Sy), e = AI("useRouteError"), t = ky("useRouteError");
    return n !== void 0 ? n : (_a3 = e.errors) == null ? void 0 : _a3[t];
  }
  function DI() {
    let { router: n } = kI("useNavigate"), e = ky("useNavigate"), t = R.useRef(false);
    return NE(() => {
      t.current = true;
    }), R.useCallback(async (i, l = {}) => {
      oi(t.current, RE), t.current && (typeof i == "number" ? n.navigate(i) : await n.navigate(i, {
        fromRouteId: e,
        ...l
      }));
    }, [
      n,
      e
    ]);
  }
  var Qw = {};
  function DE(n, e, t) {
    !e && !Qw[n] && (Qw[n] = true, oi(false, t));
  }
  R.memo(jI);
  function jI({ routes: n, future: e, state: t }) {
    return PE(n, void 0, t, e);
  }
  function OI({ to: n, replace: e, state: t, relative: r }) {
    Zt(Cu(), "<Navigate> may be used only in the context of a <Router> component.");
    let { static: i } = R.useContext(ci);
    oi(!i, "<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");
    let { matches: l } = R.useContext(Wi), { pathname: c } = ja(), f = nm(), m = Cy(n, Ty(l), c, r === "path"), y = JSON.stringify(m);
    return R.useEffect(() => {
      f(JSON.parse(y), {
        replace: e,
        state: t,
        relative: r
      });
    }, [
      f,
      y,
      r,
      e,
      t
    ]), null;
  }
  function Nv(n) {
    Zt(false, "A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.");
  }
  function LI({ basename: n = "/", children: e = null, location: t, navigationType: r = "POP", navigator: i, static: l = false }) {
    Zt(!Cu(), "You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");
    let c = n.replace(/^\/*/, "/"), f = R.useMemo(() => ({
      basename: c,
      navigator: i,
      static: l,
      future: {}
    }), [
      c,
      i,
      l
    ]);
    typeof t == "string" && (t = bu(t));
    let { pathname: m = "/", search: y = "", hash: x = "", state: C = null, key: S = "default" } = t, N = R.useMemo(() => {
      let P = Co(m, c);
      return P == null ? null : {
        location: {
          pathname: P,
          search: y,
          hash: x,
          state: C,
          key: S
        },
        navigationType: r
      };
    }, [
      c,
      m,
      y,
      x,
      C,
      S,
      r
    ]);
    return oi(N != null, `<Router basename="${c}"> is not able to match the URL "${m}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`), N == null ? null : R.createElement(ci.Provider, {
      value: f
    }, R.createElement(jf.Provider, {
      children: e,
      value: N
    }));
  }
  function MI({ children: n, location: e }) {
    return EI(Pv(n), e);
  }
  function Pv(n, e = []) {
    let t = [];
    return R.Children.forEach(n, (r, i) => {
      if (!R.isValidElement(r)) return;
      let l = [
        ...e,
        i
      ];
      if (r.type === R.Fragment) {
        t.push.apply(t, Pv(r.props.children, l));
        return;
      }
      Zt(r.type === Nv, `[${typeof r.type == "string" ? r.type : r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`), Zt(!r.props.index || !r.props.children, "An index route cannot have child routes.");
      let c = {
        id: r.props.id || l.join("-"),
        caseSensitive: r.props.caseSensitive,
        element: r.props.element,
        Component: r.props.Component,
        index: r.props.index,
        path: r.props.path,
        loader: r.props.loader,
        action: r.props.action,
        hydrateFallbackElement: r.props.hydrateFallbackElement,
        HydrateFallback: r.props.HydrateFallback,
        errorElement: r.props.errorElement,
        ErrorBoundary: r.props.ErrorBoundary,
        hasErrorBoundary: r.props.hasErrorBoundary === true || r.props.ErrorBoundary != null || r.props.errorElement != null,
        shouldRevalidate: r.props.shouldRevalidate,
        handle: r.props.handle,
        lazy: r.props.lazy
      };
      r.props.children && (c.children = Pv(r.props.children, l)), t.push(c);
    }), t;
  }
  var hg = "get", pg = "application/x-www-form-urlencoded";
  function rm(n) {
    return n != null && typeof n.tagName == "string";
  }
  function $I(n) {
    return rm(n) && n.tagName.toLowerCase() === "button";
  }
  function VI(n) {
    return rm(n) && n.tagName.toLowerCase() === "form";
  }
  function FI(n) {
    return rm(n) && n.tagName.toLowerCase() === "input";
  }
  function zI(n) {
    return !!(n.metaKey || n.altKey || n.ctrlKey || n.shiftKey);
  }
  function UI(n, e) {
    return n.button === 0 && (!e || e === "_self") && !zI(n);
  }
  var eg = null;
  function BI() {
    if (eg === null) try {
      new FormData(document.createElement("form"), 0), eg = false;
    } catch {
      eg = true;
    }
    return eg;
  }
  var WI = /* @__PURE__ */ new Set([
    "application/x-www-form-urlencoded",
    "multipart/form-data",
    "text/plain"
  ]);
  function Y0(n) {
    return n != null && !WI.has(n) ? (oi(false, `"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pg}"`), null) : n;
  }
  function HI(n, e) {
    let t, r, i, l, c;
    if (VI(n)) {
      let f = n.getAttribute("action");
      r = f ? Co(f, e) : null, t = n.getAttribute("method") || hg, i = Y0(n.getAttribute("enctype")) || pg, l = new FormData(n);
    } else if ($I(n) || FI(n) && (n.type === "submit" || n.type === "image")) {
      let f = n.form;
      if (f == null) throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');
      let m = n.getAttribute("formaction") || f.getAttribute("action");
      if (r = m ? Co(m, e) : null, t = n.getAttribute("formmethod") || f.getAttribute("method") || hg, i = Y0(n.getAttribute("formenctype")) || Y0(f.getAttribute("enctype")) || pg, l = new FormData(f, n), !BI()) {
        let { name: y, type: x, value: C } = n;
        if (x === "image") {
          let S = y ? `${y}.` : "";
          l.append(`${S}x`, "0"), l.append(`${S}y`, "0");
        } else y && l.append(y, C);
      }
    } else {
      if (rm(n)) throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');
      t = hg, r = null, i = pg, c = n;
    }
    return l && i === "text/plain" && (c = l, l = void 0), {
      action: r,
      method: t.toLowerCase(),
      encType: i,
      formData: l,
      body: c
    };
  }
  function Ay(n, e) {
    if (n === false || n === null || typeof n > "u") throw new Error(e);
  }
  async function qI(n, e) {
    if (n.id in e) return e[n.id];
    try {
      let t = await import(n.module).then(async (m) => {
        await m.__tla;
        return m;
      });
      return e[n.id] = t, t;
    } catch (t) {
      return console.error(`Error loading route module \`${n.module}\`, reloading page...`), console.error(t), window.__reactRouterContext && window.__reactRouterContext.isSpaMode, window.location.reload(), new Promise(() => {
      });
    }
  }
  function KI(n) {
    return n == null ? false : n.href == null ? n.rel === "preload" && typeof n.imageSrcSet == "string" && typeof n.imageSizes == "string" : typeof n.rel == "string" && typeof n.href == "string";
  }
  async function GI(n, e, t) {
    let r = await Promise.all(n.map(async (i) => {
      let l = e.routes[i.route.id];
      if (l) {
        let c = await qI(l, t);
        return c.links ? c.links() : [];
      }
      return [];
    }));
    return JI(r.flat(1).filter(KI).filter((i) => i.rel === "stylesheet" || i.rel === "preload").map((i) => i.rel === "stylesheet" ? {
      ...i,
      rel: "prefetch",
      as: "style"
    } : {
      ...i,
      rel: "prefetch"
    }));
  }
  function Yw(n, e, t, r, i, l) {
    let c = (m, y) => t[y] ? m.route.id !== t[y].route.id : true, f = (m, y) => {
      var _a3;
      return t[y].pathname !== m.pathname || ((_a3 = t[y].route.path) == null ? void 0 : _a3.endsWith("*")) && t[y].params["*"] !== m.params["*"];
    };
    return l === "assets" ? e.filter((m, y) => c(m, y) || f(m, y)) : l === "data" ? e.filter((m, y) => {
      var _a3;
      let x = r.routes[m.route.id];
      if (!x || !x.hasLoader) return false;
      if (c(m, y) || f(m, y)) return true;
      if (m.route.shouldRevalidate) {
        let C = m.route.shouldRevalidate({
          currentUrl: new URL(i.pathname + i.search + i.hash, window.origin),
          currentParams: ((_a3 = t[0]) == null ? void 0 : _a3.params) || {},
          nextUrl: new URL(n, window.origin),
          nextParams: m.params,
          defaultShouldRevalidate: true
        });
        if (typeof C == "boolean") return C;
      }
      return true;
    }) : [];
  }
  function QI(n, e, { includeHydrateFallback: t } = {}) {
    return YI(n.map((r) => {
      let i = e.routes[r.route.id];
      if (!i) return [];
      let l = [
        i.module
      ];
      return i.clientActionModule && (l = l.concat(i.clientActionModule)), i.clientLoaderModule && (l = l.concat(i.clientLoaderModule)), t && i.hydrateFallbackModule && (l = l.concat(i.hydrateFallbackModule)), i.imports && (l = l.concat(i.imports)), l;
    }).flat(1));
  }
  function YI(n) {
    return [
      ...new Set(n)
    ];
  }
  function XI(n) {
    let e = {}, t = Object.keys(n).sort();
    for (let r of t) e[r] = n[r];
    return e;
  }
  function JI(n, e) {
    let t = /* @__PURE__ */ new Set();
    return new Set(e), n.reduce((r, i) => {
      let l = JSON.stringify(XI(i));
      return t.has(l) || (t.add(l), r.push({
        key: l,
        link: i
      })), r;
    }, []);
  }
  function ZI(n, e) {
    let t = typeof n == "string" ? new URL(n, typeof window > "u" ? "server://singlefetch/" : window.location.origin) : n;
    return t.pathname === "/" ? t.pathname = "_root.data" : e && Co(t.pathname, e) === "/" ? t.pathname = `${e.replace(/\/$/, "")}/_root.data` : t.pathname = `${t.pathname.replace(/\/$/, "")}.data`, t;
  }
  function jE() {
    let n = R.useContext(Tu);
    return Ay(n, "You must render this element inside a <DataRouterContext.Provider> element"), n;
  }
  function ek() {
    let n = R.useContext(tm);
    return Ay(n, "You must render this element inside a <DataRouterStateContext.Provider> element"), n;
  }
  var Ry = R.createContext(void 0);
  Ry.displayName = "FrameworkContext";
  function OE() {
    let n = R.useContext(Ry);
    return Ay(n, "You must render this element inside a <HydratedRouter> element"), n;
  }
  function tk(n, e) {
    let t = R.useContext(Ry), [r, i] = R.useState(false), [l, c] = R.useState(false), { onFocus: f, onBlur: m, onMouseEnter: y, onMouseLeave: x, onTouchStart: C } = e, S = R.useRef(null);
    R.useEffect(() => {
      if (n === "render" && c(true), n === "viewport") {
        let O = (H) => {
          H.forEach((W) => {
            c(W.isIntersecting);
          });
        }, L = new IntersectionObserver(O, {
          threshold: 0.5
        });
        return S.current && L.observe(S.current), () => {
          L.disconnect();
        };
      }
    }, [
      n
    ]), R.useEffect(() => {
      if (r) {
        let O = setTimeout(() => {
          c(true);
        }, 100);
        return () => {
          clearTimeout(O);
        };
      }
    }, [
      r
    ]);
    let N = () => {
      i(true);
    }, P = () => {
      i(false), c(false);
    };
    return t ? n !== "intent" ? [
      l,
      S,
      {}
    ] : [
      l,
      S,
      {
        onFocus: ef(f, N),
        onBlur: ef(m, P),
        onMouseEnter: ef(y, N),
        onMouseLeave: ef(x, P),
        onTouchStart: ef(C, N)
      }
    ] : [
      false,
      S,
      {}
    ];
  }
  function ef(n, e) {
    return (t) => {
      n && n(t), t.defaultPrevented || e(t);
    };
  }
  function nk({ page: n, ...e }) {
    let { router: t } = jE(), r = R.useMemo(() => CE(t.routes, n, t.basename), [
      t.routes,
      n,
      t.basename
    ]);
    return r ? R.createElement(sk, {
      page: n,
      matches: r,
      ...e
    }) : null;
  }
  function rk(n) {
    let { manifest: e, routeModules: t } = OE(), [r, i] = R.useState([]);
    return R.useEffect(() => {
      let l = false;
      return GI(n, e, t).then((c) => {
        l || i(c);
      }), () => {
        l = true;
      };
    }, [
      n,
      e,
      t
    ]), r;
  }
  function sk({ page: n, matches: e, ...t }) {
    let r = ja(), { manifest: i, routeModules: l } = OE(), { basename: c } = jE(), { loaderData: f, matches: m } = ek(), y = R.useMemo(() => Yw(n, e, m, i, r, "data"), [
      n,
      e,
      m,
      i,
      r
    ]), x = R.useMemo(() => Yw(n, e, m, i, r, "assets"), [
      n,
      e,
      m,
      i,
      r
    ]), C = R.useMemo(() => {
      if (n === r.pathname + r.search + r.hash) return [];
      let P = /* @__PURE__ */ new Set(), O = false;
      if (e.forEach((H) => {
        var _a3;
        let W = i.routes[H.route.id];
        !W || !W.hasLoader || (!y.some((T) => T.route.id === H.route.id) && H.route.id in f && ((_a3 = l[H.route.id]) == null ? void 0 : _a3.shouldRevalidate) || W.hasClientLoader ? O = true : P.add(H.route.id));
      }), P.size === 0) return [];
      let L = ZI(n, c);
      return O && P.size > 0 && L.searchParams.set("_routes", e.filter((H) => P.has(H.route.id)).map((H) => H.route.id).join(",")), [
        L.pathname + L.search
      ];
    }, [
      c,
      f,
      r,
      i,
      y,
      e,
      n,
      l
    ]), S = R.useMemo(() => QI(x, i), [
      x,
      i
    ]), N = rk(x);
    return R.createElement(R.Fragment, null, C.map((P) => R.createElement("link", {
      key: P,
      rel: "prefetch",
      as: "fetch",
      href: P,
      ...t
    })), S.map((P) => R.createElement("link", {
      key: P,
      rel: "modulepreload",
      href: P,
      ...t
    })), N.map(({ key: P, link: O }) => R.createElement("link", {
      key: P,
      ...O
    })));
  }
  function ik(...n) {
    return (e) => {
      n.forEach((t) => {
        typeof t == "function" ? t(e) : t != null && (t.current = e);
      });
    };
  }
  var LE = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u";
  try {
    LE && (window.__reactRouterVersion = "7.5.0");
  } catch {
  }
  function ok({ basename: n, children: e, window: t }) {
    let r = R.useRef();
    r.current == null && (r.current = GS({
      window: t,
      v5Compat: true
    }));
    let i = r.current, [l, c] = R.useState({
      action: i.action,
      location: i.location
    }), f = R.useCallback((m) => {
      R.startTransition(() => c(m));
    }, [
      c
    ]);
    return R.useLayoutEffect(() => i.listen(f), [
      i,
      f
    ]), R.createElement(LI, {
      basename: n,
      children: e,
      location: l.location,
      navigationType: l.action,
      navigator: i
    });
  }
  var ME = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, $E = R.forwardRef(function({ onClick: e, discover: t = "render", prefetch: r = "none", relative: i, reloadDocument: l, replace: c, state: f, target: m, to: y, preventScrollReset: x, viewTransition: C, ...S }, N) {
    let { basename: P } = R.useContext(ci), O = typeof y == "string" && ME.test(y), L, H = false;
    if (typeof y == "string" && O && (L = y, LE)) try {
      let V = new URL(window.location.href), B = y.startsWith("//") ? new URL(V.protocol + y) : new URL(y), q = Co(B.pathname, P);
      B.origin === V.origin && q != null ? y = q + B.search + B.hash : H = true;
    } catch {
      oi(false, `<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`);
    }
    let W = _I(y, {
      relative: i
    }), [T, Y, u] = tk(r, S), ge = uk(y, {
      replace: c,
      state: f,
      target: m,
      preventScrollReset: x,
      relative: i,
      viewTransition: C
    });
    function j(V) {
      e && e(V), V.defaultPrevented || ge(V);
    }
    let M = R.createElement("a", {
      ...S,
      ...u,
      href: L || W,
      onClick: H || l ? e : j,
      ref: ik(N, Y),
      target: m,
      "data-discover": !O && t === "render" ? "true" : void 0
    });
    return T && !O ? R.createElement(R.Fragment, null, M, R.createElement(nk, {
      page: W
    })) : M;
  });
  $E.displayName = "Link";
  var ak = R.forwardRef(function({ "aria-current": e = "page", caseSensitive: t = false, className: r = "", end: i = false, style: l, to: c, viewTransition: f, children: m, ...y }, x) {
    let C = Of(c, {
      relative: y.relative
    }), S = ja(), N = R.useContext(tm), { navigator: P, basename: O } = R.useContext(ci), L = N != null && gk(C) && f === true, H = P.encodeLocation ? P.encodeLocation(C).pathname : C.pathname, W = S.pathname, T = N && N.navigation && N.navigation.location ? N.navigation.location.pathname : null;
    t || (W = W.toLowerCase(), T = T ? T.toLowerCase() : null, H = H.toLowerCase()), T && O && (T = Co(T, O) || T);
    const Y = H !== "/" && H.endsWith("/") ? H.length - 1 : H.length;
    let u = W === H || !i && W.startsWith(H) && W.charAt(Y) === "/", ge = T != null && (T === H || !i && T.startsWith(H) && T.charAt(H.length) === "/"), j = {
      isActive: u,
      isPending: ge,
      isTransitioning: L
    }, M = u ? e : void 0, V;
    typeof r == "function" ? V = r(j) : V = [
      r,
      u ? "active" : null,
      ge ? "pending" : null,
      L ? "transitioning" : null
    ].filter(Boolean).join(" ");
    let B = typeof l == "function" ? l(j) : l;
    return R.createElement($E, {
      ...y,
      "aria-current": M,
      className: V,
      ref: x,
      style: B,
      to: c,
      viewTransition: f
    }, typeof m == "function" ? m(j) : m);
  });
  ak.displayName = "NavLink";
  var lk = R.forwardRef(({ discover: n = "render", fetcherKey: e, navigate: t, reloadDocument: r, replace: i, state: l, method: c = hg, action: f, onSubmit: m, relative: y, preventScrollReset: x, viewTransition: C, ...S }, N) => {
    let P = hk(), O = pk(f, {
      relative: y
    }), L = c.toLowerCase() === "get" ? "get" : "post", H = typeof f == "string" && ME.test(f), W = (T) => {
      if (m && m(T), T.defaultPrevented) return;
      T.preventDefault();
      let Y = T.nativeEvent.submitter, u = (Y == null ? void 0 : Y.getAttribute("formmethod")) || c;
      P(Y || T.currentTarget, {
        fetcherKey: e,
        method: u,
        navigate: t,
        replace: i,
        state: l,
        relative: y,
        preventScrollReset: x,
        viewTransition: C
      });
    };
    return R.createElement("form", {
      ref: N,
      method: L,
      action: O,
      onSubmit: r ? m : W,
      ...S,
      "data-discover": !H && n === "render" ? "true" : void 0
    });
  });
  lk.displayName = "Form";
  function ck(n) {
    return `${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`;
  }
  function VE(n) {
    let e = R.useContext(Tu);
    return Zt(e, ck(n)), e;
  }
  function uk(n, { target: e, replace: t, state: r, preventScrollReset: i, relative: l, viewTransition: c } = {}) {
    let f = nm(), m = ja(), y = Of(n, {
      relative: l
    });
    return R.useCallback((x) => {
      if (UI(x, e)) {
        x.preventDefault();
        let C = t !== void 0 ? t : Ef(m) === Ef(y);
        f(n, {
          replace: C,
          state: r,
          preventScrollReset: i,
          relative: l,
          viewTransition: c
        });
      }
    }, [
      m,
      f,
      y,
      t,
      r,
      e,
      n,
      i,
      l,
      c
    ]);
  }
  var dk = 0, fk = () => `__${String(++dk)}__`;
  function hk() {
    let { router: n } = VE("useSubmit"), { basename: e } = R.useContext(ci), t = NI();
    return R.useCallback(async (r, i = {}) => {
      let { action: l, method: c, encType: f, formData: m, body: y } = HI(r, e);
      if (i.navigate === false) {
        let x = i.fetcherKey || fk();
        await n.fetch(x, t, i.action || l, {
          preventScrollReset: i.preventScrollReset,
          formData: m,
          body: y,
          formMethod: i.method || c,
          formEncType: i.encType || f,
          flushSync: i.flushSync
        });
      } else await n.navigate(i.action || l, {
        preventScrollReset: i.preventScrollReset,
        formData: m,
        body: y,
        formMethod: i.method || c,
        formEncType: i.encType || f,
        replace: i.replace,
        state: i.state,
        fromRouteId: t,
        flushSync: i.flushSync,
        viewTransition: i.viewTransition
      });
    }, [
      n,
      e,
      t
    ]);
  }
  function pk(n, { relative: e } = {}) {
    let { basename: t } = R.useContext(ci), r = R.useContext(Wi);
    Zt(r, "useFormAction must be used inside a RouteContext");
    let [i] = r.matches.slice(-1), l = {
      ...Of(n || ".", {
        relative: e
      })
    }, c = ja();
    if (n == null) {
      l.search = c.search;
      let f = new URLSearchParams(l.search), m = f.getAll("index");
      if (m.some((x) => x === "")) {
        f.delete("index"), m.filter((C) => C).forEach((C) => f.append("index", C));
        let x = f.toString();
        l.search = x ? `?${x}` : "";
      }
    }
    return (!n || n === ".") && i.route.index && (l.search = l.search ? l.search.replace(/^\?/, "?index&") : "?index"), t !== "/" && (l.pathname = l.pathname === "/" ? t : Eo([
      t,
      l.pathname
    ])), Ef(l);
  }
  function gk(n, e = {}) {
    let t = R.useContext(AE);
    Zt(t != null, "`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");
    let { basename: r } = VE("useViewTransitionState"), i = Of(n, {
      relative: e.relative
    });
    if (!t.isTransitioning) return false;
    let l = Co(t.currentLocation.pathname, r) || t.currentLocation.pathname, c = Co(t.nextLocation.pathname, r) || t.nextLocation.pathname;
    return Rg(i.pathname, c) != null || Rg(i.pathname, l) != null;
  }
  new TextEncoder();
  var X0 = {
    exports: {}
  }, J0, Xw;
  function mk() {
    if (Xw) return J0;
    Xw = 1;
    var n = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
    return J0 = n, J0;
  }
  var Z0, Jw;
  function vk() {
    if (Jw) return Z0;
    Jw = 1;
    var n = mk();
    function e() {
    }
    function t() {
    }
    return t.resetWarningCache = e, Z0 = function() {
      function r(c, f, m, y, x, C) {
        if (C !== n) {
          var S = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");
          throw S.name = "Invariant Violation", S;
        }
      }
      r.isRequired = r;
      function i() {
        return r;
      }
      var l = {
        array: r,
        bigint: r,
        bool: r,
        func: r,
        number: r,
        object: r,
        string: r,
        symbol: r,
        any: r,
        arrayOf: i,
        element: r,
        elementType: r,
        instanceOf: i,
        node: r,
        objectOf: i,
        oneOf: i,
        oneOfType: i,
        shape: i,
        exact: i,
        checkPropTypes: t,
        resetWarningCache: e
      };
      return l.PropTypes = l, l;
    }, Z0;
  }
  var Zw;
  function yk() {
    return Zw || (Zw = 1, X0.exports = vk()()), X0.exports;
  }
  var wk = yk();
  const fe = Eu(wk), _k = (n) => {
    if (!n || typeof n != "string") return false;
    if (n = n.trim(), /^(O-O(-O)?|0-0(-0)?)(\+|#)?$/i.test(n)) return true;
    const e = "KQRBNP", t = "RDTACP";
    return !(!new RegExp(`^([${e}${t}])?([a-h]|[1-8])?([a-h][1-8])?(x)?([a-h][1-8])(=[${e}${t}])?([+#])?$`).test(n) || !/[a-h][1-8]/.test(n));
  };
  const dr = "w", ks = "b", zn = "p", Dv = "n", gg = "b", of = "r", va = "q", In = "k", ev = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";
  class tg {
    constructor(e, t) {
      __publicField(this, "color");
      __publicField(this, "from");
      __publicField(this, "to");
      __publicField(this, "piece");
      __publicField(this, "captured");
      __publicField(this, "promotion");
      __publicField(this, "flags");
      __publicField(this, "san");
      __publicField(this, "lan");
      __publicField(this, "before");
      __publicField(this, "after");
      const { color: r, piece: i, from: l, to: c, flags: f, captured: m, promotion: y } = t, x = fr(l), C = fr(c);
      this.color = r, this.piece = i, this.from = x, this.to = C, this.san = e._moveToSan(t, e._moves({
        legal: true
      })), this.lan = x + C, this.before = e.fen(), e._makeMove(t), this.after = e.fen(), e._undoMove(), this.flags = "";
      for (const S in gt) gt[S] & f && (this.flags += Rl[S]);
      m && (this.captured = m), y && (this.promotion = y, this.lan += y);
    }
    isCapture() {
      return this.flags.indexOf(Rl.CAPTURE) > -1;
    }
    isPromotion() {
      return this.flags.indexOf(Rl.PROMOTION) > -1;
    }
    isEnPassant() {
      return this.flags.indexOf(Rl.EP_CAPTURE) > -1;
    }
    isKingsideCastle() {
      return this.flags.indexOf(Rl.KSIDE_CASTLE) > -1;
    }
    isQueensideCastle() {
      return this.flags.indexOf(Rl.QSIDE_CASTLE) > -1;
    }
    isBigPawn() {
      return this.flags.indexOf(Rl.BIG_PAWN) > -1;
    }
  }
  const Kr = -1, Rl = {
    NORMAL: "n",
    CAPTURE: "c",
    BIG_PAWN: "b",
    EP_CAPTURE: "e",
    PROMOTION: "p",
    KSIDE_CASTLE: "k",
    QSIDE_CASTLE: "q"
  }, gt = {
    NORMAL: 1,
    CAPTURE: 2,
    BIG_PAWN: 4,
    EP_CAPTURE: 8,
    PROMOTION: 16,
    KSIDE_CASTLE: 32,
    QSIDE_CASTLE: 64
  }, lt = {
    a8: 0,
    b8: 1,
    c8: 2,
    d8: 3,
    e8: 4,
    f8: 5,
    g8: 6,
    h8: 7,
    a7: 16,
    b7: 17,
    c7: 18,
    d7: 19,
    e7: 20,
    f7: 21,
    g7: 22,
    h7: 23,
    a6: 32,
    b6: 33,
    c6: 34,
    d6: 35,
    e6: 36,
    f6: 37,
    g6: 38,
    h6: 39,
    a5: 48,
    b5: 49,
    c5: 50,
    d5: 51,
    e5: 52,
    f5: 53,
    g5: 54,
    h5: 55,
    a4: 64,
    b4: 65,
    c4: 66,
    d4: 67,
    e4: 68,
    f4: 69,
    g4: 70,
    h4: 71,
    a3: 80,
    b3: 81,
    c3: 82,
    d3: 83,
    e3: 84,
    f3: 85,
    g3: 86,
    h3: 87,
    a2: 96,
    b2: 97,
    c2: 98,
    d2: 99,
    e2: 100,
    f2: 101,
    g2: 102,
    h2: 103,
    a1: 112,
    b1: 113,
    c1: 114,
    d1: 115,
    e1: 116,
    f1: 117,
    g1: 118,
    h1: 119
  }, tv = {
    b: [
      16,
      32,
      17,
      15
    ],
    w: [
      -16,
      -32,
      -17,
      -15
    ]
  }, e_ = {
    n: [
      -18,
      -33,
      -31,
      -14,
      18,
      33,
      31,
      14
    ],
    b: [
      -17,
      -15,
      17,
      15
    ],
    r: [
      -16,
      1,
      16,
      -1
    ],
    q: [
      -17,
      -16,
      -15,
      1,
      17,
      16,
      15,
      -1
    ],
    k: [
      -17,
      -16,
      -15,
      1,
      17,
      16,
      15,
      -1
    ]
  }, xk = [
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    24,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    0,
    24,
    0,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    24,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    24,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    24,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    2,
    24,
    2,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    2,
    53,
    56,
    53,
    2,
    0,
    0,
    0,
    0,
    0,
    0,
    24,
    24,
    24,
    24,
    24,
    24,
    56,
    0,
    56,
    24,
    24,
    24,
    24,
    24,
    24,
    0,
    0,
    0,
    0,
    0,
    0,
    2,
    53,
    56,
    53,
    2,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    2,
    24,
    2,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    24,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    24,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    24,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    0,
    24,
    0,
    0,
    0,
    0,
    0,
    20,
    0,
    0,
    20,
    0,
    0,
    0,
    0,
    0,
    0,
    24,
    0,
    0,
    0,
    0,
    0,
    0,
    20
  ], Ek = [
    17,
    0,
    0,
    0,
    0,
    0,
    0,
    16,
    0,
    0,
    0,
    0,
    0,
    0,
    15,
    0,
    0,
    17,
    0,
    0,
    0,
    0,
    0,
    16,
    0,
    0,
    0,
    0,
    0,
    15,
    0,
    0,
    0,
    0,
    17,
    0,
    0,
    0,
    0,
    16,
    0,
    0,
    0,
    0,
    15,
    0,
    0,
    0,
    0,
    0,
    0,
    17,
    0,
    0,
    0,
    16,
    0,
    0,
    0,
    15,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    17,
    0,
    0,
    16,
    0,
    0,
    15,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    17,
    0,
    16,
    0,
    15,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    17,
    16,
    15,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    0,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    -15,
    -16,
    -17,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    -15,
    0,
    -16,
    0,
    -17,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    -15,
    0,
    0,
    -16,
    0,
    0,
    -17,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    -15,
    0,
    0,
    0,
    -16,
    0,
    0,
    0,
    -17,
    0,
    0,
    0,
    0,
    0,
    0,
    -15,
    0,
    0,
    0,
    0,
    -16,
    0,
    0,
    0,
    0,
    -17,
    0,
    0,
    0,
    0,
    -15,
    0,
    0,
    0,
    0,
    0,
    -16,
    0,
    0,
    0,
    0,
    0,
    -17,
    0,
    0,
    -15,
    0,
    0,
    0,
    0,
    0,
    0,
    -16,
    0,
    0,
    0,
    0,
    0,
    0,
    -17
  ], bk = {
    p: 1,
    n: 2,
    b: 4,
    r: 8,
    q: 16,
    k: 32
  }, Tk = "pnbrqkPNBRQK", t_ = [
    Dv,
    gg,
    of,
    va
  ], Ck = 7, Sk = 6, Ik = 1, kk = 0, ng = {
    [In]: gt.KSIDE_CASTLE,
    [va]: gt.QSIDE_CASTLE
  }, ha = {
    w: [
      {
        square: lt.a1,
        flag: gt.QSIDE_CASTLE
      },
      {
        square: lt.h1,
        flag: gt.KSIDE_CASTLE
      }
    ],
    b: [
      {
        square: lt.a8,
        flag: gt.QSIDE_CASTLE
      },
      {
        square: lt.h8,
        flag: gt.KSIDE_CASTLE
      }
    ]
  }, Ak = {
    b: Ik,
    w: Sk
  }, Rk = [
    "1-0",
    "0-1",
    "1/2-1/2",
    "*"
  ];
  function Ol(n) {
    return n >> 4;
  }
  function bf(n) {
    return n & 15;
  }
  function FE(n) {
    return "0123456789".indexOf(n) !== -1;
  }
  function fr(n) {
    const e = bf(n), t = Ol(n);
    return "abcdefgh".substring(e, e + 1) + "87654321".substring(t, t + 1);
  }
  function tf(n) {
    return n === dr ? ks : dr;
  }
  function Nk(n) {
    const e = n.split(/\s+/);
    if (e.length !== 6) return {
      ok: false,
      error: "Invalid FEN: must contain six space-delimited fields"
    };
    const t = parseInt(e[5], 10);
    if (isNaN(t) || t <= 0) return {
      ok: false,
      error: "Invalid FEN: move number must be a positive integer"
    };
    const r = parseInt(e[4], 10);
    if (isNaN(r) || r < 0) return {
      ok: false,
      error: "Invalid FEN: half move counter number must be a non-negative integer"
    };
    if (!/^(-|[abcdefgh][36])$/.test(e[3])) return {
      ok: false,
      error: "Invalid FEN: en-passant square is invalid"
    };
    if (/[^kKqQ-]/.test(e[2])) return {
      ok: false,
      error: "Invalid FEN: castling availability is invalid"
    };
    if (!/^(w|b)$/.test(e[1])) return {
      ok: false,
      error: "Invalid FEN: side-to-move is invalid"
    };
    const i = e[0].split("/");
    if (i.length !== 8) return {
      ok: false,
      error: "Invalid FEN: piece data does not contain 8 '/'-delimited rows"
    };
    for (let c = 0; c < i.length; c++) {
      let f = 0, m = false;
      for (let y = 0; y < i[c].length; y++) if (FE(i[c][y])) {
        if (m) return {
          ok: false,
          error: "Invalid FEN: piece data is invalid (consecutive number)"
        };
        f += parseInt(i[c][y], 10), m = true;
      } else {
        if (!/^[prnbqkPRNBQK]$/.test(i[c][y])) return {
          ok: false,
          error: "Invalid FEN: piece data is invalid (invalid piece)"
        };
        f += 1, m = false;
      }
      if (f !== 8) return {
        ok: false,
        error: "Invalid FEN: piece data is invalid (too many squares in rank)"
      };
    }
    if (e[3][1] == "3" && e[1] == "w" || e[3][1] == "6" && e[1] == "b") return {
      ok: false,
      error: "Invalid FEN: illegal en-passant square"
    };
    const l = [
      {
        color: "white",
        regex: /K/g
      },
      {
        color: "black",
        regex: /k/g
      }
    ];
    for (const { color: c, regex: f } of l) {
      if (!f.test(e[0])) return {
        ok: false,
        error: `Invalid FEN: missing ${c} king`
      };
      if ((e[0].match(f) || []).length > 1) return {
        ok: false,
        error: `Invalid FEN: too many ${c} kings`
      };
    }
    return Array.from(i[0] + i[7]).some((c) => c.toUpperCase() === "P") ? {
      ok: false,
      error: "Invalid FEN: some pawns are on the edge rows"
    } : {
      ok: true
    };
  }
  function Pk(n, e) {
    const t = n.from, r = n.to, i = n.piece;
    let l = 0, c = 0, f = 0;
    for (let m = 0, y = e.length; m < y; m++) {
      const x = e[m].from, C = e[m].to, S = e[m].piece;
      i === S && t !== x && r === C && (l++, Ol(t) === Ol(x) && c++, bf(t) === bf(x) && f++);
    }
    return l > 0 ? c > 0 && f > 0 ? fr(t) : f > 0 ? fr(t).charAt(1) : fr(t).charAt(0) : "";
  }
  function pa(n, e, t, r, i, l = void 0, c = gt.NORMAL) {
    const f = Ol(r);
    if (i === zn && (f === Ck || f === kk)) for (let m = 0; m < t_.length; m++) {
      const y = t_[m];
      n.push({
        color: e,
        from: t,
        to: r,
        piece: i,
        captured: l,
        promotion: y,
        flags: c | gt.PROMOTION
      });
    }
    else n.push({
      color: e,
      from: t,
      to: r,
      piece: i,
      captured: l,
      flags: c
    });
  }
  function n_(n) {
    let e = n.charAt(0);
    return e >= "a" && e <= "h" ? n.match(/[a-h]\d.*[a-h]\d/) ? void 0 : zn : (e = e.toLowerCase(), e === "o" ? In : e);
  }
  function nv(n) {
    return n.replace(/=/, "").replace(/[+#]?[?!]*$/, "");
  }
  function rv(n) {
    return n.split(" ").slice(0, 4).join(" ");
  }
  class Cr {
    constructor(e = ev, { skipValidation: t = false } = {}) {
      __publicField(this, "_board", new Array(128));
      __publicField(this, "_turn", dr);
      __publicField(this, "_header", {});
      __publicField(this, "_kings", {
        w: Kr,
        b: Kr
      });
      __publicField(this, "_epSquare", -1);
      __publicField(this, "_halfMoves", 0);
      __publicField(this, "_moveNumber", 0);
      __publicField(this, "_history", []);
      __publicField(this, "_comments", {});
      __publicField(this, "_castling", {
        w: 0,
        b: 0
      });
      __publicField(this, "_positionCount", {});
      this.load(e, {
        skipValidation: t
      });
    }
    clear({ preserveHeaders: e = false } = {}) {
      this._board = new Array(128), this._kings = {
        w: Kr,
        b: Kr
      }, this._turn = dr, this._castling = {
        w: 0,
        b: 0
      }, this._epSquare = Kr, this._halfMoves = 0, this._moveNumber = 1, this._history = [], this._comments = {}, this._header = e ? this._header : {}, this._positionCount = {}, delete this._header.SetUp, delete this._header.FEN;
    }
    load(e, { skipValidation: t = false, preserveHeaders: r = false } = {}) {
      let i = e.split(/\s+/);
      if (i.length >= 2 && i.length < 6) {
        const f = [
          "-",
          "-",
          "0",
          "1"
        ];
        e = i.concat(f.slice(-(6 - i.length))).join(" ");
      }
      if (i = e.split(/\s+/), !t) {
        const { ok: f, error: m } = Nk(e);
        if (!f) throw new Error(m);
      }
      const l = i[0];
      let c = 0;
      this.clear({
        preserveHeaders: r
      });
      for (let f = 0; f < l.length; f++) {
        const m = l.charAt(f);
        if (m === "/") c += 8;
        else if (FE(m)) c += parseInt(m, 10);
        else {
          const y = m < "a" ? dr : ks;
          this._put({
            type: m.toLowerCase(),
            color: y
          }, fr(c)), c++;
        }
      }
      this._turn = i[1], i[2].indexOf("K") > -1 && (this._castling.w |= gt.KSIDE_CASTLE), i[2].indexOf("Q") > -1 && (this._castling.w |= gt.QSIDE_CASTLE), i[2].indexOf("k") > -1 && (this._castling.b |= gt.KSIDE_CASTLE), i[2].indexOf("q") > -1 && (this._castling.b |= gt.QSIDE_CASTLE), this._epSquare = i[3] === "-" ? Kr : lt[i[3]], this._halfMoves = parseInt(i[4], 10), this._moveNumber = parseInt(i[5], 10), this._updateSetup(e), this._incPositionCount(e);
    }
    fen() {
      var _a3, _b3;
      let e = 0, t = "";
      for (let l = lt.a8; l <= lt.h1; l++) {
        if (this._board[l]) {
          e > 0 && (t += e, e = 0);
          const { color: c, type: f } = this._board[l];
          t += c === dr ? f.toUpperCase() : f.toLowerCase();
        } else e++;
        l + 1 & 136 && (e > 0 && (t += e), l !== lt.h1 && (t += "/"), e = 0, l += 8);
      }
      let r = "";
      this._castling[dr] & gt.KSIDE_CASTLE && (r += "K"), this._castling[dr] & gt.QSIDE_CASTLE && (r += "Q"), this._castling[ks] & gt.KSIDE_CASTLE && (r += "k"), this._castling[ks] & gt.QSIDE_CASTLE && (r += "q"), r = r || "-";
      let i = "-";
      if (this._epSquare !== Kr) {
        const l = this._epSquare + (this._turn === dr ? 16 : -16), c = [
          l + 1,
          l - 1
        ];
        for (const f of c) {
          if (f & 136) continue;
          const m = this._turn;
          if (((_a3 = this._board[f]) == null ? void 0 : _a3.color) === m && ((_b3 = this._board[f]) == null ? void 0 : _b3.type) === zn) {
            this._makeMove({
              color: m,
              from: f,
              to: this._epSquare,
              piece: zn,
              captured: zn,
              flags: gt.EP_CAPTURE
            });
            const y = !this._isKingAttacked(m);
            if (this._undoMove(), y) {
              i = fr(this._epSquare);
              break;
            }
          }
        }
      }
      return [
        t,
        this._turn,
        r,
        i,
        this._halfMoves,
        this._moveNumber
      ].join(" ");
    }
    _updateSetup(e) {
      this._history.length > 0 || (e !== ev ? (this._header.SetUp = "1", this._header.FEN = e) : (delete this._header.SetUp, delete this._header.FEN));
    }
    reset() {
      this.load(ev);
    }
    get(e) {
      return this._board[lt[e]];
    }
    put({ type: e, color: t }, r) {
      return this._put({
        type: e,
        color: t
      }, r) ? (this._updateCastlingRights(), this._updateEnPassantSquare(), this._updateSetup(this.fen()), true) : false;
    }
    _put({ type: e, color: t }, r) {
      if (Tk.indexOf(e.toLowerCase()) === -1 || !(r in lt)) return false;
      const i = lt[r];
      if (e == In && !(this._kings[t] == Kr || this._kings[t] == i)) return false;
      const l = this._board[i];
      return l && l.type === In && (this._kings[l.color] = Kr), this._board[i] = {
        type: e,
        color: t
      }, e === In && (this._kings[t] = i), true;
    }
    remove(e) {
      const t = this.get(e);
      return delete this._board[lt[e]], t && t.type === In && (this._kings[t.color] = Kr), this._updateCastlingRights(), this._updateEnPassantSquare(), this._updateSetup(this.fen()), t;
    }
    _updateCastlingRights() {
      var _a3, _b3, _c, _d, _e2, _f2, _g2, _h, _i, _j2, _k2, _l;
      const e = ((_a3 = this._board[lt.e1]) == null ? void 0 : _a3.type) === In && ((_b3 = this._board[lt.e1]) == null ? void 0 : _b3.color) === dr, t = ((_c = this._board[lt.e8]) == null ? void 0 : _c.type) === In && ((_d = this._board[lt.e8]) == null ? void 0 : _d.color) === ks;
      (!e || ((_e2 = this._board[lt.a1]) == null ? void 0 : _e2.type) !== of || ((_f2 = this._board[lt.a1]) == null ? void 0 : _f2.color) !== dr) && (this._castling.w &= -65), (!e || ((_g2 = this._board[lt.h1]) == null ? void 0 : _g2.type) !== of || ((_h = this._board[lt.h1]) == null ? void 0 : _h.color) !== dr) && (this._castling.w &= -33), (!t || ((_i = this._board[lt.a8]) == null ? void 0 : _i.type) !== of || ((_j2 = this._board[lt.a8]) == null ? void 0 : _j2.color) !== ks) && (this._castling.b &= -65), (!t || ((_k2 = this._board[lt.h8]) == null ? void 0 : _k2.type) !== of || ((_l = this._board[lt.h8]) == null ? void 0 : _l.color) !== ks) && (this._castling.b &= -33);
    }
    _updateEnPassantSquare() {
      var _a3, _b3;
      if (this._epSquare === Kr) return;
      const e = this._epSquare + (this._turn === dr ? -16 : 16), t = this._epSquare + (this._turn === dr ? 16 : -16), r = [
        t + 1,
        t - 1
      ];
      if (this._board[e] !== null || this._board[this._epSquare] !== null || ((_a3 = this._board[t]) == null ? void 0 : _a3.color) !== tf(this._turn) || ((_b3 = this._board[t]) == null ? void 0 : _b3.type) !== zn) {
        this._epSquare = Kr;
        return;
      }
      const i = (l) => {
        var _a4, _b4;
        return !(l & 136) && ((_a4 = this._board[l]) == null ? void 0 : _a4.color) === this._turn && ((_b4 = this._board[l]) == null ? void 0 : _b4.type) === zn;
      };
      r.some(i) || (this._epSquare = Kr);
    }
    _attacked(e, t, r) {
      const i = [];
      for (let l = lt.a8; l <= lt.h1; l++) {
        if (l & 136) {
          l += 7;
          continue;
        }
        if (this._board[l] === void 0 || this._board[l].color !== e) continue;
        const c = this._board[l], f = l - t;
        if (f === 0) continue;
        const m = f + 119;
        if (xk[m] & bk[c.type]) {
          if (c.type === zn) {
            if (f > 0 && c.color === dr || f <= 0 && c.color === ks) if (r) i.push(fr(l));
            else return true;
            continue;
          }
          if (c.type === "n" || c.type === "k") if (r) {
            i.push(fr(l));
            continue;
          } else return true;
          const y = Ek[m];
          let x = l + y, C = false;
          for (; x !== t; ) {
            if (this._board[x] != null) {
              C = true;
              break;
            }
            x += y;
          }
          if (!C) if (r) {
            i.push(fr(l));
            continue;
          } else return true;
        }
      }
      return r ? i : false;
    }
    attackers(e, t) {
      return t ? this._attacked(t, lt[e], true) : this._attacked(this._turn, lt[e], true);
    }
    _isKingAttacked(e) {
      const t = this._kings[e];
      return t === -1 ? false : this._attacked(tf(e), t);
    }
    isAttacked(e, t) {
      return this._attacked(t, lt[e]);
    }
    isCheck() {
      return this._isKingAttacked(this._turn);
    }
    inCheck() {
      return this.isCheck();
    }
    isCheckmate() {
      return this.isCheck() && this._moves().length === 0;
    }
    isStalemate() {
      return !this.isCheck() && this._moves().length === 0;
    }
    isInsufficientMaterial() {
      const e = {
        b: 0,
        n: 0,
        r: 0,
        q: 0,
        k: 0,
        p: 0
      }, t = [];
      let r = 0, i = 0;
      for (let l = lt.a8; l <= lt.h1; l++) {
        if (i = (i + 1) % 2, l & 136) {
          l += 7;
          continue;
        }
        const c = this._board[l];
        c && (e[c.type] = c.type in e ? e[c.type] + 1 : 1, c.type === gg && t.push(i), r++);
      }
      if (r === 2) return true;
      if (r === 3 && (e[gg] === 1 || e[Dv] === 1)) return true;
      if (r === e[gg] + 2) {
        let l = 0;
        const c = t.length;
        for (let f = 0; f < c; f++) l += t[f];
        if (l === 0 || l === c) return true;
      }
      return false;
    }
    isThreefoldRepetition() {
      return this._getPositionCount(this.fen()) >= 3;
    }
    isDrawByFiftyMoves() {
      return this._halfMoves >= 100;
    }
    isDraw() {
      return this.isDrawByFiftyMoves() || this.isStalemate() || this.isInsufficientMaterial() || this.isThreefoldRepetition();
    }
    isGameOver() {
      return this.isCheckmate() || this.isStalemate() || this.isDraw();
    }
    moves({ verbose: e = false, square: t = void 0, piece: r = void 0 } = {}) {
      const i = this._moves({
        square: t,
        piece: r
      });
      return e ? i.map((l) => new tg(this, l)) : i.map((l) => this._moveToSan(l, i));
    }
    _moves({ legal: e = true, piece: t = void 0, square: r = void 0 } = {}) {
      var _a3;
      const i = r ? r.toLowerCase() : void 0, l = t == null ? void 0 : t.toLowerCase(), c = [], f = this._turn, m = tf(f);
      let y = lt.a8, x = lt.h1, C = false;
      if (i) if (i in lt) y = x = lt[i], C = true;
      else return [];
      for (let N = y; N <= x; N++) {
        if (N & 136) {
          N += 7;
          continue;
        }
        if (!this._board[N] || this._board[N].color === m) continue;
        const { type: P } = this._board[N];
        let O;
        if (P === zn) {
          if (l && l !== P) continue;
          O = N + tv[f][0], this._board[O] || (pa(c, f, N, O, zn), O = N + tv[f][1], Ak[f] === Ol(N) && !this._board[O] && pa(c, f, N, O, zn, void 0, gt.BIG_PAWN));
          for (let L = 2; L < 4; L++) O = N + tv[f][L], !(O & 136) && (((_a3 = this._board[O]) == null ? void 0 : _a3.color) === m ? pa(c, f, N, O, zn, this._board[O].type, gt.CAPTURE) : O === this._epSquare && pa(c, f, N, O, zn, zn, gt.EP_CAPTURE));
        } else {
          if (l && l !== P) continue;
          for (let L = 0, H = e_[P].length; L < H; L++) {
            const W = e_[P][L];
            for (O = N; O += W, !(O & 136); ) {
              if (!this._board[O]) pa(c, f, N, O, P);
              else {
                if (this._board[O].color === f) break;
                pa(c, f, N, O, P, this._board[O].type, gt.CAPTURE);
                break;
              }
              if (P === Dv || P === In) break;
            }
          }
        }
      }
      if ((l === void 0 || l === In) && (!C || x === this._kings[f])) {
        if (this._castling[f] & gt.KSIDE_CASTLE) {
          const N = this._kings[f], P = N + 2;
          !this._board[N + 1] && !this._board[P] && !this._attacked(m, this._kings[f]) && !this._attacked(m, N + 1) && !this._attacked(m, P) && pa(c, f, this._kings[f], P, In, void 0, gt.KSIDE_CASTLE);
        }
        if (this._castling[f] & gt.QSIDE_CASTLE) {
          const N = this._kings[f], P = N - 2;
          !this._board[N - 1] && !this._board[N - 2] && !this._board[N - 3] && !this._attacked(m, this._kings[f]) && !this._attacked(m, N - 1) && !this._attacked(m, P) && pa(c, f, this._kings[f], P, In, void 0, gt.QSIDE_CASTLE);
        }
      }
      if (!e || this._kings[f] === -1) return c;
      const S = [];
      for (let N = 0, P = c.length; N < P; N++) this._makeMove(c[N]), this._isKingAttacked(f) || S.push(c[N]), this._undoMove();
      return S;
    }
    move(e, { strict: t = false } = {}) {
      let r = null;
      if (typeof e == "string") r = this._moveFromSan(e, t);
      else if (typeof e == "object") {
        const l = this._moves();
        for (let c = 0, f = l.length; c < f; c++) if (e.from === fr(l[c].from) && e.to === fr(l[c].to) && (!("promotion" in l[c]) || e.promotion === l[c].promotion)) {
          r = l[c];
          break;
        }
      }
      if (!r) throw typeof e == "string" ? new Error(`Invalid move: ${e}`) : new Error(`Invalid move: ${JSON.stringify(e)}`);
      const i = new tg(this, r);
      return this._makeMove(r), this._incPositionCount(i.after), i;
    }
    _push(e) {
      this._history.push({
        move: e,
        kings: {
          b: this._kings.b,
          w: this._kings.w
        },
        turn: this._turn,
        castling: {
          b: this._castling.b,
          w: this._castling.w
        },
        epSquare: this._epSquare,
        halfMoves: this._halfMoves,
        moveNumber: this._moveNumber
      });
    }
    _makeMove(e) {
      const t = this._turn, r = tf(t);
      if (this._push(e), this._board[e.to] = this._board[e.from], delete this._board[e.from], e.flags & gt.EP_CAPTURE && (this._turn === ks ? delete this._board[e.to - 16] : delete this._board[e.to + 16]), e.promotion && (this._board[e.to] = {
        type: e.promotion,
        color: t
      }), this._board[e.to].type === In) {
        if (this._kings[t] = e.to, e.flags & gt.KSIDE_CASTLE) {
          const i = e.to - 1, l = e.to + 1;
          this._board[i] = this._board[l], delete this._board[l];
        } else if (e.flags & gt.QSIDE_CASTLE) {
          const i = e.to + 1, l = e.to - 2;
          this._board[i] = this._board[l], delete this._board[l];
        }
        this._castling[t] = 0;
      }
      if (this._castling[t]) {
        for (let i = 0, l = ha[t].length; i < l; i++) if (e.from === ha[t][i].square && this._castling[t] & ha[t][i].flag) {
          this._castling[t] ^= ha[t][i].flag;
          break;
        }
      }
      if (this._castling[r]) {
        for (let i = 0, l = ha[r].length; i < l; i++) if (e.to === ha[r][i].square && this._castling[r] & ha[r][i].flag) {
          this._castling[r] ^= ha[r][i].flag;
          break;
        }
      }
      e.flags & gt.BIG_PAWN ? t === ks ? this._epSquare = e.to - 16 : this._epSquare = e.to + 16 : this._epSquare = Kr, e.piece === zn ? this._halfMoves = 0 : e.flags & (gt.CAPTURE | gt.EP_CAPTURE) ? this._halfMoves = 0 : this._halfMoves++, t === ks && this._moveNumber++, this._turn = r;
    }
    undo() {
      const e = this._undoMove();
      if (e) {
        const t = new tg(this, e);
        return this._decPositionCount(t.after), t;
      }
      return null;
    }
    _undoMove() {
      const e = this._history.pop();
      if (e === void 0) return null;
      const t = e.move;
      this._kings = e.kings, this._turn = e.turn, this._castling = e.castling, this._epSquare = e.epSquare, this._halfMoves = e.halfMoves, this._moveNumber = e.moveNumber;
      const r = this._turn, i = tf(r);
      if (this._board[t.from] = this._board[t.to], this._board[t.from].type = t.piece, delete this._board[t.to], t.captured) if (t.flags & gt.EP_CAPTURE) {
        let l;
        r === ks ? l = t.to - 16 : l = t.to + 16, this._board[l] = {
          type: zn,
          color: i
        };
      } else this._board[t.to] = {
        type: t.captured,
        color: i
      };
      if (t.flags & (gt.KSIDE_CASTLE | gt.QSIDE_CASTLE)) {
        let l, c;
        t.flags & gt.KSIDE_CASTLE ? (l = t.to + 1, c = t.to - 1) : (l = t.to - 2, c = t.to + 1), this._board[l] = this._board[c], delete this._board[c];
      }
      return t;
    }
    pgn({ newline: e = `
`, maxWidth: t = 0 } = {}) {
      const r = [];
      let i = false;
      for (const S in this._header) r.push("[" + S + ' "' + this._header[S] + '"]' + e), i = true;
      i && this._history.length && r.push(e);
      const l = (S) => {
        const N = this._comments[this.fen()];
        if (typeof N < "u") {
          const P = S.length > 0 ? " " : "";
          S = `${S}${P}{${N}}`;
        }
        return S;
      }, c = [];
      for (; this._history.length > 0; ) c.push(this._undoMove());
      const f = [];
      let m = "";
      for (c.length === 0 && f.push(l("")); c.length > 0; ) {
        m = l(m);
        const S = c.pop();
        if (!S) break;
        if (!this._history.length && S.color === "b") {
          const N = `${this._moveNumber}. ...`;
          m = m ? `${m} ${N}` : N;
        } else S.color === "w" && (m.length && f.push(m), m = this._moveNumber + ".");
        m = m + " " + this._moveToSan(S, this._moves({
          legal: true
        })), this._makeMove(S);
      }
      if (m.length && f.push(l(m)), typeof this._header.Result < "u" && f.push(this._header.Result), t === 0) return r.join("") + f.join(" ");
      const y = function() {
        return r.length > 0 && r[r.length - 1] === " " ? (r.pop(), true) : false;
      }, x = function(S, N) {
        for (const P of N.split(" ")) if (P) {
          if (S + P.length > t) {
            for (; y(); ) S--;
            r.push(e), S = 0;
          }
          r.push(P), S += P.length, r.push(" "), S++;
        }
        return y() && S--, S;
      };
      let C = 0;
      for (let S = 0; S < f.length; S++) {
        if (C + f[S].length > t && f[S].includes("{")) {
          C = x(C, f[S]);
          continue;
        }
        C + f[S].length > t && S !== 0 ? (r[r.length - 1] === " " && r.pop(), r.push(e), C = 0) : S !== 0 && (r.push(" "), C++), r.push(f[S]), C += f[S].length;
      }
      return r.join("");
    }
    header(...e) {
      for (let t = 0; t < e.length; t += 2) typeof e[t] == "string" && typeof e[t + 1] == "string" && (this._header[e[t]] = e[t + 1]);
      return this._header;
    }
    setHeader(e, t) {
      return this._header[e] = t, this._header;
    }
    removeHeader(e) {
      return e in this._header ? (delete this._header[e], true) : false;
    }
    getHeaders() {
      return this._header;
    }
    loadPgn(e, { strict: t = false, newlineChar: r = `\r?
` } = {}) {
      function i(T) {
        return T.replace(/\\/g, "\\");
      }
      function l(T) {
        const Y = {}, u = T.split(new RegExp(i(r)));
        let ge = "", j = "";
        for (let M = 0; M < u.length; M++) {
          const V = /^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;
          ge = u[M].replace(V, "$1"), j = u[M].replace(V, "$2"), ge.trim().length > 0 && (Y[ge] = j);
        }
        return Y;
      }
      e = e.trim();
      const f = new RegExp("^(\\[((?:" + i(r) + ")|.)*\\])((?:\\s*" + i(r) + "){2}|(?:\\s*" + i(r) + ")*$)").exec(e), m = f && f.length >= 2 ? f[1] : "";
      this.reset();
      const y = l(m);
      let x = "";
      for (const T in y) T.toLowerCase() === "fen" && (x = y[T]), this.header(T, y[T]);
      if (!t) x && this.load(x, {
        preserveHeaders: true
      });
      else if (y.SetUp === "1") {
        if (!("FEN" in y)) throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");
        this.load(y.FEN, {
          preserveHeaders: true
        });
      }
      function C(T) {
        return Array.from(T).map(function(Y) {
          return Y.charCodeAt(0) < 128 ? Y.charCodeAt(0).toString(16) : encodeURIComponent(Y).replace(/%/g, "").toLowerCase();
        }).join("");
      }
      function S(T) {
        return T.length == 0 ? "" : decodeURIComponent("%" + (T.match(/.{1,2}/g) || []).join("%"));
      }
      const N = function(T) {
        return T = T.replace(new RegExp(i(r), "g"), " "), `{${C(T.slice(1, T.length - 1))}}`;
      }, P = function(T) {
        if (T.startsWith("{") && T.endsWith("}")) return S(T.slice(1, T.length - 1));
      };
      let O = e.replace(m, "").replace(new RegExp(`({[^}]*})+?|;([^${i(r)}]*)`, "g"), function(T, Y, u) {
        return Y !== void 0 ? N(Y) : " " + N(`{${u.slice(1)}}`);
      }).replace(new RegExp(i(r), "g"), " ");
      const L = /(\([^()]+\))+?/g;
      for (; L.test(O); ) O = O.replace(L, "");
      O = O.replace(/\d+\.(\.\.)?/g, ""), O = O.replace(/\.\.\./g, ""), O = O.replace(/\$\d+/g, "");
      let H = O.trim().split(new RegExp(/\s+/));
      H = H.filter((T) => T !== "");
      let W = "";
      for (let T = 0; T < H.length; T++) {
        const Y = P(H[T]);
        if (Y !== void 0) {
          this._comments[this.fen()] = Y;
          continue;
        }
        const u = this._moveFromSan(H[T], t);
        if (u == null) if (Rk.indexOf(H[T]) > -1) W = H[T];
        else throw new Error(`Invalid move in PGN: ${H[T]}`);
        else W = "", this._makeMove(u), this._incPositionCount(this.fen());
      }
      W && Object.keys(this._header).length && !this._header.Result && this.header("Result", W);
    }
    _moveToSan(e, t) {
      let r = "";
      if (e.flags & gt.KSIDE_CASTLE) r = "O-O";
      else if (e.flags & gt.QSIDE_CASTLE) r = "O-O-O";
      else {
        if (e.piece !== zn) {
          const i = Pk(e, t);
          r += e.piece.toUpperCase() + i;
        }
        e.flags & (gt.CAPTURE | gt.EP_CAPTURE) && (e.piece === zn && (r += fr(e.from)[0]), r += "x"), r += fr(e.to), e.promotion && (r += "=" + e.promotion.toUpperCase());
      }
      return this._makeMove(e), this.isCheck() && (this.isCheckmate() ? r += "#" : r += "+"), this._undoMove(), r;
    }
    _moveFromSan(e, t = false) {
      const r = nv(e);
      let i = n_(r), l = this._moves({
        legal: true,
        piece: i
      });
      for (let S = 0, N = l.length; S < N; S++) if (r === nv(this._moveToSan(l[S], l))) return l[S];
      if (t) return null;
      let c, f, m, y, x, C = false;
      if (f = r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/), f ? (c = f[1], m = f[2], y = f[3], x = f[4], m.length == 1 && (C = true)) : (f = r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/), f && (c = f[1], m = f[2], y = f[3], x = f[4], m.length == 1 && (C = true))), i = n_(r), l = this._moves({
        legal: true,
        piece: c || i
      }), !y) return null;
      for (let S = 0, N = l.length; S < N; S++) if (m) {
        if ((!c || c.toLowerCase() == l[S].piece) && lt[m] == l[S].from && lt[y] == l[S].to && (!x || x.toLowerCase() == l[S].promotion)) return l[S];
        if (C) {
          const P = fr(l[S].from);
          if ((!c || c.toLowerCase() == l[S].piece) && lt[y] == l[S].to && (m == P[0] || m == P[1]) && (!x || x.toLowerCase() == l[S].promotion)) return l[S];
        }
      } else if (r === nv(this._moveToSan(l[S], l)).replace("x", "")) return l[S];
      return null;
    }
    ascii() {
      let e = `   +------------------------+
`;
      for (let t = lt.a8; t <= lt.h1; t++) {
        if (bf(t) === 0 && (e += " " + "87654321"[Ol(t)] + " |"), this._board[t]) {
          const r = this._board[t].type, l = this._board[t].color === dr ? r.toUpperCase() : r.toLowerCase();
          e += " " + l + " ";
        } else e += " . ";
        t + 1 & 136 && (e += `|
`, t += 8);
      }
      return e += `   +------------------------+
`, e += "     a  b  c  d  e  f  g  h", e;
    }
    perft(e) {
      const t = this._moves({
        legal: false
      });
      let r = 0;
      const i = this._turn;
      for (let l = 0, c = t.length; l < c; l++) this._makeMove(t[l]), this._isKingAttacked(i) || (e - 1 > 0 ? r += this.perft(e - 1) : r++), this._undoMove();
      return r;
    }
    turn() {
      return this._turn;
    }
    board() {
      const e = [];
      let t = [];
      for (let r = lt.a8; r <= lt.h1; r++) this._board[r] == null ? t.push(null) : t.push({
        square: fr(r),
        type: this._board[r].type,
        color: this._board[r].color
      }), r + 1 & 136 && (e.push(t), t = [], r += 8);
      return e;
    }
    squareColor(e) {
      if (e in lt) {
        const t = lt[e];
        return (Ol(t) + bf(t)) % 2 === 0 ? "light" : "dark";
      }
      return null;
    }
    history({ verbose: e = false } = {}) {
      const t = [], r = [];
      for (; this._history.length > 0; ) t.push(this._undoMove());
      for (; ; ) {
        const i = t.pop();
        if (!i) break;
        e ? r.push(new tg(this, i)) : r.push(this._moveToSan(i, this._moves())), this._makeMove(i);
      }
      return r;
    }
    _getPositionCount(e) {
      const t = rv(e);
      return this._positionCount[t] || 0;
    }
    _incPositionCount(e) {
      const t = rv(e);
      this._positionCount[t] === void 0 && (this._positionCount[t] = 0), this._positionCount[t] += 1;
    }
    _decPositionCount(e) {
      const t = rv(e);
      this._positionCount[t] === 1 ? delete this._positionCount[t] : this._positionCount[t] -= 1;
    }
    _pruneComments() {
      const e = [], t = {}, r = (i) => {
        i in this._comments && (t[i] = this._comments[i]);
      };
      for (; this._history.length > 0; ) e.push(this._undoMove());
      for (r(this.fen()); ; ) {
        const i = e.pop();
        if (!i) break;
        this._makeMove(i), r(this.fen());
      }
      this._comments = t;
    }
    getComment() {
      return this._comments[this.fen()];
    }
    setComment(e) {
      this._comments[this.fen()] = e.replace("{", "[").replace("}", "]");
    }
    deleteComment() {
      return this.removeComment();
    }
    removeComment() {
      const e = this._comments[this.fen()];
      return delete this._comments[this.fen()], e;
    }
    getComments() {
      return this._pruneComments(), Object.keys(this._comments).map((e) => ({
        fen: e,
        comment: this._comments[e]
      }));
    }
    deleteComments() {
      return this.removeComments();
    }
    removeComments() {
      return this._pruneComments(), Object.keys(this._comments).map((e) => {
        const t = this._comments[e];
        return delete this._comments[e], {
          fen: e,
          comment: t
        };
      });
    }
    setCastlingRights(e, t) {
      for (const i of [
        In,
        va
      ]) t[i] !== void 0 && (t[i] ? this._castling[e] |= ng[i] : this._castling[e] &= ~ng[i]);
      this._updateCastlingRights();
      const r = this.getCastlingRights(e);
      return (t[In] === void 0 || t[In] === r[In]) && (t[va] === void 0 || t[va] === r[va]);
    }
    getCastlingRights(e) {
      return {
        [In]: (this._castling[e] & ng[In]) !== 0,
        [va]: (this._castling[e] & ng[va]) !== 0
      };
    }
    moveNumber() {
      return this._moveNumber;
    }
  }
  const zE = (n, e, t) => Dk(n, e, t) % 2 === 0 ? "w" : "b", Dk = (n, e, t) => {
    const r = /* @__PURE__ */ new Map();
    for (const c of e) r.set(c.toId, c.fromId);
    let i = 0, l = t;
    for (; r.has(l); ) i++, l = r.get(l);
    return console.log(`Profondit\xE0 del nodo ${t}: ${i}`), i;
  }, UE = (n, e, t, r) => {
    if (!n || typeof n != "string") return false;
    try {
      const i = jk(t, r), l = i ? sm(e, t, i) : [], c = new Cr();
      for (const y of l) if (y && y.trim() !== "") try {
        c.move(y);
      } catch (x) {
        return console.error(`Errore applicando la mossa precedente ${y}:`, x), false;
      }
      const f = c.turn();
      console.log(`Verifica mossa: ${n}`), console.log(`Turno attuale: ${f === "w" ? "Bianco" : "Nero"}`), console.log("Mosse valide:", c.moves());
      const m = zE(e, t, r);
      f !== m && console.error(`Errore di turno: atteso ${m}, attuale ${f}`);
      try {
        return c.move(n) !== null;
      } catch {
        return c.moves().some((x) => {
          const C = x.replace(/\+|#/g, ""), S = n.replace(/\+|#/g, ""), N = C === S || C.toLowerCase() === S.toLowerCase();
          return N && console.log(`Mossa valida trovata: ${x}`), N;
        });
      }
    } catch (i) {
      return console.error("Errore durante la validazione della mossa:", i), false;
    }
  }, jk = (n, e) => {
    const t = n.find((r) => r.toId === e);
    return t ? t.fromId : null;
  }, r_ = (n) => {
    if (!n || n.length === 0) return "";
    const e = new Cr();
    let t = 0;
    console.log("Generazione PGN per il percorso:", n);
    try {
      for (const r of n) if (!(!r || r.trim() === "")) try {
        if (e.move(r)) t++;
        else {
          console.error(`Mossa non valida nel percorso: ${r}`);
          break;
        }
      } catch (i) {
        console.error(`Errore nell'applicare la mossa ${r}:`, i);
        break;
      }
      return console.log(`PGN generato con ${t} mosse valide`), e.pgn();
    } catch (r) {
      return console.error("Errore nella generazione del PGN:", r), "Errore nella generazione del PGN";
    }
  }, Ok = (n, e, t) => {
    const r = sm(n, e, t), i = new Cr();
    for (const l of r) if (l && l.trim() !== "") try {
      i.move(l);
    } catch (c) {
      console.error(`Errore applicando la mossa ${l}:`, c);
      break;
    }
    return i.fen();
  }, sm = (n, e, t) => {
    const r = new Map(n.map((f) => [
      f.id,
      f
    ])), i = /* @__PURE__ */ new Map();
    for (const f of e) i.set(f.toId, f.fromId);
    const l = [];
    let c = t;
    for (; c; ) {
      const f = r.get(c);
      f && f.label && f.label.trim() !== "" && l.unshift(f.label), c = i.get(c);
    }
    return console.log(`Percorso per nodo ${t}:`, l), l;
  }, Ny = ({ node: n, updateNode: e, isSelected: t, onSelect: r, onAddChild: i, onDragStart: l, onDragEnd: c, canvasData: f, onGeneratePGN: m, onDeleteNode: y }) => {
    const [x, C] = R.useState(false), [S, N] = R.useState(false), [P, O] = R.useState(false), [L, H] = R.useState(n.label || ""), [W, T] = R.useState(true), [Y, u] = R.useState(true), ge = R.useRef(null), j = R.useRef(null), M = R.useRef({
      x: 0,
      y: 0
    }), V = R.useRef(false);
    R.useEffect(() => {
      if (t && m && f) {
        const ve = sm(f.nodes, f.connections, n.id);
        m(ve);
      }
    }, [
      t,
      n.id,
      f,
      m
    ]);
    const B = (ve) => {
      S || (C(true), r(), M.current = {
        x: ve.clientX - n.x,
        y: ve.clientY - n.y
      }, l && l(), ve.preventDefault(), ve.stopPropagation());
    }, q = (ve) => {
      if (S) return;
      V.current = true, C(true), r();
      const De = ve.touches[0];
      M.current = {
        x: De.clientX - n.x,
        y: De.clientY - n.y
      }, l && l(), ve.preventDefault(), ve.stopPropagation();
    }, G = (ve) => {
      if (!x || V.current) return;
      const De = ve.clientX - M.current.x, Be = ve.clientY - M.current.y;
      e({
        ...n,
        x: De,
        y: Be
      });
    }, F = (ve) => {
      if (!x || !V.current) return;
      const De = ve.touches[0], Be = De.clientX - M.current.x, et = De.clientY - M.current.y;
      e({
        ...n,
        x: Be,
        y: et
      }), ve.preventDefault();
    }, Oe = () => {
      x && !V.current && (C(false), c && c());
    }, Le = () => {
      x && V.current && (C(false), V.current = false, c && c());
    }, Ge = () => {
      O(true);
    }, Ye = () => {
      O(false);
    }, he = (ve) => {
      N(true), T(true), u(true), r(), ve.stopPropagation();
    }, Pe = (ve) => {
      S || (r(), ve.stopPropagation());
    }, pe = (ve) => {
      const De = ve.target.value, Be = De === "" || _k(De);
      if (T(Be), Be && De && f && De.trim() !== "") {
        const et = UE(De, f.nodes, f.connections, n.id);
        u(et);
      } else u(true);
      H(De);
    }, X = () => {
      Se();
    }, oe = (ve) => {
      ve.key === "Enter" ? Se() : ve.key === "Escape" && me();
    }, Se = () => {
      N(false), W && (L === "" || Y) ? e({
        ...n,
        label: L
      }) : (H(n.label || ""), T(true), u(true));
    }, me = () => {
      N(false), H(n.label || ""), T(true), u(true);
    }, Re = () => {
      window.confirm(`Sei sicuro di voler eliminare il nodo "${n.label || "senza nome"}"?`) && y && y(n.id, false);
    }, $e = () => {
      window.confirm(`ATTENZIONE! Stai per eliminare il nodo "${n.label || "senza nome"}" e TUTTI I SUOI NODI FIGLI.

Questa azione non pu\xF2 essere annullata. Vuoi procedere?`) && y && y(n.id, true);
    };
    R.useEffect(() => (x ? (window.addEventListener("mousemove", G), window.addEventListener("mouseup", Oe), window.addEventListener("touchmove", F, {
      passive: false
    }), window.addEventListener("touchend", Le), window.addEventListener("touchcancel", Le)) : (window.removeEventListener("mousemove", G), window.removeEventListener("mouseup", Oe), window.removeEventListener("touchmove", F), window.removeEventListener("touchend", Le), window.removeEventListener("touchcancel", Le)), () => {
      window.removeEventListener("mousemove", G), window.removeEventListener("mouseup", Oe), window.removeEventListener("touchmove", F), window.removeEventListener("touchend", Le), window.removeEventListener("touchcancel", Le);
    }), [
      x
    ]), R.useEffect(() => {
      const ve = (De) => {
        !t || S || (De.key === "9" && (De.preventDefault(), i(n.id)), De.key === "x" && (De.preventDefault(), Re()), De.key === "\\" && (De.preventDefault(), $e()));
      };
      return document.addEventListener("keydown", ve), () => {
        document.removeEventListener("keydown", ve);
      };
    }, [
      t,
      n.id,
      i,
      S,
      y
    ]), R.useEffect(() => {
      S && j.current && j.current.focus();
    }, [
      S
    ]);
    let ie = {
      left: n.x,
      top: n.y,
      cursor: x ? "grabbing" : "grab",
      zIndex: t || x ? 10 : 1,
      boxShadow: P || t ? "0 8px 16px rgba(0, 0, 0, 0.2), 0 0 0 2px rgba(255, 255, 255, 0.5)" : "0 4px 6px rgba(0, 0, 0, 0.1)",
      transition: "all 0.2s ease",
      userSelect: "none",
      WebkitUserSelect: "none",
      MozUserSelect: "none",
      msUserSelect: "none"
    }, ye = `absolute h-16 w-16 rounded-full flex items-center justify-center 
        transition-all duration-200 backdrop-blur-sm`;
    return t ? ye += " bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 text-white" : P ? ye += " bg-gradient-to-br from-blue-400 to-indigo-600 text-white" : ye += " bg-slate-700  text-slate-100  border-slate-900", x && (ye += " scale-105", ie.boxShadow = "0 10px 25px rgba(0, 0, 0, 0.3), 0 0 0 3px rgba(255, 255, 255, 0.5)"), h.jsx(h.Fragment, {
      children: h.jsx("div", {
        ref: ge,
        style: ie,
        className: ye,
        onMouseDown: B,
        onTouchStart: q,
        onDoubleClick: he,
        onClick: Pe,
        onMouseEnter: Ge,
        onMouseLeave: Ye,
        children: S ? h.jsxs("div", {
          className: "relative w-full h-full flex items-center justify-center",
          children: [
            h.jsx("input", {
              ref: j,
              type: "text",
              value: L,
              onChange: pe,
              onBlur: X,
              onKeyDown: oe,
              className: `bg-transparent text-white font-medium text-center w-3/4 outline-none ring-1 ${W ? Y ? "ring-white/30" : "ring-yellow-500" : "ring-red-500"} rounded px-1`,
              placeholder: "e4, Nf3..."
            }),
            !W && h.jsx("div", {
              className: "absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-red-400 bg-black/70 px-1 py-0.5 rounded whitespace-nowrap",
              children: "Notazione scacchi non valida"
            }),
            W && !Y && L && h.jsx("div", {
              className: "absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-yellow-400 bg-black/70 px-1 py-0.5 rounded whitespace-nowrap",
              children: "Mossa non valida in questa posizione"
            })
          ]
        }) : h.jsx("div", {
          className: "flex flex-col items-center justify-center w-full h-full",
          children: n.label ? h.jsx("span", {
            className: "text-white font-medium text-sm break-words p-1 text-center leading-tight",
            children: n.label
          }) : h.jsx("span", {
            className: "text-white/50 text-xs italic p-1",
            children: P ? "Doppio click per modificare" : ""
          })
        })
      })
    });
  };
  Ny.propTypes = {
    node: fe.shape({
      id: fe.number.isRequired,
      x: fe.number.isRequired,
      y: fe.number.isRequired,
      label: fe.string,
      description: fe.string,
      fenPosition: fe.string
    }).isRequired,
    updateNode: fe.func.isRequired,
    isSelected: fe.bool,
    onSelect: fe.func.isRequired,
    onAddChild: fe.func.isRequired,
    onDragStart: fe.func,
    onDragEnd: fe.func,
    canvasData: fe.object,
    onGeneratePGN: fe.func,
    onDeleteNode: fe.func
  };
  Ny.defaultProps = {
    isSelected: false
  };
  const BE = ({ fromNode: n, toNode: e, scale: t = 1 }) => {
    const l = n.x + 32, c = n.y + 32, f = e.x + 32, m = e.y + 32, y = Math.atan2(m - c, f - l), x = Math.atan2(c - m, l - f), C = l + Math.cos(y) * 32, S = c + Math.sin(y) * 32, N = f + Math.cos(x) * 32, P = m + Math.sin(x) * 32, O = N - C, L = P - S, H = Math.sqrt(O * O + L * L), W = Math.abs(O) < 32 * 0.75, T = Math.max(1.5, 3 / t), Y = `connGradient-${n.id || n.x}-${e.id || e.x}`;
    if (W && m > c) {
      const q = `M ${C} ${S} L ${N} ${P}`;
      return h.jsxs("svg", {
        className: "absolute top-0 left-0 w-full h-full pointer-events-none z-0",
        children: [
          h.jsxs("defs", {
            children: [
              h.jsxs("linearGradient", {
                id: Y,
                x1: "0%",
                y1: "0%",
                x2: "0%",
                y2: "100%",
                gradientUnits: "userSpaceOnUse",
                children: [
                  h.jsx("stop", {
                    offset: "0%",
                    stopColor: "#9F7AEA"
                  }),
                  h.jsx("stop", {
                    offset: "100%",
                    stopColor: "#4F46E5"
                  })
                ]
              }),
              h.jsxs("filter", {
                id: "glow",
                x: "-20%",
                y: "-20%",
                width: "140%",
                height: "140%",
                children: [
                  h.jsx("feGaussianBlur", {
                    stdDeviation: "2",
                    result: "blur"
                  }),
                  h.jsx("feComposite", {
                    in: "SourceGraphic",
                    in2: "blur",
                    operator: "over"
                  })
                ]
              })
            ]
          }),
          h.jsx("path", {
            d: q,
            stroke: "rgba(99, 102, 241, 0.2)",
            strokeWidth: T + 4,
            fill: "none",
            strokeLinecap: "round",
            opacity: 0.5,
            filter: "url(#glow)"
          }),
          h.jsx("path", {
            d: q,
            stroke: `url(#${Y})`,
            strokeWidth: T,
            fill: "none",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            opacity: 0.9,
            strokeDasharray: e.isNew ? "8,4" : "none"
          }),
          h.jsx("circle", {
            cx: N,
            cy: P,
            r: T * 1.8,
            fill: "#4F46E5",
            filter: "url(#glow)"
          })
        ]
      });
    }
    const u = f > l, ge = m > c, j = Math.min(H * 0.4, 120);
    let M, V;
    ge ? u ? (M = {
      x: C - j * 0.2,
      y: S + j * 0.5
    }, V = {
      x: N - j * 0.5,
      y: P - j * 0.5
    }) : (M = {
      x: C + j * 0.2,
      y: S + j * 0.5
    }, V = {
      x: N + j * 0.5,
      y: P - j * 0.5
    }) : u ? (M = {
      x: C - j * 0.2,
      y: S - j * 0.5
    }, V = {
      x: N - j * 0.5,
      y: P + j * 0.5
    }) : (M = {
      x: C + j * 0.2,
      y: S - j * 0.5
    }, V = {
      x: N + j * 0.5,
      y: P + j * 0.5
    });
    const B = `M ${C} ${S} C ${M.x} ${M.y}, ${V.x} ${V.y}, ${N} ${P}`;
    return h.jsxs("svg", {
      className: "absolute top-0 left-0 w-full h-full pointer-events-none z-0",
      children: [
        h.jsxs("defs", {
          children: [
            h.jsxs("linearGradient", {
              id: Y,
              x1: "0%",
              y1: "0%",
              x2: "100%",
              y2: "0%",
              gradientUnits: "userSpaceOnUse",
              gradientTransform: `rotate(${y * 180 / Math.PI})`,
              children: [
                h.jsx("stop", {
                  offset: "0%",
                  stopColor: "#9F7AEA"
                }),
                h.jsx("stop", {
                  offset: "100%",
                  stopColor: "#4F46E5"
                })
              ]
            }),
            h.jsxs("filter", {
              id: "glow",
              x: "-20%",
              y: "-20%",
              width: "140%",
              height: "140%",
              children: [
                h.jsx("feGaussianBlur", {
                  stdDeviation: "2",
                  result: "blur"
                }),
                h.jsx("feComposite", {
                  in: "SourceGraphic",
                  in2: "blur",
                  operator: "over"
                })
              ]
            })
          ]
        }),
        h.jsx("path", {
          d: B,
          stroke: "rgba(99, 102, 241, 0.2)",
          strokeWidth: T + 4,
          fill: "none",
          strokeLinecap: "round",
          opacity: 0.5,
          filter: "url(#glow)"
        }),
        h.jsx("path", {
          d: B,
          stroke: `url(#${Y})`,
          strokeWidth: T,
          fill: "none",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          opacity: 0.9,
          strokeDasharray: e.isNew ? "8,4" : "none"
        }),
        h.jsx("circle", {
          cx: N,
          cy: P,
          r: T * 1.8,
          fill: "#4F46E5",
          filter: "url(#glow)"
        })
      ]
    });
  };
  BE.propTypes = {
    fromNode: fe.shape({
      x: fe.number.isRequired,
      y: fe.number.isRequired,
      id: fe.oneOfType([
        fe.string,
        fe.number
      ])
    }).isRequired,
    toNode: fe.shape({
      x: fe.number.isRequired,
      y: fe.number.isRequired,
      isNew: fe.bool,
      id: fe.oneOfType([
        fe.string,
        fe.number
      ])
    }).isRequired,
    scale: fe.number
  };
  const Py = ({ annotation: n, updateAnnotation: e, isSelected: t, onSelect: r, onDragStart: i, onDragEnd: l }) => {
    const [c, f] = R.useState(false), [m, y] = R.useState(false), [x, C] = R.useState(false), [S, N] = R.useState(false), [P, O] = R.useState(n.text || ""), L = R.useRef(null), H = R.useRef(null), W = R.useRef(null), T = R.useRef({
      x: 0,
      y: 0
    }), Y = R.useRef({
      width: 0,
      height: 0,
      x: 0,
      y: 0
    }), ge = (() => {
      const { width: me, height: Re } = n, $e = 8, ie = 16, ye = 400, ve = 250, De = Math.min(1, me / ye), Be = Math.min(1, Re / ve), et = Math.min(De, Be) * 0.7 + Math.max(De, Be) * 0.3;
      return `${Math.max($e, Math.round(($e + (ie - $e) * et) * 2) / 2)}px`;
    })(), j = R.useCallback(() => {
      m && (y(false), e({
        ...n,
        text: P
      }));
    }, [
      m,
      n,
      P,
      e
    ]);
    R.useEffect(() => {
      !t && m && j();
    }, [
      t,
      m,
      j
    ]);
    const M = (me) => {
      m || x || me.target.classList.contains("resize-handle") || (f(true), r(), T.current = {
        x: me.clientX - n.x,
        y: me.clientY - n.y
      }, i && i(), me.preventDefault(), me.stopPropagation());
    }, V = (me) => {
      if (c) {
        const Re = me.clientX - T.current.x, $e = me.clientY - T.current.y;
        e({
          ...n,
          x: Re,
          y: $e
        });
      } else if (x) {
        const Re = me.clientX - Y.current.x, $e = me.clientY - Y.current.y;
        e({
          ...n,
          width: Math.max(100, Y.current.width + Re),
          height: Math.max(50, Y.current.height + $e)
        });
      }
    }, B = () => {
      c && (f(false), l && l()), x && C(false);
    }, q = (me) => {
      me.preventDefault(), me.stopPropagation(), C(true), Y.current = {
        width: n.width,
        height: n.height,
        x: me.clientX,
        y: me.clientY
      }, r();
    }, G = (me) => {
      x || (y(true), r(), me.stopPropagation());
    }, F = (me) => {
      !m && !x && (r(), me.stopPropagation());
    }, Oe = (me) => {
      O(me.target.value);
    }, Le = () => {
      j();
    }, Ge = (me) => {
      if (!(me.key === "Enter" && me.ctrlKey)) {
        if (me.key === "Enter" && !me.ctrlKey) {
          me.preventDefault(), j();
          return;
        }
        me.key === "Escape" && (y(false), O(n.text || ""), me.preventDefault());
      }
    }, Ye = () => {
      N(true);
    }, he = () => {
      N(false);
    }, Pe = (me) => {
      H.current && (me.stopPropagation(), me.preventDefault(), H.current.scrollTop += me.deltaY, Math.abs(me.deltaX) > 0 && (H.current.scrollLeft += me.deltaX));
    };
    R.useEffect(() => {
      const me = (Re) => {
        m && L.current && !L.current.contains(Re.target) && j();
      };
      return m && document.addEventListener("mousedown", me), () => {
        document.removeEventListener("mousedown", me);
      };
    }, [
      m,
      j
    ]), R.useEffect(() => (c || x ? (window.addEventListener("mousemove", V), window.addEventListener("mouseup", B), window.addEventListener("touchmove", X, {
      passive: false
    }), window.addEventListener("touchend", oe), window.addEventListener("touchcancel", oe)) : (window.removeEventListener("mousemove", V), window.removeEventListener("mouseup", B), window.removeEventListener("touchmove", X), window.removeEventListener("touchend", oe), window.removeEventListener("touchcancel", oe)), () => {
      window.removeEventListener("mousemove", V), window.removeEventListener("mouseup", B), window.removeEventListener("touchmove", X), window.removeEventListener("touchend", oe), window.removeEventListener("touchcancel", oe);
    }), [
      c,
      x
    ]), R.useEffect(() => {
      const me = L.current;
      return me && (S || t) && me.addEventListener("wheel", Pe, {
        passive: false
      }), () => {
        me && me.removeEventListener("wheel", Pe);
      };
    }, [
      S,
      t
    ]), R.useEffect(() => {
      m && W.current && W.current.focus();
    }, [
      m
    ]);
    const pe = (me) => {
      if (m || x || me.target.classList.contains("resize-handle")) return;
      f(true), r();
      const Re = me.touches[0];
      T.current = {
        x: Re.clientX - n.x,
        y: Re.clientY - n.y
      }, i && i(), me.preventDefault(), me.stopPropagation();
    }, X = (me) => {
      if (c) {
        const Re = me.touches[0], $e = Re.clientX - T.current.x, ie = Re.clientY - T.current.y;
        e({
          ...n,
          x: $e,
          y: ie
        });
      } else if (x) {
        const Re = me.touches[0], $e = Re.clientX - Y.current.x, ie = Re.clientY - Y.current.y;
        e({
          ...n,
          width: Math.max(100, Y.current.width + $e),
          height: Math.max(50, Y.current.height + ie)
        });
      }
      me.preventDefault();
    }, oe = () => {
      c && (f(false), l && l()), x && C(false);
    }, Se = `absolute rounded shadow-lg overflow-hidden
        ${t ? "ring-2 ring-indigo-500 z-10" : "z-1"}
        ${c ? "opacity-80 cursor-grabbing" : m ? "cursor-text" : "cursor-grab"}
        transition-shadow duration-200`;
    return h.jsxs("div", {
      ref: L,
      style: {
        top: n.y,
        left: n.x,
        width: n.width,
        height: n.height,
        backgroundColor: t ? "rgba(67, 56, 202, 0.15)" : "rgba(75, 85, 99, 0.15)",
        backdropFilter: "blur(8px)"
      },
      className: Se,
      onMouseDown: M,
      onDoubleClick: G,
      onClick: F,
      onMouseEnter: Ye,
      onMouseLeave: he,
      onTouchStart: pe,
      children: [
        m ? h.jsx("textarea", {
          ref: W,
          value: P,
          onChange: Oe,
          onBlur: Le,
          onKeyDown: Ge,
          style: {
            fontSize: ge
          },
          className: "w-full h-full p-3 bg-transparent text-white focus:outline-none resize-none",
          placeholder: "Scrivi qui la tua annotazione..."
        }) : h.jsx("div", {
          ref: H,
          className: "p-3 w-full h-full text-white overflow-auto whitespace-pre-wrap scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-transparent",
          style: {
            fontSize: ge
          },
          children: n.text || h.jsx("span", {
            className: "text-white/50 italic text-sm",
            children: "Doppio click per aggiungere testo"
          })
        }),
        t && h.jsx("div", {
          className: "resize-handle absolute bottom-0 right-0 w-4 h-4 bg-indigo-500 cursor-nwse-resize z-20",
          onMouseDown: q
        })
      ]
    });
  };
  Py.propTypes = {
    annotation: fe.shape({
      id: fe.number.isRequired,
      x: fe.number.isRequired,
      y: fe.number.isRequired,
      width: fe.number.isRequired,
      height: fe.number.isRequired,
      text: fe.string
    }).isRequired,
    updateAnnotation: fe.func.isRequired,
    isSelected: fe.bool,
    onSelect: fe.func.isRequired,
    onDragStart: fe.func,
    onDragEnd: fe.func
  };
  Py.defaultProps = {
    isSelected: false
  };
  const s_ = 100, Ng = 150, jv = 60, Lk = (n, e, t) => {
    if (!n || !e || !t) return {
      x: 100,
      y: 100
    };
    const r = n.find((C) => C.id === t);
    if (!r) return {
      x: 100,
      y: 100
    };
    const i = e.filter((C) => C.fromId === t).map((C) => C.toId), l = n.filter((C) => i.includes(C.id));
    if (l.length === 0) return {
      x: r.x,
      y: r.y + s_
    };
    Math.min(...l.map((C) => C.x));
    const f = {
      x: Math.max(...l.map((C) => C.x)) + Ng / 2 + jv,
      y: r.y + s_
    }, m = Mk(n, e, l, f), y = $k(n, m);
    return Vk(y, f, Ng, jv);
  }, Mk = (n, e, t, r) => {
    const i = {};
    if (t.length === 1) {
      const f = t[0];
      return i[f.id] = {
        x: f.x - Ng / 2 - jv / 2,
        y: f.y
      }, i;
    }
    const c = (r.x - t[0].x + Ng) / (t.length + 1);
    return t.forEach((f, m) => {
      const y = c * (t.length - m) / 2;
      i[f.id] = {
        x: f.x - y,
        y: f.y
      }, WE(n, e, f.id, -y, 0, i);
    }), i;
  }, WE = (n, e, t, r, i, l) => {
    const c = e.filter((f) => f.fromId === t).map((f) => f.toId);
    c.length !== 0 && c.forEach((f) => {
      const m = n.find((y) => y.id === f);
      m && (l[f] = {
        x: m.x + r,
        y: m.y + i
      }, WE(n, e, f, r, i, l));
    });
  }, $k = (n, e) => n.map((t) => e[t.id] ? {
    ...t,
    x: e[t.id].x,
    y: e[t.id].y
  } : t), Vk = (n, e, t, r) => {
    let i = {
      ...e
    }, l;
    do {
      l = false;
      for (const c of n) {
        const f = t + r, m = Math.sqrt(Math.pow(c.x - i.x, 2) + Math.pow(c.y - i.y, 2));
        Math.abs(c.y - i.y) < 20 && m < f && (i.x = c.x + f, l = true);
      }
    } while (l);
    return i;
  }, i_ = (n, e, t) => {
    if (!n || !e) return n;
    const r = Lk(n.nodes, n.connections, e), i = {
      id: Date.now(),
      ...t,
      x: r.x,
      y: r.y
    }, l = {
      id: `conn-${Date.now()}`,
      fromId: e,
      toId: i.id
    };
    return {
      ...n,
      nodes: [
        ...n.nodes,
        i
      ],
      connections: [
        ...n.connections,
        l
      ]
    };
  }, Dy = (n) => {
    if (!n || !n.nodes || !n.connections) return n;
    const { nodes: e, connections: t } = n;
    if (e.length === 0) return n;
    let r = JSON.parse(JSON.stringify(e));
    switch (Fk(e, t)) {
      case "tree":
        r = zk(r, t);
        break;
      case "dag":
        r = Uk(r, t);
        break;
      case "cyclic":
        r = HE(r, t);
        break;
      default:
        r = qE(r);
    }
    return r = Bk(r), {
      ...n,
      nodes: r
    };
  }, Fk = (n, e) => {
    if (e.length === 0) return "isolated";
    const t = {};
    n.forEach((m) => {
      t[m.id] = [];
    }), e.forEach((m) => {
      t[m.fromId] && t[m.fromId].push(m.toId);
    });
    const r = {};
    n.forEach((m) => {
      r[m.id] = 0;
    }), e.forEach((m) => {
      r[m.toId] = (r[m.toId] || 0) + 1;
    });
    const i = Object.values(r).filter((m) => m === 0).length, l = {}, c = {}, f = (m) => {
      if (c[m]) return true;
      if (l[m]) return false;
      l[m] = true, c[m] = true;
      for (const y of t[m] || []) if (f(y)) return true;
      return c[m] = false, false;
    };
    for (const m of n) if (!l[m.id] && f(m.id)) return "cyclic";
    return i === 1 ? "tree" : "dag";
  }, zk = (n, e) => {
    var _a3;
    const t = {};
    n.forEach((C) => {
      t[C.id] = 0;
    }), e.forEach((C) => {
      t[C.toId] = (t[C.toId] || 0) + 1;
    });
    const r = (_a3 = n.find((C) => t[C.id] === 0)) == null ? void 0 : _a3.id;
    if (!r) return qE(n);
    const i = 120, l = 80, c = {}, f = (C, S = 0) => {
      c[C] = S, e.filter((P) => P.fromId === C).map((P) => P.toId).forEach((P) => {
        f(P, S + 1);
      });
    };
    f(r);
    const m = {};
    n.forEach((C) => {
      const S = c[C.id] || 0;
      m[S] || (m[S] = []), m[S].push(C);
    });
    const y = Math.max(...Object.keys(m).map(Number)), x = [
      ...n
    ];
    for (let C = 0; C <= y; C++) {
      const S = m[C] || [], P = -(S.length * l) / 2;
      S.forEach((O, L) => {
        const H = x.findIndex((W) => W.id === O.id);
        H !== -1 && (x[H] = {
          ...x[H],
          x: P + L * l,
          y: C * i
        });
      });
    }
    return x;
  }, Uk = (n, e) => {
    const t = {};
    n.forEach((C) => {
      t[C.id] = 0;
    }), e.forEach((C) => {
      t[C.toId] = (t[C.toId] || 0) + 1;
    });
    const r = n.filter((C) => t[C.id] === 0).map((C) => C.id), i = [];
    for (; r.length > 0; ) {
      const C = r.shift();
      i.push(C), e.filter((S) => S.fromId === C).forEach((S) => {
        t[S.toId]--, t[S.toId] === 0 && r.push(S.toId);
      });
    }
    if (i.length !== n.length) return HE(n, e);
    const l = {};
    i.forEach((C) => {
      l[C] = 0;
      const S = e.filter((N) => N.toId === C).map((N) => N.fromId);
      S.length > 0 && (l[C] = Math.max(...S.map((N) => l[N] || 0)) + 1);
    });
    const c = {};
    Object.entries(l).forEach(([C, S]) => {
      c[S] || (c[S] = []), c[S].push(parseInt(C));
    });
    const f = 120, m = 80, y = [
      ...n
    ], x = Math.max(...Object.keys(c).map(Number));
    for (let C = 0; C <= x; C++) {
      const S = c[C] || [], P = -(S.length * m) / 2;
      S.forEach((O, L) => {
        const H = y.findIndex((W) => W.id === O);
        H !== -1 && (y[H] = {
          ...y[H],
          x: P + L * m,
          y: C * f
        });
      });
    }
    return y;
  }, HE = (n, e) => {
    const c = n.map((y) => ({
      ...y,
      dx: 0,
      dy: 0
    })), f = Math.max(100, n.length * 20), m = 2 * Math.PI / n.length;
    c.forEach((y, x) => {
      y.x = f * Math.cos(x * m), y.y = f * Math.sin(x * m);
    });
    for (let y = 0; y < 100; y++) {
      for (let C = 0; C < c.length; C++) {
        c[C].dx = 0, c[C].dy = 0;
        for (let S = 0; S < c.length; S++) {
          if (C === S) continue;
          const N = c[C].x - c[S].x, P = c[C].y - c[S].y, O = Math.sqrt(N * N + P * P) || 1, L = 1e5 / (O * O);
          c[C].dx += N / O * L, c[C].dy += P / O * L;
        }
      }
      e.forEach((C) => {
        const S = c.find((W) => W.id === C.fromId), N = c.find((W) => W.id === C.toId);
        if (!S || !N) return;
        const P = S.x - N.x, O = S.y - N.y, L = Math.sqrt(P * P + O * O) || 1, H = 0.01 * L;
        S.dx -= P / L * H, S.dy -= O / L * H, N.dx += P / L * H, N.dy += O / L * H;
      });
      for (const C of c) {
        const S = Math.sqrt(C.dx * C.dx + C.dy * C.dy) || 1, N = Math.min(100 / S, 1);
        C.x += C.dx * N, C.y += C.dy * N;
      }
      const x = 1 - y / 100;
      for (const C of c) C.dx *= x, C.dy *= x;
    }
    return c.map(({ dx: y, dy: x, ...C }) => C);
  }, qE = (n, e) => {
    const t = Math.ceil(Math.sqrt(n.length)), r = 150, i = [
      ...n
    ];
    return i.forEach((l, c) => {
      const f = Math.floor(c / t), m = c % t;
      i[c] = {
        ...l,
        x: m * r - t * r / 2,
        y: f * r
      };
    }), i;
  }, Bk = (n) => {
    if (n.length === 0) return n;
    let e = 1 / 0, t = 1 / 0, r = -1 / 0, i = -1 / 0;
    n.forEach((f) => {
      e = Math.min(e, f.x), t = Math.min(t, f.y), r = Math.max(r, f.x), i = Math.max(i, f.y);
    });
    const l = (e + r) / 2, c = (t + i) / 2;
    return n.map((f) => ({
      ...f,
      x: f.x - l,
      y: f.y - c
    }));
  }, KE = ({ canvasData: n, setCanvasData: e, onNodeSelect: t, selectedNodeId: r, onAnnotationSelect: i, selectedAnnotationId: l, updateAnnotation: c, onGeneratePGN: f }) => {
    var _a3, _b3, _c;
    const m = R.useRef(null), y = R.useRef(null), [x, C] = R.useState(false), [S, N] = R.useState(false), [P, O] = R.useState(false), [L, H] = R.useState({
      x: 0,
      y: 0
    }), [W, T] = R.useState(1), Y = R.useRef({
      x: 0,
      y: 0
    }), u = R.useRef({
      x: 0,
      y: 0
    }), ge = R.useRef(0), [j, M] = R.useState(null), [V, B] = R.useState(1), q = R.useCallback(() => {
      const Ne = n.nodes.filter((ke) => !n.connections.some((ut) => ut.fromId === ke.id)).map((ke) => ke.pgn).filter((ke) => ke && ke.trim() !== ""), Ke = {
        ...n,
        fullLines: Ne
      }, at = JSON.stringify(Ke, null, 2), pt = new Blob([
        at
      ], {
        type: "application/json"
      }), Vt = URL.createObjectURL(pt), Fe = document.createElement("a");
      Fe.href = Vt, Fe.download = "canvasData.json", document.body.appendChild(Fe), Fe.click(), setTimeout(() => {
        document.body.removeChild(Fe), URL.revokeObjectURL(Vt);
      }, 0);
    }, [
      n
    ]), G = R.useCallback((le) => {
      const Ne = n.nodes.find((Ke) => Ke.id === le.id);
      if (le.label !== (Ne == null ? void 0 : Ne.label) && le.label && le.label.trim() !== "") {
        if (!F(le)) {
          const pt = zE(n.nodes, n.connections, le.id) === "w" ? "Bianco" : "Nero";
          return alert(`La mossa "${le.label}" non \xE8 valida in questa posizione.
\xC8 il turno del ${pt}.`), false;
        }
        le.fenPosition = Ok(n.nodes, n.connections, le.id);
      }
      if (e((Ke) => ({
        ...Ke,
        nodes: Ke.nodes.map((at) => at.id === le.id ? le : at)
      })), r === le.id) {
        const Ke = sm(n.nodes, n.connections, le.id);
        f && f(Ke);
      }
      return true;
    }, [
      n,
      r,
      f,
      e
    ]), F = R.useCallback((le) => !le.label || le.label.trim() === "" ? true : UE(le.label, n.nodes, n.connections, le.id), [
      n
    ]), Oe = R.useCallback((le) => {
      const Ne = n.nodes.find((pt) => pt.id === le);
      if (!Ne) return;
      const Ke = {
        id: Date.now(),
        x: Ne.x + 150,
        y: Ne.y + 50,
        label: "",
        description: "",
        parentId: le
      }, at = {
        id: `${le}-${Ke.id}`,
        fromId: le,
        toId: Ke.id
      };
      e((pt) => ({
        ...pt,
        nodes: [
          ...pt.nodes,
          Ke
        ],
        connections: [
          ...pt.connections || [],
          at
        ]
      })), t && t(Ke.id);
    }, [
      n,
      t,
      e
    ]), Le = R.useCallback(() => {
      const le = Dy(n);
      e(le);
    }, [
      n,
      e
    ]), Ge = R.useCallback((le, Ne) => {
      if (!(!le || !n)) if (Ne) {
        const Ke = /* @__PURE__ */ new Set(), at = (Fe) => {
          Ke.add(Fe), n.connections.filter((ut) => ut.fromId === Fe).forEach((ut) => {
            at(ut.toId);
          });
        };
        at(le);
        const pt = n.nodes.filter((Fe) => !Ke.has(Fe.id)), Vt = n.connections.filter((Fe) => !Ke.has(Fe.fromId) && !Ke.has(Fe.toId));
        e({
          ...n,
          nodes: pt,
          connections: Vt
        }), r && Ke.has(r) && t(null);
      } else {
        const Ke = n.nodes.filter((pt) => pt.id !== le), at = n.connections.filter((pt) => pt.fromId !== le && pt.toId !== le);
        e({
          ...n,
          nodes: Ke,
          connections: at
        }), r === le && t(null);
      }
    }, [
      n,
      r,
      t,
      e
    ]), Ye = R.useCallback((le) => {
      t && t(le);
    }, [
      t
    ]), he = R.useCallback((le) => {
      i && i(le);
    }, [
      i
    ]), Pe = R.useCallback((le) => {
      le.target === m.current && (r && t && t(null), l && i && i(null));
    }, [
      r,
      l,
      t,
      i
    ]), pe = R.useCallback(() => {
      C(true);
    }, []), X = R.useCallback(() => {
      C(false);
    }, []), oe = R.useCallback(() => {
      N(true);
    }, []), Se = R.useCallback(() => {
      N(false);
    }, []), me = R.useCallback((le) => {
      !le || !n || window.confirm("Sei sicuro di voler eliminare questa annotazione?") && (e({
        ...n,
        annotations: n.annotations.filter((Ne) => Ne.id !== le)
      }), l === le && i && i(null));
    }, [
      n,
      l,
      i,
      e
    ]);
    R.useEffect(() => {
      const le = (Ne) => {
        Ne.key === "\\" && l && (Ne.preventDefault(), me(l));
      };
      return window.addEventListener("keydown", le), () => {
        window.removeEventListener("keydown", le);
      };
    }, [
      l,
      me
    ]);
    const Re = R.useCallback((le) => {
      x || S || le.target !== m.current || (O(true), Y.current = {
        x: le.clientX,
        y: le.clientY
      }, le.preventDefault());
    }, [
      x,
      S
    ]), $e = R.useCallback((le) => {
      if (!P) return;
      const Ne = le.clientX - Y.current.x, Ke = le.clientY - Y.current.y;
      H((at) => ({
        x: at.x + Ne,
        y: at.y + Ke
      })), Y.current = {
        x: le.clientX,
        y: le.clientY
      };
    }, [
      P
    ]), ie = R.useCallback(() => {
      O(false);
    }, []), ye = R.useCallback((le) => {
      x || S || (le.preventDefault(), H((Ne) => ({
        x: Ne.x - le.deltaX,
        y: Ne.y - le.deltaY
      })));
    }, [
      x,
      S
    ]), ve = R.useCallback((le) => {
      if (le.target === m.current) {
        if (ge.current = Date.now(), le.touches.length === 1) {
          O(true);
          const Ne = le.touches[0];
          u.current = {
            x: Ne.clientX,
            y: Ne.clientY
          };
        } else if (le.touches.length === 2) {
          const Ne = le.touches[0], Ke = le.touches[1], at = Math.hypot(Ke.clientX - Ne.clientX, Ke.clientY - Ne.clientY);
          M(at), B(W);
        }
        le.preventDefault();
      }
    }, [
      W
    ]), De = R.useCallback((le) => {
      if (le.preventDefault(), le.touches.length === 1 && P) {
        const Ne = le.touches[0], Ke = Ne.clientX - u.current.x, at = Ne.clientY - u.current.y;
        H((pt) => ({
          x: pt.x + Ke,
          y: pt.y + at
        })), u.current = {
          x: Ne.clientX,
          y: Ne.clientY
        };
      } else if (le.touches.length === 2 && j !== null) {
        const Ne = le.touches[0], Ke = le.touches[1], pt = Math.hypot(Ke.clientX - Ne.clientX, Ke.clientY - Ne.clientY) / j, Vt = Math.max(0.3, Math.min(2, V * pt));
        T(Vt);
      }
    }, [
      P,
      j,
      V
    ]), Be = R.useCallback((le) => {
      Date.now() - ge.current < 200 && le.touches.length === 0 && le.target === m.current && (r && t && t(null), l && i && i(null)), O(false), M(null);
    }, [
      r,
      l,
      t,
      i
    ]);
    R.useEffect(() => (P ? (window.addEventListener("mousemove", $e), window.addEventListener("mouseup", ie)) : (window.removeEventListener("mousemove", $e), window.removeEventListener("mouseup", ie)), () => {
      window.removeEventListener("mousemove", $e), window.removeEventListener("mouseup", ie);
    }), [
      P,
      $e,
      ie
    ]), R.useEffect(() => {
      const le = y.current;
      return le && (le.addEventListener("wheel", ye, {
        passive: false
      }), le.addEventListener("touchstart", ve, {
        passive: false
      }), le.addEventListener("touchmove", De, {
        passive: false
      }), le.addEventListener("touchend", Be), le.addEventListener("touchcancel", Be)), () => {
        le && (le.removeEventListener("wheel", ye), le.removeEventListener("touchstart", ve), le.removeEventListener("touchmove", De), le.removeEventListener("touchend", Be), le.removeEventListener("touchcancel", Be));
      };
    }, [
      ye,
      ve,
      De,
      Be
    ]);
    const et = Math.max(0.3, Math.min(2, W));
    return h.jsxs("div", {
      ref: y,
      className: "w-full h-full flex-1 relative overflow-hidden",
      children: [
        h.jsx("div", {
          className: "absolute inset-0 w-full h-full z-0",
          style: {
            backgroundImage: "radial-gradient(#444 1px, transparent 1px)",
            backgroundSize: "20px 20px",
            backgroundPosition: `${L.x % 20}px ${L.y % 20}px`
          }
        }),
        h.jsx("div", {
          className: "fixed top-4 right-4 z-50",
          children: h.jsxs("button", {
            onClick: q,
            className: "bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-md shadow-lg focus:outline-none flex items-center justify-center",
            title: "Esporta JSON",
            children: [
              h.jsx("svg", {
                xmlns: "http://www.w3.org/2000/svg",
                className: "h-5 w-5 sm:mr-1",
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                children: h.jsx("path", {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
                })
              }),
              h.jsx("span", {
                className: "hidden sm:inline",
                children: "Esporta JSON"
              })
            ]
          })
        }),
        h.jsxs("div", {
          ref: m,
          className: "absolute",
          style: {
            width: "20000px",
            height: "20000px",
            left: "-10000px",
            top: "-10000px",
            transform: `translate(${L.x}px, ${L.y}px) scale(${et})`,
            cursor: P ? "grabbing" : "grab",
            transformOrigin: "center center"
          },
          onClick: Pe,
          onMouseDown: Re,
          children: [
            (_a3 = n == null ? void 0 : n.connections) == null ? void 0 : _a3.map((le) => {
              const Ne = n.nodes.find((at) => at.id === le.fromId), Ke = n.nodes.find((at) => at.id === le.toId);
              return !Ne || !Ke ? null : h.jsx(BE, {
                fromNode: {
                  ...Ne,
                  x: Ne.x + 1e4,
                  y: Ne.y + 1e4
                },
                toNode: {
                  ...Ke,
                  x: Ke.x + 1e4,
                  y: Ke.y + 1e4
                },
                scale: et
              }, le.id);
            }),
            (_b3 = n == null ? void 0 : n.nodes) == null ? void 0 : _b3.map((le) => h.jsx(Ny, {
              node: {
                ...le,
                x: le.x + 1e4,
                y: le.y + 1e4
              },
              updateNode: (Ne) => G({
                ...Ne,
                x: Ne.x - 1e4,
                y: Ne.y - 1e4
              }),
              isSelected: le.id === r,
              onSelect: () => Ye(le.id),
              onAddChild: Oe,
              onDragStart: pe,
              onDragEnd: X,
              canvasData: n,
              onGeneratePGN: f,
              onDeleteNode: Ge
            }, le.id)),
            (_c = n == null ? void 0 : n.annotations) == null ? void 0 : _c.map((le) => h.jsx(Py, {
              annotation: {
                ...le,
                x: le.x + 1e4,
                y: le.y + 1e4
              },
              updateAnnotation: (Ne) => c({
                ...Ne,
                x: Ne.x - 1e4,
                y: Ne.y - 1e4
              }),
              isSelected: le.id === l,
              onSelect: () => he(le.id),
              onDragStart: oe,
              onDragEnd: Se
            }, le.id))
          ]
        }),
        h.jsxs("div", {
          className: "fixed bottom-4 right-4 z-50 flex items-center space-x-2",
          children: [
            h.jsx("button", {
              onClick: Le,
              className: "w-10 h-10 bg-gray-700 hover:bg-gray-600 text-white rounded-md shadow-lg focus:outline-none flex items-center justify-center",
              title: "Riorganizza Nodi",
              children: h.jsxs("svg", {
                xmlns: "http://www.w3.org/2000/svg",
                className: "h-5 w-5",
                viewBox: "0 0 24 24",
                fill: "none",
                stroke: "currentColor",
                strokeWidth: "2",
                strokeLinecap: "round",
                strokeLinejoin: "round",
                children: [
                  h.jsx("rect", {
                    x: "3",
                    y: "3",
                    width: "7",
                    height: "7"
                  }),
                  h.jsx("rect", {
                    x: "14",
                    y: "3",
                    width: "7",
                    height: "7"
                  }),
                  h.jsx("rect", {
                    x: "14",
                    y: "14",
                    width: "7",
                    height: "7"
                  }),
                  h.jsx("rect", {
                    x: "3",
                    y: "14",
                    width: "7",
                    height: "7"
                  })
                ]
              })
            }),
            h.jsx("button", {
              onClick: () => T((le) => Math.max(le - 0.1, 0.3)),
              className: "hidden md:flex w-10 h-10 bg-gray-700 hover:bg-gray-600 text-white rounded-md shadow-lg focus:outline-none items-center justify-center",
              title: "Zoom out",
              children: h.jsx("svg", {
                xmlns: "http://www.w3.org/2000/svg",
                className: "h-5 w-5",
                viewBox: "0 0 20 20",
                fill: "currentColor",
                children: h.jsx("path", {
                  fillRule: "evenodd",
                  d: "M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",
                  clipRule: "evenodd"
                })
              })
            }),
            h.jsx("button", {
              onClick: () => T((le) => Math.min(le + 0.1, 2)),
              className: "hidden md:flex w-10 h-10 bg-gray-700 hover:bg-gray-600 text-white rounded-md shadow-lg focus:outline-none items-center justify-center",
              title: "Zoom in",
              children: h.jsx("svg", {
                xmlns: "http://www.w3.org/2000/svg",
                className: "h-5 w-5",
                viewBox: "0 0 20 20",
                fill: "currentColor",
                children: h.jsx("path", {
                  fillRule: "evenodd",
                  d: "M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",
                  clipRule: "evenodd"
                })
              })
            })
          ]
        })
      ]
    });
  };
  KE.propTypes = {
    canvasData: fe.shape({
      nodes: fe.arrayOf(fe.shape({
        id: fe.number.isRequired,
        x: fe.number.isRequired,
        y: fe.number.isRequired,
        label: fe.string,
        description: fe.string,
        onGeneratePGN: fe.func
      })),
      connections: fe.arrayOf(fe.shape({
        id: fe.string.isRequired,
        fromId: fe.number.isRequired,
        toId: fe.number.isRequired
      })),
      annotations: fe.arrayOf(fe.shape({
        id: fe.number.isRequired,
        x: fe.number.isRequired,
        y: fe.number.isRequired,
        width: fe.number.isRequired,
        height: fe.number.isRequired,
        text: fe.string
      }))
    }).isRequired,
    setCanvasData: fe.func.isRequired,
    onNodeSelect: fe.func,
    selectedNodeId: fe.number,
    onAnnotationSelect: fe.func,
    selectedAnnotationId: fe.number,
    updateAnnotation: fe.func,
    onGeneratePGN: fe.func
  };
  function Wk(n, e) {
    var t = {};
    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && e.indexOf(r) < 0 && (t[r] = n[r]);
    if (n != null && typeof Object.getOwnPropertySymbols == "function") for (var i = 0, r = Object.getOwnPropertySymbols(n); i < r.length; i++) e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(n, r[i]) && (t[r[i]] = n[r[i]]);
    return t;
  }
  const Tf = "abcdefgh".split(""), mg = {
    a8: "bR",
    b8: "bN",
    c8: "bB",
    d8: "bQ",
    e8: "bK",
    f8: "bB",
    g8: "bN",
    h8: "bR",
    a7: "bP",
    b7: "bP",
    c7: "bP",
    d7: "bP",
    e7: "bP",
    f7: "bP",
    g7: "bP",
    h7: "bP",
    a2: "wP",
    b2: "wP",
    c2: "wP",
    d2: "wP",
    e2: "wP",
    f2: "wP",
    g2: "wP",
    h2: "wP",
    a1: "wR",
    b1: "wN",
    c1: "wB",
    d1: "wQ",
    e1: "wK",
    f1: "wB",
    g1: "wN",
    h1: "wR"
  }, Hk = {
    a: 0,
    b: 1,
    c: 2,
    d: 3,
    e: 4,
    f: 5,
    g: 6,
    h: 7
  }, qk = {
    a: 7,
    b: 6,
    c: 5,
    d: 4,
    e: 3,
    f: 2,
    g: 1,
    h: 0
  }, Kk = [
    7,
    6,
    5,
    4,
    3,
    2,
    1,
    0
  ], Gk = [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7
  ], o_ = {
    wP: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsx("path", {
        d: "m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",
        style: {
          opacity: "1",
          fill: "#ffffff",
          fillOpacity: "1",
          fillRule: "nonzero",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "miter",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      })
    })),
    wR: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          opacity: "1",
          fill: "#ffffff",
          fillOpacity: "1",
          fillRule: "evenodd",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      }, {
        children: [
          h.jsx("path", {
            d: "M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",
            style: {
              strokeLinecap: "butt"
            }
          }),
          h.jsx("path", {
            d: "M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",
            style: {
              strokeLinecap: "butt"
            }
          }),
          h.jsx("path", {
            d: "M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",
            style: {
              strokeLinecap: "butt"
            }
          }),
          h.jsx("path", {
            d: "M 34,14 L 31,17 L 14,17 L 11,14"
          }),
          h.jsx("path", {
            d: "M 31,17 L 31,29.5 L 14,29.5 L 14,17",
            style: {
              strokeLinecap: "butt",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"
          }),
          h.jsx("path", {
            d: "M 11,14 L 34,14",
            style: {
              fill: "none",
              stroke: "#000000",
              strokeLinejoin: "miter"
            }
          })
        ]
      }))
    })),
    wN: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          opacity: "1",
          fill: "none",
          fillOpacity: "1",
          fillRule: "evenodd",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      }, {
        children: [
          h.jsx("path", {
            d: "M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",
            style: {
              fill: "#ffffff",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",
            style: {
              fill: "#ffffff",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",
            style: {
              fill: "#000000",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",
            transform: "matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",
            style: {
              fill: "#000000",
              stroke: "#000000"
            }
          })
        ]
      }))
    })),
    wB: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          opacity: "1",
          fill: "none",
          fillRule: "evenodd",
          fillOpacity: "1",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      }, {
        children: [
          h.jsxs("g", Object.assign({
            style: {
              fill: "#ffffff",
              stroke: "#000000",
              strokeLinecap: "butt"
            }
          }, {
            children: [
              h.jsx("path", {
                d: "M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"
              }),
              h.jsx("path", {
                d: "M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"
              }),
              h.jsx("path", {
                d: "M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"
              })
            ]
          })),
          h.jsx("path", {
            d: "M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",
            style: {
              fill: "none",
              stroke: "#000000",
              strokeLinejoin: "miter"
            }
          })
        ]
      }))
    })),
    wQ: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          fill: "#ffffff",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinejoin: "round"
        }
      }, {
        children: [
          h.jsx("path", {
            d: "M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"
          }),
          h.jsx("path", {
            d: "M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"
          }),
          h.jsx("path", {
            d: "M 11.5,30 C 15,29 30,29 33.5,30",
            style: {
              fill: "none"
            }
          }),
          h.jsx("path", {
            d: "M 12,33.5 C 18,32.5 27,32.5 33,33.5",
            style: {
              fill: "none"
            }
          }),
          h.jsx("circle", {
            cx: "6",
            cy: "12",
            r: "2"
          }),
          h.jsx("circle", {
            cx: "14",
            cy: "9",
            r: "2"
          }),
          h.jsx("circle", {
            cx: "22.5",
            cy: "8",
            r: "2"
          }),
          h.jsx("circle", {
            cx: "31",
            cy: "9",
            r: "2"
          }),
          h.jsx("circle", {
            cx: "39",
            cy: "12",
            r: "2"
          })
        ]
      }))
    })),
    wK: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          fill: "none",
          fillOpacity: "1",
          fillRule: "evenodd",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      }, {
        children: [
          h.jsx("path", {
            d: "M 22.5,11.63 L 22.5,6",
            style: {
              fill: "none",
              stroke: "#000000",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 20,8 L 25,8",
            style: {
              fill: "none",
              stroke: "#000000",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",
            style: {
              fill: "#ffffff",
              stroke: "#000000",
              strokeLinecap: "butt",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",
            style: {
              fill: "#ffffff",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 12.5,30 C 18,27 27,27 32.5,30",
            style: {
              fill: "none",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",
            style: {
              fill: "none",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 12.5,37 C 18,34 27,34 32.5,37",
            style: {
              fill: "none",
              stroke: "#000000"
            }
          })
        ]
      }))
    })),
    bP: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsx("path", {
        d: "m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",
        style: {
          opacity: "1",
          fill: "#000000",
          fillOpacity: "1",
          fillRule: "nonzero",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "miter",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      })
    })),
    bR: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          opacity: "1",
          fill: "#000000",
          fillOpacity: "1",
          fillRule: "evenodd",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      }, {
        children: [
          h.jsx("path", {
            d: "M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",
            style: {
              strokeLinecap: "butt"
            }
          }),
          h.jsx("path", {
            d: "M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",
            style: {
              strokeLinecap: "butt"
            }
          }),
          h.jsx("path", {
            d: "M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",
            style: {
              strokeLinecap: "butt"
            }
          }),
          h.jsx("path", {
            d: "M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",
            style: {
              strokeLinecap: "butt",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",
            style: {
              strokeLinecap: "butt"
            }
          }),
          h.jsx("path", {
            d: "M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",
            style: {
              strokeLinecap: "butt"
            }
          }),
          h.jsx("path", {
            d: "M 12,35.5 L 33,35.5 L 33,35.5",
            style: {
              fill: "none",
              stroke: "#ffffff",
              strokeWidth: "1",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 13,31.5 L 32,31.5",
            style: {
              fill: "none",
              stroke: "#ffffff",
              strokeWidth: "1",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 14,29.5 L 31,29.5",
            style: {
              fill: "none",
              stroke: "#ffffff",
              strokeWidth: "1",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 14,16.5 L 31,16.5",
            style: {
              fill: "none",
              stroke: "#ffffff",
              strokeWidth: "1",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 11,14 L 34,14",
            style: {
              fill: "none",
              stroke: "#ffffff",
              strokeWidth: "1",
              strokeLinejoin: "miter"
            }
          })
        ]
      }))
    })),
    bN: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          opacity: "1",
          fill: "none",
          fillOpacity: "1",
          fillRule: "evenodd",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      }, {
        children: [
          h.jsx("path", {
            d: "M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",
            style: {
              fill: "#000000",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",
            style: {
              fill: "#000000",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",
            style: {
              fill: "#ffffff",
              stroke: "#ffffff"
            }
          }),
          h.jsx("path", {
            d: "M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",
            transform: "matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",
            style: {
              fill: "#ffffff",
              stroke: "#ffffff"
            }
          }),
          h.jsx("path", {
            d: "M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",
            style: {
              fill: "#ffffff",
              stroke: "none"
            }
          })
        ]
      }))
    })),
    bB: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          opacity: "1",
          fill: "none",
          fillRule: "evenodd",
          fillOpacity: "1",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      }, {
        children: [
          h.jsxs("g", Object.assign({
            style: {
              fill: "#000000",
              stroke: "#000000",
              strokeLinecap: "butt"
            }
          }, {
            children: [
              h.jsx("path", {
                d: "M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"
              }),
              h.jsx("path", {
                d: "M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"
              }),
              h.jsx("path", {
                d: "M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"
              })
            ]
          })),
          h.jsx("path", {
            d: "M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",
            style: {
              fill: "none",
              stroke: "#ffffff",
              strokeLinejoin: "miter"
            }
          })
        ]
      }))
    })),
    bQ: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          fill: "#000000",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round"
        }
      }, {
        children: [
          h.jsx("path", {
            d: "M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",
            style: {
              strokeLinecap: "butt",
              fill: "#000000"
            }
          }),
          h.jsx("path", {
            d: "m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"
          }),
          h.jsx("path", {
            d: "M 11.5,30 C 15,29 30,29 33.5,30"
          }),
          h.jsx("path", {
            d: "m 12,33.5 c 6,-1 15,-1 21,0"
          }),
          h.jsx("circle", {
            cx: "6",
            cy: "12",
            r: "2"
          }),
          h.jsx("circle", {
            cx: "14",
            cy: "9",
            r: "2"
          }),
          h.jsx("circle", {
            cx: "22.5",
            cy: "8",
            r: "2"
          }),
          h.jsx("circle", {
            cx: "31",
            cy: "9",
            r: "2"
          }),
          h.jsx("circle", {
            cx: "39",
            cy: "12",
            r: "2"
          }),
          h.jsx("path", {
            d: "M 11,38.5 A 35,35 1 0 0 34,38.5",
            style: {
              fill: "none",
              stroke: "#000000",
              strokeLinecap: "butt"
            }
          }),
          h.jsxs("g", Object.assign({
            style: {
              fill: "none",
              stroke: "#ffffff"
            }
          }, {
            children: [
              h.jsx("path", {
                d: "M 11,29 A 35,35 1 0 1 34,29"
              }),
              h.jsx("path", {
                d: "M 12.5,31.5 L 32.5,31.5"
              }),
              h.jsx("path", {
                d: "M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"
              }),
              h.jsx("path", {
                d: "M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"
              })
            ]
          }))
        ]
      }))
    })),
    bK: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      width: "45",
      height: "45"
    }, {
      children: h.jsxs("g", Object.assign({
        style: {
          fill: "none",
          fillOpacity: "1",
          fillRule: "evenodd",
          stroke: "#000000",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "4",
          strokeDasharray: "none",
          strokeOpacity: "1"
        }
      }, {
        children: [
          h.jsx("path", {
            d: "M 22.5,11.63 L 22.5,6",
            style: {
              fill: "none",
              stroke: "#000000",
              strokeLinejoin: "miter"
            },
            id: "path6570"
          }),
          h.jsx("path", {
            d: "M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",
            style: {
              fill: "#000000",
              fillOpacity: "1",
              strokeLinecap: "butt",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",
            style: {
              fill: "#000000",
              stroke: "#000000"
            }
          }),
          h.jsx("path", {
            d: "M 20,8 L 25,8",
            style: {
              fill: "none",
              stroke: "#000000",
              strokeLinejoin: "miter"
            }
          }),
          h.jsx("path", {
            d: "M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",
            style: {
              fill: "none",
              stroke: "#ffffff"
            }
          }),
          h.jsx("path", {
            d: "M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",
            style: {
              fill: "none",
              stroke: "#ffffff"
            }
          })
        ]
      }))
    }))
  };
  function Ov(n, e, t) {
    const r = e / 8, i = n === "white" ? Hk : qk, l = n === "white" ? Kk : Gk, c = i[t[0]] * r + r / 2, f = l[parseInt(t[1], 10) - 1] * r + r / 2;
    return {
      x: c,
      y: f
    };
  }
  function a_(n) {
    let e = false;
    return Object.keys(mg).forEach((t) => {
      n[t] !== mg[t] && (e = true);
    }), Object.keys(n).forEach((t) => {
      mg[t] !== n[t] && (e = true);
    }), e;
  }
  function Qk(n, e) {
    const t = {
      removed: {},
      added: {}
    };
    return Object.keys(n).forEach((r) => {
      e[r] !== n[r] && (t.removed[r] = n[r]);
    }), Object.keys(e).forEach((r) => {
      n[r] !== e[r] && (t.added[r] = e[r]);
    }), t;
  }
  function l_(n) {
    return n === "start" ? mg : typeof n == "string" ? Yk(n) : n;
  }
  function Yk(n) {
    if (!Xk(n)) return {};
    n = n.replace(/ .+$/, "");
    const e = n.split("/"), t = {};
    let r = 8;
    for (let i = 0; i < 8; i++) {
      const l = e[i].split("");
      let c = 0;
      for (let f = 0; f < l.length; f++) if (l[f].search(/[1-8]/) !== -1) {
        const m = parseInt(l[f], 10);
        c = c + m;
      } else {
        const m = Tf[c] + r;
        t[m] = Zk(l[f]), c = c + 1;
      }
      r = r - 1;
    }
    return t;
  }
  function Xk(n) {
    n = n.replace(/ .+$/, ""), n = Jk(n);
    const e = n.split("/");
    if (e.length !== 8) return false;
    for (let t = 0; t < 8; t++) if (e[t].length !== 8 || e[t].search(/[^kqrnbpKQRNBP1]/) !== -1) return false;
    return true;
  }
  function Jk(n) {
    return n.replace(/8/g, "11111111").replace(/7/g, "1111111").replace(/6/g, "111111").replace(/5/g, "11111").replace(/4/g, "1111").replace(/3/g, "111").replace(/2/g, "11");
  }
  function Zk(n) {
    return n.toLowerCase() === n ? "b" + n.toUpperCase() : "w" + n.toUpperCase();
  }
  const eA = (n, e = true, t, r) => {
    const [i, l] = R.useState([]), [c, f] = R.useState([]), [m, y] = R.useState();
    R.useEffect(() => {
      Array.isArray(n) && (x(), l(n == null ? void 0 : n.filter((P) => P[0] !== P[1])));
    }, [
      n
    ]), R.useEffect(() => {
      t == null ? void 0 : t(c);
    }, [
      c
    ]);
    function x() {
      f([]), y(void 0);
    }
    const C = (P, O) => {
      e && y([
        P,
        O,
        r
      ]);
    }, S = [
      ...c,
      ...i
    ];
    return {
      arrows: S,
      newArrow: m,
      clearArrows: x,
      drawNewArrow: C,
      setArrows: f,
      onArrowDrawEnd: (P, O) => {
        if (P === O || !e) return;
        let L;
        const H = [
          P,
          O,
          r
        ];
        S.every(([T, Y]) => !(T === P && Y === O)) ? L = [
          ...c,
          H
        ] : L = c.filter(([T, Y]) => !(T === P && Y === O)), y(void 0), f(L);
      }
    };
  }, GE = R.createContext({}), Ro = () => R.useContext(GE), tA = R.forwardRef(({ allowDragOutsideBoard: n = true, animationDuration: e = 300, areArrowsAllowed: t = true, arePiecesDraggable: r = true, arePremovesAllowed: i = false, autoPromoteToQueen: l = false, boardOrientation: c = "white", boardWidth: f, children: m, clearPremovesOnRightClick: y = true, customArrows: x, customArrowColor: C = "rgb(255,170,0)", customBoardStyle: S, customNotationStyle: N, customDarkSquareStyle: P = {
    backgroundColor: "#B58863"
  }, customDropSquareStyle: O = {
    boxShadow: "inset 0 0 1px 6px rgba(255,255,255,0.75)"
  }, customLightSquareStyle: L = {
    backgroundColor: "#F0D9B5"
  }, customPieces: H, customPremoveDarkSquareStyle: W = {
    backgroundColor: "#A42323"
  }, customPremoveLightSquareStyle: T = {
    backgroundColor: "#BD2828"
  }, customSquare: Y = "div", customSquareStyles: u, dropOffBoardAction: ge = "snapback", id: j = 0, isDraggablePiece: M = () => true, getPositionObject: V = () => {
  }, onArrowsChange: B = () => {
  }, onDragOverSquare: q = () => {
  }, onMouseOutSquare: G = () => {
  }, onMouseOverSquare: F = () => {
  }, onPieceClick: Oe = () => {
  }, onPieceDragBegin: Le = () => {
  }, onPieceDragEnd: Ge = () => {
  }, onPieceDrop: Ye = () => true, onPieceDropOffBoard: he = () => {
  }, onPromotionCheck: Pe = (Be, et, le) => (le === "wP" && Be[1] === "7" && et[1] === "8" || le === "bP" && Be[1] === "2" && et[1] === "1") && Math.abs(Be.charCodeAt(0) - et.charCodeAt(0)) <= 1, onPromotionPieceSelect: pe = () => true, onSparePieceDrop: X = () => true, onSquareClick: oe = () => {
  }, onSquareRightClick: Se = () => {
  }, position: me = "start", promotionDialogVariant: Re = "default", promotionToSquare: $e = null, showBoardNotation: ie = true, showPromotionDialog: ye = false, snapToCursor: ve = true }, De) => {
    const [Be, et] = R.useState(l_(me)), [le, Ne] = R.useState({
      removed: {},
      added: {}
    }), [Ke, at] = R.useState(void 0), [pt, Vt] = R.useState(ye && !l), [Fe, ke] = R.useState(null), [ut, Pt] = R.useState($e), [It, en] = R.useState([]), on = R.useRef(It), [Dt, kt] = R.useState(), [En, Xr] = R.useState(Object.assign(Object.assign({}, o_), H)), [mr, Bn] = R.useState(false), [er, Jr] = R.useState(), [dn, tr] = R.useState(false), [Zr, es] = R.useState(null);
    R.useImperativeHandle(De, () => ({
      clearPremoves(dt = true) {
        Ot(dt);
      }
    })), R.useEffect(() => {
      Xr(Object.assign(Object.assign({}, o_), H));
    }, [
      H
    ]), R.useEffect(() => {
      Vt(ye), Pt($e);
    }, [
      $e,
      ye
    ]), R.useEffect(() => {
      var dt, it, At;
      mt();
      const xt = l_(me), bn = Qk(Be, xt), Dn = ((dt = Object.keys(bn.added)) === null || dt === void 0 ? void 0 : dt.length) <= 2 ? (At = (it = Object.entries(bn.added)) === null || it === void 0 ? void 0 : it[0]) === null || At === void 0 ? void 0 : At[1][0] : void 0;
      if (dn) et(xt), tr(false), i && tt(Dn), er && clearTimeout(er);
      else if (mr) et(xt), tr(false), i && tt(Dn);
      else {
        a_(xt) && Ke !== void 0 ? at(Dn) : a_(xt) ? at(void 0) : at("b"), Ne(bn), tr(true);
        const Ds = setTimeout(() => {
          et(xt), tr(false), i && tt(Dn);
        }, e);
        Jr(Ds);
      }
      return Bn(false), V(xt), nr(), () => {
        clearTimeout(er);
      };
    }, [
      me
    ]);
    const { arrows: Ir, newArrow: kr, clearArrows: nr, drawNewArrow: fn, onArrowDrawEnd: Nn } = eA(x, t, B, C);
    function ce(dt, it, At, xt) {
      if (dt === it) return;
      if (nr(), i && dn || i && (Ke === At[0] || on.current.filter((Dn) => Dn.piece[0] === At[0]).length > 0)) {
        const Dn = [
          ...on.current
        ];
        Dn.push({
          sourceSq: dt,
          targetSq: it,
          piece: At
        }), on.current = Dn, en([
          ...Dn
        ]), mt();
        return;
      }
      if (!i && dn) return;
      const bn = Object.assign({}, Be);
      Bn(!!xt), at(At[0]), Ye.length ? Ye(dt, it, At) || (Ot(), Bn(false)) : (delete bn[dt], bn[it] = At, et(bn)), mt(), V(bn);
    }
    function je(dt) {
      const it = Object.assign({}, Be);
      delete it[dt], et(it), V(it);
    }
    function tt(dt) {
      if (on.current.length === 0) return;
      const it = on.current[0];
      if (it.piece[0] !== void 0 && it.piece[0] !== dt && Ye.length) if (at(it.piece[0]), Bn(true), Ye(it.sourceSq, it.targetSq, it.piece)) {
        const xt = [
          ...on.current
        ];
        xt.shift(), on.current = xt, en([
          ...xt
        ]);
      } else Ot();
    }
    function nt(dt, it) {
      if (!X(dt, it)) return;
      const xt = Object.assign({}, Be);
      xt[it] = dt, et(xt), V(xt);
    }
    function Ot(dt = true) {
      dt && at(void 0), on.current = [], en([]);
    }
    function mt() {
      ke(null), Pt(null), Vt(false);
    }
    function Pn(dt) {
      kt(dt);
    }
    function Ft(dt) {
      if (Dt) {
        if (Dt === dt) {
          kt(void 0), y && Ot(false), Se(dt);
          return;
        }
      } else kt(void 0);
    }
    function Wn() {
      kt(void 0);
    }
    const Qt = {
      allowDragOutsideBoard: n,
      animationDuration: e,
      arePiecesDraggable: r,
      arePremovesAllowed: i,
      arrows: Ir,
      autoPromoteToQueen: l,
      boardOrientation: c,
      boardWidth: f,
      chessPieces: En,
      clearArrows: nr,
      clearCurrentRightClickDown: Wn,
      currentPosition: Be,
      currentRightClickDown: Dt,
      customArrowColor: C,
      customBoardStyle: S,
      customDarkSquareStyle: P,
      customDropSquareStyle: O,
      customLightSquareStyle: L,
      customNotationStyle: N,
      customPremoveDarkSquareStyle: W,
      customPremoveLightSquareStyle: T,
      customSquare: Y,
      customSquareStyles: u,
      deletePieceFromSquare: je,
      drawNewArrow: fn,
      dropOffBoardAction: ge,
      handleSetPosition: ce,
      handleSparePieceDrop: nt,
      id: j,
      isDraggablePiece: M,
      isWaitingForAnimation: dn,
      lastPieceColour: Ke,
      lastSquareDraggedOver: Zr,
      newArrow: kr,
      onArrowDrawEnd: Nn,
      onDragOverSquare: q,
      onMouseOutSquare: G,
      onMouseOverSquare: F,
      onPieceClick: Oe,
      onPieceDragBegin: Le,
      onPieceDragEnd: Ge,
      onPieceDrop: Ye,
      onPieceDropOffBoard: he,
      onPromotionCheck: Pe,
      onPromotionPieceSelect: pe,
      onRightClickDown: Pn,
      onRightClickUp: Ft,
      onSparePieceDrop: X,
      onSquareClick: oe,
      positionDifferences: le,
      premoves: It,
      promoteFromSquare: Fe,
      promoteToSquare: ut,
      promotionDialogVariant: Re,
      setLastSquareDraggedOver: es,
      setPromoteFromSquare: ke,
      setPromoteToSquare: Pt,
      setShowPromoteDialog: Vt,
      showBoardNotation: ie,
      showPromoteDialog: pt,
      snapToCursor: ve
    };
    return h.jsx(GE.Provider, Object.assign({
      value: Qt
    }, {
      children: m
    }));
  });
  function nA({ row: n, col: e }) {
    const { boardOrientation: t, boardWidth: r, customDarkSquareStyle: i, customLightSquareStyle: l, customNotationStyle: c } = Ro(), f = l.backgroundColor, m = i.backgroundColor, y = e === 0, x = n === 7, C = y && x;
    function S() {
      return t === "white" ? 8 - n : n + 1;
    }
    function N() {
      return t === "black" ? Tf[7 - e] : Tf[e];
    }
    function P() {
      return h.jsxs(h.Fragment, {
        children: [
          h.jsx("div", Object.assign({
            style: Object.assign(Object.assign({
              zIndex: 3,
              position: "absolute"
            }, {
              color: f
            }), u_(r, c))
          }, {
            children: S()
          })),
          h.jsx("div", Object.assign({
            style: Object.assign(Object.assign({
              zIndex: 3,
              position: "absolute"
            }, {
              color: f
            }), c_(r, c))
          }, {
            children: N()
          }))
        ]
      });
    }
    function O() {
      return h.jsx("div", Object.assign({
        style: Object.assign(Object.assign({
          userSelect: "none",
          zIndex: 3,
          position: "absolute"
        }, {
          color: e % 2 !== 0 ? m : f
        }), c_(r, c))
      }, {
        children: N()
      }));
    }
    function L() {
      return h.jsx("div", Object.assign({
        style: Object.assign(Object.assign({
          userSelect: "none",
          zIndex: 3,
          position: "absolute"
        }, t === "black" ? {
          color: n % 2 === 0 ? m : f
        } : {
          color: n % 2 === 0 ? m : f
        }), u_(r, c))
      }, {
        children: S()
      }));
    }
    return C ? P() : x ? O() : y ? L() : null;
  }
  const c_ = (n, e) => Object.assign({
    alignSelf: "flex-end",
    paddingLeft: n / 8 - n / 48,
    fontSize: n / 48
  }, e), u_ = (n, e) => Object.assign({
    alignSelf: "flex-start",
    paddingRight: n / 8 - n / 48,
    fontSize: n / 48
  }, e), QE = R.createContext({
    dragDropManager: void 0
  });
  function Cs(n) {
    return "Minified Redux error #" + n + "; visit https://redux.js.org/Errors?code=" + n + " for the full message or use the non-minified dev environment for full errors. ";
  }
  var d_ = function() {
    return typeof Symbol == "function" && Symbol.observable || "@@observable";
  }(), f_ = function() {
    return Math.random().toString(36).substring(7).split("").join(".");
  }, h_ = {
    INIT: "@@redux/INIT" + f_(),
    REPLACE: "@@redux/REPLACE" + f_()
  };
  function rA(n) {
    if (typeof n != "object" || n === null) return false;
    for (var e = n; Object.getPrototypeOf(e) !== null; ) e = Object.getPrototypeOf(e);
    return Object.getPrototypeOf(n) === e;
  }
  function YE(n, e, t) {
    var r;
    if (typeof e == "function" && typeof t == "function" || typeof t == "function" && typeof arguments[3] == "function") throw new Error(Cs(0));
    if (typeof e == "function" && typeof t > "u" && (t = e, e = void 0), typeof t < "u") {
      if (typeof t != "function") throw new Error(Cs(1));
      return t(YE)(n, e);
    }
    if (typeof n != "function") throw new Error(Cs(2));
    var i = n, l = e, c = [], f = c, m = false;
    function y() {
      f === c && (f = c.slice());
    }
    function x() {
      if (m) throw new Error(Cs(3));
      return l;
    }
    function C(O) {
      if (typeof O != "function") throw new Error(Cs(4));
      if (m) throw new Error(Cs(5));
      var L = true;
      return y(), f.push(O), function() {
        if (L) {
          if (m) throw new Error(Cs(6));
          L = false, y();
          var W = f.indexOf(O);
          f.splice(W, 1), c = null;
        }
      };
    }
    function S(O) {
      if (!rA(O)) throw new Error(Cs(7));
      if (typeof O.type > "u") throw new Error(Cs(8));
      if (m) throw new Error(Cs(9));
      try {
        m = true, l = i(l, O);
      } finally {
        m = false;
      }
      for (var L = c = f, H = 0; H < L.length; H++) {
        var W = L[H];
        W();
      }
      return O;
    }
    function N(O) {
      if (typeof O != "function") throw new Error(Cs(10));
      i = O, S({
        type: h_.REPLACE
      });
    }
    function P() {
      var O, L = C;
      return O = {
        subscribe: function(W) {
          if (typeof W != "object" || W === null) throw new Error(Cs(11));
          function T() {
            W.next && W.next(x());
          }
          T();
          var Y = L(T);
          return {
            unsubscribe: Y
          };
        }
      }, O[d_] = function() {
        return this;
      }, O;
    }
    return S({
      type: h_.INIT
    }), r = {
      dispatch: S,
      subscribe: C,
      getState: x,
      replaceReducer: N
    }, r[d_] = P, r;
  }
  function ht(n, e, ...t) {
    if (sA() && e === void 0) throw new Error("invariant requires an error message argument");
    if (!n) {
      let r;
      if (e === void 0) r = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
      else {
        let i = 0;
        r = new Error(e.replace(/%s/g, function() {
          return t[i++];
        })), r.name = "Invariant Violation";
      }
      throw r.framesToPop = 1, r;
    }
  }
  function sA() {
    return typeof process < "u" && true;
  }
  function iA(n, e, t) {
    return e.split(".").reduce((r, i) => r && r[i] ? r[i] : t || null, n);
  }
  function oA(n, e) {
    return n.filter((t) => t !== e);
  }
  function XE(n) {
    return typeof n == "object";
  }
  function aA(n, e) {
    const t = /* @__PURE__ */ new Map(), r = (l) => {
      t.set(l, t.has(l) ? t.get(l) + 1 : 1);
    };
    n.forEach(r), e.forEach(r);
    const i = [];
    return t.forEach((l, c) => {
      l === 1 && i.push(c);
    }), i;
  }
  function lA(n, e) {
    return n.filter((t) => e.indexOf(t) > -1);
  }
  const jy = "dnd-core/INIT_COORDS", im = "dnd-core/BEGIN_DRAG", Oy = "dnd-core/PUBLISH_DRAG_SOURCE", om = "dnd-core/HOVER", am = "dnd-core/DROP", lm = "dnd-core/END_DRAG";
  function p_(n, e) {
    return {
      type: jy,
      payload: {
        sourceClientOffset: e || null,
        clientOffset: n || null
      }
    };
  }
  const cA = {
    type: jy,
    payload: {
      clientOffset: null,
      sourceClientOffset: null
    }
  };
  function uA(n) {
    return function(t = [], r = {
      publishSource: true
    }) {
      const { publishSource: i = true, clientOffset: l, getSourceClientOffset: c } = r, f = n.getMonitor(), m = n.getRegistry();
      n.dispatch(p_(l)), dA(t, f, m);
      const y = pA(t, f);
      if (y == null) {
        n.dispatch(cA);
        return;
      }
      let x = null;
      if (l) {
        if (!c) throw new Error("getSourceClientOffset must be defined");
        fA(c), x = c(y);
      }
      n.dispatch(p_(l, x));
      const S = m.getSource(y).beginDrag(f, y);
      if (S == null) return;
      hA(S), m.pinSource(y);
      const N = m.getSourceType(y);
      return {
        type: im,
        payload: {
          itemType: N,
          item: S,
          sourceId: y,
          clientOffset: l || null,
          sourceClientOffset: x || null,
          isSourcePublic: !!i
        }
      };
    };
  }
  function dA(n, e, t) {
    ht(!e.isDragging(), "Cannot call beginDrag while dragging."), n.forEach(function(r) {
      ht(t.getSource(r), "Expected sourceIds to be registered.");
    });
  }
  function fA(n) {
    ht(typeof n == "function", "When clientOffset is provided, getSourceClientOffset must be a function.");
  }
  function hA(n) {
    ht(XE(n), "Item must be an object.");
  }
  function pA(n, e) {
    let t = null;
    for (let r = n.length - 1; r >= 0; r--) if (e.canDragSource(n[r])) {
      t = n[r];
      break;
    }
    return t;
  }
  function gA(n, e, t) {
    return e in n ? Object.defineProperty(n, e, {
      value: t,
      enumerable: true,
      configurable: true,
      writable: true
    }) : n[e] = t, n;
  }
  function mA(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e] != null ? arguments[e] : {}, r = Object.keys(t);
      typeof Object.getOwnPropertySymbols == "function" && (r = r.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
        return Object.getOwnPropertyDescriptor(t, i).enumerable;
      }))), r.forEach(function(i) {
        gA(n, i, t[i]);
      });
    }
    return n;
  }
  function vA(n) {
    return function(t = {}) {
      const r = n.getMonitor(), i = n.getRegistry();
      yA(r), xA(r).forEach((c, f) => {
        const m = wA(c, f, i, r), y = {
          type: am,
          payload: {
            dropResult: mA({}, t, m)
          }
        };
        n.dispatch(y);
      });
    };
  }
  function yA(n) {
    ht(n.isDragging(), "Cannot call drop while not dragging."), ht(!n.didDrop(), "Cannot call drop twice during one drag operation.");
  }
  function wA(n, e, t, r) {
    const i = t.getTarget(n);
    let l = i ? i.drop(r, n) : void 0;
    return _A(l), typeof l > "u" && (l = e === 0 ? {} : r.getDropResult()), l;
  }
  function _A(n) {
    ht(typeof n > "u" || XE(n), "Drop result must either be an object or undefined.");
  }
  function xA(n) {
    const e = n.getTargetIds().filter(n.canDropOnTarget, n);
    return e.reverse(), e;
  }
  function EA(n) {
    return function() {
      const t = n.getMonitor(), r = n.getRegistry();
      bA(t);
      const i = t.getSourceId();
      return i != null && (r.getSource(i, true).endDrag(t, i), r.unpinSource()), {
        type: lm
      };
    };
  }
  function bA(n) {
    ht(n.isDragging(), "Cannot call endDrag while not dragging.");
  }
  function Lv(n, e) {
    return e === null ? n === null : Array.isArray(n) ? n.some((t) => t === e) : n === e;
  }
  function TA(n) {
    return function(t, { clientOffset: r } = {}) {
      CA(t);
      const i = t.slice(0), l = n.getMonitor(), c = n.getRegistry(), f = l.getItemType();
      return IA(i, c, f), SA(i, l, c), kA(i, l, c), {
        type: om,
        payload: {
          targetIds: i,
          clientOffset: r || null
        }
      };
    };
  }
  function CA(n) {
    ht(Array.isArray(n), "Expected targetIds to be an array.");
  }
  function SA(n, e, t) {
    ht(e.isDragging(), "Cannot call hover while not dragging."), ht(!e.didDrop(), "Cannot call hover after drop.");
    for (let r = 0; r < n.length; r++) {
      const i = n[r];
      ht(n.lastIndexOf(i) === r, "Expected targetIds to be unique in the passed array.");
      const l = t.getTarget(i);
      ht(l, "Expected targetIds to be registered.");
    }
  }
  function IA(n, e, t) {
    for (let r = n.length - 1; r >= 0; r--) {
      const i = n[r], l = e.getTargetType(i);
      Lv(l, t) || n.splice(r, 1);
    }
  }
  function kA(n, e, t) {
    n.forEach(function(r) {
      t.getTarget(r).hover(e, r);
    });
  }
  function AA(n) {
    return function() {
      if (n.getMonitor().isDragging()) return {
        type: Oy
      };
    };
  }
  function RA(n) {
    return {
      beginDrag: uA(n),
      publishDragSource: AA(n),
      hover: TA(n),
      drop: vA(n),
      endDrag: EA(n)
    };
  }
  class NA {
    receiveBackend(e) {
      this.backend = e;
    }
    getMonitor() {
      return this.monitor;
    }
    getBackend() {
      return this.backend;
    }
    getRegistry() {
      return this.monitor.registry;
    }
    getActions() {
      const e = this, { dispatch: t } = this.store;
      function r(l) {
        return (...c) => {
          const f = l.apply(e, c);
          typeof f < "u" && t(f);
        };
      }
      const i = RA(this);
      return Object.keys(i).reduce((l, c) => {
        const f = i[c];
        return l[c] = r(f), l;
      }, {});
    }
    dispatch(e) {
      this.store.dispatch(e);
    }
    constructor(e, t) {
      this.isSetUp = false, this.handleRefCountChange = () => {
        const r = this.store.getState().refCount > 0;
        this.backend && (r && !this.isSetUp ? (this.backend.setup(), this.isSetUp = true) : !r && this.isSetUp && (this.backend.teardown(), this.isSetUp = false));
      }, this.store = e, this.monitor = t, e.subscribe(this.handleRefCountChange);
    }
  }
  function PA(n, e) {
    return {
      x: n.x + e.x,
      y: n.y + e.y
    };
  }
  function JE(n, e) {
    return {
      x: n.x - e.x,
      y: n.y - e.y
    };
  }
  function DA(n) {
    const { clientOffset: e, initialClientOffset: t, initialSourceClientOffset: r } = n;
    return !e || !t || !r ? null : JE(PA(e, r), t);
  }
  function jA(n) {
    const { clientOffset: e, initialClientOffset: t } = n;
    return !e || !t ? null : JE(e, t);
  }
  const pf = [], Ly = [];
  pf.__IS_NONE__ = true;
  Ly.__IS_ALL__ = true;
  function OA(n, e) {
    return n === pf ? false : n === Ly || typeof e > "u" ? true : lA(e, n).length > 0;
  }
  class LA {
    subscribeToStateChange(e, t = {}) {
      const { handlerIds: r } = t;
      ht(typeof e == "function", "listener must be a function."), ht(typeof r > "u" || Array.isArray(r), "handlerIds, when specified, must be an array of strings.");
      let i = this.store.getState().stateId;
      const l = () => {
        const c = this.store.getState(), f = c.stateId;
        try {
          f === i || f === i + 1 && !OA(c.dirtyHandlerIds, r) || e();
        } finally {
          i = f;
        }
      };
      return this.store.subscribe(l);
    }
    subscribeToOffsetChange(e) {
      ht(typeof e == "function", "listener must be a function.");
      let t = this.store.getState().dragOffset;
      const r = () => {
        const i = this.store.getState().dragOffset;
        i !== t && (t = i, e());
      };
      return this.store.subscribe(r);
    }
    canDragSource(e) {
      if (!e) return false;
      const t = this.registry.getSource(e);
      return ht(t, `Expected to find a valid source. sourceId=${e}`), this.isDragging() ? false : t.canDrag(this, e);
    }
    canDropOnTarget(e) {
      if (!e) return false;
      const t = this.registry.getTarget(e);
      if (ht(t, `Expected to find a valid target. targetId=${e}`), !this.isDragging() || this.didDrop()) return false;
      const r = this.registry.getTargetType(e), i = this.getItemType();
      return Lv(r, i) && t.canDrop(this, e);
    }
    isDragging() {
      return !!this.getItemType();
    }
    isDraggingSource(e) {
      if (!e) return false;
      const t = this.registry.getSource(e, true);
      if (ht(t, `Expected to find a valid source. sourceId=${e}`), !this.isDragging() || !this.isSourcePublic()) return false;
      const r = this.registry.getSourceType(e), i = this.getItemType();
      return r !== i ? false : t.isDragging(this, e);
    }
    isOverTarget(e, t = {
      shallow: false
    }) {
      if (!e) return false;
      const { shallow: r } = t;
      if (!this.isDragging()) return false;
      const i = this.registry.getTargetType(e), l = this.getItemType();
      if (l && !Lv(i, l)) return false;
      const c = this.getTargetIds();
      if (!c.length) return false;
      const f = c.indexOf(e);
      return r ? f === c.length - 1 : f > -1;
    }
    getItemType() {
      return this.store.getState().dragOperation.itemType;
    }
    getItem() {
      return this.store.getState().dragOperation.item;
    }
    getSourceId() {
      return this.store.getState().dragOperation.sourceId;
    }
    getTargetIds() {
      return this.store.getState().dragOperation.targetIds;
    }
    getDropResult() {
      return this.store.getState().dragOperation.dropResult;
    }
    didDrop() {
      return this.store.getState().dragOperation.didDrop;
    }
    isSourcePublic() {
      return !!this.store.getState().dragOperation.isSourcePublic;
    }
    getInitialClientOffset() {
      return this.store.getState().dragOffset.initialClientOffset;
    }
    getInitialSourceClientOffset() {
      return this.store.getState().dragOffset.initialSourceClientOffset;
    }
    getClientOffset() {
      return this.store.getState().dragOffset.clientOffset;
    }
    getSourceClientOffset() {
      return DA(this.store.getState().dragOffset);
    }
    getDifferenceFromInitialOffset() {
      return jA(this.store.getState().dragOffset);
    }
    constructor(e, t) {
      this.store = e, this.registry = t;
    }
  }
  const g_ = typeof global < "u" ? global : self, ZE = g_.MutationObserver || g_.WebKitMutationObserver;
  function eb(n) {
    return function() {
      const t = setTimeout(i, 0), r = setInterval(i, 50);
      function i() {
        clearTimeout(t), clearInterval(r), n();
      }
    };
  }
  function MA(n) {
    let e = 1;
    const t = new ZE(n), r = document.createTextNode("");
    return t.observe(r, {
      characterData: true
    }), function() {
      e = -e, r.data = e;
    };
  }
  const $A = typeof ZE == "function" ? MA : eb;
  class VA {
    enqueueTask(e) {
      const { queue: t, requestFlush: r } = this;
      t.length || (r(), this.flushing = true), t[t.length] = e;
    }
    constructor() {
      this.queue = [], this.pendingErrors = [], this.flushing = false, this.index = 0, this.capacity = 1024, this.flush = () => {
        const { queue: e } = this;
        for (; this.index < e.length; ) {
          const t = this.index;
          if (this.index++, e[t].call(), this.index > this.capacity) {
            for (let r = 0, i = e.length - this.index; r < i; r++) e[r] = e[r + this.index];
            e.length -= this.index, this.index = 0;
          }
        }
        e.length = 0, this.index = 0, this.flushing = false;
      }, this.registerPendingError = (e) => {
        this.pendingErrors.push(e), this.requestErrorThrow();
      }, this.requestFlush = $A(this.flush), this.requestErrorThrow = eb(() => {
        if (this.pendingErrors.length) throw this.pendingErrors.shift();
      });
    }
  }
  class FA {
    call() {
      try {
        this.task && this.task();
      } catch (e) {
        this.onError(e);
      } finally {
        this.task = null, this.release(this);
      }
    }
    constructor(e, t) {
      this.onError = e, this.release = t, this.task = null;
    }
  }
  class zA {
    create(e) {
      const t = this.freeTasks, r = t.length ? t.pop() : new FA(this.onError, (i) => t[t.length] = i);
      return r.task = e, r;
    }
    constructor(e) {
      this.onError = e, this.freeTasks = [];
    }
  }
  const tb = new VA(), UA = new zA(tb.registerPendingError);
  function BA(n) {
    tb.enqueueTask(UA.create(n));
  }
  const My = "dnd-core/ADD_SOURCE", $y = "dnd-core/ADD_TARGET", Vy = "dnd-core/REMOVE_SOURCE", cm = "dnd-core/REMOVE_TARGET";
  function WA(n) {
    return {
      type: My,
      payload: {
        sourceId: n
      }
    };
  }
  function HA(n) {
    return {
      type: $y,
      payload: {
        targetId: n
      }
    };
  }
  function qA(n) {
    return {
      type: Vy,
      payload: {
        sourceId: n
      }
    };
  }
  function KA(n) {
    return {
      type: cm,
      payload: {
        targetId: n
      }
    };
  }
  function GA(n) {
    ht(typeof n.canDrag == "function", "Expected canDrag to be a function."), ht(typeof n.beginDrag == "function", "Expected beginDrag to be a function."), ht(typeof n.endDrag == "function", "Expected endDrag to be a function.");
  }
  function QA(n) {
    ht(typeof n.canDrop == "function", "Expected canDrop to be a function."), ht(typeof n.hover == "function", "Expected hover to be a function."), ht(typeof n.drop == "function", "Expected beginDrag to be a function.");
  }
  function Mv(n, e) {
    if (e && Array.isArray(n)) {
      n.forEach((t) => Mv(t, false));
      return;
    }
    ht(typeof n == "string" || typeof n == "symbol", e ? "Type can only be a string, a symbol, or an array of either." : "Type can only be a string or a symbol.");
  }
  var Rs;
  (function(n) {
    n.SOURCE = "SOURCE", n.TARGET = "TARGET";
  })(Rs || (Rs = {}));
  let YA = 0;
  function XA() {
    return YA++;
  }
  function JA(n) {
    const e = XA().toString();
    switch (n) {
      case Rs.SOURCE:
        return `S${e}`;
      case Rs.TARGET:
        return `T${e}`;
      default:
        throw new Error(`Unknown Handler Role: ${n}`);
    }
  }
  function m_(n) {
    switch (n[0]) {
      case "S":
        return Rs.SOURCE;
      case "T":
        return Rs.TARGET;
      default:
        throw new Error(`Cannot parse handler ID: ${n}`);
    }
  }
  function v_(n, e) {
    const t = n.entries();
    let r = false;
    do {
      const { done: i, value: [, l] } = t.next();
      if (l === e) return true;
      r = !!i;
    } while (!r);
    return false;
  }
  class ZA {
    addSource(e, t) {
      Mv(e), GA(t);
      const r = this.addHandler(Rs.SOURCE, e, t);
      return this.store.dispatch(WA(r)), r;
    }
    addTarget(e, t) {
      Mv(e, true), QA(t);
      const r = this.addHandler(Rs.TARGET, e, t);
      return this.store.dispatch(HA(r)), r;
    }
    containsHandler(e) {
      return v_(this.dragSources, e) || v_(this.dropTargets, e);
    }
    getSource(e, t = false) {
      return ht(this.isSourceId(e), "Expected a valid source ID."), t && e === this.pinnedSourceId ? this.pinnedSource : this.dragSources.get(e);
    }
    getTarget(e) {
      return ht(this.isTargetId(e), "Expected a valid target ID."), this.dropTargets.get(e);
    }
    getSourceType(e) {
      return ht(this.isSourceId(e), "Expected a valid source ID."), this.types.get(e);
    }
    getTargetType(e) {
      return ht(this.isTargetId(e), "Expected a valid target ID."), this.types.get(e);
    }
    isSourceId(e) {
      return m_(e) === Rs.SOURCE;
    }
    isTargetId(e) {
      return m_(e) === Rs.TARGET;
    }
    removeSource(e) {
      ht(this.getSource(e), "Expected an existing source."), this.store.dispatch(qA(e)), BA(() => {
        this.dragSources.delete(e), this.types.delete(e);
      });
    }
    removeTarget(e) {
      ht(this.getTarget(e), "Expected an existing target."), this.store.dispatch(KA(e)), this.dropTargets.delete(e), this.types.delete(e);
    }
    pinSource(e) {
      const t = this.getSource(e);
      ht(t, "Expected an existing source."), this.pinnedSourceId = e, this.pinnedSource = t;
    }
    unpinSource() {
      ht(this.pinnedSource, "No source is pinned at the time."), this.pinnedSourceId = null, this.pinnedSource = null;
    }
    addHandler(e, t, r) {
      const i = JA(e);
      return this.types.set(i, t), e === Rs.SOURCE ? this.dragSources.set(i, r) : e === Rs.TARGET && this.dropTargets.set(i, r), i;
    }
    constructor(e) {
      this.types = /* @__PURE__ */ new Map(), this.dragSources = /* @__PURE__ */ new Map(), this.dropTargets = /* @__PURE__ */ new Map(), this.pinnedSourceId = null, this.pinnedSource = null, this.store = e;
    }
  }
  const eR = (n, e) => n === e;
  function tR(n, e) {
    return !n && !e ? true : !n || !e ? false : n.x === e.x && n.y === e.y;
  }
  function nR(n, e, t = eR) {
    if (n.length !== e.length) return false;
    for (let r = 0; r < n.length; ++r) if (!t(n[r], e[r])) return false;
    return true;
  }
  function rR(n = pf, e) {
    switch (e.type) {
      case om:
        break;
      case My:
      case $y:
      case cm:
      case Vy:
        return pf;
      case im:
      case Oy:
      case lm:
      case am:
      default:
        return Ly;
    }
    const { targetIds: t = [], prevTargetIds: r = [] } = e.payload, i = aA(t, r);
    if (!(i.length > 0 || !nR(t, r))) return pf;
    const c = r[r.length - 1], f = t[t.length - 1];
    return c !== f && (c && i.push(c), f && i.push(f)), i;
  }
  function sR(n, e, t) {
    return e in n ? Object.defineProperty(n, e, {
      value: t,
      enumerable: true,
      configurable: true,
      writable: true
    }) : n[e] = t, n;
  }
  function iR(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e] != null ? arguments[e] : {}, r = Object.keys(t);
      typeof Object.getOwnPropertySymbols == "function" && (r = r.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
        return Object.getOwnPropertyDescriptor(t, i).enumerable;
      }))), r.forEach(function(i) {
        sR(n, i, t[i]);
      });
    }
    return n;
  }
  const y_ = {
    initialSourceClientOffset: null,
    initialClientOffset: null,
    clientOffset: null
  };
  function oR(n = y_, e) {
    const { payload: t } = e;
    switch (e.type) {
      case jy:
      case im:
        return {
          initialSourceClientOffset: t.sourceClientOffset,
          initialClientOffset: t.clientOffset,
          clientOffset: t.clientOffset
        };
      case om:
        return tR(n.clientOffset, t.clientOffset) ? n : iR({}, n, {
          clientOffset: t.clientOffset
        });
      case lm:
      case am:
        return y_;
      default:
        return n;
    }
  }
  function aR(n, e, t) {
    return e in n ? Object.defineProperty(n, e, {
      value: t,
      enumerable: true,
      configurable: true,
      writable: true
    }) : n[e] = t, n;
  }
  function ru(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e] != null ? arguments[e] : {}, r = Object.keys(t);
      typeof Object.getOwnPropertySymbols == "function" && (r = r.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
        return Object.getOwnPropertyDescriptor(t, i).enumerable;
      }))), r.forEach(function(i) {
        aR(n, i, t[i]);
      });
    }
    return n;
  }
  const lR = {
    itemType: null,
    item: null,
    sourceId: null,
    targetIds: [],
    dropResult: null,
    didDrop: false,
    isSourcePublic: null
  };
  function cR(n = lR, e) {
    const { payload: t } = e;
    switch (e.type) {
      case im:
        return ru({}, n, {
          itemType: t.itemType,
          item: t.item,
          sourceId: t.sourceId,
          isSourcePublic: t.isSourcePublic,
          dropResult: null,
          didDrop: false
        });
      case Oy:
        return ru({}, n, {
          isSourcePublic: true
        });
      case om:
        return ru({}, n, {
          targetIds: t.targetIds
        });
      case cm:
        return n.targetIds.indexOf(t.targetId) === -1 ? n : ru({}, n, {
          targetIds: oA(n.targetIds, t.targetId)
        });
      case am:
        return ru({}, n, {
          dropResult: t.dropResult,
          didDrop: true,
          targetIds: []
        });
      case lm:
        return ru({}, n, {
          itemType: null,
          item: null,
          sourceId: null,
          dropResult: null,
          didDrop: false,
          isSourcePublic: null,
          targetIds: []
        });
      default:
        return n;
    }
  }
  function uR(n = 0, e) {
    switch (e.type) {
      case My:
      case $y:
        return n + 1;
      case Vy:
      case cm:
        return n - 1;
      default:
        return n;
    }
  }
  function dR(n = 0) {
    return n + 1;
  }
  function fR(n, e, t) {
    return e in n ? Object.defineProperty(n, e, {
      value: t,
      enumerable: true,
      configurable: true,
      writable: true
    }) : n[e] = t, n;
  }
  function hR(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e] != null ? arguments[e] : {}, r = Object.keys(t);
      typeof Object.getOwnPropertySymbols == "function" && (r = r.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
        return Object.getOwnPropertyDescriptor(t, i).enumerable;
      }))), r.forEach(function(i) {
        fR(n, i, t[i]);
      });
    }
    return n;
  }
  function pR(n = {}, e) {
    return {
      dirtyHandlerIds: rR(n.dirtyHandlerIds, {
        type: e.type,
        payload: hR({}, e.payload, {
          prevTargetIds: iA(n, "dragOperation.targetIds", [])
        })
      }),
      dragOffset: oR(n.dragOffset, e),
      refCount: uR(n.refCount, e),
      dragOperation: cR(n.dragOperation, e),
      stateId: dR(n.stateId)
    };
  }
  function gR(n, e = void 0, t = {}, r = false) {
    const i = mR(r), l = new LA(i, new ZA(i)), c = new NA(i, l), f = n(c, e, t);
    return c.receiveBackend(f), c;
  }
  function mR(n) {
    const e = typeof window < "u" && window.__REDUX_DEVTOOLS_EXTENSION__;
    return YE(pR, n && e && e({
      name: "dnd-core",
      instanceId: "dnd-core"
    }));
  }
  function vR(n, e) {
    if (n == null) return {};
    var t = yR(n, e), r, i;
    if (Object.getOwnPropertySymbols) {
      var l = Object.getOwnPropertySymbols(n);
      for (i = 0; i < l.length; i++) r = l[i], !(e.indexOf(r) >= 0) && Object.prototype.propertyIsEnumerable.call(n, r) && (t[r] = n[r]);
    }
    return t;
  }
  function yR(n, e) {
    if (n == null) return {};
    var t = {}, r = Object.keys(n), i, l;
    for (l = 0; l < r.length; l++) i = r[l], !(e.indexOf(i) >= 0) && (t[i] = n[i]);
    return t;
  }
  let w_ = 0;
  const vg = Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");
  var wR = R.memo(function(e) {
    var { children: t } = e, r = vR(e, [
      "children"
    ]);
    const [i, l] = _R(r);
    return R.useEffect(() => {
      if (l) {
        const c = nb();
        return ++w_, () => {
          --w_ === 0 && (c[vg] = null);
        };
      }
    }, []), h.jsx(QE.Provider, {
      value: i,
      children: t
    });
  });
  function _R(n) {
    if ("manager" in n) return [
      {
        dragDropManager: n.manager
      },
      false
    ];
    const e = xR(n.backend, n.context, n.options, n.debugMode), t = !n.context;
    return [
      e,
      t
    ];
  }
  function xR(n, e = nb(), t, r) {
    const i = e;
    return i[vg] || (i[vg] = {
      dragDropManager: gR(n, e, t, r)
    }), i[vg];
  }
  function nb() {
    return typeof global < "u" ? global : window;
  }
  var ER = function n(e, t) {
    if (e === t) return true;
    if (e && t && typeof e == "object" && typeof t == "object") {
      if (e.constructor !== t.constructor) return false;
      var r, i, l;
      if (Array.isArray(e)) {
        if (r = e.length, r != t.length) return false;
        for (i = r; i-- !== 0; ) if (!n(e[i], t[i])) return false;
        return true;
      }
      if (e.constructor === RegExp) return e.source === t.source && e.flags === t.flags;
      if (e.valueOf !== Object.prototype.valueOf) return e.valueOf() === t.valueOf();
      if (e.toString !== Object.prototype.toString) return e.toString() === t.toString();
      if (l = Object.keys(e), r = l.length, r !== Object.keys(t).length) return false;
      for (i = r; i-- !== 0; ) if (!Object.prototype.hasOwnProperty.call(t, l[i])) return false;
      for (i = r; i-- !== 0; ) {
        var c = l[i];
        if (!n(e[c], t[c])) return false;
      }
      return true;
    }
    return e !== e && t !== t;
  };
  const Ll = typeof window < "u" ? R.useLayoutEffect : R.useEffect;
  function rb(n, e, t) {
    const [r, i] = R.useState(() => e(n)), l = R.useCallback(() => {
      const c = e(n);
      ER(r, c) || (i(c), t && t());
    }, [
      r,
      n,
      t
    ]);
    return Ll(l), [
      r,
      l
    ];
  }
  function bR(n, e, t) {
    const [r, i] = rb(n, e, t);
    return Ll(function() {
      const c = n.getHandlerId();
      if (c != null) return n.subscribeToStateChange(i, {
        handlerIds: [
          c
        ]
      });
    }, [
      n,
      i
    ]), r;
  }
  function sb(n, e, t) {
    return bR(e, n || (() => ({})), () => t.reconnect());
  }
  function ib(n, e) {
    const t = [
      ...e || []
    ];
    return e == null && typeof n != "function" && t.push(n), R.useMemo(() => typeof n == "function" ? n() : n, t);
  }
  function TR(n) {
    return R.useMemo(() => n.hooks.dragSource(), [
      n
    ]);
  }
  function CR(n) {
    return R.useMemo(() => n.hooks.dragPreview(), [
      n
    ]);
  }
  let sv = false, iv = false;
  class SR {
    receiveHandlerId(e) {
      this.sourceId = e;
    }
    getHandlerId() {
      return this.sourceId;
    }
    canDrag() {
      ht(!sv, "You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");
      try {
        return sv = true, this.internalMonitor.canDragSource(this.sourceId);
      } finally {
        sv = false;
      }
    }
    isDragging() {
      if (!this.sourceId) return false;
      ht(!iv, "You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");
      try {
        return iv = true, this.internalMonitor.isDraggingSource(this.sourceId);
      } finally {
        iv = false;
      }
    }
    subscribeToStateChange(e, t) {
      return this.internalMonitor.subscribeToStateChange(e, t);
    }
    isDraggingSource(e) {
      return this.internalMonitor.isDraggingSource(e);
    }
    isOverTarget(e, t) {
      return this.internalMonitor.isOverTarget(e, t);
    }
    getTargetIds() {
      return this.internalMonitor.getTargetIds();
    }
    isSourcePublic() {
      return this.internalMonitor.isSourcePublic();
    }
    getSourceId() {
      return this.internalMonitor.getSourceId();
    }
    subscribeToOffsetChange(e) {
      return this.internalMonitor.subscribeToOffsetChange(e);
    }
    canDragSource(e) {
      return this.internalMonitor.canDragSource(e);
    }
    canDropOnTarget(e) {
      return this.internalMonitor.canDropOnTarget(e);
    }
    getItemType() {
      return this.internalMonitor.getItemType();
    }
    getItem() {
      return this.internalMonitor.getItem();
    }
    getDropResult() {
      return this.internalMonitor.getDropResult();
    }
    didDrop() {
      return this.internalMonitor.didDrop();
    }
    getInitialClientOffset() {
      return this.internalMonitor.getInitialClientOffset();
    }
    getInitialSourceClientOffset() {
      return this.internalMonitor.getInitialSourceClientOffset();
    }
    getSourceClientOffset() {
      return this.internalMonitor.getSourceClientOffset();
    }
    getClientOffset() {
      return this.internalMonitor.getClientOffset();
    }
    getDifferenceFromInitialOffset() {
      return this.internalMonitor.getDifferenceFromInitialOffset();
    }
    constructor(e) {
      this.sourceId = null, this.internalMonitor = e.getMonitor();
    }
  }
  let ov = false;
  class IR {
    receiveHandlerId(e) {
      this.targetId = e;
    }
    getHandlerId() {
      return this.targetId;
    }
    subscribeToStateChange(e, t) {
      return this.internalMonitor.subscribeToStateChange(e, t);
    }
    canDrop() {
      if (!this.targetId) return false;
      ht(!ov, "You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");
      try {
        return ov = true, this.internalMonitor.canDropOnTarget(this.targetId);
      } finally {
        ov = false;
      }
    }
    isOver(e) {
      return this.targetId ? this.internalMonitor.isOverTarget(this.targetId, e) : false;
    }
    getItemType() {
      return this.internalMonitor.getItemType();
    }
    getItem() {
      return this.internalMonitor.getItem();
    }
    getDropResult() {
      return this.internalMonitor.getDropResult();
    }
    didDrop() {
      return this.internalMonitor.didDrop();
    }
    getInitialClientOffset() {
      return this.internalMonitor.getInitialClientOffset();
    }
    getInitialSourceClientOffset() {
      return this.internalMonitor.getInitialSourceClientOffset();
    }
    getSourceClientOffset() {
      return this.internalMonitor.getSourceClientOffset();
    }
    getClientOffset() {
      return this.internalMonitor.getClientOffset();
    }
    getDifferenceFromInitialOffset() {
      return this.internalMonitor.getDifferenceFromInitialOffset();
    }
    constructor(e) {
      this.targetId = null, this.internalMonitor = e.getMonitor();
    }
  }
  function kR(n, e, t) {
    const r = t.getRegistry(), i = r.addTarget(n, e);
    return [
      i,
      () => r.removeTarget(i)
    ];
  }
  function AR(n, e, t) {
    const r = t.getRegistry(), i = r.addSource(n, e);
    return [
      i,
      () => r.removeSource(i)
    ];
  }
  function $v(n, e, t, r) {
    let i;
    if (i !== void 0) return !!i;
    if (n === e) return true;
    if (typeof n != "object" || !n || typeof e != "object" || !e) return false;
    const l = Object.keys(n), c = Object.keys(e);
    if (l.length !== c.length) return false;
    const f = Object.prototype.hasOwnProperty.bind(e);
    for (let m = 0; m < l.length; m++) {
      const y = l[m];
      if (!f(y)) return false;
      const x = n[y], C = e[y];
      if (i = void 0, i === false || i === void 0 && x !== C) return false;
    }
    return true;
  }
  function Vv(n) {
    return n !== null && typeof n == "object" && Object.prototype.hasOwnProperty.call(n, "current");
  }
  function RR(n) {
    if (typeof n.type == "string") return;
    const e = n.type.displayName || n.type.name || "the component";
    throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`);
  }
  function NR(n) {
    return (e = null, t = null) => {
      if (!R.isValidElement(e)) {
        const l = e;
        return n(l, t), l;
      }
      const r = e;
      return RR(r), PR(r, t ? (l) => n(l, t) : n);
    };
  }
  function ob(n) {
    const e = {};
    return Object.keys(n).forEach((t) => {
      const r = n[t];
      if (t.endsWith("Ref")) e[t] = n[t];
      else {
        const i = NR(r);
        e[t] = () => i;
      }
    }), e;
  }
  function __(n, e) {
    typeof n == "function" ? n(e) : n.current = e;
  }
  function PR(n, e) {
    const t = n.ref;
    return ht(typeof t != "string", "Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"), t ? R.cloneElement(n, {
      ref: (r) => {
        __(t, r), __(e, r);
      }
    }) : R.cloneElement(n, {
      ref: e
    });
  }
  class DR {
    receiveHandlerId(e) {
      this.handlerId !== e && (this.handlerId = e, this.reconnect());
    }
    get connectTarget() {
      return this.dragSource;
    }
    get dragSourceOptions() {
      return this.dragSourceOptionsInternal;
    }
    set dragSourceOptions(e) {
      this.dragSourceOptionsInternal = e;
    }
    get dragPreviewOptions() {
      return this.dragPreviewOptionsInternal;
    }
    set dragPreviewOptions(e) {
      this.dragPreviewOptionsInternal = e;
    }
    reconnect() {
      const e = this.reconnectDragSource();
      this.reconnectDragPreview(e);
    }
    reconnectDragSource() {
      const e = this.dragSource, t = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();
      return t && this.disconnectDragSource(), this.handlerId ? e ? (t && (this.lastConnectedHandlerId = this.handlerId, this.lastConnectedDragSource = e, this.lastConnectedDragSourceOptions = this.dragSourceOptions, this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, e, this.dragSourceOptions)), t) : (this.lastConnectedDragSource = e, t) : t;
    }
    reconnectDragPreview(e = false) {
      const t = this.dragPreview, r = e || this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();
      if (r && this.disconnectDragPreview(), !!this.handlerId) {
        if (!t) {
          this.lastConnectedDragPreview = t;
          return;
        }
        r && (this.lastConnectedHandlerId = this.handlerId, this.lastConnectedDragPreview = t, this.lastConnectedDragPreviewOptions = this.dragPreviewOptions, this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, t, this.dragPreviewOptions));
      }
    }
    didHandlerIdChange() {
      return this.lastConnectedHandlerId !== this.handlerId;
    }
    didConnectedDragSourceChange() {
      return this.lastConnectedDragSource !== this.dragSource;
    }
    didConnectedDragPreviewChange() {
      return this.lastConnectedDragPreview !== this.dragPreview;
    }
    didDragSourceOptionsChange() {
      return !$v(this.lastConnectedDragSourceOptions, this.dragSourceOptions);
    }
    didDragPreviewOptionsChange() {
      return !$v(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);
    }
    disconnectDragSource() {
      this.dragSourceUnsubscribe && (this.dragSourceUnsubscribe(), this.dragSourceUnsubscribe = void 0);
    }
    disconnectDragPreview() {
      this.dragPreviewUnsubscribe && (this.dragPreviewUnsubscribe(), this.dragPreviewUnsubscribe = void 0, this.dragPreviewNode = null, this.dragPreviewRef = null);
    }
    get dragSource() {
      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;
    }
    get dragPreview() {
      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;
    }
    clearDragSource() {
      this.dragSourceNode = null, this.dragSourceRef = null;
    }
    clearDragPreview() {
      this.dragPreviewNode = null, this.dragPreviewRef = null;
    }
    constructor(e) {
      this.hooks = ob({
        dragSource: (t, r) => {
          this.clearDragSource(), this.dragSourceOptions = r || null, Vv(t) ? this.dragSourceRef = t : this.dragSourceNode = t, this.reconnectDragSource();
        },
        dragPreview: (t, r) => {
          this.clearDragPreview(), this.dragPreviewOptions = r || null, Vv(t) ? this.dragPreviewRef = t : this.dragPreviewNode = t, this.reconnectDragPreview();
        }
      }), this.handlerId = null, this.dragSourceRef = null, this.dragSourceOptionsInternal = null, this.dragPreviewRef = null, this.dragPreviewOptionsInternal = null, this.lastConnectedHandlerId = null, this.lastConnectedDragSource = null, this.lastConnectedDragSourceOptions = null, this.lastConnectedDragPreview = null, this.lastConnectedDragPreviewOptions = null, this.backend = e;
    }
  }
  class jR {
    get connectTarget() {
      return this.dropTarget;
    }
    reconnect() {
      const e = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();
      e && this.disconnectDropTarget();
      const t = this.dropTarget;
      if (this.handlerId) {
        if (!t) {
          this.lastConnectedDropTarget = t;
          return;
        }
        e && (this.lastConnectedHandlerId = this.handlerId, this.lastConnectedDropTarget = t, this.lastConnectedDropTargetOptions = this.dropTargetOptions, this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, t, this.dropTargetOptions));
      }
    }
    receiveHandlerId(e) {
      e !== this.handlerId && (this.handlerId = e, this.reconnect());
    }
    get dropTargetOptions() {
      return this.dropTargetOptionsInternal;
    }
    set dropTargetOptions(e) {
      this.dropTargetOptionsInternal = e;
    }
    didHandlerIdChange() {
      return this.lastConnectedHandlerId !== this.handlerId;
    }
    didDropTargetChange() {
      return this.lastConnectedDropTarget !== this.dropTarget;
    }
    didOptionsChange() {
      return !$v(this.lastConnectedDropTargetOptions, this.dropTargetOptions);
    }
    disconnectDropTarget() {
      this.unsubscribeDropTarget && (this.unsubscribeDropTarget(), this.unsubscribeDropTarget = void 0);
    }
    get dropTarget() {
      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;
    }
    clearDropTarget() {
      this.dropTargetRef = null, this.dropTargetNode = null;
    }
    constructor(e) {
      this.hooks = ob({
        dropTarget: (t, r) => {
          this.clearDropTarget(), this.dropTargetOptions = r, Vv(t) ? this.dropTargetRef = t : this.dropTargetNode = t, this.reconnect();
        }
      }), this.handlerId = null, this.dropTargetRef = null, this.dropTargetOptionsInternal = null, this.lastConnectedHandlerId = null, this.lastConnectedDropTarget = null, this.lastConnectedDropTargetOptions = null, this.backend = e;
    }
  }
  function Bl() {
    const { dragDropManager: n } = R.useContext(QE);
    return ht(n != null, "Expected drag drop context"), n;
  }
  function OR(n, e) {
    const t = Bl(), r = R.useMemo(() => new DR(t.getBackend()), [
      t
    ]);
    return Ll(() => (r.dragSourceOptions = n || null, r.reconnect(), () => r.disconnectDragSource()), [
      r,
      n
    ]), Ll(() => (r.dragPreviewOptions = e || null, r.reconnect(), () => r.disconnectDragPreview()), [
      r,
      e
    ]), r;
  }
  function LR() {
    const n = Bl();
    return R.useMemo(() => new SR(n), [
      n
    ]);
  }
  class MR {
    beginDrag() {
      const e = this.spec, t = this.monitor;
      let r = null;
      return typeof e.item == "object" ? r = e.item : typeof e.item == "function" ? r = e.item(t) : r = {}, r ?? null;
    }
    canDrag() {
      const e = this.spec, t = this.monitor;
      return typeof e.canDrag == "boolean" ? e.canDrag : typeof e.canDrag == "function" ? e.canDrag(t) : true;
    }
    isDragging(e, t) {
      const r = this.spec, i = this.monitor, { isDragging: l } = r;
      return l ? l(i) : t === e.getSourceId();
    }
    endDrag() {
      const e = this.spec, t = this.monitor, r = this.connector, { end: i } = e;
      i && i(t.getItem(), t), r.reconnect();
    }
    constructor(e, t, r) {
      this.spec = e, this.monitor = t, this.connector = r;
    }
  }
  function $R(n, e, t) {
    const r = R.useMemo(() => new MR(n, e, t), [
      e,
      t
    ]);
    return R.useEffect(() => {
      r.spec = n;
    }, [
      n
    ]), r;
  }
  function VR(n) {
    return R.useMemo(() => {
      const e = n.type;
      return ht(e != null, "spec.type must be defined"), e;
    }, [
      n
    ]);
  }
  function FR(n, e, t) {
    const r = Bl(), i = $R(n, e, t), l = VR(n);
    Ll(function() {
      if (l != null) {
        const [f, m] = AR(l, i, r);
        return e.receiveHandlerId(f), t.receiveHandlerId(f), m;
      }
    }, [
      r,
      e,
      t,
      i,
      l
    ]);
  }
  function zR(n, e) {
    const t = ib(n, e);
    ht(!t.begin, "useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");
    const r = LR(), i = OR(t.options, t.previewOptions);
    return FR(t, r, i), [
      sb(t.collect, r, i),
      TR(i),
      CR(i)
    ];
  }
  function UR(n) {
    const t = Bl().getMonitor(), [r, i] = rb(t, n);
    return R.useEffect(() => t.subscribeToOffsetChange(i)), R.useEffect(() => t.subscribeToStateChange(i)), r;
  }
  function BR(n) {
    return R.useMemo(() => n.hooks.dropTarget(), [
      n
    ]);
  }
  function WR(n) {
    const e = Bl(), t = R.useMemo(() => new jR(e.getBackend()), [
      e
    ]);
    return Ll(() => (t.dropTargetOptions = n || null, t.reconnect(), () => t.disconnectDropTarget()), [
      n
    ]), t;
  }
  function HR() {
    const n = Bl();
    return R.useMemo(() => new IR(n), [
      n
    ]);
  }
  function qR(n) {
    const { accept: e } = n;
    return R.useMemo(() => (ht(n.accept != null, "accept must be defined"), Array.isArray(e) ? e : [
      e
    ]), [
      e
    ]);
  }
  class KR {
    canDrop() {
      const e = this.spec, t = this.monitor;
      return e.canDrop ? e.canDrop(t.getItem(), t) : true;
    }
    hover() {
      const e = this.spec, t = this.monitor;
      e.hover && e.hover(t.getItem(), t);
    }
    drop() {
      const e = this.spec, t = this.monitor;
      if (e.drop) return e.drop(t.getItem(), t);
    }
    constructor(e, t) {
      this.spec = e, this.monitor = t;
    }
  }
  function GR(n, e) {
    const t = R.useMemo(() => new KR(n, e), [
      e
    ]);
    return R.useEffect(() => {
      t.spec = n;
    }, [
      n
    ]), t;
  }
  function QR(n, e, t) {
    const r = Bl(), i = GR(n, e), l = qR(n);
    Ll(function() {
      const [f, m] = kR(l, i, r);
      return e.receiveHandlerId(f), t.receiveHandlerId(f), m;
    }, [
      r,
      e,
      i,
      t,
      l.map((c) => c.toString()).join("|")
    ]);
  }
  function YR(n, e) {
    const t = ib(n, e), r = HR(), i = WR(t.options);
    return QR(t, r, i), [
      sb(t.collect, r, i),
      BR(i)
    ];
  }
  function ab(n) {
    let e = null;
    return () => (e == null && (e = n()), e);
  }
  function XR(n, e) {
    return n.filter((t) => t !== e);
  }
  function JR(n, e) {
    const t = /* @__PURE__ */ new Set(), r = (l) => t.add(l);
    n.forEach(r), e.forEach(r);
    const i = [];
    return t.forEach((l) => i.push(l)), i;
  }
  class ZR {
    enter(e) {
      const t = this.entered.length, r = (i) => this.isNodeInDocument(i) && (!i.contains || i.contains(e));
      return this.entered = JR(this.entered.filter(r), [
        e
      ]), t === 0 && this.entered.length > 0;
    }
    leave(e) {
      const t = this.entered.length;
      return this.entered = XR(this.entered.filter(this.isNodeInDocument), e), t > 0 && this.entered.length === 0;
    }
    reset() {
      this.entered = [];
    }
    constructor(e) {
      this.entered = [], this.isNodeInDocument = e;
    }
  }
  class eN {
    initializeExposedProperties() {
      Object.keys(this.config.exposeProperties).forEach((e) => {
        Object.defineProperty(this.item, e, {
          configurable: true,
          enumerable: true,
          get() {
            return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`), null;
          }
        });
      });
    }
    loadDataTransfer(e) {
      if (e) {
        const t = {};
        Object.keys(this.config.exposeProperties).forEach((r) => {
          const i = this.config.exposeProperties[r];
          i != null && (t[r] = {
            value: i(e, this.config.matchesTypes),
            configurable: true,
            enumerable: true
          });
        }), Object.defineProperties(this.item, t);
      }
    }
    canDrag() {
      return true;
    }
    beginDrag() {
      return this.item;
    }
    isDragging(e, t) {
      return t === e.getSourceId();
    }
    endDrag() {
    }
    constructor(e) {
      this.config = e, this.item = {}, this.initializeExposedProperties();
    }
  }
  const lb = "__NATIVE_FILE__", cb = "__NATIVE_URL__", ub = "__NATIVE_TEXT__", db = "__NATIVE_HTML__";
  var x_ = Object.freeze({
    __proto__: null,
    FILE: lb,
    HTML: db,
    TEXT: ub,
    URL: cb
  });
  function av(n, e, t) {
    const r = e.reduce((i, l) => i || n.getData(l), "");
    return r ?? t;
  }
  const Fv = {
    [lb]: {
      exposeProperties: {
        files: (n) => Array.prototype.slice.call(n.files),
        items: (n) => n.items,
        dataTransfer: (n) => n
      },
      matchesTypes: [
        "Files"
      ]
    },
    [db]: {
      exposeProperties: {
        html: (n, e) => av(n, e, ""),
        dataTransfer: (n) => n
      },
      matchesTypes: [
        "Html",
        "text/html"
      ]
    },
    [cb]: {
      exposeProperties: {
        urls: (n, e) => av(n, e, "").split(`
`),
        dataTransfer: (n) => n
      },
      matchesTypes: [
        "Url",
        "text/uri-list"
      ]
    },
    [ub]: {
      exposeProperties: {
        text: (n, e) => av(n, e, ""),
        dataTransfer: (n) => n
      },
      matchesTypes: [
        "Text",
        "text/plain"
      ]
    }
  };
  function tN(n, e) {
    const t = Fv[n];
    if (!t) throw new Error(`native type ${n} has no configuration`);
    const r = new eN(t);
    return r.loadDataTransfer(e), r;
  }
  function lv(n) {
    if (!n) return null;
    const e = Array.prototype.slice.call(n.types || []);
    return Object.keys(Fv).filter((t) => {
      const r = Fv[t];
      return (r == null ? void 0 : r.matchesTypes) ? r.matchesTypes.some((i) => e.indexOf(i) > -1) : false;
    })[0] || null;
  }
  const nN = ab(() => /firefox/i.test(navigator.userAgent)), fb = ab(() => !!window.safari);
  class E_ {
    interpolate(e) {
      const { xs: t, ys: r, c1s: i, c2s: l, c3s: c } = this;
      let f = t.length - 1;
      if (e === t[f]) return r[f];
      let m = 0, y = c.length - 1, x;
      for (; m <= y; ) {
        x = Math.floor(0.5 * (m + y));
        const N = t[x];
        if (N < e) m = x + 1;
        else if (N > e) y = x - 1;
        else return r[x];
      }
      f = Math.max(0, y);
      const C = e - t[f], S = C * C;
      return r[f] + i[f] * C + l[f] * S + c[f] * C * S;
    }
    constructor(e, t) {
      const { length: r } = e, i = [];
      for (let N = 0; N < r; N++) i.push(N);
      i.sort((N, P) => e[N] < e[P] ? -1 : 1);
      const l = [], c = [];
      let f, m;
      for (let N = 0; N < r - 1; N++) f = e[N + 1] - e[N], m = t[N + 1] - t[N], l.push(f), c.push(m / f);
      const y = [
        c[0]
      ];
      for (let N = 0; N < l.length - 1; N++) {
        const P = c[N], O = c[N + 1];
        if (P * O <= 0) y.push(0);
        else {
          f = l[N];
          const L = l[N + 1], H = f + L;
          y.push(3 * H / ((H + L) / P + (H + f) / O));
        }
      }
      y.push(c[c.length - 1]);
      const x = [], C = [];
      let S;
      for (let N = 0; N < y.length - 1; N++) {
        S = c[N];
        const P = y[N], O = 1 / l[N], L = P + y[N + 1] - S - S;
        x.push((S - P - L) * O), C.push(L * O * O);
      }
      this.xs = e, this.ys = t, this.c1s = y, this.c2s = x, this.c3s = C;
    }
  }
  const rN = 1;
  function hb(n) {
    const e = n.nodeType === rN ? n : n.parentElement;
    if (!e) return null;
    const { top: t, left: r } = e.getBoundingClientRect();
    return {
      x: r,
      y: t
    };
  }
  function rg(n) {
    return {
      x: n.clientX,
      y: n.clientY
    };
  }
  function sN(n) {
    var e;
    return n.nodeName === "IMG" && (nN() || !(!((e = document.documentElement) === null || e === void 0) && e.contains(n)));
  }
  function iN(n, e, t, r) {
    let i = n ? e.width : t, l = n ? e.height : r;
    return fb() && n && (l /= window.devicePixelRatio, i /= window.devicePixelRatio), {
      dragPreviewWidth: i,
      dragPreviewHeight: l
    };
  }
  function oN(n, e, t, r, i) {
    const l = sN(e), f = hb(l ? n : e), m = {
      x: t.x - f.x,
      y: t.y - f.y
    }, { offsetWidth: y, offsetHeight: x } = n, { anchorX: C, anchorY: S } = r, { dragPreviewWidth: N, dragPreviewHeight: P } = iN(l, e, y, x), O = () => {
      let ge = new E_([
        0,
        0.5,
        1
      ], [
        m.y,
        m.y / x * P,
        m.y + P - x
      ]).interpolate(S);
      return fb() && l && (ge += (window.devicePixelRatio - 1) * P), ge;
    }, L = () => new E_([
      0,
      0.5,
      1
    ], [
      m.x,
      m.x / y * N,
      m.x + N - y
    ]).interpolate(C), { offsetX: H, offsetY: W } = i, T = H === 0 || H, Y = W === 0 || W;
    return {
      x: T ? H : L(),
      y: Y ? W : O()
    };
  }
  let aN = class {
    get window() {
      if (this.globalContext) return this.globalContext;
      if (typeof window < "u") return window;
    }
    get document() {
      var e;
      return !((e = this.globalContext) === null || e === void 0) && e.document ? this.globalContext.document : this.window ? this.window.document : void 0;
    }
    get rootElement() {
      var e;
      return ((e = this.optionsArgs) === null || e === void 0 ? void 0 : e.rootElement) || this.window;
    }
    constructor(e, t) {
      this.ownerDocument = null, this.globalContext = e, this.optionsArgs = t;
    }
  };
  function lN(n, e, t) {
    return e in n ? Object.defineProperty(n, e, {
      value: t,
      enumerable: true,
      configurable: true,
      writable: true
    }) : n[e] = t, n;
  }
  function b_(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e] != null ? arguments[e] : {}, r = Object.keys(t);
      typeof Object.getOwnPropertySymbols == "function" && (r = r.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
        return Object.getOwnPropertyDescriptor(t, i).enumerable;
      }))), r.forEach(function(i) {
        lN(n, i, t[i]);
      });
    }
    return n;
  }
  class cN {
    profile() {
      var e, t;
      return {
        sourcePreviewNodes: this.sourcePreviewNodes.size,
        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,
        sourceNodeOptions: this.sourceNodeOptions.size,
        sourceNodes: this.sourceNodes.size,
        dragStartSourceIds: ((e = this.dragStartSourceIds) === null || e === void 0 ? void 0 : e.length) || 0,
        dropTargetIds: this.dropTargetIds.length,
        dragEnterTargetIds: this.dragEnterTargetIds.length,
        dragOverTargetIds: ((t = this.dragOverTargetIds) === null || t === void 0 ? void 0 : t.length) || 0
      };
    }
    get window() {
      return this.options.window;
    }
    get document() {
      return this.options.document;
    }
    get rootElement() {
      return this.options.rootElement;
    }
    setup() {
      const e = this.rootElement;
      if (e !== void 0) {
        if (e.__isReactDndBackendSetUp) throw new Error("Cannot have two HTML5 backends at the same time.");
        e.__isReactDndBackendSetUp = true, this.addEventListeners(e);
      }
    }
    teardown() {
      const e = this.rootElement;
      if (e !== void 0 && (e.__isReactDndBackendSetUp = false, this.removeEventListeners(this.rootElement), this.clearCurrentDragSourceNode(), this.asyncEndDragFrameId)) {
        var t;
        (t = this.window) === null || t === void 0 || t.cancelAnimationFrame(this.asyncEndDragFrameId);
      }
    }
    connectDragPreview(e, t, r) {
      return this.sourcePreviewNodeOptions.set(e, r), this.sourcePreviewNodes.set(e, t), () => {
        this.sourcePreviewNodes.delete(e), this.sourcePreviewNodeOptions.delete(e);
      };
    }
    connectDragSource(e, t, r) {
      this.sourceNodes.set(e, t), this.sourceNodeOptions.set(e, r);
      const i = (c) => this.handleDragStart(c, e), l = (c) => this.handleSelectStart(c);
      return t.setAttribute("draggable", "true"), t.addEventListener("dragstart", i), t.addEventListener("selectstart", l), () => {
        this.sourceNodes.delete(e), this.sourceNodeOptions.delete(e), t.removeEventListener("dragstart", i), t.removeEventListener("selectstart", l), t.setAttribute("draggable", "false");
      };
    }
    connectDropTarget(e, t) {
      const r = (c) => this.handleDragEnter(c, e), i = (c) => this.handleDragOver(c, e), l = (c) => this.handleDrop(c, e);
      return t.addEventListener("dragenter", r), t.addEventListener("dragover", i), t.addEventListener("drop", l), () => {
        t.removeEventListener("dragenter", r), t.removeEventListener("dragover", i), t.removeEventListener("drop", l);
      };
    }
    addEventListeners(e) {
      e.addEventListener && (e.addEventListener("dragstart", this.handleTopDragStart), e.addEventListener("dragstart", this.handleTopDragStartCapture, true), e.addEventListener("dragend", this.handleTopDragEndCapture, true), e.addEventListener("dragenter", this.handleTopDragEnter), e.addEventListener("dragenter", this.handleTopDragEnterCapture, true), e.addEventListener("dragleave", this.handleTopDragLeaveCapture, true), e.addEventListener("dragover", this.handleTopDragOver), e.addEventListener("dragover", this.handleTopDragOverCapture, true), e.addEventListener("drop", this.handleTopDrop), e.addEventListener("drop", this.handleTopDropCapture, true));
    }
    removeEventListeners(e) {
      e.removeEventListener && (e.removeEventListener("dragstart", this.handleTopDragStart), e.removeEventListener("dragstart", this.handleTopDragStartCapture, true), e.removeEventListener("dragend", this.handleTopDragEndCapture, true), e.removeEventListener("dragenter", this.handleTopDragEnter), e.removeEventListener("dragenter", this.handleTopDragEnterCapture, true), e.removeEventListener("dragleave", this.handleTopDragLeaveCapture, true), e.removeEventListener("dragover", this.handleTopDragOver), e.removeEventListener("dragover", this.handleTopDragOverCapture, true), e.removeEventListener("drop", this.handleTopDrop), e.removeEventListener("drop", this.handleTopDropCapture, true));
    }
    getCurrentSourceNodeOptions() {
      const e = this.monitor.getSourceId(), t = this.sourceNodeOptions.get(e);
      return b_({
        dropEffect: this.altKeyPressed ? "copy" : "move"
      }, t || {});
    }
    getCurrentDropEffect() {
      return this.isDraggingNativeItem() ? "copy" : this.getCurrentSourceNodeOptions().dropEffect;
    }
    getCurrentSourcePreviewNodeOptions() {
      const e = this.monitor.getSourceId(), t = this.sourcePreviewNodeOptions.get(e);
      return b_({
        anchorX: 0.5,
        anchorY: 0.5,
        captureDraggingState: false
      }, t || {});
    }
    isDraggingNativeItem() {
      const e = this.monitor.getItemType();
      return Object.keys(x_).some((t) => x_[t] === e);
    }
    beginDragNativeItem(e, t) {
      this.clearCurrentDragSourceNode(), this.currentNativeSource = tN(e, t), this.currentNativeHandle = this.registry.addSource(e, this.currentNativeSource), this.actions.beginDrag([
        this.currentNativeHandle
      ]);
    }
    setCurrentDragSourceNode(e) {
      this.clearCurrentDragSourceNode(), this.currentDragSourceNode = e;
      const t = 1e3;
      this.mouseMoveTimeoutTimer = setTimeout(() => {
        var r;
        return (r = this.rootElement) === null || r === void 0 ? void 0 : r.addEventListener("mousemove", this.endDragIfSourceWasRemovedFromDOM, true);
      }, t);
    }
    clearCurrentDragSourceNode() {
      if (this.currentDragSourceNode) {
        if (this.currentDragSourceNode = null, this.rootElement) {
          var e;
          (e = this.window) === null || e === void 0 || e.clearTimeout(this.mouseMoveTimeoutTimer || void 0), this.rootElement.removeEventListener("mousemove", this.endDragIfSourceWasRemovedFromDOM, true);
        }
        return this.mouseMoveTimeoutTimer = null, true;
      }
      return false;
    }
    handleDragStart(e, t) {
      e.defaultPrevented || (this.dragStartSourceIds || (this.dragStartSourceIds = []), this.dragStartSourceIds.unshift(t));
    }
    handleDragEnter(e, t) {
      this.dragEnterTargetIds.unshift(t);
    }
    handleDragOver(e, t) {
      this.dragOverTargetIds === null && (this.dragOverTargetIds = []), this.dragOverTargetIds.unshift(t);
    }
    handleDrop(e, t) {
      this.dropTargetIds.unshift(t);
    }
    constructor(e, t, r) {
      this.sourcePreviewNodes = /* @__PURE__ */ new Map(), this.sourcePreviewNodeOptions = /* @__PURE__ */ new Map(), this.sourceNodes = /* @__PURE__ */ new Map(), this.sourceNodeOptions = /* @__PURE__ */ new Map(), this.dragStartSourceIds = null, this.dropTargetIds = [], this.dragEnterTargetIds = [], this.currentNativeSource = null, this.currentNativeHandle = null, this.currentDragSourceNode = null, this.altKeyPressed = false, this.mouseMoveTimeoutTimer = null, this.asyncEndDragFrameId = null, this.dragOverTargetIds = null, this.lastClientOffset = null, this.hoverRafId = null, this.getSourceClientOffset = (i) => {
        const l = this.sourceNodes.get(i);
        return l && hb(l) || null;
      }, this.endDragNativeItem = () => {
        this.isDraggingNativeItem() && (this.actions.endDrag(), this.currentNativeHandle && this.registry.removeSource(this.currentNativeHandle), this.currentNativeHandle = null, this.currentNativeSource = null);
      }, this.isNodeInDocument = (i) => !!(i && this.document && this.document.body && this.document.body.contains(i)), this.endDragIfSourceWasRemovedFromDOM = () => {
        const i = this.currentDragSourceNode;
        i == null || this.isNodeInDocument(i) || (this.clearCurrentDragSourceNode() && this.monitor.isDragging() && this.actions.endDrag(), this.cancelHover());
      }, this.scheduleHover = (i) => {
        this.hoverRafId === null && typeof requestAnimationFrame < "u" && (this.hoverRafId = requestAnimationFrame(() => {
          this.monitor.isDragging() && this.actions.hover(i || [], {
            clientOffset: this.lastClientOffset
          }), this.hoverRafId = null;
        }));
      }, this.cancelHover = () => {
        this.hoverRafId !== null && typeof cancelAnimationFrame < "u" && (cancelAnimationFrame(this.hoverRafId), this.hoverRafId = null);
      }, this.handleTopDragStartCapture = () => {
        this.clearCurrentDragSourceNode(), this.dragStartSourceIds = [];
      }, this.handleTopDragStart = (i) => {
        if (i.defaultPrevented) return;
        const { dragStartSourceIds: l } = this;
        this.dragStartSourceIds = null;
        const c = rg(i);
        this.monitor.isDragging() && (this.actions.endDrag(), this.cancelHover()), this.actions.beginDrag(l || [], {
          publishSource: false,
          getSourceClientOffset: this.getSourceClientOffset,
          clientOffset: c
        });
        const { dataTransfer: f } = i, m = lv(f);
        if (this.monitor.isDragging()) {
          if (f && typeof f.setDragImage == "function") {
            const x = this.monitor.getSourceId(), C = this.sourceNodes.get(x), S = this.sourcePreviewNodes.get(x) || C;
            if (S) {
              const { anchorX: N, anchorY: P, offsetX: O, offsetY: L } = this.getCurrentSourcePreviewNodeOptions(), T = oN(C, S, c, {
                anchorX: N,
                anchorY: P
              }, {
                offsetX: O,
                offsetY: L
              });
              f.setDragImage(S, T.x, T.y);
            }
          }
          try {
            f == null ? void 0 : f.setData("application/json", {});
          } catch {
          }
          this.setCurrentDragSourceNode(i.target);
          const { captureDraggingState: y } = this.getCurrentSourcePreviewNodeOptions();
          y ? this.actions.publishDragSource() : setTimeout(() => this.actions.publishDragSource(), 0);
        } else if (m) this.beginDragNativeItem(m);
        else {
          if (f && !f.types && (i.target && !i.target.hasAttribute || !i.target.hasAttribute("draggable"))) return;
          i.preventDefault();
        }
      }, this.handleTopDragEndCapture = () => {
        this.clearCurrentDragSourceNode() && this.monitor.isDragging() && this.actions.endDrag(), this.cancelHover();
      }, this.handleTopDragEnterCapture = (i) => {
        if (this.dragEnterTargetIds = [], this.isDraggingNativeItem()) {
          var l;
          (l = this.currentNativeSource) === null || l === void 0 || l.loadDataTransfer(i.dataTransfer);
        }
        if (!this.enterLeaveCounter.enter(i.target) || this.monitor.isDragging()) return;
        const { dataTransfer: f } = i, m = lv(f);
        m && this.beginDragNativeItem(m, f);
      }, this.handleTopDragEnter = (i) => {
        const { dragEnterTargetIds: l } = this;
        if (this.dragEnterTargetIds = [], !this.monitor.isDragging()) return;
        this.altKeyPressed = i.altKey, l.length > 0 && this.actions.hover(l, {
          clientOffset: rg(i)
        }), l.some((f) => this.monitor.canDropOnTarget(f)) && (i.preventDefault(), i.dataTransfer && (i.dataTransfer.dropEffect = this.getCurrentDropEffect()));
      }, this.handleTopDragOverCapture = (i) => {
        if (this.dragOverTargetIds = [], this.isDraggingNativeItem()) {
          var l;
          (l = this.currentNativeSource) === null || l === void 0 || l.loadDataTransfer(i.dataTransfer);
        }
      }, this.handleTopDragOver = (i) => {
        const { dragOverTargetIds: l } = this;
        if (this.dragOverTargetIds = [], !this.monitor.isDragging()) {
          i.preventDefault(), i.dataTransfer && (i.dataTransfer.dropEffect = "none");
          return;
        }
        this.altKeyPressed = i.altKey, this.lastClientOffset = rg(i), this.scheduleHover(l), (l || []).some((f) => this.monitor.canDropOnTarget(f)) ? (i.preventDefault(), i.dataTransfer && (i.dataTransfer.dropEffect = this.getCurrentDropEffect())) : this.isDraggingNativeItem() ? i.preventDefault() : (i.preventDefault(), i.dataTransfer && (i.dataTransfer.dropEffect = "none"));
      }, this.handleTopDragLeaveCapture = (i) => {
        this.isDraggingNativeItem() && i.preventDefault(), this.enterLeaveCounter.leave(i.target) && (this.isDraggingNativeItem() && setTimeout(() => this.endDragNativeItem(), 0), this.cancelHover());
      }, this.handleTopDropCapture = (i) => {
        if (this.dropTargetIds = [], this.isDraggingNativeItem()) {
          var l;
          i.preventDefault(), (l = this.currentNativeSource) === null || l === void 0 || l.loadDataTransfer(i.dataTransfer);
        } else lv(i.dataTransfer) && i.preventDefault();
        this.enterLeaveCounter.reset();
      }, this.handleTopDrop = (i) => {
        const { dropTargetIds: l } = this;
        this.dropTargetIds = [], this.actions.hover(l, {
          clientOffset: rg(i)
        }), this.actions.drop({
          dropEffect: this.getCurrentDropEffect()
        }), this.isDraggingNativeItem() ? this.endDragNativeItem() : this.monitor.isDragging() && this.actions.endDrag(), this.cancelHover();
      }, this.handleSelectStart = (i) => {
        const l = i.target;
        typeof l.dragDrop == "function" && (l.tagName === "INPUT" || l.tagName === "SELECT" || l.tagName === "TEXTAREA" || l.isContentEditable || (i.preventDefault(), l.dragDrop()));
      }, this.options = new aN(t, r), this.actions = e.getActions(), this.monitor = e.getMonitor(), this.registry = e.getRegistry(), this.enterLeaveCounter = new ZR(this.isNodeInDocument);
    }
  }
  let sg;
  function uN() {
    return sg || (sg = new Image(), sg.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="), sg;
  }
  const dN = function(e, t, r) {
    return new cN(e, t, r);
  };
  function T_({ isPremovedPiece: n = false, piece: e, square: t, squares: r }) {
    const { animationDuration: i, arePiecesDraggable: l, boardWidth: c, boardOrientation: f, chessPieces: m, currentPosition: y, deletePieceFromSquare: x, dropOffBoardAction: C, id: S, isDraggablePiece: N, isWaitingForAnimation: P, onPieceClick: O, onPieceDragBegin: L, onPieceDragEnd: H, onPieceDropOffBoard: W, onPromotionCheck: T, positionDifferences: Y } = Ro(), [u, ge] = R.useState({
      opacity: 1,
      zIndex: 5,
      touchAction: "none",
      cursor: l && N({
        piece: e,
        sourceSquare: t
      }) ? "-webkit-grab" : "default"
    }), [{ canDrag: j, isDragging: M }, V, B] = zR(() => ({
      type: "piece",
      item: () => (L(e, t), {
        piece: e,
        square: t,
        id: S
      }),
      end: (G, F) => {
        H(e, t), !F.didDrop() && (C === "trash" && x(t), W == null ? void 0 : W(t, e));
      },
      collect: (G) => ({
        canDrag: N({
          piece: e,
          sourceSquare: t
        }),
        isDragging: !!G.isDragging()
      })
    }), [
      e,
      t,
      y,
      S
    ]);
    B(uN(), {
      captureDraggingState: true
    }), R.useEffect(() => {
      ge((G) => Object.assign(Object.assign({}, G), {
        opacity: M ? 0 : 1
      }));
    }, [
      M
    ]), R.useEffect(() => {
      var G;
      const F = (G = Y.removed) === null || G === void 0 ? void 0 : G[t];
      if (!Y.added || !F) return;
      const Oe = Object.entries(Y.added).find(([Le, Ge]) => Ge === F || T(t, Le, F));
      if (P && F && Oe && !n) {
        const Le = t, Ge = Oe[0];
        if (Le && Ge) {
          const Ye = c / 8;
          ge((he) => Object.assign(Object.assign({}, he), {
            transform: `translate(${(f === "black" ? -1 : 1) * (Ge.charCodeAt(0) - Le.charCodeAt(0)) * Ye}px, ${(f === "black" ? -1 : 1) * (Number(Le[1]) - Number(Ge[1])) * Ye}px)`,
            transition: `transform ${i}ms`,
            zIndex: 6
          }));
        }
      }
    }, [
      Y
    ]), R.useEffect(() => {
      const { sourceSq: G } = q();
      G && ge((F) => Object.assign(Object.assign({}, F), {
        transform: "translate(0px, 0px)",
        transition: "transform 0ms"
      }));
    }, [
      y
    ]), R.useEffect(() => {
      ge((G) => Object.assign(Object.assign({}, G), {
        cursor: l && N({
          piece: e,
          sourceSquare: t
        }) ? "-webkit-grab" : "default"
      }));
    }, [
      t,
      y,
      l
    ]);
    function q() {
      return {
        sourceSq: r[t]
      };
    }
    return h.jsx("div", Object.assign({
      ref: l && j ? V : null,
      onClick: () => O(e, t),
      "data-piece": e,
      style: u
    }, {
      children: typeof m[e] == "function" ? m[e]({
        squareWidth: c / 8,
        isDragging: M,
        square: t
      }) : h.jsx("svg", Object.assign({
        viewBox: "1 1 43 43",
        width: c / 8,
        height: c / 8,
        style: {
          display: "block"
        }
      }, {
        children: h.jsx("g", {
          children: m[e]
        })
      }))
    }));
  }
  function fN({ square: n, squareColor: e, setSquares: t, squareHasPremove: r, children: i }) {
    const l = R.useRef(null), { autoPromoteToQueen: c, boardWidth: f, boardOrientation: m, clearArrows: y, currentPosition: x, currentRightClickDown: C, customBoardStyle: S, customDarkSquareStyle: N, customDropSquareStyle: P, customLightSquareStyle: O, customPremoveDarkSquareStyle: L, customPremoveLightSquareStyle: H, customSquare: W, customSquareStyles: T, drawNewArrow: Y, handleSetPosition: u, handleSparePieceDrop: ge, isWaitingForAnimation: j, lastPieceColour: M, lastSquareDraggedOver: V, onArrowDrawEnd: B, onDragOverSquare: q, onMouseOutSquare: G, onMouseOverSquare: F, onPieceDrop: Oe, onPromotionCheck: Le, onRightClickDown: Ge, onRightClickUp: Ye, onSquareClick: he, setLastSquareDraggedOver: Pe, setPromoteFromSquare: pe, setPromoteToSquare: X, setShowPromoteDialog: oe } = Ro(), [{ isOver: Se }, me] = YR(() => ({
      accept: "piece",
      drop: Re,
      collect: (ie) => ({
        isOver: !!ie.isOver()
      })
    }), [
      n,
      x,
      Oe,
      j,
      M
    ]);
    function Re(ie) {
      if (ie.isSpare) {
        ge(ie.piece, n);
        return;
      }
      Le(ie.square, n, ie.piece) ? c ? u(ie.square, n, ie.piece[0] === "w" ? "wQ" : "bQ") : (pe(ie.square), X(n), oe(true)) : u(ie.square, n, ie.piece, true);
    }
    R.useEffect(() => {
      if (l.current) {
        const { x: ie, y: ye } = l.current.getBoundingClientRect();
        t((ve) => Object.assign(Object.assign({}, ve), {
          [n]: {
            x: ie,
            y: ye
          }
        }));
      }
    }, [
      f,
      m
    ]);
    const $e = Object.assign(Object.assign(Object.assign(Object.assign({}, hN(n, m, S)), e === "black" ? N : O), r && (e === "black" ? L : H)), Se && P);
    return h.jsx("div", Object.assign({
      ref: me,
      style: $e,
      "data-square-color": e,
      "data-square": n,
      onTouchMove: (ie) => {
        var ye;
        const ve = ie.touches[0], De = document.elementsFromPoint(ve.clientX, ve.clientY), Be = (ye = De == null ? void 0 : De.find((et) => et.getAttribute("data-square"))) === null || ye === void 0 ? void 0 : ye.getAttribute("data-square");
        Be && Be !== V && (Pe(Be), q(Be));
      },
      onMouseOver: (ie) => {
        ie.buttons === 2 && C && Y(C, n), !(ie.relatedTarget && ie.currentTarget.contains(ie.relatedTarget)) && F(n);
      },
      onMouseOut: (ie) => {
        ie.relatedTarget && ie.currentTarget.contains(ie.relatedTarget) || G(n);
      },
      onMouseDown: (ie) => {
        ie.button === 2 && Ge(n);
      },
      onMouseUp: (ie) => {
        ie.button === 2 && (C && B(C, n), Ye(n));
      },
      onDragEnter: () => q(n),
      onClick: () => {
        const ie = x[n];
        he(n, ie), y();
      },
      onContextMenu: (ie) => {
        ie.preventDefault();
      }
    }, {
      children: typeof W == "string" ? h.jsx(W, Object.assign({
        ref: l,
        style: Object.assign(Object.assign(Object.assign({}, S_(f)), C_), !r && (T == null ? void 0 : T[n]))
      }, {
        children: i
      })) : h.jsx(W, Object.assign({
        ref: l,
        square: n,
        squareColor: e,
        style: Object.assign(Object.assign(Object.assign({}, S_(f)), C_), !r && (T == null ? void 0 : T[n]))
      }, {
        children: i
      }))
    }));
  }
  const C_ = {
    display: "flex",
    justifyContent: "center"
  }, S_ = (n) => ({
    width: n / 8,
    height: n / 8
  }), hN = (n, e, t) => (t == null ? void 0 : t.borderRadius) ? n === "a1" ? e === "white" ? {
    borderBottomLeftRadius: t.borderRadius
  } : {
    borderTopRightRadius: t.borderRadius
  } : n === "a8" ? e === "white" ? {
    borderTopLeftRadius: t.borderRadius
  } : {
    borderBottomRightRadius: t.borderRadius
  } : n === "h1" ? e === "white" ? {
    borderBottomRightRadius: t.borderRadius
  } : {
    borderTopLeftRadius: t.borderRadius
  } : n === "h8" ? e === "white" ? {
    borderTopRightRadius: t.borderRadius
  } : {
    borderBottomLeftRadius: t.borderRadius
  } : {} : {};
  function pN() {
    const [n, e] = R.useState({}), { arePremovesAllowed: t, boardOrientation: r, boardWidth: i, currentPosition: l, id: c, premoves: f, showBoardNotation: m } = Ro(), y = R.useMemo(() => {
      const x = [];
      return t ? (f.forEach((C, S) => {
        const { sourceSq: N, targetSq: P, piece: O } = C, L = x.find((H) => {
          var W;
          return H.piece === O && ((W = H.premovesRoute.at(-1)) === null || W === void 0 ? void 0 : W.targetSq) === N;
        });
        L ? L.premovesRoute.push({
          sourceSq: N,
          targetSq: P,
          index: S
        }) : x.push({
          piece: O,
          premovesRoute: [
            {
              sourceSq: N,
              targetSq: P,
              index: S
            }
          ]
        });
      }), x) : [];
    }, [
      f
    ]);
    return h.jsx("div", Object.assign({
      "data-boardid": c
    }, {
      children: [
        ...Array(8)
      ].map((x, C) => h.jsx("div", Object.assign({
        style: {
          display: "flex",
          flexWrap: "nowrap",
          width: i
        }
      }, {
        children: [
          ...Array(8)
        ].map((S, N) => {
          const P = r === "black" ? Tf[7 - N] + (C + 1) : Tf[N] + (8 - C), O = N % 2 === C % 2 ? "white" : "black", L = f.find((W) => W.sourceSq === P || W.targetSq === P), H = y.filter(({ premovesRoute: W }) => {
            var T;
            return ((T = W.at(-1)) === null || T === void 0 ? void 0 : T.targetSq) === P;
          }).sort((W, T) => {
            var Y, u;
            return ((Y = T.premovesRoute.at(-1)) === null || Y === void 0 ? void 0 : Y.index) - ((u = W.premovesRoute.at(-1)) === null || u === void 0 ? void 0 : u.index);
          }).at(0);
          return h.jsxs(fN, Object.assign({
            square: P,
            squareColor: O,
            setSquares: e,
            squareHasPremove: !!L
          }, {
            children: [
              !L && l[P] && h.jsx(T_, {
                piece: l[P],
                square: P,
                squares: n
              }),
              H && h.jsx(T_, {
                isPremovedPiece: true,
                piece: H.piece,
                square: P,
                squares: n
              }),
              m && h.jsx(nA, {
                row: C,
                col: N
              })
            ]
          }), `${N}${C}`);
        })
      }), C.toString()))
    }));
  }
  const gN = () => {
    const { arrows: n, newArrow: e, boardOrientation: t, boardWidth: r, customArrowColor: i } = Ro(), l = [
      ...n,
      e
    ].filter(Boolean);
    return h.jsx("svg", Object.assign({
      width: r,
      height: r,
      style: {
        position: "absolute",
        top: "0",
        left: "0",
        pointerEvents: "none",
        zIndex: "10"
      }
    }, {
      children: l.map((c, f) => {
        const [m, y, x] = c;
        if (m === y) return null;
        const C = Ov(t, r, m), S = Ov(t, r, y);
        let N = r / 32;
        const P = f === n.length;
        n.some((T) => T[0] !== m && T[1] === y) && !P && (N = r / 16);
        const O = S.x - C.x, L = S.y - C.y, H = Math.hypot(L, O), W = {
          x: C.x + O * (H - N) / H,
          y: C.y + L * (H - N) / H
        };
        return h.jsxs(R.Fragment, {
          children: [
            h.jsx("marker", Object.assign({
              id: `arrowhead-${f}`,
              markerWidth: "2",
              markerHeight: "2.5",
              refX: "1.25",
              refY: "1.25",
              orient: "auto"
            }, {
              children: h.jsx("polygon", {
                points: "0.3 0, 2 1.25, 0.3 2.5",
                fill: x ?? i
              })
            })),
            h.jsx("line", {
              x1: C.x,
              y1: C.y,
              x2: W.x,
              y2: W.y,
              opacity: P ? "0.5" : "0.65",
              stroke: x ?? i,
              strokeWidth: P ? 0.9 * r / 40 : r / 40,
              markerEnd: `url(#arrowhead-${f})`
            })
          ]
        }, `${m}-${y}${P ? "-active" : ""}`);
      })
    }));
  };
  function mN({ option: n }) {
    const [e, t] = R.useState(false), { boardWidth: r, chessPieces: i, customDarkSquareStyle: l, customLightSquareStyle: c, handleSetPosition: f, onPromotionPieceSelect: m, promoteFromSquare: y, promoteToSquare: x, promotionDialogVariant: C } = Ro(), S = () => {
      switch (n[1]) {
        case "Q":
          return l.backgroundColor;
        case "R":
          return c.backgroundColor;
        case "N":
          return C === "default" ? c.backgroundColor : l.backgroundColor;
        case "B":
          return C === "default" ? l.backgroundColor : c.backgroundColor;
      }
    };
    return h.jsx("div", Object.assign({
      onClick: () => {
        m(n, y ?? void 0, x ?? void 0) && f(y, x, n, true);
      },
      onMouseOver: () => t(true),
      onMouseOut: () => t(false),
      "data-piece": n,
      style: {
        cursor: "pointer",
        backgroundColor: e ? S() : `${S()}aa`,
        borderRadius: "4px",
        transition: "all 0.1s ease-out"
      }
    }, {
      children: typeof i[n] == "function" ? h.jsx("div", Object.assign({
        style: {
          transition: "all 0.1s ease-out",
          transform: e ? "scale(1)" : "scale(0.85)"
        }
      }, {
        children: i[n]({
          squareWidth: r / 8,
          isDragging: false
        })
      })) : h.jsx("svg", Object.assign({
        viewBox: "1 1 43 43",
        width: r / 8,
        height: r / 8,
        style: {
          transition: "all 0.1s ease-out",
          transform: e ? "scale(1)" : "scale(0.85)"
        }
      }, {
        children: h.jsx("g", {
          children: i[n]
        })
      }))
    }));
  }
  function vN() {
    const { boardOrientation: n, boardWidth: e, promotionDialogVariant: t, promoteToSquare: r } = Ro(), i = (r == null ? void 0 : r[1]) === "1" ? "b" : "w", l = [
      `${i ?? "w"}Q`,
      `${i ?? "w"}R`,
      `${i ?? "w"}N`,
      `${i ?? "w"}B`
    ], c = {
      default: {
        display: "grid",
        gridTemplateColumns: "1fr 1fr",
        transform: `translate(${-e / 8}px, ${-e / 8}px)`
      },
      vertical: {
        transform: `translate(${-e / 16}px, ${-e / 16}px)`
      },
      modal: {
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
        transform: `translate(0px, ${3 * e / 8}px)`,
        width: "100%",
        height: `${e / 4}px`,
        top: 0,
        backgroundColor: "white",
        left: 0
      }
    }, f = Ov(n, e, r || "a8");
    return h.jsx("div", Object.assign({
      style: Object.assign({
        position: "absolute",
        top: `${f == null ? void 0 : f.y}px`,
        left: `${f == null ? void 0 : f.x}px`,
        zIndex: 1e3
      }, c[t]),
      title: "Choose promotion piece"
    }, {
      children: l.map((m) => h.jsx(mN, {
        option: m
      }, m))
    }));
  }
  const yN = {
    whiteKing: h.jsx("svg", Object.assign({
      xmlns: "http://www.w3.org/2000/svg",
      version: "1.1",
      style: {
        shapeRendering: "geometricPrecision",
        textRendering: "geometricPrecision",
        imageRendering: "crisp-edges"
      },
      viewBox: "0 0 4210 12970",
      x: "0px",
      y: "0px",
      fillRule: "evenodd",
      clipRule: "evenodd",
      width: "250",
      height: "250"
    }, {
      children: h.jsx("g", {
        children: h.jsx("path", {
          style: {
            fill: "black",
            fillRule: "nonzero"
          },
          d: "M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"
        })
      })
    }))
  };
  function wN({ children: n }) {
    try {
      return h.jsx(h.Fragment, {
        children: n
      });
    } catch (e) {
      return console.log(e), h.jsx(pb, {
        showError: true
      });
    }
  }
  function pb({ showError: n = false }) {
    return h.jsxs("div", Object.assign({
      style: {
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
        flexDirection: "column"
      }
    }, {
      children: [
        h.jsx("div", Object.assign({
          style: {
            width: 250,
            height: 250,
            transform: "rotate(90deg)"
          }
        }, {
          children: yN.whiteKing
        })),
        n && h.jsx("h1", {
          children: "Something went wrong"
        })
      ]
    }));
  }
  function _N() {
    const n = R.useRef(null), { boardWidth: e, clearCurrentRightClickDown: t, onPromotionPieceSelect: r, setShowPromoteDialog: i, showPromoteDialog: l, customBoardStyle: c } = Ro();
    return R.useEffect(() => {
      function f(m) {
        n.current && !n.current.contains(m.target) && t();
      }
      return document.addEventListener("mouseup", f), () => {
        document.removeEventListener("mouseup", f);
      };
    }, []), e ? h.jsx("div", Object.assign({
      style: {
        perspective: "1000px"
      }
    }, {
      children: h.jsxs("div", Object.assign({
        ref: n,
        style: Object.assign(Object.assign({
          position: "relative"
        }, xN(e)), c)
      }, {
        children: [
          h.jsx(pN, {}),
          h.jsx(gN, {}),
          l && h.jsxs(h.Fragment, {
            children: [
              h.jsx("div", {
                onClick: () => {
                  i(false), r == null ? void 0 : r();
                },
                style: {
                  position: "absolute",
                  top: "0",
                  left: "0",
                  zIndex: "100",
                  backgroundColor: "rgba(22,21,18,.7)",
                  width: e,
                  height: e
                }
              }),
              h.jsx(vN, {})
            ]
          })
        ]
      }))
    })) : h.jsx(pb, {});
  }
  const xN = (n) => ({
    cursor: "default",
    height: n,
    width: n
  });
  var Ea;
  (function(n) {
    n.mouse = "mouse", n.touch = "touch", n.keyboard = "keyboard";
  })(Ea || (Ea = {}));
  class EN {
    get delay() {
      var e;
      return (e = this.args.delay) !== null && e !== void 0 ? e : 0;
    }
    get scrollAngleRanges() {
      return this.args.scrollAngleRanges;
    }
    get getDropTargetElementsAtPoint() {
      return this.args.getDropTargetElementsAtPoint;
    }
    get ignoreContextMenu() {
      var e;
      return (e = this.args.ignoreContextMenu) !== null && e !== void 0 ? e : false;
    }
    get enableHoverOutsideTarget() {
      var e;
      return (e = this.args.enableHoverOutsideTarget) !== null && e !== void 0 ? e : false;
    }
    get enableKeyboardEvents() {
      var e;
      return (e = this.args.enableKeyboardEvents) !== null && e !== void 0 ? e : false;
    }
    get enableMouseEvents() {
      var e;
      return (e = this.args.enableMouseEvents) !== null && e !== void 0 ? e : false;
    }
    get enableTouchEvents() {
      var e;
      return (e = this.args.enableTouchEvents) !== null && e !== void 0 ? e : true;
    }
    get touchSlop() {
      return this.args.touchSlop || 0;
    }
    get delayTouchStart() {
      var e, t, r, i;
      return (i = (r = (e = this.args) === null || e === void 0 ? void 0 : e.delayTouchStart) !== null && r !== void 0 ? r : (t = this.args) === null || t === void 0 ? void 0 : t.delay) !== null && i !== void 0 ? i : 0;
    }
    get delayMouseStart() {
      var e, t, r, i;
      return (i = (r = (e = this.args) === null || e === void 0 ? void 0 : e.delayMouseStart) !== null && r !== void 0 ? r : (t = this.args) === null || t === void 0 ? void 0 : t.delay) !== null && i !== void 0 ? i : 0;
    }
    get window() {
      if (this.context && this.context.window) return this.context.window;
      if (typeof window < "u") return window;
    }
    get document() {
      var e;
      if (!((e = this.context) === null || e === void 0) && e.document) return this.context.document;
      if (this.window) return this.window.document;
    }
    get rootElement() {
      var e;
      return ((e = this.args) === null || e === void 0 ? void 0 : e.rootElement) || this.document;
    }
    constructor(e, t) {
      this.args = e, this.context = t;
    }
  }
  function bN(n, e, t, r) {
    return Math.sqrt(Math.pow(Math.abs(t - n), 2) + Math.pow(Math.abs(r - e), 2));
  }
  function TN(n, e, t, r, i) {
    if (!i) return false;
    const l = Math.atan2(r - e, t - n) * 180 / Math.PI + 180;
    for (let c = 0; c < i.length; ++c) {
      const f = i[c];
      if (f && (f.start == null || l >= f.start) && (f.end == null || l <= f.end)) return true;
    }
    return false;
  }
  const CN = {
    Left: 1
  }, SN = {
    Left: 0
  };
  function cv(n) {
    return n.button === void 0 || n.button === SN.Left;
  }
  function IN(n) {
    return n.buttons === void 0 || (n.buttons & CN.Left) === 0;
  }
  function gb(n) {
    return !!n.targetTouches;
  }
  const kN = 1;
  function AN(n) {
    const e = n.nodeType === kN ? n : n.parentElement;
    if (!e) return;
    const { top: t, left: r } = e.getBoundingClientRect();
    return {
      x: r,
      y: t
    };
  }
  function RN(n, e) {
    if (n.targetTouches.length === 1) return Pg(n.targetTouches[0]);
    if (e && n.touches.length === 1 && n.touches[0].target === e.target) return Pg(n.touches[0]);
  }
  function Pg(n, e) {
    return gb(n) ? RN(n, e) : {
      x: n.clientX,
      y: n.clientY
    };
  }
  const I_ = (() => {
    let n = false;
    try {
      addEventListener("test", () => {
      }, Object.defineProperty({}, "passive", {
        get() {
          return n = true, true;
        }
      }));
    } catch {
    }
    return n;
  })(), nf = {
    [Ea.mouse]: {
      start: "mousedown",
      move: "mousemove",
      end: "mouseup",
      contextmenu: "contextmenu"
    },
    [Ea.touch]: {
      start: "touchstart",
      move: "touchmove",
      end: "touchend"
    },
    [Ea.keyboard]: {
      keydown: "keydown"
    }
  };
  class gf {
    profile() {
      var e;
      return {
        sourceNodes: this.sourceNodes.size,
        sourcePreviewNodes: this.sourcePreviewNodes.size,
        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,
        targetNodes: this.targetNodes.size,
        dragOverTargetIds: ((e = this.dragOverTargetIds) === null || e === void 0 ? void 0 : e.length) || 0
      };
    }
    get document() {
      return this.options.document;
    }
    setup() {
      const e = this.options.rootElement;
      e && (ht(!gf.isSetUp, "Cannot have two Touch backends at the same time."), gf.isSetUp = true, this.addEventListener(e, "start", this.getTopMoveStartHandler()), this.addEventListener(e, "start", this.handleTopMoveStartCapture, true), this.addEventListener(e, "move", this.handleTopMove), this.addEventListener(e, "move", this.handleTopMoveCapture, true), this.addEventListener(e, "end", this.handleTopMoveEndCapture, true), this.options.enableMouseEvents && !this.options.ignoreContextMenu && this.addEventListener(e, "contextmenu", this.handleTopMoveEndCapture), this.options.enableKeyboardEvents && this.addEventListener(e, "keydown", this.handleCancelOnEscape, true));
    }
    teardown() {
      const e = this.options.rootElement;
      e && (gf.isSetUp = false, this._mouseClientOffset = {}, this.removeEventListener(e, "start", this.handleTopMoveStartCapture, true), this.removeEventListener(e, "start", this.handleTopMoveStart), this.removeEventListener(e, "move", this.handleTopMoveCapture, true), this.removeEventListener(e, "move", this.handleTopMove), this.removeEventListener(e, "end", this.handleTopMoveEndCapture, true), this.options.enableMouseEvents && !this.options.ignoreContextMenu && this.removeEventListener(e, "contextmenu", this.handleTopMoveEndCapture), this.options.enableKeyboardEvents && this.removeEventListener(e, "keydown", this.handleCancelOnEscape, true), this.uninstallSourceNodeRemovalObserver());
    }
    addEventListener(e, t, r, i = false) {
      const l = I_ ? {
        capture: i,
        passive: false
      } : i;
      this.listenerTypes.forEach(function(c) {
        const f = nf[c][t];
        f && e.addEventListener(f, r, l);
      });
    }
    removeEventListener(e, t, r, i = false) {
      const l = I_ ? {
        capture: i,
        passive: false
      } : i;
      this.listenerTypes.forEach(function(c) {
        const f = nf[c][t];
        f && e.removeEventListener(f, r, l);
      });
    }
    connectDragSource(e, t) {
      const r = this.handleMoveStart.bind(this, e);
      return this.sourceNodes.set(e, t), this.addEventListener(t, "start", r), () => {
        this.sourceNodes.delete(e), this.removeEventListener(t, "start", r);
      };
    }
    connectDragPreview(e, t, r) {
      return this.sourcePreviewNodeOptions.set(e, r), this.sourcePreviewNodes.set(e, t), () => {
        this.sourcePreviewNodes.delete(e), this.sourcePreviewNodeOptions.delete(e);
      };
    }
    connectDropTarget(e, t) {
      const r = this.options.rootElement;
      if (!this.document || !r) return () => {
      };
      const i = (l) => {
        if (!this.document || !r || !this.monitor.isDragging()) return;
        let c;
        switch (l.type) {
          case nf.mouse.move:
            c = {
              x: l.clientX,
              y: l.clientY
            };
            break;
          case nf.touch.move:
            var f, m;
            c = {
              x: ((f = l.touches[0]) === null || f === void 0 ? void 0 : f.clientX) || 0,
              y: ((m = l.touches[0]) === null || m === void 0 ? void 0 : m.clientY) || 0
            };
            break;
        }
        const y = c != null ? this.document.elementFromPoint(c.x, c.y) : void 0, x = y && t.contains(y);
        if (y === t || x) return this.handleMove(l, e);
      };
      return this.addEventListener(this.document.body, "move", i), this.targetNodes.set(e, t), () => {
        this.document && (this.targetNodes.delete(e), this.removeEventListener(this.document.body, "move", i));
      };
    }
    getTopMoveStartHandler() {
      return !this.options.delayTouchStart && !this.options.delayMouseStart ? this.handleTopMoveStart : this.handleTopMoveStartDelay;
    }
    installSourceNodeRemovalObserver(e) {
      this.uninstallSourceNodeRemovalObserver(), this.draggedSourceNode = e, this.draggedSourceNodeRemovalObserver = new MutationObserver(() => {
        e && !e.parentElement && (this.resurrectSourceNode(), this.uninstallSourceNodeRemovalObserver());
      }), !(!e || !e.parentElement) && this.draggedSourceNodeRemovalObserver.observe(e.parentElement, {
        childList: true
      });
    }
    resurrectSourceNode() {
      this.document && this.draggedSourceNode && (this.draggedSourceNode.style.display = "none", this.draggedSourceNode.removeAttribute("data-reactid"), this.document.body.appendChild(this.draggedSourceNode));
    }
    uninstallSourceNodeRemovalObserver() {
      this.draggedSourceNodeRemovalObserver && this.draggedSourceNodeRemovalObserver.disconnect(), this.draggedSourceNodeRemovalObserver = void 0, this.draggedSourceNode = void 0;
    }
    constructor(e, t, r) {
      this.getSourceClientOffset = (i) => {
        const l = this.sourceNodes.get(i);
        return l && AN(l);
      }, this.handleTopMoveStartCapture = (i) => {
        cv(i) && (this.moveStartSourceIds = []);
      }, this.handleMoveStart = (i) => {
        Array.isArray(this.moveStartSourceIds) && this.moveStartSourceIds.unshift(i);
      }, this.handleTopMoveStart = (i) => {
        if (!cv(i)) return;
        const l = Pg(i);
        l && (gb(i) && (this.lastTargetTouchFallback = i.targetTouches[0]), this._mouseClientOffset = l), this.waitingForDelay = false;
      }, this.handleTopMoveStartDelay = (i) => {
        if (!cv(i)) return;
        const l = i.type === nf.touch.start ? this.options.delayTouchStart : this.options.delayMouseStart;
        this.timeout = setTimeout(this.handleTopMoveStart.bind(this, i), l), this.waitingForDelay = true;
      }, this.handleTopMoveCapture = () => {
        this.dragOverTargetIds = [];
      }, this.handleMove = (i, l) => {
        this.dragOverTargetIds && this.dragOverTargetIds.unshift(l);
      }, this.handleTopMove = (i) => {
        if (this.timeout && clearTimeout(this.timeout), !this.document || this.waitingForDelay) return;
        const { moveStartSourceIds: l, dragOverTargetIds: c } = this, f = this.options.enableHoverOutsideTarget, m = Pg(i, this.lastTargetTouchFallback);
        if (!m) return;
        if (this._isScrolling || !this.monitor.isDragging() && TN(this._mouseClientOffset.x || 0, this._mouseClientOffset.y || 0, m.x, m.y, this.options.scrollAngleRanges)) {
          this._isScrolling = true;
          return;
        }
        if (!this.monitor.isDragging() && this._mouseClientOffset.hasOwnProperty("x") && l && bN(this._mouseClientOffset.x || 0, this._mouseClientOffset.y || 0, m.x, m.y) > (this.options.touchSlop ? this.options.touchSlop : 0) && (this.moveStartSourceIds = void 0, this.actions.beginDrag(l, {
          clientOffset: this._mouseClientOffset,
          getSourceClientOffset: this.getSourceClientOffset,
          publishSource: false
        })), !this.monitor.isDragging()) return;
        const y = this.sourceNodes.get(this.monitor.getSourceId());
        this.installSourceNodeRemovalObserver(y), this.actions.publishDragSource(), i.cancelable && i.preventDefault();
        const x = (c || []).map((P) => this.targetNodes.get(P)).filter((P) => !!P), C = this.options.getDropTargetElementsAtPoint ? this.options.getDropTargetElementsAtPoint(m.x, m.y, x) : this.document.elementsFromPoint(m.x, m.y), S = [];
        for (const P in C) {
          if (!C.hasOwnProperty(P)) continue;
          let O = C[P];
          for (O != null && S.push(O); O; ) O = O.parentElement, O && S.indexOf(O) === -1 && S.push(O);
        }
        const N = S.filter((P) => x.indexOf(P) > -1).map((P) => this._getDropTargetId(P)).filter((P) => !!P).filter((P, O, L) => L.indexOf(P) === O);
        if (f) for (const P in this.targetNodes) {
          const O = this.targetNodes.get(P);
          if (y && O && O.contains(y) && N.indexOf(P) === -1) {
            N.unshift(P);
            break;
          }
        }
        N.reverse(), this.actions.hover(N, {
          clientOffset: m
        });
      }, this._getDropTargetId = (i) => {
        const l = this.targetNodes.keys();
        let c = l.next();
        for (; c.done === false; ) {
          const f = c.value;
          if (i === this.targetNodes.get(f)) return f;
          c = l.next();
        }
      }, this.handleTopMoveEndCapture = (i) => {
        if (this._isScrolling = false, this.lastTargetTouchFallback = void 0, !!IN(i)) {
          if (!this.monitor.isDragging() || this.monitor.didDrop()) {
            this.moveStartSourceIds = void 0;
            return;
          }
          i.cancelable && i.preventDefault(), this._mouseClientOffset = {}, this.uninstallSourceNodeRemovalObserver(), this.actions.drop(), this.actions.endDrag();
        }
      }, this.handleCancelOnEscape = (i) => {
        i.key === "Escape" && this.monitor.isDragging() && (this._mouseClientOffset = {}, this.uninstallSourceNodeRemovalObserver(), this.actions.endDrag());
      }, this.options = new EN(r, t), this.actions = e.getActions(), this.monitor = e.getMonitor(), this.sourceNodes = /* @__PURE__ */ new Map(), this.sourcePreviewNodes = /* @__PURE__ */ new Map(), this.sourcePreviewNodeOptions = /* @__PURE__ */ new Map(), this.targetNodes = /* @__PURE__ */ new Map(), this.listenerTypes = [], this._mouseClientOffset = {}, this._isScrolling = false, this.options.enableMouseEvents && this.listenerTypes.push(Ea.mouse), this.options.enableTouchEvents && this.listenerTypes.push(Ea.touch), this.options.enableKeyboardEvents && this.listenerTypes.push(Ea.keyboard);
    }
  }
  const NN = function(e, t = {}, r = {}) {
    return new gf(e, t, r);
  }, PN = R.createContext({
    isCustomDndProviderSet: false
  }), DN = ({ children: n }) => h.jsx(h.Fragment, {
    children: n
  }), jN = ({ customDndBackend: n, customDndBackendOptions: e, children: t }) => {
    const [r, i] = R.useState(), [l, c] = R.useState(false), [f, m] = R.useState(false), { isCustomDndProviderSet: y } = R.useContext(PN);
    R.useEffect(() => {
      m("ontouchstart" in window), c(true), i(window);
    }, []);
    const x = y ? DN : wR;
    return l ? r ? h.jsx(x, Object.assign({
      backend: n || (f ? NN : dN),
      context: r,
      options: n ? e : void 0
    }, {
      children: t
    })) : h.jsx(h.Fragment, {
      children: t
    }) : null;
  };
  function ON({ boardContainer: n }) {
    const { boardWidth: e, chessPieces: t, id: r, snapToCursor: i, allowDragOutsideBoard: l } = Ro(), c = UR((S) => ({
      item: S.getItem(),
      clientOffset: S.getClientOffset(),
      sourceClientOffset: S.getSourceClientOffset(),
      isDragging: S.isDragging()
    })), { isDragging: f, item: m, clientOffset: y, sourceClientOffset: x } = c, C = R.useCallback((S, N) => {
      if (!S || !N) return {
        display: "none"
      };
      let { x: P, y: O } = i ? S : N;
      const L = e / 8 / 2;
      if (i && (P -= L, O -= L), !l) {
        const { left: W, top: T } = n, Y = W - L, u = T - L, ge = W + e - L, j = T + e - L;
        P = Math.max(Y, Math.min(P, ge)), O = Math.max(u, Math.min(O, j));
      }
      const H = `translate(${P}px, ${O}px)`;
      return {
        transform: H,
        WebkitTransform: H,
        touchAction: "none"
      };
    }, [
      e,
      l,
      i,
      n
    ]);
    return f && m.id === r ? h.jsx("div", Object.assign({
      style: {
        position: "fixed",
        pointerEvents: "none",
        zIndex: 10,
        left: 0,
        top: 0
      }
    }, {
      children: h.jsx("div", Object.assign({
        style: C(y, x)
      }, {
        children: typeof t[m.piece] == "function" ? t[m.piece]({
          squareWidth: e / 8,
          isDragging: true
        }) : h.jsx("svg", Object.assign({
          viewBox: "1 1 43 43",
          width: e / 8,
          height: e / 8
        }, {
          children: h.jsx("g", {
            children: t[m.piece]
          })
        }))
      }))
    })) : null;
  }
  const mb = R.forwardRef((n, e) => {
    const { customDndBackend: t, customDndBackendOptions: r, onBoardWidthChange: i } = n, l = Wk(n, [
      "customDndBackend",
      "customDndBackendOptions",
      "onBoardWidthChange"
    ]), [c, f] = R.useState(n.boardWidth), m = R.useRef(null), y = R.useRef(null), [x, C] = R.useState({
      left: 0,
      top: 0
    }), S = R.useMemo(() => {
      var N;
      return (N = m.current) === null || N === void 0 ? void 0 : N.getBoundingClientRect();
    }, [
      m.current
    ]);
    return R.useEffect(() => {
      c && (i == null ? void 0 : i(c));
    }, [
      c
    ]), R.useEffect(() => {
      C({
        left: (S == null ? void 0 : S.left) ? S == null ? void 0 : S.left : 0,
        top: (S == null ? void 0 : S.top) ? S == null ? void 0 : S.top : 0
      });
    }, [
      S
    ]), R.useEffect(() => {
      var N;
      if (n.boardWidth === void 0 && (!((N = m.current) === null || N === void 0) && N.offsetWidth)) {
        const P = new ResizeObserver(() => {
          var O;
          f((O = m.current) === null || O === void 0 ? void 0 : O.offsetWidth);
        });
        return P.observe(m.current), () => {
          P.disconnect();
        };
      }
    }, [
      m.current
    ]), h.jsx(wN, {
      children: h.jsxs("div", Object.assign({
        ref: y,
        style: {
          display: "flex",
          flexDirection: "column",
          width: "100%"
        }
      }, {
        children: [
          h.jsx("div", {
            ref: m,
            style: {
              width: "100%"
            }
          }),
          h.jsx(jN, Object.assign({
            customDndBackend: t,
            customDndBackendOptions: r
          }, {
            children: c && h.jsxs(tA, Object.assign({
              boardWidth: c
            }, l, {
              ref: e
            }, {
              children: [
                h.jsx(ON, {
                  boardContainer: x
                }),
                h.jsx(_N, {})
              ]
            }))
          }))
        ]
      }))
    });
  }), LN = "/assets/wk-DnKyhbMy.png", MN = "/assets/wq-B7vyKl2c.png", $N = "/assets/wr-B3Wwgo4H.png", VN = "/assets/wb-Cor4HfaI.png", FN = "data:image/png;base64,UklGRnAHAABXRUJQVlA4WAoAAAAQAAAAlQAAlQAAQUxQSGECAAABR6CmbSQ2dwju2/5Tj4hA7lV9EFKubVJkZ3iuZJAMkkEyyBuO5KRlOGOX64cvdL1V4YiI/juQJDVuhlRRSLZzCbToCcl/QLa67ocHIrkXVgYip174KOLH9UTcuBURP+5MxI+7F0fugzhybXHkOuLIdUeRw1lz+jLO3h+mpuzKBAsbtldOtNvMjOn+ZCTkVryUGGvmzQpb3Kuwmo985SZPibbnqUWGxduJQYnU2ALNCxUhxWOVbcMMdEgO363klJ7x41pqdthiq7aMLLZ6lsjE0BPIPRywAt143VzcJmhS7k5H4UD8hLuCENB0dZIdHYgKyzE3E2cCEajV7Geij1EiMcYyG5tvB9MDjueEsgct1ecFSY7EXm58ISQ1USLBRxEbk5dHvWS50zaxLEFbt2FTNunR3ETnhkUxCqvR5c0iXpw2SLMX8aI3msJAzpXJSjR8CblTlOESz9YmS5IXXljQVLyKZktV8Sp2uNnUVfQavC08OcyGKwJNzLc+TcdsoxasxKZjz0b5dOMK6gOx4SxqsU73rfanzzF6+ZNYMd2bHO8aSurpLxO/add0L380oZt+YKzs9t6KyOLoPVqxAtjq5froJgr2atbK7DnLR23rDnu23baVG1MofVCa22vYgqTj6DhhmlU91hr2uaf4Dl7MbpbzGSDM2aMlcjmby/0cZKAn5VgBdDmarY6e9UEcPavl6Fl7fT0nGOdIO3oLsQs1tltoWrhIjjO0e/RzBJARZZtjCTni8BO2QBpoxsvNPZJSjZBU7J3GcmWFPnjxczKx8wNxhnL6t47dd6QdJ/9JWAIAVlA4IOgEAABQHwCdASqWAJYAPpFCnEmlpCMhJ7QLKLASCWdu3V8msaVXGLxN3+A7Za9/fLlOsDdKbNO8jb4cyfXz7qb4XDpEvQ8C99ZANvQaVME5GzDgHCYf8F4n/AnAS4uIgbN7WuNqD29yT3Or7+xn2ElQvmQbQtt3KUXKbAviHF5G2Hp5u+2ORMhVi3jiPq49wUfenMm+NufbJE/YxDomyWGmEvJoTxhdfTGl2+UZrCGDODaEZvlXJP7RPZbVNZpOdnxq9KFUsvsj6QFo7E28ltqUWWOft8r1f3fMFmsXICy6dOL2vy6/81OlmfzpYipF8ow5JXOldmEaxLMcnbzRDc6K67geiPRgAP7svvhi59/WpH/BE3TkuPq3nhKAC21MvLjlXwyu9wBPJV2Zx4zlWPkm70ONhTbleRzpTzMwE1yePIzjlMnxZG9FXcgrBhy+6ICH9n1XSOnm6vbaSyAChItGshemhYDQnTaxGrV4auelDT8zGEmQS0JMDMP/WnsTBgpX2/xqhfC0lhFFzp4NZJl1X5czdtkwaCUCLsf8tVwlICsIJiDO3AdXqQLiM1N8wGXc0AbUSqpyFexgPQi5lwMA+5ePAt04NET8LiDbFqT1fvUMSNQWeWRhLPi8GZJjb1BObgCz6CdMdesrZdHQgoLYRCofjP9FZpq0KRlY4LjIkgaVUKMZwGgyo2CM5rZDSPZiLc4HfzbNkbyJLA9rjtHt8dJR0L2lF8h4PsAVEgd7XlBOMz67u8rucvQJpcyeQA0pa+iWQ3K95GbgicGy4vspB0DLYZPINV5SsvgCCpskNGOvB/PlV7UEQ16sjQkfrW5yhlLeboSRgwfHiGLKpUwAcF1Zqk/Fp7xEyky5DGMylZfu+J+mqhm3FRhSdv9Em7P0qPhfGAHTlMHndACnyTM/6xYC5iVMd1A+HuhWQqeJHKN+oN752/8MGCFrO0SAzEzG0nYODCUcU6GeDdEKnFXme9gLTetBKwOG+hr2XF3zkwBUulCnWQDSDRimwiwrFvbJG1s3mTNAByWetcuDKC/6ywfO832YZh8BY95HDQVI4/OQUWB3cg3/ZGCtv1y5uLJW50zcLA/CUhPdDdyJAR8g5KVqjM67x+E7nyftgtEkFlYRsqciPu3QQs95oBfL8pXw7bzrrG822MP/yfZBqtWyJtDipqCj6N0JPGMjUD7NgX+wV1aZVg3j8LuBvvlp4JJs2Xk4FkuiRCkns10+W7IiI0GuqWbi5GpfDcuiTfrWyuKN14qoA6OSLTIaZkvL5Ifn8XeB+OSWYOvD4XoT/5P4mvCNK/+guxX14fW8gScgABlS3vbSuWMRyPdpI1QJHcjcL+aHYxsrudwDcxVRQPz3p9Z8sT221PeeSiXgrjbR9ygHBfrxKPt7fv/o9nAbeSdzy70V/+RgK8wlnrclDGNmzAsJJ1CBUDT7IVt2TnvwfkMkTdZzQGRgSvdKrcBHzUeFDVU+QDQS04eQz+6aIQ8BtdDhQlbcQYmNJtSUlLk9jR9DwJ2sMz6gVc93e85vE6L1yayCo+FFiaaw2bsV0D26zEvQO1utYzcGoNRXVQABtVkJLovFdMg823IBWsr3AJ1paovN5rpcCUe29gkp2TMAz37NEsMsk8RaLa/eRBEvpMhwQbvSBcrwdjf5f1EL9b6T6xFHwIeAAAAAAA==", zN = "/assets/wp-DQGbDEnK.png", UN = "/assets/bk-DHac7Iky.png", BN = "/assets/bq-CyE22i3P.png", WN = "/assets/br-B-YDt-tZ.png", HN = "/assets/bb-CFr3uo5J.png", qN = "/assets/bn-vssD0s4z.png", KN = "/assets/bp-B8GmcgS1.png", Ss = (n) => function({ squareWidth: t }) {
    return h.jsx("div", {
      style: {
        width: t,
        height: t,
        display: "flex",
        justifyContent: "center",
        alignItems: "center"
      },
      children: h.jsx("img", {
        src: n,
        alt: "chess piece",
        style: {
          width: "80%",
          height: "80%",
          objectFit: "contain",
          userSelect: "none",
          WebkitUserSelect: "none"
        },
        draggable: false,
        onDragStart: (r) => (r.preventDefault(), false)
      })
    });
  }, vb = {
    wK: Ss(LN),
    wQ: Ss(MN),
    wR: Ss($N),
    wB: Ss(VN),
    wN: Ss(FN),
    wP: Ss(zN),
    bK: Ss(UN),
    bQ: Ss(BN),
    bR: Ss(WN),
    bB: Ss(HN),
    bN: Ss(qN),
    bP: Ss(KN)
  }, zv = ({ evaluation: n, height: e, width: t, isFlipped: r = false, orientation: i = "vertical" }) => {
    const l = R.useMemo(() => {
      if (n === "mate") return 5;
      if (n === "-mate") return -5;
      const m = parseFloat(n);
      return isNaN(m) ? 0 : Math.max(-5, Math.min(5, m));
    }, [
      n
    ]), c = R.useMemo(() => 50 - l * 10, [
      l
    ]), f = R.useMemo(() => {
      if (n === "mate") return "+ #";
      if (n === "-mate") return "- #";
      const m = parseFloat(n);
      if (isNaN(m)) return "0.0";
      const y = Math.abs(m);
      return `${m > 0 ? "+" : m < 0 ? "-" : ""}${y.toFixed(1)}`;
    }, [
      n
    ]);
    return i === "vertical" ? h.jsx("div", {
      className: "flex flex-col items-center",
      style: {
        height: `${e}px`,
        marginRight: "8px"
      },
      children: h.jsxs("div", {
        className: "h-full w-6 relative bg-white rounded-md overflow-hidden",
        children: [
          h.jsx("div", {
            className: "absolute w-full h-[1px] bg-gray-500 top-1/2 transform -translate-y-1/2 z-10"
          }),
          h.jsx("div", {
            className: "absolute bottom-0 w-full bg-black transition-all duration-500 ease-out",
            style: {
              height: `${c}%`
            }
          }),
          h.jsx("div", {
            className: `absolute top-2 left-0 right-0 text-center font-semibold transition-all duration-500 z-20
                        ${l >= 0 ? "text-gray-800" : "text-gray-300"}`,
            style: {
              fontSize: "10px"
            },
            children: f
          })
        ]
      })
    }) : h.jsx("div", {
      className: "flex flex-col items-center w-full",
      style: {
        width: "100%",
        height: "20px",
        marginBottom: "4px"
      },
      children: h.jsxs("div", {
        className: "w-full h-6 relative bg-white rounded-md overflow-hidden",
        children: [
          h.jsx("div", {
            className: "absolute h-full w-[1px] bg-gray-500 left-1/2 transform -translate-x-1/2 z-10"
          }),
          h.jsx("div", {
            className: "absolute left-0 h-full bg-black transition-all duration-500 ease-out",
            style: {
              width: `${c}%`
            }
          }),
          h.jsx("div", {
            className: `absolute top-0 bottom-0 flex items-center justify-center font-semibold transition-all duration-500 z-20 
                    ${l >= 0 ? "right-2 text-gray-800" : "left-2 text-gray-300"}`,
            style: {
              fontSize: "10px"
            },
            children: f
          })
        ]
      })
    });
  };
  zv.propTypes = {
    evaluation: fe.oneOfType([
      fe.number,
      fe.string
    ]),
    height: fe.number,
    width: fe.number,
    isFlipped: fe.bool,
    orientation: fe.oneOf([
      "vertical",
      "horizontal"
    ])
  };
  function k_({ fen: n, onMoveSelect: e }) {
    const [t, r] = R.useState(null), [i, l] = R.useState(false), [c, f] = R.useState(null), [m, y] = R.useState(true), x = () => {
      y(!m);
    };
    return R.useEffect(() => {
      !m || !n || (l(true), fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(n)}&speeds=blitz,rapid,classical&ratings=1600,1800,2000,2200,2500`).then((C) => {
        if (!C.ok) throw new Error("Errore nella risposta API");
        return C.json();
      }).then((C) => {
        r(C), l(false);
      }).catch((C) => {
        f(C.message), l(false);
      }));
    }, [
      n,
      m
    ]), h.jsxs("div", {
      className: "mt-5 py-2 px-3 bg-gray-700 rounded-md",
      children: [
        h.jsxs("div", {
          className: "flex items-center justify-between",
          children: [
            h.jsx("h3", {
              className: "text-base font-medium text-white",
              children: "Database Mosse"
            }),
            h.jsx("button", {
              onClick: x,
              className: "p-0.5 bg-transparent rounded-md text-gray-400 hover:text-white hover:bg-gray-700 transition-colors",
              "aria-label": m ? "Chiudi database" : "Apri database",
              children: h.jsx("svg", {
                className: "w-5 h-5",
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                children: h.jsx("path", {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: m ? "M18 12H6" : "M12 6v12M18 12H6"
                })
              })
            })
          ]
        }),
        m && h.jsx("div", {
          className: "h-3"
        }),
        h.jsxs("div", {
          className: `transition-all duration-300 ease-in-out overflow-hidden ${m ? "max-h-[1000px] opacity-100" : "max-h-0 opacity-0"}`,
          children: [
            i && h.jsx("div", {
              className: "flex justify-center items-center h-16",
              children: h.jsxs("div", {
                className: "animate-pulse flex space-x-2",
                children: [
                  h.jsx("div", {
                    className: "w-3 h-3 bg-indigo-500 rounded-full"
                  }),
                  h.jsx("div", {
                    className: "w-3 h-3 bg-indigo-500 rounded-full"
                  }),
                  h.jsx("div", {
                    className: "w-3 h-3 bg-indigo-500 rounded-full"
                  })
                ]
              })
            }),
            c && h.jsxs("div", {
              className: "text-red-400 text-sm p-2",
              children: [
                "Errore: ",
                c
              ]
            }),
            !i && !c && (!t || !t.moves || t.moves.length === 0) && h.jsx("div", {
              className: "text-gray-400 text-sm p-2 text-center",
              children: "Nessun dato disponibile per questa posizione"
            }),
            !i && !c && t && t.moves && t.moves.length > 0 && h.jsxs("div", {
              className: "space-y-3",
              children: [
                t.moves.map((C, S) => {
                  const N = C.white + C.draws + C.black, P = Math.round(C.white / N * 100), O = Math.round(C.draws / N * 100), L = 100 - P - O;
                  return h.jsxs("div", {
                    className: "relative cursor-pointer",
                    onClick: () => e && e(C.san),
                    children: [
                      h.jsx("div", {
                        className: "flex justify-between items-center mb-1",
                        children: h.jsxs("div", {
                          className: "flex items-center",
                          children: [
                            h.jsx("span", {
                              className: "text-white font-medium text-sm",
                              children: C.san
                            }),
                            h.jsxs("span", {
                              className: "ml-2 text-gray-400 text-xs",
                              children: [
                                N.toLocaleString(),
                                " partite"
                              ]
                            })
                          ]
                        })
                      }),
                      h.jsxs("div", {
                        className: "relative h-7 w-full rounded-md overflow-hidden bg-gray-800 flex",
                        children: [
                          h.jsx("div", {
                            className: "h-full bg-gray-200 relative flex items-center justify-center transition-all duration-300 ease-in-out",
                            style: {
                              width: `${P}%`
                            },
                            children: P >= 15 && h.jsxs("span", {
                              className: "text-gray-800 text-xs font-medium z-10",
                              children: [
                                P,
                                "%"
                              ]
                            })
                          }),
                          h.jsx("div", {
                            className: "h-full bg-gray-500 relative flex items-center justify-center transition-all duration-300 ease-in-out",
                            style: {
                              width: `${O}%`
                            },
                            children: O >= 15 && h.jsxs("span", {
                              className: "text-white text-xs font-medium z-10",
                              children: [
                                O,
                                "%"
                              ]
                            })
                          }),
                          h.jsx("div", {
                            className: "h-full bg-black relative flex items-center justify-center transition-all duration-300 ease-in-out",
                            style: {
                              width: `${L}%`
                            },
                            children: L >= 15 && h.jsxs("span", {
                              className: "text-white text-xs font-medium z-10",
                              children: [
                                L,
                                "%"
                              ]
                            })
                          })
                        ]
                      })
                    ]
                  }, S);
                }),
                h.jsxs("div", {
                  className: "mt-1 pt-1 border-t border-gray-700 text-gray-400 text-xs flex justify-between items-center",
                  children: [
                    h.jsxs("div", {
                      className: "flex items-center",
                      children: [
                        h.jsx("div", {
                          className: "w-2 h-2 rounded-full bg-gray-200 mr-1"
                        }),
                        h.jsx("span", {
                          children: "Bianco vince"
                        })
                      ]
                    }),
                    h.jsxs("div", {
                      className: "flex items-center mx-2",
                      children: [
                        h.jsx("div", {
                          className: "w-2 h-2 rounded-full bg-gray-500 mr-1"
                        }),
                        h.jsx("span", {
                          children: "Patta"
                        })
                      ]
                    }),
                    h.jsxs("div", {
                      className: "flex items-center",
                      children: [
                        h.jsx("div", {
                          className: "w-2 h-2 rounded-full bg-black mr-1"
                        }),
                        h.jsx("span", {
                          children: "Nero vince"
                        })
                      ]
                    })
                  ]
                })
              ]
            })
          ]
        })
      ]
    });
  }
  function A_(n, e) {
    if (!n || !e) return "";
    try {
      const t = new Cr(e), r = n.substring(0, 2), i = n.substring(2, 4), l = n.length > 4 ? n.substring(4) : void 0, c = {
        from: r,
        to: i,
        promotion: l
      }, f = t.move(c);
      return f ? f.san : n;
    } catch (t) {
      return console.error("Errore nella conversione UCI \u2192 SAN:", t), n;
    }
  }
  function GN(n) {
    const [e, t] = R.useState(false), [r, i] = R.useState(null), [l, c] = R.useState(false), [f, m] = R.useState(null), [y, x] = R.useState(null), [C, S] = R.useState(false), [N, P] = R.useState(0), [O, L] = R.useState([]), [H, W] = R.useState(false), T = R.useRef(null), Y = R.useRef(null), u = R.useRef("w");
    R.useEffect(() => {
      if (n && r !== null) if (l && f !== null) {
        const V = u.current === "b" ? -f : f;
        n(V > 0 ? "mate" : "-mate");
      } else {
        const V = u.current === "b" ? -r : r;
        n(V);
      }
    }, [
      r,
      l,
      f,
      n
    ]);
    const ge = R.useCallback((V) => {
      if (!V) return "w";
      const B = V.split(" ");
      return B.length > 1 ? B[1] : "w";
    }, []), j = R.useCallback((V, B) => {
      if (!V || !V.length) return [];
      try {
        const q = new Cr(B);
        return V.map((G) => {
          try {
            const F = G.substring(0, 2), Oe = G.substring(2, 4), Le = G.length > 4 ? G.substring(4) : void 0, Ge = q.move({
              from: F,
              to: Oe,
              promotion: Le
            });
            return Ge ? Ge.san : G;
          } catch {
            return G;
          }
        });
      } catch {
        return V;
      }
    }, []);
    R.useEffect(() => {
      function V() {
        try {
          const B = new SharedArrayBuffer(1), q = new Int8Array(B);
          return q[0] = 42, Atomics.add(q, 0, 1), q[0] === 43;
        } catch {
          return false;
        }
      }
      if (V()) {
        const B = "/", q = `${B}${B.endsWith("/") ? "" : "/"}stockfish/stockfish-nnue-16.js`;
        return T.current = new Worker(q), T.current.onmessage = (G) => {
          const F = G.data;
          if (F.startsWith("id name") && console.log("Versione engine:", F), F === "readyok") t(true);
          else if (F.startsWith("bestmove")) {
            S(false);
            const Oe = F.match(/bestmove\s+(\S+)/);
            if (Oe) {
              const Le = Oe[1];
              Le && Le.length >= 4 && x(A_(Le, Y.current));
            }
          } else if (F.startsWith("info") && (F.includes("score cp") || F.includes("score mate"))) {
            const Oe = F.split(/\s+(?=multipv|pv|score|depth)/);
            let Le = "", Ge = 0, Ye = 0, he = false, Pe = 0, pe = 1;
            for (let X = 0; X < Oe.length; X++) {
              const oe = Oe[X];
              if (oe.startsWith("multipv")) pe = parseInt(oe.split(" ")[1], 10) || 1;
              else if (oe.startsWith("depth")) Ge = parseInt(oe.split(" ")[1], 10) || 0, P(Ge);
              else if (oe.startsWith("score cp")) {
                const Se = oe.match(/(-?\d+)/);
                Ye = Se ? parseInt(Se[1], 10) / 100 : 0, he = false, pe === 1 && (i(Ye), c(false), m(null));
              } else if (oe.startsWith("score mate")) {
                const Se = oe.match(/mate\s+(-?\d+)/);
                Se && (Pe = parseInt(Se[1], 10), he = true, pe === 1 && (c(true), m(Pe), i(Pe > 0 ? 99 : -99)));
              } else if (oe.startsWith("pv")) {
                Le = oe.replace("pv ", "").trim();
                const Se = Le.match(/([a-h][1-8][a-h][1-8][qrbnk]?)/gi) || [];
                if (L((me) => {
                  const Re = [
                    ...me
                  ];
                  if (Re.length < pe) for (; Re.length < pe; ) Re.push({
                    eval: 0,
                    moves: [],
                    sanMoves: [],
                    isMate: false,
                    mateIn: null
                  });
                  const $e = Se.length > 0 ? j(Se, Y.current) : [];
                  return Re[pe - 1] = {
                    eval: Ye,
                    moves: Se,
                    sanMoves: $e,
                    isMate: he,
                    mateIn: he ? Pe : null
                  }, Re;
                }), pe === 1 && Se.length > 0) {
                  const me = Se[0];
                  me && me.length >= 4 && x(A_(me, Y.current));
                }
              }
            }
          }
        }, T.current.postMessage("uci"), T.current.postMessage("isready"), T.current.postMessage("setoption name Threads value 4"), T.current.postMessage("setoption name Hash value 128"), T.current.postMessage("setoption name Use NNUE value true"), T.current.postMessage("setoption name EvalFile value nn-5af11540bbfe.nnue"), T.current.postMessage("setoption name MultiPV value 3"), () => {
          T.current && T.current.terminate();
        };
      } else console.error("WebAssembly threads not supported in this browser");
    }, [
      j
    ]);
    const M = R.useCallback((V, B = 18) => {
      T.current && e && (C && T.current.postMessage("stop"), Y.current = V, u.current = ge(V), S(true), P(0), L([]), c(false), m(null), T.current.postMessage("ucinewgame"), T.current.postMessage(`position fen ${V}`), T.current.postMessage(`go depth ${B}`));
    }, [
      e,
      ge,
      C
    ]);
    return {
      isReady: e,
      evaluation: r,
      isMate: l,
      mateIn: f,
      bestMove: y,
      isAnalyzing: C,
      analyzeFen: M,
      depth: N,
      lines: O,
      showMultiPV: H,
      setShowMultiPV: W,
      currentTurn: u.current
    };
  }
  function R_({ fen: n, onEvaluationChange: e }) {
    const { isReady: t, evaluation: r, isMate: i, mateIn: l, bestMove: c, isAnalyzing: f, analyzeFen: m, depth: y, lines: x, showMultiPV: C, setShowMultiPV: S, currentTurn: N } = GN(e), P = R.useRef(null);
    R.useEffect(() => {
      t && P.current !== n && (P.current = n, m(n));
    }, [
      n,
      t,
      m
    ]);
    const O = R.useCallback((T, Y, u, ge) => {
      if (u) {
        const j = Y === "b" ? -ge : ge;
        return j === 0 ? "Matto" : `${j > 0 ? "#" : "-#"}${Math.abs(j)}`;
      } else {
        let j = Y === "b" ? -T : T;
        return j > 0 ? `+${j.toFixed(2)}` : j.toFixed(2);
      }
    }, []), L = R.useCallback((T, Y, u, ge) => {
      if (u) return (Y === "b" ? -ge : ge) > 0 ? "text-green-400" : "text-red-400";
      const j = Y === "b" ? -T : T;
      return j > 0 ? "text-green-400" : j < 0 ? "text-red-400" : "text-gray-300";
    }, []), H = R.useMemo(() => x.map((T) => {
      const Y = N === "b" ? -T.eval : T.eval, u = T.isMate ? N === "b" ? -T.mateIn : T.mateIn : null;
      return {
        ...T,
        adjustedEval: Y,
        adjustedMateIn: u
      };
    }), [
      x,
      N
    ]), W = R.useMemo(() => r === null ? {
      text: "",
      color: ""
    } : {
      text: O(r, N, i, l),
      color: L(r, N, i, l)
    }, [
      r,
      N,
      i,
      l,
      O,
      L
    ]);
    return h.jsxs("div", {
      className: "mt-2 space-y-3",
      children: [
        h.jsx("div", {
          className: "text-xs text-gray-400 flex items-center",
          children: t ? f ? h.jsxs("div", {
            className: "flex items-center",
            children: [
              h.jsx("svg", {
                className: "animate-pulse mr-2 h-4 w-4 text-indigo-400",
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                children: h.jsx("path", {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M13 10V3L4 14h7v7l9-11h-7z"
                })
              }),
              "Analisi in corso..."
            ]
          }) : h.jsxs("div", {
            className: "flex items-center",
            children: [
              h.jsx("svg", {
                className: "mr-2 h-4 w-4 text-green-400",
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                children: h.jsx("path", {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M5 13l4 4L19 7"
                })
              }),
              "Analisi completata"
            ]
          }) : h.jsxs("div", {
            className: "flex items-center",
            children: [
              h.jsxs("svg", {
                className: "animate-spin mr-2 h-4 w-4 text-indigo-400",
                xmlns: "http://www.w3.org/2000/svg",
                fill: "none",
                viewBox: "0 0 24 24",
                children: [
                  h.jsx("circle", {
                    className: "opacity-25",
                    cx: "12",
                    cy: "12",
                    r: "10",
                    stroke: "currentColor",
                    strokeWidth: "4"
                  }),
                  h.jsx("path", {
                    className: "opacity-75",
                    fill: "currentColor",
                    d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  })
                ]
              }),
              "Caricamento engine..."
            ]
          })
        }),
        (r !== null || c) && h.jsx("div", {
          className: "bg-gray-700 rounded-md p-2",
          children: h.jsxs("div", {
            className: "flex flex-row justify-between",
            children: [
              h.jsxs("div", {
                className: "w-1/2 pr-2",
                children: [
                  h.jsx("div", {
                    className: "flex items-center mb-1",
                    children: h.jsxs("span", {
                      className: "text-sm font-medium text-gray-300",
                      children: [
                        "Valutazione",
                        " ",
                        h.jsxs("span", {
                          className: "text-xs text-gray-400",
                          children: [
                            "(depth=",
                            y,
                            ")"
                          ]
                        })
                      ]
                    })
                  }),
                  r !== null && h.jsx("div", {
                    className: `text-xl font-mono font-semibold ${W.color}`,
                    children: W.text
                  })
                ]
              }),
              h.jsxs("div", {
                className: "w-1/2 pl-2 border-l border-gray-600",
                children: [
                  h.jsx("div", {
                    className: "flex items-center mb-1",
                    children: h.jsx("span", {
                      className: "text-sm font-medium text-gray-300",
                      children: "Mossa migliore"
                    })
                  }),
                  c && h.jsx("div", {
                    className: "text-xl font-mono font-semibold text-white",
                    children: c
                  })
                ]
              })
            ]
          })
        }),
        h.jsx("div", {
          className: "mt-1 overflow-hidden",
          children: h.jsxs("div", {
            className: "bg-gray-700 rounded-md transition-all duration-300 overflow-hidden",
            children: [
              h.jsxs("button", {
                onClick: () => S(!C),
                className: "flex items-center justify-between w-full p-1.5 text-white bg-gray-700",
                children: [
                  h.jsxs("span", {
                    className: "flex items-center",
                    children: [
                      h.jsx("svg", {
                        className: `w-3 h-3 mr-1 transition-transform duration-300 ${C ? "transform rotate-180" : ""}`,
                        fill: "none",
                        viewBox: "0 0 24 24",
                        stroke: "currentColor",
                        children: h.jsx("path", {
                          strokeLinecap: "round",
                          strokeLinejoin: "round",
                          strokeWidth: 2,
                          d: "M19 9l-7 7-7-7"
                        })
                      }),
                      h.jsx("span", {
                        className: "text-xs text-gray-300",
                        children: "Mostra linee"
                      })
                    ]
                  }),
                  h.jsx("div", {
                    className: `w-8 h-4 p-0.5 rounded-full ${C ? "bg-gray-500" : "bg-gray-600"}`,
                    children: h.jsx("div", {
                      className: `w-3 h-3 rounded-full transition-transform duration-300 ${C ? "bg-white transform translate-x-4" : "bg-gray-400"}`
                    })
                  })
                ]
              }),
              h.jsx("div", {
                className: `transition-all duration-300 ${C ? "max-h-[300px] opacity-100" : "max-h-0 opacity-0"}`,
                children: H.length > 0 && h.jsx("div", {
                  className: "border-t border-gray-600",
                  children: H.map((T, Y) => h.jsx("div", {
                    className: `p-1.5 ${Y % 2 === 1 ? "bg-gray-800" : "bg-gray-700"} ${Y !== 0 ? "border-t border-gray-600" : ""}`,
                    children: h.jsxs("div", {
                      className: "flex items-center",
                      children: [
                        h.jsx("span", {
                          className: `text-sm font-mono font-medium mr-2 flex-shrink-0 ${T.isMate ? T.adjustedMateIn > 0 ? "text-green-400" : "text-red-400" : T.adjustedEval > 0 ? "text-green-400" : T.adjustedEval < 0 ? "text-red-400" : "text-gray-300"}`,
                          children: T.isMate ? T.adjustedMateIn > 0 ? `#${Math.abs(T.mateIn)}` : `-#${Math.abs(T.mateIn)}` : T.adjustedEval > 0 ? `+${Math.abs(T.adjustedEval).toFixed(2)}` : T.adjustedEval.toFixed(2)
                        }),
                        h.jsx("div", {
                          className: "text-sm text-gray-300 whitespace-nowrap overflow-hidden",
                          style: {
                            textOverflow: "ellipsis",
                            maxWidth: "100%",
                            msOverflowStyle: "none",
                            scrollbarWidth: "none"
                          },
                          children: T.sanMoves.map((u, ge) => h.jsx("span", {
                            className: "mr-1 font-mono",
                            children: u
                          }, ge))
                        })
                      ]
                    })
                  }, Y))
                })
              })
            ]
          })
        })
      ]
    });
  }
  const Uv = ({ pgn: n, onClose: e, nodeDescription: t, canvasData: r, selectedNodeId: i, onUpdateCanvas: l, onSelectNode: c, onUpdateCanvasAndSelectNode: f }) => {
    const [m, y] = R.useState(""), [x, C] = R.useState([]), [S, N] = R.useState(-1), [P, O] = R.useState(""), [L, H] = R.useState(null), [W, T] = R.useState(r), [Y, u] = R.useState([]), [ge, j] = R.useState(false), [M, V] = R.useState(false), [B, q] = R.useState(null), [G, F] = R.useState({}), [Oe, Le] = R.useState(false), Ge = R.useRef({}), Ye = R.useRef({}), he = R.useRef(new Cr()), Pe = R.useRef(false), pe = R.useRef(true), X = R.useRef(null), oe = R.useRef(""), [Se, me] = R.useState(0), [Re, $e] = R.useState("white"), [ie, ye] = R.useState("moves"), [ve, De] = R.useState(400), [Be, et] = R.useState(false), [le, Ne] = R.useState(window.innerWidth < 768), [Ke, at] = R.useState(true);
    R.useEffect(() => {
      const ce = () => {
        Ne(window.innerWidth < 768);
      };
      return window.addEventListener("resize", ce), () => window.removeEventListener("resize", ce);
    }, []), R.useEffect(() => {
      const ce = () => {
        if (X.current) if (window.innerWidth < 768) {
          const tt = window.innerWidth;
          De(tt - 10);
        } else {
          const tt = X.current.clientWidth, Ot = X.current.clientHeight - 80, mt = tt * 0.95, Pn = Math.min(Ot, mt);
          De(Math.max(400, Pn));
        }
      };
      ce();
      const je = new ResizeObserver(() => {
        ce();
      });
      return X.current && je.observe(X.current), window.addEventListener("resize", ce), () => {
        window.removeEventListener("resize", ce), je.disconnect();
      };
    }, []), R.useEffect(() => (pe.current = true, () => {
      pe.current = false;
    }), []), R.useEffect(() => {
      r && JSON.stringify(r) !== JSON.stringify(W) && T(r);
    }, [
      r
    ]), R.useEffect(() => {
      if (!pe.current) return;
      const ce = he.current;
      if (ce.reset(), n == null ? void 0 : n.trim()) try {
        ce.loadPgn(n);
      } catch (nt) {
        console.error("Errore nel caricamento del PGN:", nt);
      }
      const je = ce.history({
        verbose: true
      });
      y(ce.fen()), C(je), N(je.length - 1);
      const tt = t || "";
      if (O(tt), oe.current = tt, i && !L && H(i), (W == null ? void 0 : W.nodes) && (W == null ? void 0 : W.connections)) {
        const nt = {}, Ot = {};
        W.connections.forEach((mt) => {
          mt.fromId && mt.toId && (nt[mt.toId] = mt.fromId);
        }), W.nodes.forEach((mt) => {
          mt.pgn && (Ot[mt.id] = mt.pgn);
        }), Ge.current = nt, Ye.current = Ot;
      }
      if (je.length > 0) {
        const nt = je[je.length - 1];
        ke(nt.from, nt.to);
      }
      return () => {
        ce.reset();
      };
    }, [
      n,
      t,
      W,
      L,
      i
    ]);
    const pt = R.useCallback((ce) => {
      !pe.current || !l || (T(ce), l(ce));
    }, [
      l
    ]), Vt = R.useCallback((ce) => {
      !pe.current || !c || c(ce);
    }, [
      c
    ]), Fe = (ce, je) => ce.find((tt) => tt.id === je), ke = R.useCallback((ce, je) => {
      !ce || !je || F({
        [ce]: {
          backgroundColor: "rgba(255, 170, 0, 0.5)"
        },
        [je]: {
          backgroundColor: "rgba(255, 170, 0, 0.5)"
        }
      });
    }, []), ut = R.useCallback((ce) => {
      if (!ce) return {};
      const je = {};
      return he.current.moves({
        square: ce,
        verbose: true
      }).forEach((nt) => {
        je[nt.to] = {
          background: "radial-gradient(circle, rgba(0, 0, 0, 0.4) 19%, transparent 20%)",
          backgroundRepeat: "no-repeat",
          backgroundPosition: "center"
        };
      }), je[ce] = {
        backgroundColor: "rgba(0, 128, 255, 0.4)"
      }, je;
    }, []), Pt = R.useCallback((ce) => {
      if (!ce || !W) return;
      const je = Fe(W.nodes, ce);
      if (!je) return;
      const tt = je.pgn || Ye.current[ce] || n;
      try {
        he.current.reset(), tt && tt.trim() && he.current.loadPgn(tt);
        const nt = he.current.history({
          verbose: true
        });
        if (y(he.current.fen()), C(nt), N(nt.length - 1), q(null), nt.length > 0) {
          const mt = nt[nt.length - 1];
          ke(mt.from, mt.to);
        } else F({});
        ce !== i && Vt(ce);
        const Ot = Fe(W.nodes, ce);
        if (Ot) {
          const mt = Ot.description || "";
          O(mt), oe.current = mt;
        }
      } catch (nt) {
        console.error("Errore nella navigazione al nodo:", nt);
      }
    }, [
      W,
      n,
      i,
      Vt,
      ke
    ]), It = R.useCallback((ce) => {
      try {
        if (he.current.reset(), ce >= 0) {
          for (let je = 0; je <= ce; je++) je < x.length && he.current.move(x[je]);
          ce >= 0 && x[ce] && ke(x[ce].from, x[ce].to);
        } else F({});
        y(he.current.fen()), N(ce), q(null);
      } catch (je) {
        console.error("Errore nella navigazione:", je);
      }
    }, [
      x,
      ke
    ]), en = R.useCallback(() => {
      It(-1);
    }, [
      It
    ]), on = R.useCallback(() => {
      if (i && Ge.current[i]) {
        const ce = Ge.current[i];
        Pt(ce);
      } else S > -1 && It(S - 1);
    }, [
      i,
      S,
      Pt,
      It
    ]), Dt = R.useCallback(() => {
      if (S < x.length - 1) {
        It(S + 1);
        return;
      }
      if (i && W) {
        const ce = W.connections.filter((tt) => tt.fromId === i);
        if (ce.length === 0) return;
        const je = ce.map((tt) => {
          const nt = W.nodes.find((Ot) => Ot.id === tt.toId);
          return {
            id: tt.toId,
            label: nt ? nt.label : "Mossa sconosciuta"
          };
        });
        je.length === 1 ? Pt(je[0].id) : je.length > 1 && (u(je), j(true));
      }
    }, [
      S,
      x,
      i,
      W,
      It,
      Pt
    ]), kt = R.useCallback((ce) => {
      j(false), Pt(ce);
    }, [
      Pt
    ]), En = R.useCallback(() => {
      It(x.length - 1);
    }, [
      x,
      It
    ]), Xr = R.useCallback(() => {
      L && Pt(L);
    }, [
      L,
      Pt
    ]), mr = R.useCallback((ce) => {
      if (S === x.length - 1) {
        if (B === ce) {
          if (q(null), x.length > 0 && S >= 0) {
            const tt = x[S];
            ke(tt.from, tt.to);
          } else F({});
          return;
        }
        if (B) {
          const tt = he.current.get(ce), nt = he.current.turn();
          if (tt && tt.color === nt) {
            q(ce), F(ut(ce));
            return;
          }
          if (new Cr(he.current.fen()).move({
            from: B,
            to: ce,
            promotion: "q"
          })) Jr(B, ce);
          else if (q(null), x.length > 0 && S >= 0) {
            const Pn = x[S];
            ke(Pn.from, Pn.to);
          } else F({});
        } else {
          const tt = he.current.get(ce), nt = he.current.turn();
          tt && tt.color === nt && (q(ce), F(ut(ce)));
        }
      }
    }, [
      B,
      x,
      S,
      ut,
      ke
    ]), Bn = R.useCallback((ce, je) => {
      if (!(S === x.length - 1)) return;
      const nt = he.current.turn();
      ce[0] === nt && (Le(true), q(je), F(ut(je)));
    }, [
      S,
      x.length,
      ut
    ]), er = R.useCallback(() => {
      Le(false);
    }, []), Jr = R.useCallback((ce, je) => {
      var _a3;
      if (!(S === x.length - 1)) return false;
      try {
        const nt = {
          from: ce,
          to: je,
          promotion: "q"
        }, Ot = he.current.move(nt);
        if (!Ot) {
          if (q(null), x.length > 0 && S >= 0) {
            const it = x[S];
            ke(it.from, it.to);
          }
          return false;
        }
        y(he.current.fen()), ke(ce, je), q(null);
        const mt = [
          ...x.slice(0, S + 1),
          Ot
        ];
        if (C(mt), N(S + 1), !Ke || !W || !i) return true;
        const Ft = W.connections.filter((it) => it.fromId === i).map((it) => it.toId);
        let Wn = null;
        for (const it of Ft) {
          const At = W.nodes.find((xt) => xt.id === it);
          At && At.label === Ot.san && (Wn = it);
        }
        if (Wn) return Vt(Wn), true;
        const Qt = i_(W, i, {
          label: Ot.san,
          type: "move",
          description: "",
          pgn: he.current.pgn()
        }), dt = (_a3 = Qt.nodes[Qt.nodes.length - 1]) == null ? void 0 : _a3.id;
        return f ? f(Qt, dt) : (pt(Qt), Vt(dt)), true;
      } catch (nt) {
        return console.error("Errore nell'esecuzione della mossa:", nt), false;
      }
    }, [
      S,
      x,
      W,
      i,
      Vt,
      pt,
      f,
      ke,
      Ke
    ]), dn = R.useCallback(() => {
      if (!(!i || !W) && P !== oe.current) try {
        oe.current = P;
        const ce = JSON.parse(JSON.stringify(W)), je = ce.nodes.findIndex((tt) => tt.id === i);
        je !== -1 && (ce.nodes[je].description = P), pt(ce);
      } catch (ce) {
        console.error("Errore nel salvataggio della nota:", ce);
      }
    }, [
      i,
      W,
      P,
      pt
    ]), tr = R.useCallback((ce) => {
      O(ce.target.value);
    }, []), Zr = R.useCallback((ce) => {
      ce.key === "Enter" && !ce.shiftKey && (ce.preventDefault(), dn(), ce.target.blur());
    }, [
      dn
    ]), es = R.useCallback((ce, je) => {
      const tt = Math.floor(je / 2) + 1;
      return je % 2 === 0 ? `${tt}. ${ce.san}` : ce.san;
    }, []), Ir = R.useCallback((ce) => {
      ce.stopPropagation(), !Pe.current && (dn(), e());
    }, [
      e,
      dn
    ]), kr = R.useCallback(() => S < x.length - 1 ? true : !i || !W ? false : W.connections.some((je) => je.fromId === i), [
      S,
      x.length,
      i,
      W
    ]), nr = R.useCallback(() => {
      et((ce) => !ce);
    }, []), fn = R.useCallback(() => {
      at((ce) => !ce);
    }, []), Nn = R.useCallback((ce) => {
      var _a3;
      try {
        if (!(S === x.length - 1)) return;
        const tt = new Cr(m), nt = tt.move(ce);
        if (!nt) return;
        y(tt.fen());
        const mt = he.current.moves({
          verbose: true
        }).find((At) => At.san === ce);
        mt && ke(mt.from, mt.to), q(null);
        const Pn = [
          ...x.slice(0, S + 1),
          nt
        ];
        if (C(Pn), N(S + 1), he.current.move(ce), !Ke || !W || !i) return;
        const Wn = W.connections.filter((At) => At.fromId === i).map((At) => At.toId);
        let Qt = null;
        for (const At of Wn) {
          const xt = W.nodes.find((bn) => bn.id === At);
          xt && xt.label === nt.san && (Qt = At);
        }
        if (Qt) {
          Vt(Qt);
          return;
        }
        const dt = i_(W, i, {
          label: nt.san,
          type: "move",
          description: "",
          pgn: he.current.pgn()
        }), it = (_a3 = dt.nodes[dt.nodes.length - 1]) == null ? void 0 : _a3.id;
        f ? f(dt, it) : (pt(dt), Vt(it));
      } catch (je) {
        console.error("Errore nell'eseguire la mossa:", je);
      }
    }, [
      m,
      x,
      S,
      i,
      W,
      Vt,
      pt,
      f,
      ke,
      Ke
    ]);
    return h.jsx("div", {
      className: "fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm",
      onClick: e,
      children: h.jsxs("div", {
        className: "bg-gray-800 rounded-lg shadow-xl md:w-[96%] w-full max-w-6xl h-[98vh] flex flex-col overflow-hidden relative",
        style: {
          height: "calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom))",
          marginTop: "env(safe-area-inset-top)",
          marginBottom: "env(safe-area-inset-bottom)"
        },
        onClick: (ce) => ce.stopPropagation(),
        children: [
          h.jsx("button", {
            onClick: Ir,
            className: "absolute top-2 right-2 z-10 p-1.5 rounded-full bg-gray-800 bg-opacity-80 text-gray-300 hover:text-white hover:bg-gray-700 shadow-md",
            "aria-label": "Chiudi",
            children: h.jsx("svg", {
              className: "w-5 h-5",
              viewBox: "0 0 20 20",
              fill: "currentColor",
              children: h.jsx("path", {
                fillRule: "evenodd",
                d: "M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",
                clipRule: "evenodd"
              })
            })
          }),
          le && h.jsx("div", {
            className: "w-full px-1 border-b border-gray-700",
            children: h.jsxs("div", {
              className: "flex overflow-x-auto no-scrollbar",
              children: [
                h.jsxs("button", {
                  onClick: () => ye("moves"),
                  className: `flex items-center p-3 whitespace-nowrap flex-1 justify-center ${ie === "moves" ? "text-white border-b-2 border-indigo-500 bg-gray-700" : "text-gray-400 hover:text-gray-200"}`,
                  children: [
                    h.jsx("svg", {
                      className: "w-5 h-5",
                      viewBox: "0 0 20 20",
                      fill: "currentColor",
                      children: h.jsx("path", {
                        d: "M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"
                      })
                    }),
                    h.jsx("span", {
                      className: "ml-1",
                      children: "Mosse"
                    })
                  ]
                }),
                h.jsxs("button", {
                  onClick: () => ye("analysis"),
                  className: `flex items-center p-3 whitespace-nowrap flex-1 justify-center ${ie === "analysis" ? "text-white border-b-2 border-indigo-500 bg-gray-700" : "text-gray-400 hover:text-gray-200"}`,
                  children: [
                    h.jsxs("svg", {
                      className: "w-5 h-5",
                      viewBox: "0 0 20 20",
                      fill: "currentColor",
                      children: [
                        h.jsx("path", {
                          d: "M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"
                        }),
                        h.jsx("path", {
                          d: "M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"
                        })
                      ]
                    }),
                    h.jsx("span", {
                      className: "ml-1",
                      children: "Analisi"
                    })
                  ]
                }),
                h.jsxs("button", {
                  onClick: () => ye("explorer"),
                  className: `flex items-center p-3 whitespace-nowrap flex-1 justify-center ${ie === "explorer" ? "text-white border-b-2 border-indigo-500 bg-gray-700" : "text-gray-400 hover:text-gray-200"}`,
                  children: [
                    h.jsx("svg", {
                      className: "w-5 h-5",
                      viewBox: "0 0 20 20",
                      fill: "currentColor",
                      children: h.jsx("path", {
                        fillRule: "evenodd",
                        d: "M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",
                        clipRule: "evenodd"
                      })
                    }),
                    h.jsx("span", {
                      className: "ml-1",
                      children: "DB"
                    })
                  ]
                }),
                h.jsxs("button", {
                  onClick: () => ye("notes"),
                  className: `flex items-center p-3 whitespace-nowrap flex-1 justify-center ${ie === "notes" ? "text-white border-b-2 border-indigo-500 bg-gray-700" : "text-gray-400 hover:text-gray-200"}`,
                  children: [
                    h.jsx("svg", {
                      className: "w-5 h-5",
                      viewBox: "0 0 20 20",
                      fill: "currentColor",
                      children: h.jsx("path", {
                        fillRule: "evenodd",
                        d: "M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",
                        clipRule: "evenodd"
                      })
                    }),
                    h.jsx("span", {
                      className: "ml-1",
                      children: "Note"
                    })
                  ]
                })
              ]
            })
          }),
          h.jsxs("div", {
            className: "flex flex-col md:flex-row flex-1 overflow-hidden",
            children: [
              h.jsxs("div", {
                className: "flex flex-col md:w-2/3 w-full h-full",
                children: [
                  h.jsxs("div", {
                    ref: X,
                    className: "flex justify-center items-center md:flex-1 md:py-4 py-0 w-full",
                    children: [
                      Be && !le && h.jsx(zv, {
                        evaluation: Se,
                        height: ve,
                        isFlipped: Re === "black",
                        orientation: "vertical"
                      }),
                      h.jsx("div", {
                        style: {
                          width: `${ve}px`,
                          height: `${ve}px`,
                          maxWidth: "100%",
                          borderRadius: "8px",
                          overflow: "hidden"
                        },
                        className: "select-none shadow-lg",
                        children: h.jsx(mb, {
                          id: "responsive-board",
                          position: m,
                          boardWidth: ve,
                          areArrowsAllowed: true,
                          customDarkSquareStyle: {
                            backgroundColor: "#ad7456"
                          },
                          customLightSquareStyle: {
                            backgroundColor: "#ead8c0"
                          },
                          onPieceDrop: Jr,
                          customPieces: vb,
                          customSquareStyles: G,
                          onSquareClick: mr,
                          onPieceDragBegin: Bn,
                          onPieceDragEnd: er,
                          boardOrientation: Re,
                          onDragOverSquare: () => {
                          },
                          customDropSquareStyle: {
                            boxShadow: "none",
                            backgroundColor: "none"
                          }
                        })
                      })
                    ]
                  }),
                  Be && le && h.jsx("div", {
                    className: "w-full px-1 mt-1",
                    children: h.jsx(zv, {
                      evaluation: Se,
                      isFlipped: Re === "black",
                      orientation: "horizontal"
                    })
                  }),
                  h.jsxs("div", {
                    className: "hidden md:flex flex-col items-center mb-4 w-full",
                    children: [
                      h.jsx("div", {
                        className: "flex justify-center gap-1 mx-auto mb-2",
                        children: h.jsxs("div", {
                          className: "flex rounded-lg overflow-hidden shadow-lg",
                          children: [
                            h.jsx("button", {
                              onClick: (ce) => {
                                ce.stopPropagation(), en();
                              },
                              className: "bg-gray-700 hover:bg-gray-600 active:bg-gray-800 text-white p-3 w-14 md:w-16",
                              title: "Inizio sequenza",
                              children: h.jsx("svg", {
                                className: "w-5 h-5 mx-auto",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: h.jsx("path", {
                                  fillRule: "evenodd",
                                  d: "M15.707 15.707a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 010 1.414zm-6 0a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 1.414L5.414 10l4.293 4.293a1 1 0 010 1.414z",
                                  clipRule: "evenodd"
                                })
                              })
                            }),
                            h.jsx("button", {
                              onClick: (ce) => {
                                ce.stopPropagation(), on();
                              },
                              className: "bg-gray-700 hover:bg-gray-600 active:bg-gray-800 text-white p-3 w-14 md:w-16 border-l border-gray-800",
                              title: "Mossa precedente",
                              children: h.jsx("svg", {
                                className: "w-5 h-5 mx-auto",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: h.jsx("path", {
                                  fillRule: "evenodd",
                                  d: "M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",
                                  clipRule: "evenodd"
                                })
                              })
                            }),
                            h.jsx("button", {
                              onClick: (ce) => {
                                ce.stopPropagation(), Dt();
                              },
                              disabled: !kr(),
                              className: "bg-gray-700 hover:bg-gray-600 active:bg-gray-800 text-white p-3 w-14 md:w-16 border-l border-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",
                              title: "Mossa successiva",
                              children: h.jsx("svg", {
                                className: "w-5 h-5 mx-auto",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: h.jsx("path", {
                                  fillRule: "evenodd",
                                  d: "M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",
                                  clipRule: "evenodd"
                                })
                              })
                            }),
                            h.jsx("button", {
                              onClick: (ce) => {
                                ce.stopPropagation(), En();
                              },
                              disabled: S >= x.length - 1,
                              className: "bg-gray-700 hover:bg-gray-600 active:bg-gray-800 text-white p-3 w-14 md:w-16 border-l border-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",
                              title: "Ultima mossa",
                              children: h.jsxs("svg", {
                                className: "w-5 h-5 mx-auto",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: [
                                  h.jsx("path", {
                                    fillRule: "evenodd",
                                    d: "M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",
                                    clipRule: "evenodd"
                                  }),
                                  h.jsx("path", {
                                    fillRule: "evenodd",
                                    d: "M4.293 15.707a1 1 0 010-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",
                                    clipRule: "evenodd"
                                  })
                                ]
                              })
                            })
                          ]
                        })
                      }),
                      h.jsxs("div", {
                        className: "flex gap-2 justify-center",
                        children: [
                          h.jsxs("button", {
                            onClick: (ce) => {
                              ce.stopPropagation(), fn();
                            },
                            className: `flex items-center gap-2 px-3 py-2 rounded-lg ${Ke ? "bg-teal-600 hover:bg-teal-500" : "bg-gray-600 hover:bg-gray-500"} text-white transition-colors shadow-md`,
                            title: Ke ? "Disattiva annotazione mosse" : "Attiva annotazione mosse",
                            children: [
                              h.jsx("svg", {
                                className: "w-5 h-5",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: h.jsx("path", {
                                  d: "M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
                                })
                              }),
                              h.jsx("span", {
                                className: "text-sm font-medium hidden md:inline",
                                children: Ke ? "Annotazione ON" : "Annotazione OFF"
                              })
                            ]
                          }),
                          L && L !== i && h.jsxs("button", {
                            onClick: (ce) => {
                              ce.stopPropagation(), Xr();
                            },
                            className: "flex items-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg shadow-md",
                            title: "Torna alla posizione iniziale",
                            children: [
                              h.jsx("svg", {
                                className: "w-5 h-5",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: h.jsx("path", {
                                  fillRule: "evenodd",
                                  d: "M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",
                                  clipRule: "evenodd"
                                })
                              }),
                              h.jsx("span", {
                                className: "text-sm font-medium hidden md:inline",
                                children: "Posizione iniziale"
                              })
                            ]
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "md:hidden flex justify-between items-center px-2 mb-2 w-full",
                    children: [
                      h.jsx("div", {
                        className: "flex-shrink-0",
                        children: h.jsx("button", {
                          onClick: (ce) => {
                            ce.stopPropagation(), fn();
                          },
                          className: `flex items-center justify-center p-2 rounded-lg ${Ke ? "bg-teal-600 hover:bg-teal-500" : "bg-gray-600 hover:bg-gray-500"} text-white shadow-md w-10 h-10`,
                          title: Ke ? "Disattiva annotazione" : "Attiva annotazione",
                          children: h.jsx("svg", {
                            className: "w-5 h-5",
                            viewBox: "0 0 20 20",
                            fill: "currentColor",
                            children: h.jsx("path", {
                              d: "M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
                            })
                          })
                        })
                      }),
                      h.jsx("div", {
                        className: "flex justify-center",
                        children: h.jsxs("div", {
                          className: "flex rounded-lg overflow-hidden shadow-lg",
                          children: [
                            h.jsx("button", {
                              onClick: (ce) => {
                                ce.stopPropagation(), en();
                              },
                              className: "bg-gray-700 hover:bg-gray-600 active:bg-gray-800 text-white p-2 w-10",
                              title: "Inizio sequenza",
                              children: h.jsx("svg", {
                                className: "w-5 h-5 mx-auto",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: h.jsx("path", {
                                  fillRule: "evenodd",
                                  d: "M15.707 15.707a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 010 1.414zm-6 0a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 1.414L5.414 10l4.293 4.293a1 1 0 010 1.414z",
                                  clipRule: "evenodd"
                                })
                              })
                            }),
                            h.jsx("button", {
                              onClick: (ce) => {
                                ce.stopPropagation(), on();
                              },
                              className: "bg-gray-700 hover:bg-gray-600 active:bg-gray-800 text-white p-2 w-10 border-l border-gray-800",
                              title: "Mossa precedente",
                              children: h.jsx("svg", {
                                className: "w-5 h-5 mx-auto",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: h.jsx("path", {
                                  fillRule: "evenodd",
                                  d: "M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",
                                  clipRule: "evenodd"
                                })
                              })
                            }),
                            h.jsx("button", {
                              onClick: (ce) => {
                                ce.stopPropagation(), Dt();
                              },
                              disabled: !kr(),
                              className: "bg-gray-700 hover:bg-gray-600 active:bg-gray-800 text-white p-2 w-10 border-l border-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",
                              title: "Mossa successiva",
                              children: h.jsx("svg", {
                                className: "w-5 h-5 mx-auto",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: h.jsx("path", {
                                  fillRule: "evenodd",
                                  d: "M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",
                                  clipRule: "evenodd"
                                })
                              })
                            }),
                            h.jsx("button", {
                              onClick: (ce) => {
                                ce.stopPropagation(), En();
                              },
                              disabled: S >= x.length - 1,
                              className: "bg-gray-700 hover:bg-gray-600 active:bg-gray-800 text-white p-2 w-10 border-l border-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",
                              title: "Ultima mossa",
                              children: h.jsxs("svg", {
                                className: "w-5 h-5 mx-auto",
                                viewBox: "0 0 20 20",
                                fill: "currentColor",
                                children: [
                                  h.jsx("path", {
                                    fillRule: "evenodd",
                                    d: "M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",
                                    clipRule: "evenodd"
                                  }),
                                  h.jsx("path", {
                                    fillRule: "evenodd",
                                    d: "M4.293 15.707a1 1 0 010-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",
                                    clipRule: "evenodd"
                                  })
                                ]
                              })
                            })
                          ]
                        })
                      }),
                      h.jsx("div", {
                        className: "flex-shrink-0",
                        children: L && L !== i ? h.jsx("button", {
                          onClick: (ce) => {
                            ce.stopPropagation(), Xr();
                          },
                          className: "flex items-center justify-center p-2 bg-green-600 hover:bg-green-500 text-white rounded-lg shadow-md w-10 h-10",
                          title: "Torna alla posizione iniziale",
                          children: h.jsx("svg", {
                            className: "w-5 h-5",
                            viewBox: "0 0 20 20",
                            fill: "currentColor",
                            children: h.jsx("path", {
                              fillRule: "evenodd",
                              d: "M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",
                              clipRule: "evenodd"
                            })
                          })
                        }) : h.jsx("div", {
                          className: "w-10"
                        })
                      })
                    ]
                  }),
                  le && h.jsxs("div", {
                    className: "flex-1 overflow-y-auto px-1 py-2",
                    children: [
                      ie === "moves" && h.jsxs("div", {
                        className: "bg-gray-900 rounded-md p-2",
                        children: [
                          h.jsxs("div", {
                            className: "flex items-center mb-2",
                            children: [
                              h.jsx("div", {
                                className: `w-3 h-3 rounded-full mr-2 ${m.includes(" w ") ? "bg-white" : "bg-black"}`
                              }),
                              h.jsx("span", {
                                className: "text-gray-300",
                                children: m.includes(" w ") ? "Muove il Bianco" : "Muove il Nero"
                              })
                            ]
                          }),
                          x.length > 0 ? h.jsx("div", {
                            className: "grid grid-cols-2 gap-2",
                            children: x.map((ce, je) => h.jsx("div", {
                              onClick: () => It(je),
                              className: `p-2 rounded text-sm cursor-pointer ${S === je ? "bg-indigo-600 text-white" : "text-gray-300 hover:bg-gray-800"}`,
                              children: es(ce, je)
                            }, je))
                          }) : h.jsx("p", {
                            className: "text-gray-400 text-center py-4",
                            children: "Nessuna mossa disponibile"
                          })
                        ]
                      }),
                      ie === "analysis" && h.jsxs("div", {
                        className: "bg-gray-900 rounded-md p-2",
                        children: [
                          h.jsxs("button", {
                            onClick: nr,
                            className: `flex items-center justify-between w-full p-2 rounded-md mb-2 ${Be ? "bg-indigo-600 hover:bg-indigo-700" : "bg-gray-700 hover:bg-gray-600"} text-white transition-colors`,
                            children: [
                              h.jsxs("span", {
                                className: "flex items-center",
                                children: [
                                  h.jsx("svg", {
                                    className: "w-5 h-5 mr-2",
                                    fill: "none",
                                    viewBox: "0 0 24 24",
                                    stroke: "currentColor",
                                    children: h.jsx("path", {
                                      strokeLinecap: "round",
                                      strokeLinejoin: "round",
                                      strokeWidth: 2,
                                      d: "M13 10V3L4 14h7v7l9-11h-7z"
                                    })
                                  }),
                                  "Analisi Engine (beta)"
                                ]
                              }),
                              h.jsx("div", {
                                className: `w-10 h-5 p-1 rounded-full ${Be ? "bg-indigo-300" : "bg-gray-600"}`,
                                children: h.jsx("div", {
                                  className: `w-3 h-3 rounded-full transition-transform ${Be ? "bg-white transform translate-x-5" : "bg-gray-400"}`
                                })
                              })
                            ]
                          }),
                          Be && h.jsx(R_, {
                            fen: m,
                            onEvaluationChange: me
                          })
                        ]
                      }),
                      ie === "explorer" && h.jsx("div", {
                        className: "bg-gray-900 rounded-md p-2",
                        children: h.jsx(k_, {
                          fen: m,
                          onMoveSelect: Nn
                        })
                      }),
                      ie === "notes" && h.jsxs("div", {
                        className: "bg-gray-900 rounded-md p-2",
                        children: [
                          h.jsx("h3", {
                            className: "text-sm font-medium text-gray-300 mb-2",
                            children: "Note sulla posizione"
                          }),
                          h.jsx("textarea", {
                            value: P,
                            onChange: tr,
                            onKeyDown: Zr,
                            onBlur: dn,
                            className: "w-full bg-gray-800 text-white text-sm p-3 rounded-md border border-gray-600 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",
                            rows: 4,
                            placeholder: "Inserisci note sulla posizione... (Premi Invio per salvare)",
                            onClick: (ce) => ce.stopPropagation()
                          }),
                          h.jsxs("div", {
                            className: "mt-2",
                            children: [
                              h.jsx("h4", {
                                className: "text-xs font-medium text-gray-400 mb-1",
                                children: "Posizione FEN"
                              }),
                              h.jsx("div", {
                                className: "bg-gray-800 p-2 rounded-md text-xs text-gray-400 overflow-x-auto break-all",
                                children: m
                              })
                            ]
                          })
                        ]
                      })
                    ]
                  })
                ]
              }),
              h.jsxs("div", {
                className: "hidden md:block md:w-1/3 border-l border-gray-700 bg-gray-800 p-4 overflow-y-auto",
                children: [
                  h.jsx("div", {
                    className: "mb-2",
                    children: h.jsxs("div", {
                      className: "flex items-center",
                      children: [
                        h.jsx("div", {
                          className: `w-3 h-3 rounded-full mr-2 ${m.includes(" w ") ? "bg-white" : "bg-black"}`
                        }),
                        h.jsx("span", {
                          className: "text-gray-300",
                          children: m.includes(" w ") ? "Muove il Bianco" : "Muove il Nero"
                        })
                      ]
                    })
                  }),
                  h.jsx("div", {
                    className: "bg-gray-900 rounded-md p-3 max-h-60 overflow-y-auto",
                    children: x.length > 0 ? h.jsx("div", {
                      className: "grid grid-cols-2 gap-2",
                      children: x.map((ce, je) => h.jsx("div", {
                        onClick: () => It(je),
                        className: `p-2 rounded text-sm cursor-pointer ${S === je ? "bg-indigo-600 text-white" : "text-gray-300 hover:bg-gray-800"}`,
                        children: es(ce, je)
                      }, je))
                    }) : h.jsx("p", {
                      className: "text-gray-400 text-center py-4",
                      children: "Nessuna mossa disponibile"
                    })
                  }),
                  h.jsxs("div", {
                    className: "mt-4",
                    children: [
                      h.jsxs("button", {
                        onClick: nr,
                        className: `flex items-center justify-between w-full p-2 rounded-md ${Be ? "bg-indigo-600 hover:bg-indigo-700" : "bg-gray-700 hover:bg-gray-600"} text-white transition-colors`,
                        children: [
                          h.jsxs("span", {
                            className: "flex items-center",
                            children: [
                              h.jsx("svg", {
                                className: "w-5 h-5 mr-2",
                                fill: "none",
                                viewBox: "0 0 24 24",
                                stroke: "currentColor",
                                children: h.jsx("path", {
                                  strokeLinecap: "round",
                                  strokeLinejoin: "round",
                                  strokeWidth: 2,
                                  d: "M13 10V3L4 14h7v7l9-11h-7z"
                                })
                              }),
                              "Analisi Engine (beta)"
                            ]
                          }),
                          h.jsx("div", {
                            className: `w-10 h-5 p-1 rounded-full ${Be ? "bg-indigo-300" : "bg-gray-600"}`,
                            children: h.jsx("div", {
                              className: `w-3 h-3 rounded-full transition-transform ${Be ? "bg-white transform translate-x-5" : "bg-gray-400"}`
                            })
                          })
                        ]
                      }),
                      Be && h.jsx(R_, {
                        fen: m,
                        onEvaluationChange: me
                      })
                    ]
                  }),
                  h.jsx(k_, {
                    fen: m,
                    onMoveSelect: Nn
                  }),
                  h.jsxs("div", {
                    className: "mt-5 bg-gray-700 rounded-md p-3",
                    children: [
                      h.jsx("h3", {
                        className: "text-sm font-medium text-gray-300 mb-2",
                        children: "Note sulla posizione"
                      }),
                      h.jsx("textarea", {
                        value: P,
                        onChange: tr,
                        onKeyDown: Zr,
                        onBlur: dn,
                        className: "w-full bg-gray-800 text-white text-sm p-3 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",
                        rows: 4,
                        placeholder: "Inserisci note sulla posizione... (Premi Invio per salvare)",
                        onClick: (ce) => ce.stopPropagation()
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "mt-4",
                    children: [
                      h.jsx("h4", {
                        className: "text-sm font-medium text-gray-300 mb-1",
                        children: "Posizione FEN"
                      }),
                      h.jsx("div", {
                        className: "bg-gray-900 p-2 rounded-md text-xs text-gray-400 overflow-x-auto break-all",
                        children: m
                      })
                    ]
                  })
                ]
              })
            ]
          }),
          ge && h.jsx("div", {
            className: "fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",
            onClick: () => j(false),
            children: h.jsxs("div", {
              className: "bg-gray-800 p-4 rounded-lg shadow-lg max-w-md w-full mx-4",
              onClick: (ce) => ce.stopPropagation(),
              children: [
                h.jsx("h3", {
                  className: "text-lg font-medium text-white mb-3",
                  children: "Seleziona variante"
                }),
                h.jsx("div", {
                  className: "space-y-2 max-h-60 overflow-y-auto",
                  children: Y.map((ce) => h.jsxs("button", {
                    onClick: () => kt(ce.id),
                    className: "w-full text-left p-3 bg-gray-700 hover:bg-gray-600 text-white rounded flex items-center",
                    children: [
                      h.jsx("span", {
                        className: "flex-1",
                        children: ce.label
                      }),
                      h.jsx("svg", {
                        className: "h-5 w-5",
                        viewBox: "0 0 20 20",
                        fill: "currentColor",
                        children: h.jsx("path", {
                          fillRule: "evenodd",
                          d: "M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",
                          clipRule: "evenodd"
                        })
                      })
                    ]
                  }, ce.id))
                }),
                h.jsx("div", {
                  className: "mt-4 flex justify-end",
                  children: h.jsx("button", {
                    onClick: () => j(false),
                    className: "px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-500",
                    children: "Annulla"
                  })
                })
              ]
            })
          })
        ]
      })
    });
  };
  Uv.propTypes = {
    pgn: fe.string.isRequired,
    onClose: fe.func.isRequired,
    nodeDescription: fe.string,
    canvasData: fe.object,
    selectedNodeId: fe.oneOfType([
      fe.number,
      fe.string
    ]),
    onUpdateCanvas: fe.func,
    onSelectNode: fe.func,
    onUpdateCanvasAndSelectNode: fe.func
  };
  const QN = "1. e4 c5 2. Nf3 d6 3. d4 cxd4 4. Nxd4 Nf6 5. f3 g6 6. c4 Bg7 7. Be3 O-O 8. Qd2 Nc6 9. Nc3", YN = (n) => n.split(/\s+/).filter((t) => !/^\d+\.$/.test(t)), Fy = ({ fullLines: n = [], onClose: e }) => {
    const [t, r] = R.useState(null), [i, l] = R.useState(true), [c, f] = R.useState("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"), [m, y] = R.useState([]), [x, C] = R.useState(false), [S, N] = R.useState(""), [P, O] = R.useState(""), [L, H] = R.useState([]), [W, T] = R.useState(false), Y = R.useRef(0), u = R.useRef(new Cr()), ge = R.useRef(null), [j, M] = R.useState(400), V = R.useRef(false), B = R.useRef(0), q = R.useRef(0), G = R.useRef(null), [F, Oe] = R.useState(0), [Le, Ge] = R.useState(null), [Ye, he] = R.useState({}), [Pe, pe] = R.useState(false), X = () => {
      Oe((Fe) => {
        const ke = Fe + 1;
        return Se(ke), ke;
      });
    }, oe = () => {
      Oe((Fe) => {
        const ke = Math.max(Fe - 1, -2);
        return Se(ke), ke;
      });
    }, Se = R.useCallback((Fe = 0) => {
      var _a3;
      const ke = window.innerWidth < 768;
      let ut;
      if (ke) ut = Math.min(window.innerWidth * 0.9, 380);
      else {
        const It = ((_a3 = G.current) == null ? void 0 : _a3.offsetWidth) || window.innerWidth * 0.5, en = window.innerHeight * 0.65;
        ut = Math.min(It * 0.7, en, 500);
      }
      const Pt = Fe * 20;
      M(Math.max(200, Math.min(ut + Pt, ke ? window.innerWidth * 0.9 : window.innerHeight * 0.75)));
    }, []);
    R.useEffect(() => {
      Se(F);
      const Fe = () => Se(F);
      return window.addEventListener("resize", Fe), () => window.removeEventListener("resize", Fe);
    }, [
      Se,
      F
    ]);
    const me = R.useCallback((Fe) => {
      window.innerWidth < 768 || (V.current = true, B.current = Fe.clientX, q.current = j, document.body.style.cursor = "col-resize", document.body.style.userSelect = "none");
    }, [
      j
    ]), Re = R.useCallback((Fe) => {
      if (!V.current) return;
      const ke = Fe.clientX - B.current, ut = window.innerHeight * 0.75, Pt = Math.min(Math.max(q.current + ke, 300), ut, window.innerWidth * 0.8);
      M(Pt), G.current && (G.current.style.minWidth = `${Pt + 300}px`), ge.current && (ge.current.style.minWidth = `${Pt + 80}px`);
    }, []), $e = R.useCallback(() => {
      V.current = false, document.body.style.cursor = "", document.body.style.userSelect = "";
    }, []);
    R.useEffect(() => (document.addEventListener("mousemove", Re), document.addEventListener("mouseup", $e), () => {
      document.removeEventListener("mousemove", Re), document.removeEventListener("mouseup", $e);
    }), [
      Re,
      $e
    ]);
    const ie = R.useRef(null), ye = R.useCallback((Fe = false) => {
      let ke;
      Fe && ie.current ? ke = ie.current : (ke = n.length > 0 ? n[Math.floor(Math.random() * n.length)] : QN, ie.current = ke);
      const ut = YN(ke);
      if (Y.current = 0, u.current.reset(), H(ut), f(u.current.fen()), y([]), C(false), N(""), O(""), t === "b" && ut.length > 0) {
        const Pt = ut[Y.current], It = u.current.move(Pt);
        It && (f(u.current.fen()), y((en) => [
          ...en,
          It
        ]), Y.current++);
      }
    }, [
      t
    ]);
    R.useEffect(() => {
      t && ye(false);
    }, [
      t,
      ye
    ]);
    const ve = () => t && ye(true), De = () => t && ye(false), Be = () => T(!W), et = (Fe, ke) => {
      if (x || u.current.turn() !== t) return Ge(null), false;
      try {
        const ut = {
          from: Fe,
          to: ke,
          promotion: "q"
        }, It = new Cr(u.current.fen()).move(ut);
        if (!It) return Ge(null), false;
        const en = L[Y.current];
        if (It.san !== en) return O(`Mossa errata! Atteso: ${en}`), setTimeout(() => O(""), 1e3), Ge(null), false;
        const on = u.current.move(ut);
        return f(u.current.fen()), y((Dt) => [
          ...Dt,
          on
        ]), Y.current++, le(Fe, ke), Ge(null), Y.current === L.length ? (C(true), N("Linea completata con successo!"), true) : (!u.current.isGameOver() && u.current.turn() !== t && setTimeout(() => {
          const Dt = L[Y.current], kt = u.current.move(Dt);
          kt && (f(u.current.fen()), y((En) => [
            ...En,
            kt
          ]), Y.current++, le(kt.from, kt.to), Y.current === L.length && (C(true), N("Linea completata con successo!")));
        }, 500), true);
      } catch (ut) {
        return console.error("Errore durante l'esecuzione della mossa:", ut), Ge(null), false;
      }
    }, le = (Fe, ke) => {
      he({
        [Fe]: {
          backgroundColor: "rgba(255, 170, 0, 0.5)"
        },
        [ke]: {
          backgroundColor: "rgba(255, 170, 0, 0.5)"
        }
      });
    }, Ne = R.useCallback((Fe) => {
      if (!Fe) return {};
      const ke = {};
      return u.current.moves({
        square: Fe,
        verbose: true
      }).forEach((Pt) => {
        ke[Pt.to] = {
          background: "radial-gradient(circle, rgba(0, 0, 0, 0.4) 19%, transparent 20%)",
          backgroundRepeat: "no-repeat",
          backgroundPosition: "center"
        };
      }), ke[Fe] = {
        backgroundColor: "rgba(0, 128, 255, 0.4)"
      }, ke;
    }, []), Ke = R.useCallback((Fe) => {
      if (!(x || u.current.turn() !== t)) {
        if (Le === Fe) {
          if (Ge(null), m.length > 0) {
            const ke = m[m.length - 1];
            le(ke.from, ke.to);
          } else he({});
          return;
        }
        if (Le) {
          const ke = u.current.get(Fe);
          if (ke && ke.color === t) {
            Ge(Fe), he(Ne(Fe));
            return;
          }
          if (new Cr(u.current.fen()).move({
            from: Le,
            to: Fe,
            promotion: "q"
          })) et(Le, Fe);
          else if (Ge(null), m.length > 0) {
            const It = m[m.length - 1];
            le(It.from, It.to);
          } else he({});
        } else {
          const ke = u.current.get(Fe);
          ke && ke.color === t && (Ge(Fe), he(Ne(Fe)));
        }
      }
    }, [
      Le,
      t,
      x,
      m,
      Ne,
      et
    ]), at = ({ piece: Fe }) => !x && Fe.charAt(0) === t, pt = R.useCallback((Fe, ke) => {
      u.current.turn() === t && Fe[0] === t && (pe(true), Ge(ke), he(Ne(ke)));
    }, [
      t,
      Ne
    ]), Vt = R.useCallback(() => {
      pe(false);
    }, []);
    return i ? h.jsx("div", {
      className: "fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 backdrop-blur-sm",
      style: {
        userSelect: "none",
        WebkitUserSelect: "none"
      },
      children: h.jsxs("div", {
        className: "bg-gray-800 rounded-lg shadow-2xl overflow-hidden max-w-5xl w-full mx-4",
        children: [
          h.jsxs("div", {
            className: "flex justify-between items-center p-4 border-b border-gray-700",
            children: [
              h.jsx("h2", {
                className: "text-xl font-semibold text-white",
                children: "Allenamento (Drill)"
              }),
              h.jsx("button", {
                onClick: e,
                className: "text-gray-400 hover:text-white transition-colors",
                children: h.jsx("svg", {
                  className: "h-6 w-6",
                  fill: "none",
                  viewBox: "0 0 24 24",
                  stroke: "currentColor",
                  children: h.jsx("path", {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M6 18L18 6M6 6l12 12"
                  })
                })
              })
            ]
          }),
          h.jsxs("div", {
            className: "flex flex-col items-center p-8",
            children: [
              h.jsx("h2", {
                className: "text-2xl font-bold text-white mb-6 text-center",
                children: "Scegli colore"
              }),
              h.jsxs("div", {
                className: "flex gap-6 mb-8",
                children: [
                  h.jsxs("button", {
                    onClick: () => {
                      r("w"), l(false);
                    },
                    className: "w-32 h-32 bg-white text-gray-800 hover:bg-gray-200 rounded-lg shadow-lg transition flex flex-col items-center justify-center",
                    children: [
                      h.jsx("span", {
                        className: "text-6xl mb-2",
                        children: "\u2654"
                      }),
                      h.jsx("span", {
                        className: "font-medium",
                        children: "Bianco"
                      })
                    ]
                  }),
                  h.jsxs("button", {
                    onClick: () => {
                      r("b"), l(false);
                    },
                    className: "w-32 h-32 bg-gray-900 text-white hover:bg-gray-700 rounded-lg shadow-lg transition flex flex-col items-center justify-center",
                    children: [
                      h.jsx("span", {
                        className: "text-6xl mb-2",
                        children: "\u265A"
                      }),
                      h.jsx("span", {
                        className: "font-medium",
                        children: "Nero"
                      })
                    ]
                  })
                ]
              }),
              h.jsx("button", {
                onClick: e,
                className: "bg-gray-700 hover:bg-gray-600 text-white px-5 py-2 rounded transition",
                children: "Annulla"
              })
            ]
          })
        ]
      })
    }) : h.jsx("div", {
      className: "fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 backdrop-blur-sm",
      children: h.jsxs("div", {
        ref: G,
        className: "bg-gray-800 rounded-lg shadow-2xl overflow-hidden max-h-[90vh] flex flex-col min-w-[300px]",
        style: {
          maxWidth: window.innerWidth < 768 ? "99%" : "96%"
        },
        children: [
          h.jsxs("div", {
            className: "flex justify-between items-center p-3 bg-gray-900 border-b border-gray-700",
            children: [
              h.jsx("h2", {
                className: "text-lg font-bold text-white",
                children: "Allenamento (Drill)"
              }),
              h.jsxs("div", {
                className: "flex items-center gap-3",
                children: [
                  h.jsx("button", {
                    onClick: Be,
                    className: "md:hidden p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700",
                    children: h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      viewBox: "0 0 24 24",
                      stroke: "currentColor",
                      children: W ? h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M20 12H4"
                      }) : h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M12 4v16m8-8H4"
                      })
                    })
                  }),
                  h.jsx("button", {
                    onClick: e,
                    className: "p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700",
                    children: h.jsx("svg", {
                      className: "w-5 h-5",
                      viewBox: "0 0 20 20",
                      fill: "currentColor",
                      children: h.jsx("path", {
                        fillRule: "evenodd",
                        d: "M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",
                        clipRule: "evenodd"
                      })
                    })
                  })
                ]
              })
            ]
          }),
          h.jsxs("div", {
            className: "flex flex-col md:flex-row flex-1 overflow-y-auto",
            children: [
              h.jsxs("div", {
                ref: ge,
                className: "md:w-2/3 p-2 md:p-4 flex flex-col items-center overflow-y-auto ",
                style: {
                  minWidth: window.innerWidth >= 768 ? `${j + 100}px` : "auto"
                },
                children: [
                  S && h.jsx("div", {
                    className: "mb-3 w-full md:hidden",
                    children: h.jsxs("div", {
                      className: `p-3 rounded-md text-center font-medium shadow-lg ${x ? "bg-green-700/80 text-white border border-green-500" : "bg-blue-600/30 text-white"}`,
                      children: [
                        x && h.jsx("span", {
                          className: "inline-block mr-2",
                          children: h.jsx("svg", {
                            className: "w-5 h-5 inline",
                            fill: "currentColor",
                            viewBox: "0 0 20 20",
                            children: h.jsx("path", {
                              fillRule: "evenodd",
                              d: "M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",
                              clipRule: "evenodd"
                            })
                          })
                        }),
                        S
                      ]
                    })
                  }),
                  h.jsxs("div", {
                    className: "relative",
                    style: {
                      width: `${j}px`,
                      height: `${j}px`,
                      maxWidth: "95vw",
                      borderRadius: "8px",
                      overflow: "hidden",
                      userSelect: "none",
                      WebkitUserSelect: "none"
                    },
                    children: [
                      h.jsx("div", {
                        className: "absolute -right-2 top-0 bottom-0 w-4 cursor-col-resize z-20 hover:bg-gray-600 transition-colors",
                        onMouseDown: me,
                        style: {
                          display: window.innerWidth >= 768 ? "block" : "none",
                          right: `${-j / 100}px`
                        }
                      }),
                      P && h.jsx("div", {
                        className: "absolute inset-0 flex items-center justify-center bg-black bg-opacity-40 z-10 rounded",
                        children: h.jsx("div", {
                          className: "text-white bg-red-800 px-4 py-2 rounded shadow-lg",
                          children: P
                        })
                      }),
                      h.jsx(mb, {
                        position: c,
                        boardWidth: j,
                        areArrowsAllowed: true,
                        customDarkSquareStyle: {
                          backgroundColor: "#ad7456"
                        },
                        customLightSquareStyle: {
                          backgroundColor: "#ead8c0"
                        },
                        onPieceDrop: et,
                        boardOrientation: t === "b" ? "black" : "white",
                        isDraggablePiece: at,
                        customPieces: vb,
                        arePremovesAllowed: true,
                        clearPremovesOnRightClick: true,
                        customSquareStyles: Ye,
                        onSquareClick: Ke,
                        onPieceDragBegin: pt,
                        onPieceDragEnd: Vt,
                        customDropSquareStyle: {
                          boxShadow: "none",
                          backgroundColor: "none"
                        }
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "flex justify-center space-x-3 mt-4 w-full",
                    style: {
                      maxWidth: `${j}px`
                    },
                    children: [
                      h.jsx("button", {
                        onClick: ve,
                        className: "flex-1 bg-gray-700 hover:bg-gray-600 text-gray-100 px-3 py-3 rounded-md transition-all text-sm flex items-center justify-center gap-2 border border-gray-600",
                        children: "Ricomincia"
                      }),
                      h.jsx("button", {
                        onClick: De,
                        className: "flex-1 bg-gray-700 hover:bg-gray-600 text-gray-100 px-3 py-3 rounded-md transition-all text-sm flex items-center justify-center gap-2 border border-gray-600",
                        children: "Nuova linea"
                      })
                    ]
                  }),
                  W && h.jsxs("div", {
                    className: "md:hidden mt-6 w-full border-t border-gray-700 pt-4",
                    children: [
                      h.jsxs("div", {
                        className: "bg-gray-900 p-3 rounded mb-4",
                        children: [
                          h.jsx("h4", {
                            className: "text-md font-medium text-gray-300 mb-2",
                            children: "Giocatore"
                          }),
                          h.jsxs("div", {
                            className: "flex items-center",
                            children: [
                              h.jsx("div", {
                                className: `w-4 h-4 rounded-full mr-2 ${t === "w" ? "bg-white" : "bg-black"}`
                              }),
                              h.jsx("span", {
                                className: "text-gray-300",
                                children: t === "w" ? "Bianco" : "Nero"
                              })
                            ]
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "bg-gray-900 p-3 rounded mb-4",
                        children: [
                          h.jsx("h4", {
                            className: "text-md font-medium text-gray-300 mb-2",
                            children: "Mosse giocate"
                          }),
                          h.jsx("div", {
                            className: "max-h-32 overflow-y-auto",
                            children: m.length > 0 ? h.jsx("div", {
                              className: "grid grid-cols-2 gap-2",
                              children: m.map((Fe, ke) => h.jsxs("div", {
                                className: `p-2 text-sm rounded ${t === "w" && ke % 2 === 0 || t === "b" && ke % 2 === 1 ? "bg-indigo-600/30 text-white" : "bg-gray-800 text-gray-300"}`,
                                children: [
                                  ke % 2 === 0 ? `${Math.floor(ke / 2) + 1}.` : "",
                                  " ",
                                  Fe.san
                                ]
                              }, ke))
                            }) : h.jsx("p", {
                              className: "text-gray-500 italic text-center py-2",
                              children: "Nessuna mossa giocata"
                            })
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "bg-gray-900/50 p-3 rounded",
                        children: [
                          h.jsx("h4", {
                            className: "text-sm font-medium text-gray-400 mb-2",
                            children: "Regole"
                          }),
                          h.jsxs("ul", {
                            className: "text-sm text-gray-400 list-disc list-inside space-y-1",
                            children: [
                              h.jsx("li", {
                                children: "Segui la linea di mosse prestabilita"
                              }),
                              h.jsx("li", {
                                children: "Il computer risponde automaticamente"
                              }),
                              h.jsx("li", {
                                children: "Completa tutta la sequenza per vincere"
                              })
                            ]
                          })
                        ]
                      })
                    ]
                  })
                ]
              }),
              h.jsxs("div", {
                className: "hidden md:block md:w-1/3 bg-gray-800 p-4 overflow-y-auto",
                style: {
                  userSelect: "none",
                  WebkitUserSelect: "none"
                },
                children: [
                  h.jsx("h3", {
                    className: "text-lg font-medium text-white mb-3",
                    children: "Dettagli allenamento"
                  }),
                  S && h.jsxs("div", {
                    className: `mb-4 p-3 rounded-md shadow-lg ${x ? "bg-green-700/80 text-white border border-green-500" : "bg-blue-600/30 text-white"}`,
                    children: [
                      x && h.jsx("span", {
                        className: "inline-block mr-2",
                        children: h.jsx("svg", {
                          className: "w-5 h-5 inline",
                          fill: "currentColor",
                          viewBox: "0 0 20 20",
                          children: h.jsx("path", {
                            fillRule: "evenodd",
                            d: "M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",
                            clipRule: "evenodd"
                          })
                        })
                      }),
                      h.jsx("span", {
                        className: "font-medium",
                        children: S
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-900 p-3 rounded mb-4",
                    children: [
                      h.jsx("h4", {
                        className: "text-md font-medium text-gray-300 mb-2",
                        children: "Giocatore"
                      }),
                      h.jsxs("div", {
                        className: "flex items-center",
                        children: [
                          h.jsx("div", {
                            className: `w-4 h-4 rounded-full mr-2 ${t === "w" ? "bg-white" : "bg-black"}`
                          }),
                          h.jsx("span", {
                            className: "text-gray-300",
                            children: t === "w" ? "Bianco" : "Nero"
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-900 p-3 rounded mb-4",
                    children: [
                      h.jsx("h4", {
                        className: "text-md font-medium text-gray-300 mb-2",
                        children: "Mosse"
                      }),
                      h.jsx("div", {
                        className: "h-48 overflow-y-auto",
                        children: m.length > 0 ? h.jsx("div", {
                          className: "grid grid-cols-2 gap-2",
                          children: m.map((Fe, ke) => h.jsxs("div", {
                            className: `p-2 text-sm rounded ${t === "w" && ke % 2 === 0 || t === "b" && ke % 2 === 1 ? "bg-indigo-600/30 text-white" : "bg-gray-800 text-gray-300"}`,
                            children: [
                              ke % 2 === 0 ? `${Math.floor(ke / 2) + 1}.` : "",
                              " ",
                              Fe.san
                            ]
                          }, ke))
                        }) : h.jsx("p", {
                          className: "text-gray-500 italic",
                          children: "Nessuna mossa giocata"
                        })
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "mt-4 bg-gray-900/50 p-3 rounded mb-4",
                    children: [
                      h.jsx("h4", {
                        className: "text-sm font-medium text-gray-400 mb-2",
                        children: "Regole"
                      }),
                      h.jsxs("ul", {
                        className: "text-sm text-gray-400 list-disc list-inside space-y-1",
                        children: [
                          h.jsx("li", {
                            children: "Segui la linea di mosse prestabilita"
                          }),
                          h.jsx("li", {
                            children: "Il computer risponde automaticamente"
                          }),
                          h.jsx("li", {
                            children: "Completa tutta la sequenza per vincere"
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsx("div", {
                    className: "relative border-t border-gray-700 pt-4",
                    children: h.jsxs("div", {
                      className: "flex justify-center space-x-4",
                      children: [
                        h.jsx("button", {
                          onClick: oe,
                          className: "p-2 rounded bg-gray-700 hover:bg-gray-600 text-gray-300",
                          title: "Riduci dimensione",
                          children: h.jsx("svg", {
                            className: "w-5 h-5",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                            children: h.jsx("path", {
                              strokeLinecap: "round",
                              strokeLinejoin: "round",
                              strokeWidth: 2,
                              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"
                            })
                          })
                        }),
                        h.jsx("button", {
                          onClick: X,
                          className: "p-2 rounded bg-gray-700 hover:bg-gray-600 text-gray-300",
                          title: "Aumenta dimensione",
                          children: h.jsx("svg", {
                            className: "w-5 h-5",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                            children: h.jsx("path", {
                              strokeLinecap: "round",
                              strokeLinejoin: "round",
                              strokeWidth: 2,
                              d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"
                            })
                          })
                        })
                      ]
                    })
                  })
                ]
              })
            ]
          })
        ]
      })
    });
  };
  Fy.propTypes = {
    fullLines: fe.arrayOf(fe.string),
    onClose: fe.func.isRequired
  };
  Fy.defaultProps = {
    fullLines: []
  };
  const yb = ({ isOpen: n, onClose: e }) => {
    const [t, r] = R.useState("intro"), [i, l] = R.useState(false), c = R.useRef(null);
    R.useEffect(() => {
      n && l(true);
    }, [
      n
    ]);
    const f = () => {
      l(false), setTimeout(() => {
        e();
      }, 300);
    }, m = (x) => {
      x.stopPropagation();
    }, y = (x) => {
      const C = document.getElementById(x);
      C && C.scrollIntoView({
        behavior: "smooth"
      }), r(x);
    };
    return n ? h.jsx("div", {
      className: "fixed inset-0 bg-black/80 z-50 flex items-center justify-center transition-opacity duration-300",
      style: {
        opacity: i ? 1 : 0
      },
      onClick: f,
      children: h.jsxs("div", {
        ref: c,
        className: `bg-gray-900 w-full max-w-5xl max-h-[90vh] rounded-xl shadow-2xl flex flex-col md:flex-row overflow-hidden transition-transform duration-300 ${i ? "scale-100" : "scale-95"}`,
        onClick: m,
        children: [
          h.jsxs("div", {
            className: "bg-gray-800 w-full md:w-64 p-5 shrink-0 overflow-y-auto md:max-h-[90vh]",
            children: [
              h.jsxs("div", {
                className: "flex items-center gap-3 mb-8",
                children: [
                  h.jsx("div", {
                    className: "w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center",
                    children: h.jsx("svg", {
                      className: "w-5 h-5 text-gray-900",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                      })
                    })
                  }),
                  h.jsx("h2", {
                    className: "text-xl font-bold text-white",
                    children: "ChessNotes"
                  })
                ]
              }),
              h.jsxs("nav", {
                className: "space-y-1",
                children: [
                  h.jsx(ga, {
                    id: "intro",
                    title: "Introduzione",
                    active: t === "intro",
                    onClick: () => y("intro"),
                    icon: h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                      })
                    })
                  }),
                  h.jsx(ga, {
                    id: "canvas",
                    title: "Area di Lavoro",
                    active: t === "canvas",
                    onClick: () => y("canvas"),
                    icon: h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M3 3h18v18H3z"
                      })
                    })
                  }),
                  h.jsx(ga, {
                    id: "nodes",
                    title: "Nodi e Varianti",
                    active: t === "nodes",
                    onClick: () => y("nodes"),
                    icon: h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M12 4v16m8-8H4"
                      })
                    })
                  }),
                  h.jsx(ga, {
                    id: "annotations",
                    title: "Annotazioni",
                    active: t === "annotations",
                    onClick: () => y("annotations"),
                    icon: h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"
                      })
                    })
                  }),
                  h.jsx(ga, {
                    id: "chessboard",
                    title: "Scacchiera",
                    active: t === "chessboard",
                    onClick: () => y("chessboard"),
                    icon: h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"
                      })
                    })
                  }),
                  h.jsx(ga, {
                    id: "drill",
                    title: "Modalit\xE0 Drill",
                    active: t === "drill",
                    onClick: () => y("drill"),
                    icon: h.jsxs("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: [
                        h.jsx("circle", {
                          cx: "12",
                          cy: "12",
                          r: "9"
                        }),
                        h.jsx("circle", {
                          cx: "12",
                          cy: "12",
                          r: "6"
                        }),
                        h.jsx("circle", {
                          cx: "12",
                          cy: "12",
                          r: "3"
                        }),
                        h.jsx("circle", {
                          cx: "12",
                          cy: "12",
                          r: "1",
                          fill: "currentColor"
                        })
                      ]
                    })
                  }),
                  h.jsx(ga, {
                    id: "import-export",
                    title: "Import/Export",
                    active: t === "import-export",
                    onClick: () => y("import-export"),
                    icon: h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
                      })
                    })
                  }),
                  h.jsx(ga, {
                    id: "shortcuts",
                    title: "Scorciatoie",
                    active: t === "shortcuts",
                    onClick: () => y("shortcuts"),
                    icon: h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"
                      })
                    })
                  })
                ]
              })
            ]
          }),
          h.jsxs("div", {
            className: "flex-1 p-6 overflow-y-auto max-h-[90vh] text-gray-300",
            children: [
              h.jsx("button", {
                onClick: f,
                className: "absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",
                children: h.jsx("svg", {
                  className: "w-5 h-5",
                  fill: "none",
                  stroke: "currentColor",
                  viewBox: "0 0 24 24",
                  children: h.jsx("path", {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M6 18L18 6M6 6l12 12"
                  })
                })
              }),
              h.jsxs("section", {
                id: "intro",
                className: "mb-12",
                children: [
                  h.jsx("h3", {
                    className: "text-2xl font-bold text-amber-500 mb-4",
                    children: "Benvenuto in ChessNotes"
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "ChessNotes \xE8 uno strumento avanzato per organizzare il tuo repertorio di aperture scacchistiche. A differenza dei tradizionali strumenti di studio, ChessNotes ti permette di creare alberi di varianti completamente personalizzabili, con annotazioni e note dettagliate per ogni mossa."
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg mb-4",
                    children: [
                      h.jsx("h4", {
                        className: "text-lg font-semibold text-amber-400 mb-2",
                        children: "Iniziare \xE8 semplice:"
                      }),
                      h.jsxs("ol", {
                        className: "list-decimal list-inside space-y-2 text-gray-300",
                        children: [
                          h.jsx("li", {
                            children: "Crea nodi per rappresentare posizioni chiave"
                          }),
                          h.jsx("li", {
                            children: "Collegali per formare sequenze di mosse"
                          }),
                          h.jsx("li", {
                            children: "Aggiungi annotazioni per inserire note o concetti importanti"
                          }),
                          h.jsx("li", {
                            children: "Usa la scacchiera per visualizzare e analizzare le posizioni"
                          }),
                          h.jsx("li", {
                            children: "Allenati con la modalit\xE0 drill per verificare la tua preparazione"
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsx("div", {
                    className: "border-l-4 border-amber-500 pl-4 italic",
                    children: '"ChessNotes combina la flessibilit\xE0 di un mind-map con la potenza di un database scacchistico."'
                  })
                ]
              }),
              h.jsxs("section", {
                id: "canvas",
                className: "mb-12",
                children: [
                  h.jsx("h3", {
                    className: "text-2xl font-bold text-amber-500 mb-4",
                    children: "Area di Lavoro (Canvas)"
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "Il canvas \xE8 il tuo spazio di lavoro principale. Qui puoi organizzare liberamente i nodi e le annotazioni, creando un vero e proprio albero di varianti delle aperture che stai studiando."
                  }),
                  h.jsxs("div", {
                    className: "grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",
                    children: [
                      h.jsx(ig, {
                        title: "Navigazione Intuitiva",
                        description: "Muovi liberamente la visuale con drag & drop, zooma per vedere l'intero repertorio o concentrarti su una specifica variante.",
                        icon: h.jsx("svg", {
                          className: "w-8 h-8 text-amber-500",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                          children: h.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5"
                          })
                        })
                      }),
                      h.jsx(ig, {
                        title: "Organizzazione Visuale",
                        description: "Posiziona i nodi come preferisci per creare una struttura che rispecchi la tua logica di studio.",
                        icon: h.jsx("svg", {
                          className: "w-8 h-8 text-amber-500",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                          children: h.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm0 8a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zm12 0a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"
                          })
                        })
                      })
                    ]
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "Ogni elemento sul canvas pu\xF2 essere selezionato con un click. Elementi selezionati possono essere modificati tramite la sidebar o spostati trascinandoli con il mouse."
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg text-sm border-l-4 border-blue-500",
                    children: [
                      h.jsx("strong", {
                        className: "text-blue-400",
                        children: "Pro Tip:"
                      }),
                      " Usa lo zoom (rotellina del mouse o pinch su touchpad) per avere una visione d'insieme quando il tuo repertorio cresce."
                    ]
                  })
                ]
              }),
              h.jsxs("section", {
                id: "nodes",
                className: "mb-12",
                children: [
                  h.jsx("h3", {
                    className: "text-2xl font-bold text-amber-500 mb-4",
                    children: "Nodi e Varianti"
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "I nodi sono gli elementi principali di ChessNotes. Ogni nodo rappresenta una posizione scacchistica e contiene informazioni sulla mossa che ha portato a quella posizione."
                  }),
                  h.jsxs("div", {
                    className: "space-y-6 mb-6",
                    children: [
                      h.jsxs("div", {
                        className: "flex flex-col md:flex-row gap-4 items-start md:items-center bg-gray-800 p-4 rounded-lg",
                        children: [
                          h.jsx("div", {
                            className: "flex-shrink-0",
                            children: h.jsx("div", {
                              className: "w-12 h-12 bg-emerald-900/30 border border-emerald-700/50 rounded-lg flex items-center justify-center",
                              children: h.jsx("span", {
                                className: "text-emerald-400 font-bold",
                                children: "e4"
                              })
                            })
                          }),
                          h.jsxs("div", {
                            children: [
                              h.jsx("h4", {
                                className: "text-lg font-semibold text-emerald-400 mb-1",
                                children: "Creare un nuovo nodo"
                              }),
                              h.jsxs("p", {
                                className: "text-gray-300",
                                children: [
                                  'Clicca sul pulsante "Nuovo Nodo" nella sidebar o premi ',
                                  h.jsx("kbd", {
                                    className: "px-2 py-1 bg-gray-700 rounded text-xs",
                                    children: "N"
                                  }),
                                  " sulla tastiera. Poi posiziona il nodo sul canvas e assegnagli una mossa."
                                ]
                              })
                            ]
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "flex flex-col md:flex-row gap-4 items-start md:items-center bg-gray-800 p-4 rounded-lg",
                        children: [
                          h.jsx("div", {
                            className: "flex-shrink-0",
                            children: h.jsx("div", {
                              className: "w-12 h-12 flex items-center justify-center",
                              children: h.jsx("svg", {
                                className: "w-10 h-10 text-amber-500",
                                fill: "none",
                                stroke: "currentColor",
                                viewBox: "0 0 24 24",
                                children: h.jsx("path", {
                                  strokeLinecap: "round",
                                  strokeLinejoin: "round",
                                  strokeWidth: 2,
                                  d: "M17 8l4 4m0 0l-4 4m4-4H3"
                                })
                              })
                            })
                          }),
                          h.jsxs("div", {
                            children: [
                              h.jsx("h4", {
                                className: "text-lg font-semibold text-amber-400 mb-1",
                                children: "Collegare i nodi"
                              }),
                              h.jsxs("p", {
                                className: "text-gray-300",
                                children: [
                                  "Seleziona un nodo e premi ",
                                  h.jsx("kbd", {
                                    className: "px-2 py-1 bg-gray-700 rounded text-xs",
                                    children: "C"
                                  }),
                                  ", poi clicca su un altro nodo per creare una connessione. Le connessioni rappresentano la sequenza di mosse nell'albero di varianti."
                                ]
                              })
                            ]
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "flex flex-col md:flex-row gap-4 items-start md:items-center bg-gray-800 p-4 rounded-lg",
                        children: [
                          h.jsx("div", {
                            className: "flex-shrink-0",
                            children: h.jsx("div", {
                              className: "w-12 h-12 flex items-center justify-center",
                              children: h.jsx("svg", {
                                className: "w-10 h-10 text-red-500",
                                fill: "none",
                                stroke: "currentColor",
                                viewBox: "0 0 24 24",
                                children: h.jsx("path", {
                                  strokeLinecap: "round",
                                  strokeLinejoin: "round",
                                  strokeWidth: 2,
                                  d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                                })
                              })
                            })
                          }),
                          h.jsxs("div", {
                            children: [
                              h.jsx("h4", {
                                className: "text-lg font-semibold text-red-400 mb-1",
                                children: "Eliminare un nodo"
                              }),
                              h.jsxs("p", {
                                className: "text-gray-300",
                                children: [
                                  'Seleziona un nodo e clicca sul pulsante "Elimina Nodo" nella sidebar o premi il tasto ',
                                  h.jsx("kbd", {
                                    className: "px-2 py-1 bg-gray-700 rounded text-xs",
                                    children: "\\"
                                  }),
                                  " (backslash). Attenzione: eliminando un nodo si eliminano anche tutti i suoi nodi figli."
                                ]
                              })
                            ]
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg text-sm border-l-4 border-emerald-500",
                    children: [
                      h.jsx("strong", {
                        className: "text-emerald-400",
                        children: "Suggerimento:"
                      }),
                      " Puoi aggiungere note dettagliate a ogni nodo utilizzando il campo descrizione nella sidebar quando un nodo \xE8 selezionato."
                    ]
                  })
                ]
              }),
              h.jsxs("section", {
                id: "annotations",
                className: "mb-12",
                children: [
                  h.jsx("h3", {
                    className: "text-2xl font-bold text-amber-500 mb-4",
                    children: "Annotazioni"
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "Le annotazioni ti permettono di aggiungere note, commenti o concetti strategici che non sono specificamente legati a una singola mossa, ma riguardano l'apertura nel suo complesso."
                  }),
                  h.jsxs("div", {
                    className: "flex flex-col md:flex-row gap-4 items-start md:items-center bg-gray-800 p-4 rounded-lg mb-6",
                    children: [
                      h.jsx("div", {
                        className: "flex-shrink-0",
                        children: h.jsx("div", {
                          className: "w-12 h-12 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center justify-center",
                          children: h.jsx("svg", {
                            className: "w-6 h-6 text-blue-400",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                            children: h.jsx("path", {
                              strokeLinecap: "round",
                              strokeLinejoin: "round",
                              strokeWidth: 2,
                              d: "M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"
                            })
                          })
                        })
                      }),
                      h.jsxs("div", {
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-blue-400 mb-1",
                            children: "Creare una nuova annotazione"
                          }),
                          h.jsxs("p", {
                            className: "text-gray-300",
                            children: [
                              'Clicca sul pulsante "Annotazione" nella sidebar o premi ',
                              h.jsx("kbd", {
                                className: "px-2 py-1 bg-gray-700 rounded text-xs",
                                children: "A"
                              }),
                              ". Posiziona l'annotazione sul canvas vicino ai nodi a cui si riferisce."
                            ]
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "Le annotazioni sono perfette per:"
                  }),
                  h.jsxs("ul", {
                    className: "list-disc list-inside space-y-2 mb-6 pl-4",
                    children: [
                      h.jsx("li", {
                        children: "Idee strategiche generali"
                      }),
                      h.jsx("li", {
                        children: "Temi posizionali ricorrenti"
                      }),
                      h.jsx("li", {
                        children: "Riferimenti a partite famose"
                      }),
                      h.jsx("li", {
                        children: "Consigli personali per ricordare una linea"
                      }),
                      h.jsx("li", {
                        children: "Alternative da esplorare in futuro"
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg text-sm border-l-4 border-blue-500",
                    children: [
                      h.jsx("strong", {
                        className: "text-blue-400",
                        children: "Pro Tip:"
                      }),
                      " Usa le annotazioni per evidenziare i temi tattici ricorrenti in un'apertura, cos\xEC da riconoscerli pi\xF9 facilmente durante le partite reali."
                    ]
                  })
                ]
              }),
              h.jsxs("section", {
                id: "chessboard",
                className: "mb-12",
                children: [
                  h.jsx("h3", {
                    className: "text-2xl font-bold text-amber-500 mb-4",
                    children: "Scacchiera"
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "La scacchiera interattiva ti permette di visualizzare e analizzare le posizioni corrispondenti ai nodi selezionati, oltre a registrare nuove mosse per espandere il tuo repertorio."
                  }),
                  h.jsxs("div", {
                    className: "grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",
                    children: [
                      h.jsx(ig, {
                        title: "Analisi Visiva",
                        description: "Visualizza la posizione esatta corrispondente a ciascun nodo per un'analisi pi\xF9 profonda.",
                        icon: h.jsx("svg", {
                          className: "w-8 h-8 text-amber-500",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                          children: h.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"
                          })
                        })
                      }),
                      h.jsx(ig, {
                        title: "Registrazione Mosse",
                        description: "Aggiungi nuove mosse al tuo repertorio eseguendole direttamente sulla scacchiera.",
                        icon: h.jsx("svg", {
                          className: "w-8 h-8 text-amber-500",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                          children: h.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M12 6v6m0 0v6m0-6h6m-6 0H6"
                          })
                        })
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "p-4 bg-gray-800 rounded-lg mb-6",
                    children: [
                      h.jsx("h4", {
                        className: "text-lg font-semibold text-amber-400 mb-2",
                        children: "Come utilizzare la scacchiera:"
                      }),
                      h.jsxs("ol", {
                        className: "list-decimal list-inside space-y-2 text-gray-300",
                        children: [
                          h.jsx("li", {
                            children: "Seleziona un nodo sul canvas"
                          }),
                          h.jsx("li", {
                            children: 'Clicca sul pulsante "Scacchiera" nella sidebar'
                          }),
                          h.jsx("li", {
                            children: "Esplora la posizione o aggiungi nuove mosse"
                          }),
                          h.jsx("li", {
                            children: "Le mosse eseguite possono essere salvate come nuovi nodi collegati"
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg text-sm border-l-4 border-purple-500",
                    children: [
                      h.jsx("strong", {
                        className: "text-purple-400",
                        children: "Funzionalit\xE0 Avanzata:"
                      }),
                      " La scacchiera mostra automaticamente il FEN (Forsyth-Edwards Notation) della posizione, che puoi copiare per utilizzarlo in altri software di analisi."
                    ]
                  })
                ]
              }),
              h.jsxs("section", {
                id: "drill",
                className: "mb-12",
                children: [
                  h.jsx("h3", {
                    className: "text-2xl font-bold text-amber-500 mb-4",
                    children: "Modalit\xE0 Drill"
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "La modalit\xE0 Drill (allenamento) ti permette di testare la tua conoscenza del repertorio che hai creato, aiutandoti a memorizzare le mosse attraverso la pratica attiva."
                  }),
                  h.jsxs("div", {
                    className: "p-4 bg-gray-800 rounded-lg mb-6",
                    children: [
                      h.jsx("h4", {
                        className: "text-lg font-semibold text-amber-400 mb-2",
                        children: "Come funziona:"
                      }),
                      h.jsxs("ol", {
                        className: "list-decimal list-inside space-y-2 text-gray-300",
                        children: [
                          h.jsx("li", {
                            children: "Seleziona un nodo da cui iniziare l'allenamento"
                          }),
                          h.jsx("li", {
                            children: 'Clicca sul pulsante "Allenamento" nella sidebar'
                          }),
                          h.jsx("li", {
                            children: "Il software ti mostrer\xE0 la posizione e ti chieder\xE0 di eseguire la mossa corretta"
                          }),
                          h.jsx("li", {
                            children: "Riceverai feedback immediato sulla tua risposta"
                          }),
                          h.jsx("li", {
                            children: "Continua a seguire il percorso di mosse fino alla fine della variante"
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "flex flex-col md:flex-row gap-6 mb-6",
                    children: [
                      h.jsxs("div", {
                        className: "flex-1 bg-gray-800 p-4 rounded-lg border-t-4 border-purple-500",
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-purple-400 mb-2",
                            children: "Vantaggi dell'allenamento"
                          }),
                          h.jsxs("ul", {
                            className: "list-disc list-inside space-y-1 text-gray-300",
                            children: [
                              h.jsx("li", {
                                children: "Rinforza la memoria muscolare"
                              }),
                              h.jsx("li", {
                                children: "Identifica le varianti che richiedono pi\xF9 studio"
                              }),
                              h.jsx("li", {
                                children: "Aumenta la velocit\xE0 di riconoscimento delle posizioni"
                              }),
                              h.jsx("li", {
                                children: "Rende automatiche le risposte alle mosse avversarie"
                              })
                            ]
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "flex-1 bg-gray-800 p-4 rounded-lg border-t-4 border-amber-500",
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-amber-400 mb-2",
                            children: "Personalizzazione"
                          }),
                          h.jsx("p", {
                            className: "text-gray-300",
                            children: "La modalit\xE0 Drill \xE8 altamente personalizzabile: puoi scegliere da quale posizione iniziare, quale lato della scacchiera giocare, e quanto in profondit\xE0 esplorare le varianti del tuo repertorio."
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg text-sm border-l-4 border-purple-500",
                    children: [
                      h.jsx("strong", {
                        className: "text-purple-400",
                        children: "Suggerimento:"
                      }),
                      " Pratica regolarmente con la modalit\xE0 Drill prima di tornei o partite importanti per rinfrescare la memoria sulle tue linee preparate."
                    ]
                  })
                ]
              }),
              h.jsxs("section", {
                id: "import-export",
                className: "mb-12",
                children: [
                  h.jsx("h3", {
                    className: "text-2xl font-bold text-amber-500 mb-4",
                    children: "Import/Export"
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "ChessNotes offre funzionalit\xE0 avanzate per importare ed esportare il tuo lavoro, garantendo la portabilit\xE0 e la sicurezza dei tuoi dati."
                  }),
                  h.jsxs("div", {
                    className: "grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",
                    children: [
                      h.jsxs("div", {
                        className: "bg-gray-800 p-4 rounded-lg border-l-4 border-green-500",
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-green-400 mb-2",
                            children: "Importazione"
                          }),
                          h.jsx("p", {
                            className: "text-gray-300 mb-3",
                            children: "Importa repertori precedentemente salvati in formato JSON."
                          }),
                          h.jsxs("ol", {
                            className: "list-decimal list-inside space-y-1 text-sm text-gray-400",
                            children: [
                              h.jsx("li", {
                                children: 'Clicca sul pulsante "Importa" nella sidebar'
                              }),
                              h.jsx("li", {
                                children: "Seleziona il file JSON dal tuo computer"
                              }),
                              h.jsx("li", {
                                children: "Il repertorio verr\xE0 caricato sul canvas"
                              })
                            ]
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "bg-gray-800 p-4 rounded-lg border-l-4 border-blue-500",
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-blue-400 mb-2",
                            children: "Esportazione PGN"
                          }),
                          h.jsx("p", {
                            className: "text-gray-300 mb-3",
                            children: "Copia il PGN (Portable Game Notation) di una variante selezionata."
                          }),
                          h.jsxs("ol", {
                            className: "list-decimal list-inside space-y-1 text-sm text-gray-400",
                            children: [
                              h.jsx("li", {
                                children: "Seleziona un nodo sul canvas"
                              }),
                              h.jsx("li", {
                                children: "Il PGN appare nella sidebar"
                              }),
                              h.jsx("li", {
                                children: 'Clicca su "Copia" per copiarlo negli appunti'
                              }),
                              h.jsx("li", {
                                children: "Incollalo in qualsiasi software di scacchi compatibile"
                              })
                            ]
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg mb-6",
                    children: [
                      h.jsx("h4", {
                        className: "text-lg font-semibold text-amber-400 mb-2",
                        children: "Backup Automatico"
                      }),
                      h.jsx("p", {
                        className: "text-gray-300",
                        children: "ChessNotes salva automaticamente il tuo lavoro nel localStorage del browser. Tuttavia, \xE8 consigliabile esportare regolarmente i tuoi dati in formato JSON come backup aggiuntivo, soprattutto prima di operazioni di pulizia del browser."
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg text-sm border-l-4 border-purple-500",
                    children: [
                      h.jsx("strong", {
                        className: "text-purple-400",
                        children: "Pro Tip:"
                      }),
                      " Il formato JSON ti permette di condividere facilmente i tuoi repertori con altri utenti di ChessNotes o di mantenerli sincronizzati tra diversi dispositivi."
                    ]
                  })
                ]
              }),
              h.jsxs("section", {
                id: "shortcuts",
                className: "mb-12",
                children: [
                  h.jsx("h3", {
                    className: "text-2xl font-bold text-amber-500 mb-4",
                    children: "Scorciatoie da Tastiera"
                  }),
                  h.jsx("p", {
                    className: "mb-4",
                    children: "ChessNotes offre numerose scorciatoie da tastiera per velocizzare il tuo workflow e renderti pi\xF9 efficiente nella creazione e gestione del tuo repertorio."
                  }),
                  h.jsxs("div", {
                    className: "grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",
                    children: [
                      h.jsxs("div", {
                        className: "bg-gray-800 p-4 rounded-lg",
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-amber-400 mb-3 border-b border-gray-700 pb-2",
                            children: "Navigazione Canvas"
                          }),
                          h.jsxs("div", {
                            className: "space-y-2",
                            children: [
                              h.jsx(Is, {
                                shortcut: "Trascina",
                                description: "Muovi il canvas"
                              }, "Drag"),
                              h.jsx(Is, {
                                shortcut: "Rotella mouse",
                                description: "Zoom in/out"
                              }, "Wheel")
                            ]
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "bg-gray-800 p-4 rounded-lg",
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-amber-400 mb-3 border-b border-gray-700 pb-2",
                            children: "Nodi e Connessioni"
                          }),
                          h.jsxs("div", {
                            className: "space-y-2",
                            children: [
                              h.jsx(Is, {
                                shortcut: "N",
                                description: "Crea nuovo nodo"
                              }, "N"),
                              h.jsx(Is, {
                                shortcut: "A",
                                description: "Crea nuova annotazione"
                              }, "A"),
                              h.jsx(Is, {
                                shortcut: "C",
                                description: "Connetti nodi"
                              }, "C"),
                              h.jsx(Is, {
                                shortcut: "\\",
                                description: "Elimina nodo selezionato"
                              }, "Backslash")
                            ]
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "bg-gray-800 p-4 rounded-lg",
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-amber-400 mb-3 border-b border-gray-700 pb-2",
                            children: "Scacchiera"
                          }),
                          h.jsxs("div", {
                            className: "space-y-2",
                            children: [
                              h.jsx(Is, {
                                shortcut: "B",
                                description: "Apri scacchiera"
                              }, "B"),
                              h.jsx(Is, {
                                shortcut: "F",
                                description: "Inverti scacchiera"
                              }, "F"),
                              h.jsx(Is, {
                                shortcut: "Esc",
                                description: "Chiudi scacchiera"
                              }, "Esc")
                            ]
                          })
                        ]
                      }),
                      h.jsxs("div", {
                        className: "bg-gray-800 p-4 rounded-lg",
                        children: [
                          h.jsx("h4", {
                            className: "text-lg font-semibold text-amber-400 mb-3 border-b border-gray-700 pb-2",
                            children: "Navigazione Varianti"
                          }),
                          h.jsxs("div", {
                            className: "space-y-2",
                            children: [
                              h.jsx(Is, {
                                shortcut: "\u2190",
                                description: "Mossa precedente"
                              }, "LeftArrow"),
                              h.jsx(Is, {
                                shortcut: "\u2192",
                                description: "Mossa successiva"
                              }, "RightArrow"),
                              h.jsx(Is, {
                                shortcut: "D",
                                description: "Avvia modalit\xE0 drill"
                              }, "D")
                            ]
                          })
                        ]
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "bg-gray-800 p-4 rounded-lg text-sm border-l-4 border-amber-500",
                    children: [
                      h.jsx("strong", {
                        className: "text-amber-400",
                        children: "Consiglio:"
                      }),
                      " L'utilizzo costante delle scorciatoie da tastiera pu\xF2 migliorare notevolmente la tua efficienza nell'organizzare e studiare il tuo repertorio di aperture."
                    ]
                  })
                ]
              })
            ]
          })
        ]
      })
    }) : null;
  }, ga = ({ id: n, title: e, active: t, onClick: r, icon: i }) => h.jsxs("button", {
    onClick: r,
    className: `w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${t ? "bg-gray-700 text-white" : "text-gray-400 hover:text-gray-300 hover:bg-gray-700/50"}`,
    children: [
      h.jsx("span", {
        className: `${t ? "text-amber-400" : "text-gray-500"}`,
        children: i
      }),
      h.jsx("span", {
        className: "text-sm font-medium",
        children: e
      })
    ]
  }), ig = ({ title: n, description: e, icon: t }) => h.jsx("div", {
    className: "bg-gray-800 p-5 rounded-lg border-t-2 border-amber-500/50",
    children: h.jsxs("div", {
      className: "flex items-start gap-4",
      children: [
        h.jsx("div", {
          className: "flex-shrink-0 mt-1",
          children: t
        }),
        h.jsxs("div", {
          children: [
            h.jsx("h4", {
              className: "text-lg font-semibold text-amber-400 mb-2",
              children: n
            }),
            h.jsx("p", {
              className: "text-gray-300 text-sm",
              children: e
            })
          ]
        })
      ]
    })
  }), Is = ({ shortcut: n, description: e }) => h.jsxs("div", {
    className: "flex justify-between",
    children: [
      h.jsx("span", {
        className: "text-gray-300",
        children: e
      }),
      h.jsx("kbd", {
        className: "px-2 py-1 bg-gray-700 rounded text-xs text-white",
        children: n
      })
    ]
  });
  yb.propTypes = {
    isOpen: fe.bool.isRequired,
    onClose: fe.func.isRequired
  };
  var af = {
    exports: {}
  }, XN = af.exports, N_;
  function JN() {
    return N_ || (N_ = 1, function(n, e) {
      (function(t, r) {
        r(e);
      })(XN, function(t) {
        var r = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof Ow < "u" ? Ow : typeof self < "u" ? self : {};
        function i(P) {
          return P && P.__esModule && Object.prototype.hasOwnProperty.call(P, "default") ? P.default : P;
        }
        var l = {
          exports: {}
        };
        (function(P) {
          (function(O, L) {
            P.exports && (P.exports = L());
          })(r, function() {
            function O(T, Y) {
              function u() {
                this.constructor = T;
              }
              u.prototype = Y.prototype, T.prototype = new u();
            }
            function L(T, Y, u, ge) {
              var j = Error.call(this, T);
              return Object.setPrototypeOf && Object.setPrototypeOf(j, L.prototype), j.expected = Y, j.found = u, j.location = ge, j.name = "SyntaxError", j;
            }
            O(L, Error);
            function H(T, Y, u) {
              return u = u || " ", T.length > Y ? T : (Y -= T.length, u += u.repeat(Y), T + u.slice(0, Y));
            }
            L.prototype.format = function(T) {
              var Y = "Error: " + this.message;
              if (this.location) {
                var u = null, ge;
                for (ge = 0; ge < T.length; ge++) if (T[ge].source === this.location.source) {
                  u = T[ge].text.split(/\r\n|\n|\r/g);
                  break;
                }
                var j = this.location.start, M = this.location.source && typeof this.location.source.offset == "function" ? this.location.source.offset(j) : j, V = this.location.source + ":" + M.line + ":" + M.column;
                if (u) {
                  var B = this.location.end, q = H("", M.line.toString().length, " "), G = u[j.line - 1], F = j.line === B.line ? B.column : G.length + 1, Oe = F - j.column || 1;
                  Y += `
 --> ` + V + `
` + q + ` |
` + M.line + " | " + G + `
` + q + " | " + H("", j.column - 1, " ") + H("", Oe, "^");
                } else Y += `
 at ` + V;
              }
              return Y;
            }, L.buildMessage = function(T, Y) {
              var u = {
                literal: function(G) {
                  return '"' + j(G.text) + '"';
                },
                class: function(G) {
                  var F = G.parts.map(function(Oe) {
                    return Array.isArray(Oe) ? M(Oe[0]) + "-" + M(Oe[1]) : M(Oe);
                  });
                  return "[" + (G.inverted ? "^" : "") + F.join("") + "]";
                },
                any: function() {
                  return "any character";
                },
                end: function() {
                  return "end of input";
                },
                other: function(G) {
                  return G.description;
                }
              };
              function ge(G) {
                return G.charCodeAt(0).toString(16).toUpperCase();
              }
              function j(G) {
                return G.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\0/g, "\\0").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/[\x00-\x0F]/g, function(F) {
                  return "\\x0" + ge(F);
                }).replace(/[\x10-\x1F\x7F-\x9F]/g, function(F) {
                  return "\\x" + ge(F);
                });
              }
              function M(G) {
                return G.replace(/\\/g, "\\\\").replace(/\]/g, "\\]").replace(/\^/g, "\\^").replace(/-/g, "\\-").replace(/\0/g, "\\0").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/[\x00-\x0F]/g, function(F) {
                  return "\\x0" + ge(F);
                }).replace(/[\x10-\x1F\x7F-\x9F]/g, function(F) {
                  return "\\x" + ge(F);
                });
              }
              function V(G) {
                return u[G.type](G);
              }
              function B(G) {
                var F = G.map(V), Oe, Le;
                if (F.sort(), F.length > 0) {
                  for (Oe = 1, Le = 1; Oe < F.length; Oe++) F[Oe - 1] !== F[Oe] && (F[Le] = F[Oe], Le++);
                  F.length = Le;
                }
                switch (F.length) {
                  case 1:
                    return F[0];
                  case 2:
                    return F[0] + " or " + F[1];
                  default:
                    return F.slice(0, -1).join(", ") + ", or " + F[F.length - 1];
                }
              }
              function q(G) {
                return G ? '"' + j(G) + '"' : "end of input";
              }
              return "Expected " + B(T) + " but " + q(Y) + " found.";
            };
            function W(T, Y) {
              Y = Y !== void 0 ? Y : {};
              var u = {}, ge = Y.grammarSource, j = {
                pgn: Yd,
                tags: Q1,
                game: Kp,
                games: DC
              }, M = Yd, V = "\uFEFF", B = "Event", q = "event", G = "Site", F = "site", Oe = "Date", Le = "date", Ge = "Round", Ye = "round", he = "White", Pe = "white", pe = "Black", X = "black", oe = "Result", Se = "result", me = "WhiteTitle", Re = "Whitetitle", $e = "whitetitle", ie = "whiteTitle", ye = "BlackTitle", ve = "Blacktitle", De = "blacktitle", Be = "blackTitle", et = "WhiteELO", le = "WhiteElo", Ne = "Whiteelo", Ke = "whiteelo", at = "whiteElo", pt = "BlackELO", Vt = "BlackElo", Fe = "Blackelo", ke = "blackelo", ut = "blackElo", Pt = "WhiteUSCF", It = "WhiteUscf", en = "Whiteuscf", on = "whiteuscf", Dt = "whiteUscf", kt = "BlackUSCF", En = "BlackUscf", Xr = "Blackuscf", mr = "blackuscf", Bn = "blackUscf", er = "WhiteNA", Jr = "WhiteNa", dn = "Whitena", tr = "whitena", Zr = "whiteNa", es = "whiteNA", Ir = "BlackNA", kr = "BlackNa", nr = "Blackna", fn = "blackna", Nn = "blackNA", ce = "blackNa", je = "WhiteType", tt = "Whitetype", nt = "whitetype", Ot = "whiteType", mt = "BlackType", Pn = "Blacktype", Ft = "blacktype", Wn = "blackType", Qt = "EventDate", dt = "Eventdate", it = "eventdate", At = "eventDate", xt = "EventSponsor", bn = "Eventsponsor", Dn = "eventsponsor", Ds = "eventSponsor", $a = "Section", Ar = "section", di = "Stage", Rr = "stage", Va = "Board", Do = "board", Hi = "Opening", qi = "opening", jo = "Variation", Fa = "variation", Gl = "SubVariation", zt = "Subvariation", za = "subvariation", fi = "subVariation", js = "ECO", vr = "Eco", Oo = "eco", Ua = "NIC", hi = "Nic", rr = "nic", Ba = "Time", jn = "time", Lo = "UTCTime", Wa = "UTCtime", Ha = "UtcTime", Ki = "Utctime", Gi = "utctime", Os = "utcTime", pi = "UTCDate", Ql = "UTCdate", ps = "UtcDate", sr = "Utcdate", gi = "utcdate", Ls = "utcDate", Ms = "TimeControl", Lt = "Timecontrol", $s = "timecontrol", yt = "timeControl", Vs = "SetUp", qa = "Setup", Qi = "setup", Ka = "setUp", Ga = "FEN", Qa = "Fen", Mo = "fen", ts = "Termination", hn = "termination", Nr = "Annotator", Pr = "annotator", Fs = "Mode", yr = "mode", ns = "PlyCount", Yl = "Plycount", Ya = "plycount", Hn = "plyCount", Xl = "Variant", Xa = "variant", gs = "WhiteRatingDiff", mi = "BlackRatingDiff", Ja = "WhiteFideId", Dr = "BlackFideId", jr = "WhiteTeam", ms = "BlackTeam", zs = "Clock", Wt = "WhiteClock", Jl = "BlackClock", vi = '"', yi = "\\", Us = ".", vs = ":", qn = "/", Yi = "?", Kn = "-", Xi = "+", Ji = "*", rs = "1-0", $o = "0-1", pn = "1/2-1/2", Or = "1/2", Zi = "=", ss = "%csl", Zl = "%cal", wi = "%", ys = "%eval", Bs = "[%", _i = "}", Ws = ",", Za = "Y", ec = "G", Vo = "R", Fo = "B", tc = "O", Hs = "C", nc = "{", rc = "[", sc = "]", el = ";", eo = "clk", On = "egt", tl = "emt", nl = "mct", ws = "(", p = ")", E = " ", k = "e.p.", $ = "O-O-O", ne = "O-O", ue = "@", Ae = "Z0", Rt = "+-", an = "$$$", bt = "#", gn = "$", tn = "!!", wr = "??", ir = "!?", xi = "?!", zo = "!", Kf = "\u203C", Gf = "\u2047", Qf = "\u2049", Uo = "\u2048", jm = "\u25A1", Om = "\u221E", Lm = "\u2A72", Yf = "\u2A71", Xf = "\xB1", rl = "\u2213", Bo = "-+", Mm = "\u2A00", ic = "\u27F3", $m = "\u2192", Jf = "\u2191", ju = "\u21C6", Ou = "D", Zf = "x", to = /^[ \t\n\r]/, Lu = /^[\n\r]/, eh = /^[\-a-zA-Z0-9_.]/, Vm = /^[^"\\\r\n]/, Ei = /^[0-9?]/, _r = /^[0-9]/, Fm = /^[BNW]/, Lr = /^[^\n\r]/, sl = /^[1-8a-h]/, th = /^[RNBQKP]/, nh = /^[RNBQ]/, rh = /^[a-h]/, sh = /^[1-8]/, Mu = /^[\-x]/, zm = Z("\uFEFF", false), Um = Z("Event", false), Wo = Z("event", false), $u = Z("Site", false), il = Z("site", false), Vu = Z("Date", false), ih = Z("date", false), oc = Z("Round", false), Ho = Z("round", false), Fu = Z("White", false), oh = Z("white", false), ac = Z("Black", false), ah = Z("black", false), lh = Z("Result", false), ch = Z("result", false), uh = Z("WhiteTitle", false), dh = Z("Whitetitle", false), fh = Z("whitetitle", false), bi = Z("whiteTitle", false), zu = Z("BlackTitle", false), Uu = Z("Blacktitle", false), Bm = Z("blacktitle", false), Wm = Z("blackTitle", false), ol = Z("WhiteELO", false), Hm = Z("WhiteElo", false), hh = Z("Whiteelo", false), ph = Z("whiteelo", false), Ht = Z("whiteElo", false), Bu = Z("BlackELO", false), lc = Z("BlackElo", false), al = Z("Blackelo", false), gh = Z("blackelo", false), Wu = Z("blackElo", false), ll = Z("WhiteUSCF", false), cc = Z("WhiteUscf", false), qo = Z("Whiteuscf", false), mh = Z("whiteuscf", false), qm = Z("whiteUscf", false), Km = Z("BlackUSCF", false), vh = Z("BlackUscf", false), uc = Z("Blackuscf", false), dc = Z("blackuscf", false), Hu = Z("blackUscf", false), qu = Z("WhiteNA", false), Ku = Z("WhiteNa", false), Gu = Z("Whitena", false), Gm = Z("whitena", false), yh = Z("whiteNa", false), Qm = Z("whiteNA", false), Ym = Z("BlackNA", false), Qu = Z("BlackNa", false), Ti = Z("Blackna", false), wh = Z("blackna", false), Ko = Z("blackNA", false), _s = Z("blackNa", false), cl = Z("WhiteType", false), qs = Z("Whitetype", false), Yu = Z("whitetype", false), Xm = Z("whiteType", false), Jm = Z("BlackType", false), no = Z("Blacktype", false), ul = Z("blacktype", false), Go = Z("blackType", false), fc = Z("EventDate", false), Xu = Z("Eventdate", false), Qo = Z("eventdate", false), Ci = Z("eventDate", false), qt = Z("EventSponsor", false), Bt = Z("Eventsponsor", false), Si = Z("eventsponsor", false), Ln = Z("eventSponsor", false), or = Z("Section", false), ro = Z("section", false), Yo = Z("Stage", false), ar = Z("stage", false), hc = Z("Board", false), _h = Z("board", false), xh = Z("Opening", false), pc = Z("opening", false), Eh = Z("Variation", false), Ks = Z("variation", false), gc = Z("SubVariation", false), Ju = Z("Subvariation", false), bh = Z("subvariation", false), Zm = Z("subVariation", false), Ii = Z("ECO", false), Xo = Z("Eco", false), Jo = Z("eco", false), mc = Z("NIC", false), vc = Z("Nic", false), Mr = Z("nic", false), $r = Z("Time", false), so = Z("time", false), Gs = Z("UTCTime", false), Qs = Z("UTCtime", false), io = Z("UtcTime", false), Th = Z("Utctime", false), Zu = Z("utctime", false), ed = Z("utcTime", false), xr = Z("UTCDate", false), Er = Z("UTCdate", false), Kt = Z("UtcDate", false), is = Z("Utcdate", false), Ch = Z("utcdate", false), Sh = Z("utcDate", false), td = Z("TimeControl", false), nd = Z("Timecontrol", false), Ih = Z("timecontrol", false), yc = Z("timeControl", false), kh = Z("SetUp", false), Zo = Z("Setup", false), rd = Z("setup", false), e0 = Z("setUp", false), dl = Z("FEN", false), wc = Z("Fen", false), Ah = Z("fen", false), Rh = Z("Termination", false), ea = Z("termination", false), Nh = Z("Annotator", false), _c = Z("annotator", false), xc = Z("Mode", false), ta = Z("mode", false), sd = Z("PlyCount", false), id = Z("Plycount", false), od = Z("plycount", false), ad = Z("plyCount", false), na = Z("Variant", false), Vr = Z("variant", false), oo = Z("WhiteRatingDiff", false), ld = Z("BlackRatingDiff", false), Ph = Z("WhiteFideId", false), Ys = Z("BlackFideId", false), ki = Z("WhiteTeam", false), cd = Z("BlackTeam", false), Dh = Z("Clock", false), Xs = Z("WhiteClock", false), Ai = Z("BlackClock", false), fl = K1("whitespace"), ao = Wr([
                " ",
                "	",
                `
`,
                "\r"
              ], false, false), hl = Wr([
                `
`,
                "\r"
              ], false, false), ud = Wr([
                "-",
                [
                  "a",
                  "z"
                ],
                [
                  "A",
                  "Z"
                ],
                [
                  "0",
                  "9"
                ],
                "_",
                "."
              ], false, false), Ri = Z('"', false), xs = Wr([
                '"',
                "\\",
                "\r",
                `
`
              ], true, false), ra = Z("\\", false), Fr = Wr([
                [
                  "0",
                  "9"
                ],
                "?"
              ], false, false), Es = Z(".", false), Gn = Wr([
                [
                  "0",
                  "9"
                ]
              ], false, false), os = Z(":", false), Ec = Z("/", false), dd = Wr([
                "B",
                "N",
                "W"
              ], false, false), Gt = Z("?", false), pl = Z("-", false), gl = Z("+", false), bc = Z("*", false), Tc = Z("1-0", false), fd = Z("0-1", false), lo = Z("1/2-1/2", false), Yt = Z("1/2", false), nn = Z("=", false), mn = Z("%csl", false), Cc = Z("%cal", false), co = Z("%", false), ml = Z("%eval", false), t0 = Z("[%", false), Tn = Z("}", false), Sc = RC(), Ic = Wr([
                `
`,
                "\r"
              ], true, false), sa = Z(",", false), bs = Z("Y", false), zr = Z("G", false), vl = Z("R", false), hd = Z("B", false), pd = Z("O", false), jh = Z("C", false), Oh = Z("{", false), Lh = Z("[", false), Mh = Z("]", false), $h = Z(";", false), Vh = Z("clk", false), Fh = Z("egt", false), zh = Z("emt", false), yl = Z("mct", false), Uh = Z("(", false), kc = Z(")", false), Ac = K1("integer"), gd = Z(" ", false), md = Z("e.p.", false), Bh = Z("O-O-O", false), Wh = Z("O-O", false), Hh = Z("@", false), qh = Z("Z0", false), Rc = Z("+-", false), Kh = Z("$$$", false), Gh = Z("#", false), Qh = Z("$", false), n0 = Z("!!", false), Yh = Z("??", false), r0 = Z("!?", false), s0 = Z("?!", false), Xh = Z("!", false), Jh = Z("\u203C", false), Zh = Z("\u2047", false), Nc = Z("\u2049", false), i0 = Z("\u2048", false), o0 = Z("\u25A1", false), a0 = Z("\u221E", false), as = Z("\u2A72", false), vd = Z("\u2A71", false), Pc = Z("\xB1", false), ep = Z("\u2213", false), tp = Z("-+", false), np = Z("\u2A00", false), yd = Z("\u27F3", false), ia = Z("\u2192", false), wd = Z("\u2191", false), _d = Z("\u21C6", false), l0 = Z("D", false), rp = Wr([
                [
                  "1",
                  "8"
                ],
                [
                  "a",
                  "h"
                ]
              ], false, false), sp = Wr([
                "R",
                "N",
                "B",
                "Q",
                "K",
                "P"
              ], false, false), ip = Wr([
                "R",
                "N",
                "B",
                "Q"
              ], false, false), op = Wr([
                [
                  "a",
                  "h"
                ]
              ], false, false), ap = Wr([
                [
                  "1",
                  "8"
                ]
              ], false, false), c0 = Z("x", false), lr = Wr([
                "-",
                "x"
              ], false, false), Mn = function(a, w) {
                return w;
              }, lp = function(a, w) {
                return [
                  a
                ].concat(w);
              }, cp = function(a) {
                return a;
              }, up = function(a, w, A) {
                var I = Jp;
                return Jp = [], {
                  tags: a,
                  gameComment: w,
                  moves: A,
                  messages: I
                };
              }, xd = function(a, w) {
                return w;
              }, dp = function(a, w) {
                var A = {};
                return [
                  a
                ].concat(w).forEach(function(I) {
                  A[I.name] = I.value;
                }), A;
              }, Ed = function(a) {
                return a === null ? {} : (a.messages = Jp, a);
              }, fp = function(a) {
                return a;
              }, bd = function(a) {
                return {
                  name: "Event",
                  value: a
                };
              }, hp = function(a) {
                return {
                  name: "Site",
                  value: a
                };
              }, pp = function(a) {
                return {
                  name: "Date",
                  value: a
                };
              }, Td = function(a) {
                return {
                  name: "Round",
                  value: a
                };
              }, Cd = function(a) {
                return {
                  name: "WhiteTitle",
                  value: a
                };
              }, gp = function(a) {
                return {
                  name: "BlackTitle",
                  value: a
                };
              }, Sd = function(a) {
                return {
                  name: "WhiteElo",
                  value: a
                };
              }, Dc = function(a) {
                return {
                  name: "BlackElo",
                  value: a
                };
              }, u0 = function(a) {
                return {
                  name: "WhiteUSCF",
                  value: a
                };
              }, mp = function(a) {
                return {
                  name: "BlackUSCF",
                  value: a
                };
              }, Id = function(a) {
                return {
                  name: "WhiteNA",
                  value: a
                };
              }, vp = function(a) {
                return {
                  name: "BlackNA",
                  value: a
                };
              }, jc = function(a) {
                return {
                  name: "WhiteType",
                  value: a
                };
              }, Js = function(a) {
                return {
                  name: "BlackType",
                  value: a
                };
              }, d0 = function(a) {
                return {
                  name: "White",
                  value: a
                };
              }, yp = function(a) {
                return {
                  name: "Black",
                  value: a
                };
              }, kd = function(a) {
                return {
                  name: "Result",
                  value: a
                };
              }, wp = function(a) {
                return {
                  name: "EventDate",
                  value: a
                };
              }, _p = function(a) {
                return {
                  name: "EventSponsor",
                  value: a
                };
              }, wl = function(a) {
                return {
                  name: "Section",
                  value: a
                };
              }, $n = function(a) {
                return {
                  name: "Stage",
                  value: a
                };
              }, f0 = function(a) {
                return {
                  name: "Board",
                  value: a
                };
              }, h0 = function(a) {
                return {
                  name: "Opening",
                  value: a
                };
              }, Oc = function(a) {
                return {
                  name: "Variation",
                  value: a
                };
              }, Vn = function(a) {
                return {
                  name: "SubVariation",
                  value: a
                };
              }, p0 = function(a) {
                return {
                  name: "ECO",
                  value: a
                };
              }, ze = function(a) {
                return {
                  name: "NIC",
                  value: a
                };
              }, oa = function(a) {
                return {
                  name: "Time",
                  value: a
                };
              }, Ad = function(a) {
                return {
                  name: "UTCTime",
                  value: a
                };
              }, xp = function(a) {
                return {
                  name: "UTCDate",
                  value: a
                };
              }, g0 = function(a) {
                return {
                  name: "TimeControl",
                  value: a
                };
              }, _l = function(a) {
                return {
                  name: "SetUp",
                  value: a
                };
              }, Lc = function(a) {
                return {
                  name: "FEN",
                  value: a
                };
              }, Rd = function(a) {
                return {
                  name: "Termination",
                  value: a
                };
              }, Ep = function(a) {
                return {
                  name: "Annotator",
                  value: a
                };
              }, bp = function(a) {
                return {
                  name: "Mode",
                  value: a
                };
              }, Tp = function(a) {
                return {
                  name: "PlyCount",
                  value: a
                };
              }, Nd = function(a) {
                return {
                  name: "Variant",
                  value: a
                };
              }, Pd = function(a) {
                return {
                  name: "WhiteRatingDiff",
                  value: a
                };
              }, Cn = function(a) {
                return {
                  name: "BlackRatingDiff",
                  value: a
                };
              }, ls = function(a) {
                return {
                  name: "WhiteFideId",
                  value: a
                };
              }, Ni = function(a) {
                return {
                  name: "BlackFideId",
                  value: a
                };
              }, Cp = function(a) {
                return {
                  name: "WhiteTeam",
                  value: a
                };
              }, Sp = function(a) {
                return {
                  name: "BlackTeam",
                  value: a
                };
              }, cs = function(a) {
                return {
                  name: "Clock",
                  value: a
                };
              }, Ip = function(a) {
                return {
                  name: "WhiteClock",
                  value: a
                };
              }, Ts = function(a) {
                return {
                  name: "BlackClock",
                  value: a
                };
              }, m0 = function(a, w) {
                return Hr({
                  key: a,
                  value: w,
                  message: `Format of tag: "${a}" not correct: "${w}"`
                }), {
                  name: a,
                  value: w
                };
              }, kp = function(a, w) {
                return Hr({
                  key: a,
                  value: w,
                  message: `Tag: "${a}" not known: "${w}"`
                }), {
                  name: a,
                  value: w
                };
              }, Ap = function(a) {
                return a.join("");
              }, Rp = function(a) {
                return a.map((w) => w.char || w).join("");
              }, Np = function() {
                return {
                  type: "char",
                  char: "\\"
                };
              }, v0 = function() {
                return {
                  type: "char",
                  char: '"'
                };
              }, Mc = function(a) {
                return a;
              }, Dd = function(a, w, A) {
                return {
                  value: "" + a.join("") + "." + w.join("") + "." + A.join(""),
                  year: Al(a),
                  month: Al(w),
                  day: Al(A)
                };
              }, Ur = function(a, w, A, I) {
                let ee = a.join("") + ":" + w.join("") + ":" + A.join(""), de = 0;
                return I && (ee = ee + "." + I, Hr({
                  message: `Unusual use of millis in time: ${ee}`
                }), Al(I)), {
                  value: ee,
                  hour: Al(a),
                  minute: Al(w),
                  second: Al(A),
                  millis: de
                };
              }, St = function(a) {
                return a.join("");
              }, vn = function(a) {
                return a;
              }, ln = function(a, w) {
                return a + "/" + w;
              }, Sn = function(a) {
                return a;
              }, br = function(a) {
                return a;
              }, aa = function(a) {
                return a || (Hr({
                  message: "Tag TimeControl has to have a value"
                }), "");
              }, cn = function(a, w) {
                return w;
              }, xl = function(a, w) {
                let A = [
                  a
                ].concat(w);
                return A.value = A.map((I) => I.value).join(":"), A;
              }, uo = function(a) {
                return a;
              }, $c = function() {
                return {
                  kind: "unknown",
                  value: "?"
                };
              }, jd = function() {
                return {
                  kind: "unlimited",
                  value: "-"
                };
              }, El = function(a, w, A) {
                return {
                  kind: "movesInSecondsIncrement",
                  moves: a,
                  seconds: w,
                  increment: A,
                  value: "" + a + "/" + w + "+" + A
                };
              }, cr = function(a, w) {
                return {
                  kind: "movesInSeconds",
                  moves: a,
                  seconds: w,
                  value: "" + a + "/" + w
                };
              }, Od = function(a, w) {
                return {
                  kind: "increment",
                  seconds: a,
                  increment: w,
                  value: "" + a + "+" + w
                };
              }, la = function(a) {
                return {
                  kind: "suddenDeath",
                  seconds: a,
                  value: "" + a
                };
              }, Zs = function(a) {
                return {
                  kind: "hourglass",
                  seconds: a,
                  value: "*" + a
                };
              }, Vc = function(a) {
                return a;
              }, Ld = function(a) {
                return a;
              }, Pi = function(a) {
                return a;
              }, Fc = function(a) {
                return a;
              }, Di = function() {
                return "1/2-1/2";
              }, zc = function(a) {
                return a;
              }, bl = function(a) {
                return a;
              }, Md = function() {
                return 0;
              }, Uc = function() {
                return Hr({
                  message: 'Use "-" for an unknown value'
                }), 0;
              }, Bc = function(a) {
                return B0(a);
              }, Qn = function(a, w, A, I, ee, de, xe, Ve) {
                var ft = Ve || [], Ut = {};
                return Ut.moveNumber = w, Ut.notation = A, de && (Ut.commentAfter = de.comment), a && (Ut.commentMove = a.comment), ee && (Ut.drawOffer = true), Ut.variations = xe || [], Ut.nag = I || null, ft.unshift(Ut), Ut.commentDiag = de, ft;
              }, ji = function(a) {
                return a;
              }, us = function(a) {
                return [
                  a
                ];
              }, Yn = function(a, w) {
                return w;
              }, Pp = function(a, w) {
                return fa([
                  a
                ].concat(w));
              }, $d = function() {
              }, Vd = function(a) {
                return a;
              }, y0 = function(a) {
                return {
                  comment: a
                };
              }, ei = function(a, w) {
                return w;
              }, Dp = function(a, w) {
                return fa([
                  {
                    colorFields: a
                  }
                ].concat(w[0]));
              }, Wc = function(a, w) {
                return w;
              }, fo = function(a, w) {
                return fa([
                  {
                    colorArrows: a
                  }
                ].concat(w[0]));
              }, Hc = function(a, w, A) {
                return A;
              }, ho = function(a, w, A) {
                var I = {};
                return I[a] = w, fa([
                  I
                ].concat(A[0]));
              }, Fd = function(a, w, A) {
                return A;
              }, jp = function(a, w, A) {
                var I = {};
                return I[a] = w, fa([
                  I
                ].concat(A[0]));
              }, qc = function(a, w) {
                return w;
              }, Kc = function(a, w) {
                var A = {};
                return A.eval = parseFloat(a), fa([
                  A
                ].concat(w[0]));
              }, Op = function(a, w, A) {
                return A;
              }, w0 = function(a, w, A) {
                var I = {};
                return I[a] = w.join(""), fa([
                  I
                ].concat(A[0]));
              }, zd = function(a, w) {
                return w;
              }, Lp = function(a, w) {
                return w.length > 0 ? fa([
                  {
                    comment: jw(a.join(""))
                  }
                ].concat(Dw(w[0]))) : {
                  comment: a.join("")
                };
              }, po = function(a) {
                return a;
              }, _0 = function(a) {
                return a;
              }, ca = function(a) {
                return a.join("");
              }, Mp = function(a, w) {
                var A = [];
                A.push(a);
                for (var I = 0; I < w.length; I++) A.push(w[I][2]);
                return A;
              }, Jt = function(a, w) {
                return a + w;
              }, x0 = function(a, w) {
                var A = [];
                A.push(a);
                for (var I = 0; I < w.length; I++) A.push(w[I][2]);
                return A;
              }, $p = function(a, w, A) {
                return a + w + A;
              }, E0 = function() {
                return "Y";
              }, b0 = function() {
                return "G";
              }, Vp = function() {
                return "R";
              }, Fp = function() {
                return "B";
              }, T0 = function() {
                return "O";
              }, Br = function() {
                return "C";
              }, Ud = function(a, w) {
                return a + w;
              }, C0 = function() {
                return "clk";
              }, Oi = function() {
                return "egt";
              }, Gc = function() {
                return "emt";
              }, go = function() {
                return "mct";
              }, Qc = function(a, w, A, I) {
                let ee = w;
                return a ? ee = a + ee : Hr({
                  message: "Hours and minutes missing"
                }), a && (a.match(/:/g) || []).length == 2 && a.search(":") == 2 && Hr({
                  message: "Only 1 digit for hours normally used"
                }), A ? ee += A : Hr({
                  message: "Only 2 digit for seconds normally used"
                }), I && (Hr({
                  message: "Unusual use of millis in clock value"
                }), ee += "." + I), ee;
              }, Bd = function(a, w, A) {
                let I = w;
                return a ? I = a + I : Hr({
                  message: "Hours and minutes missing"
                }), a && (a.match(/:/g) || []).length == 2 && a.search(":") == 1 && Hr({
                  message: "Only 2 digits for hours normally used"
                }), A ? I += A : Hr({
                  message: "Only 2 digit for seconds normally used"
                }), I;
              }, Wd = function(a, w) {
                return w ? a + w : (Hr({
                  message: "No hours found"
                }), a);
              }, S0 = function(a, w) {
                let A = a;
                return w ? A += w + ":" : A += ":", A;
              }, Hd = function(a, w) {
                let A = a;
                return w ? A += w + ":" : (A += ":", Hr({
                  message: "Only 2 digits for minutes normally used"
                })), A;
              }, I0 = function(a) {
                return a;
              }, zp = function(a, w) {
                var A = w || [];
                return A.unshift(a), A;
              }, Up = function(a) {
                return a;
              }, Yc = function(a) {
                return B0(a);
              }, Xc = function() {
                return "";
              }, Bp = function(a, w, A, I, ee, de, xe) {
                var Ve = {};
                return Ve.fig = a || null, Ve.disc = w || null, Ve.strike = A || null, Ve.col = I, Ve.row = ee, Ve.check = xe || null, Ve.promotion = de, Ve.notation = (a || "") + (w || "") + (A || "") + I + ee + (de || "") + (xe || ""), Ve;
              }, qd = function(a, w, A, I, ee, de, xe, Ve) {
                var ft = {};
                return ft.fig = a || null, ft.strike = I == "x" ? I : null, ft.col = ee, ft.row = de, ft.notation = (a && a !== "P" ? a : "") + w + A + (I == "x" ? I : "-") + ee + de + (xe || "") + (Ve || ""), ft.check = Ve || null, ft.promotion = xe, ft;
              }, k0 = function(a, w, A, I, ee, de) {
                var xe = {};
                return xe.fig = a || null, xe.strike = w || null, xe.col = A, xe.row = I, xe.check = de || null, xe.promotion = ee, xe.notation = (a || "") + (w || "") + A + I + (ee || "") + (de || ""), xe;
              }, Wp = function(a) {
                var w = {};
                return w.notation = "O-O-O" + (a || ""), w.check = a || null, w;
              }, Kd = function(a) {
                var w = {};
                return w.notation = "O-O" + (a || ""), w.check = a || null, w;
              }, Jc = function(a, w, A) {
                var I = {};
                return I.fig = a, I.drop = true, I.col = w, I.row = A, I.notation = a + "@" + w + A, I;
              }, Gd = function() {
                var a = {};
                return a.notation = "Z0", a;
              }, Zc = function(a) {
                return a[1];
              }, Hp = function(a) {
                return a[1];
              }, A0 = function(a) {
                return "=" + a;
              }, eu = function(a, w) {
                var A = w || [];
                return A.unshift(a), A;
              }, R0 = function(a) {
                return "$" + a;
              }, Tl = function() {
                return "$3";
              }, N0 = function() {
                return "$4";
              }, tu = function() {
                return "$5";
              }, s = function() {
                return "$6";
              }, o = function() {
                return "$1";
              }, d = function() {
                return "$2";
              }, v = function() {
                return "$3";
              }, _ = function() {
                return "$4";
              }, b = function() {
                return "$5";
              }, D = function() {
                return "$6";
              }, K = function() {
                return "$7";
              }, J = function() {
                return "$10";
              }, ae = function() {
                return "$13";
              }, be = function() {
                return "$14";
              }, Te = function() {
                return "$15";
              }, Ee = function() {
                return "$16";
              }, Me = function() {
                return "$17";
              }, We = function() {
                return "$18";
              }, qe = function() {
                return "$19";
              }, rn = function() {
                return "$22";
              }, re = function() {
                return "$32";
              }, te = function() {
                return "$36";
              }, se = function() {
                return "$40";
              }, Ie = function() {
                return "$132";
              }, Qe = function() {
                return "$220";
              }, g = Y.peg$currPos | 0, Q = g, Je = [
                {
                  line: 1,
                  column: 1
                }
              ], Mt = g, Et = Y.peg$maxFailExpected || [], z = Y.peg$silentFails | 0, Cl;
              if (Y.startRule) {
                if (!(Y.startRule in j)) throw new Error(`Can't start parsing from rule "` + Y.startRule + '".');
                M = j[Y.startRule];
              }
              function AC() {
                return P0(Q, g);
              }
              function Z(a, w) {
                return {
                  type: "literal",
                  text: a,
                  ignoreCase: w
                };
              }
              function Wr(a, w, A) {
                return {
                  type: "class",
                  parts: a,
                  inverted: w,
                  ignoreCase: A
                };
              }
              function RC() {
                return {
                  type: "any"
                };
              }
              function NC() {
                return {
                  type: "end"
                };
              }
              function K1(a) {
                return {
                  type: "other",
                  description: a
                };
              }
              function G1(a) {
                var w = Je[a], A;
                if (w) return w;
                if (a >= Je.length) A = Je.length - 1;
                else for (A = a; !Je[--A]; ) ;
                for (w = Je[A], w = {
                  line: w.line,
                  column: w.column
                }; A < a; ) T.charCodeAt(A) === 10 ? (w.line++, w.column = 1) : w.column++, A++;
                return Je[a] = w, w;
              }
              function P0(a, w, A) {
                var I = G1(a), ee = G1(w), de = {
                  source: ge,
                  start: {
                    offset: a,
                    line: I.line,
                    column: I.column
                  },
                  end: {
                    offset: w,
                    line: ee.line,
                    column: ee.column
                  }
                };
                return de;
              }
              function U(a) {
                g < Mt || (g > Mt && (Mt = g, Et = []), Et.push(a));
              }
              function PC(a, w, A) {
                return new L(L.buildMessage(a, w), a, w, A);
              }
              function qp() {
                var a;
                return T.charCodeAt(g) === 65279 ? (a = V, g++) : (a = u, z === 0 && U(zm)), a;
              }
              function DC() {
                var a, w, A, I, ee, de;
                if (a = g, qp(), Ce(), w = g, A = Kp(), A !== u) {
                  for (I = [], ee = g, Ce(), de = Kp(), de !== u ? (Q = ee, ee = Mn(A, de)) : (g = ee, ee = u); ee !== u; ) I.push(ee), ee = g, Ce(), de = Kp(), de !== u ? (Q = ee, ee = Mn(A, de)) : (g = ee, ee = u);
                  Q = w, w = lp(A, I);
                } else g = w, w = u;
                return w === u && (w = null), Q = a, a = cp(w), a;
              }
              function Kp() {
                var a, w, A, I;
                return a = g, qp(), w = Q1(), A = L0(), A === u && (A = null), I = Yd(), I !== u ? (Q = a, a = up(w, A, I)) : (g = a, a = u), a;
              }
              function Q1() {
                var a, w, A, I, ee, de;
                if (a = g, qp(), Ce(), w = g, A = D0(), A !== u) {
                  for (I = [], ee = g, Ce(), de = D0(), de !== u ? (Q = ee, ee = xd(A, de)) : (g = ee, ee = u); ee !== u; ) I.push(ee), ee = g, Ce(), de = D0(), de !== u ? (Q = ee, ee = xd(A, de)) : (g = ee, ee = u);
                  Q = w, w = dp(A, I);
                } else g = w, w = u;
                return w === u && (w = null), A = Ce(), Q = a, a = Ed(w), a;
              }
              function D0() {
                var a, w, A, I;
                return a = g, w = Sl(), w !== u ? (Ce(), A = jC(), A !== u ? (Ce(), I = ua(), I !== u ? (Q = a, a = fp(A)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function jC() {
                var a, w, A, I, ee;
                return a = g, w = OC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = bd(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = LC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = hp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = X1(), w !== u ? (A = Ce(), I = j0(), I !== u ? (Q = a, a = pp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = MC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Td(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = FC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Cd(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = zC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = gp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = Z1(), w !== u ? (A = Ce(), I = _w(), I !== u ? (Q = a, a = Sd(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = ew(), w !== u ? (A = Ce(), I = _w(), I !== u ? (Q = a, a = Dc(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = tw(), w !== u ? (A = Ce(), I = Qd(), I !== u ? (Q = a, a = u0(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = nw(), w !== u ? (A = Ce(), I = Qd(), I !== u ? (Q = a, a = mp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = UC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Id(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = BC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = vp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = WC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = jc(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = HC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Js(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = $C(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = d0(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = VC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = yp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = J1(), w !== u ? (A = Ce(), I = wS(), I !== u ? (Q = a, a = kd(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = rw(), w !== u ? (A = Ce(), I = j0(), I !== u ? (Q = a, a = wp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = qC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = _p(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = KC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = wl(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = GC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = $n(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = sw(), w !== u ? (A = Ce(), I = Qd(), I !== u ? (Q = a, a = f0(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = QC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = h0(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = YC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Oc(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = XC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Vn(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = JC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = p0(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = ZC(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = ze(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = iw(), w !== u ? (A = Ce(), I = gw(), I !== u ? (Q = a, a = oa(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = ow(), w !== u ? (A = Ce(), I = gw(), I !== u ? (Q = a, a = Ad(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = aw(), w !== u ? (A = Ce(), I = j0(), I !== u ? (Q = a, a = xp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = lw(), w !== u ? (A = Ce(), I = vS(), I !== u ? (Q = a, a = g0(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = eS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = _l(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = tS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Lc(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = nS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Rd(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = rS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Ep(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = sS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = bp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = cw(), w !== u ? (A = Ce(), I = Qd(), I !== u ? (Q = a, a = Tp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = iS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Nd(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = oS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Pd(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = aS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Cn(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = lS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = ls(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = cS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Ni(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = uS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Cp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = dS(), w !== u ? (A = Ce(), I = jt(), I !== u ? (Q = a, a = Sp(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = uw(), w !== u ? (A = Ce(), I = pS(), I !== u ? (Q = a, a = cs(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = dw(), w !== u ? (A = Ce(), I = vw(), I !== u ? (Q = a, a = Ip(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = fw(), w !== u ? (A = Ce(), I = vw(), I !== u ? (Q = a, a = Ts(I)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = g, z++, A = Y1(), z--, A !== u ? (g = w, w = void 0) : w = u, w !== u ? (A = Gp(), I = Ce(), ee = jt(), ee !== u ? (Q = a, a = m0(A, ee)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = g, z++, A = Y1(), z--, A === u ? w = void 0 : (g = w, w = u), w !== u ? (A = Gp(), I = Ce(), ee = jt(), ee !== u ? (Q = a, a = kp(A, ee)) : (g = a, a = u)) : (g = a, a = u))))))))))))))))))))))))))))))))))))))))))))))))), a;
              }
              function Y1() {
                var a;
                return a = X1(), a === u && (a = Z1(), a === u && (a = ew(), a === u && (a = tw(), a === u && (a = nw(), a === u && (a = J1(), a === u && (a = rw(), a === u && (a = sw(), a === u && (a = iw(), a === u && (a = ow(), a === u && (a = aw(), a === u && (a = lw(), a === u && (a = cw(), a === u && (a = uw(), a === u && (a = dw(), a === u && (a = fw()))))))))))))))), a;
              }
              function OC() {
                var a;
                return T.substr(g, 5) === B ? (a = B, g += 5) : (a = u, z === 0 && U(Um)), a === u && (T.substr(g, 5) === q ? (a = q, g += 5) : (a = u, z === 0 && U(Wo))), a;
              }
              function LC() {
                var a;
                return T.substr(g, 4) === G ? (a = G, g += 4) : (a = u, z === 0 && U($u)), a === u && (T.substr(g, 4) === F ? (a = F, g += 4) : (a = u, z === 0 && U(il))), a;
              }
              function X1() {
                var a;
                return T.substr(g, 4) === Oe ? (a = Oe, g += 4) : (a = u, z === 0 && U(Vu)), a === u && (T.substr(g, 4) === Le ? (a = Le, g += 4) : (a = u, z === 0 && U(ih))), a;
              }
              function MC() {
                var a;
                return T.substr(g, 5) === Ge ? (a = Ge, g += 5) : (a = u, z === 0 && U(oc)), a === u && (T.substr(g, 5) === Ye ? (a = Ye, g += 5) : (a = u, z === 0 && U(Ho))), a;
              }
              function $C() {
                var a;
                return T.substr(g, 5) === he ? (a = he, g += 5) : (a = u, z === 0 && U(Fu)), a === u && (T.substr(g, 5) === Pe ? (a = Pe, g += 5) : (a = u, z === 0 && U(oh))), a;
              }
              function VC() {
                var a;
                return T.substr(g, 5) === pe ? (a = pe, g += 5) : (a = u, z === 0 && U(ac)), a === u && (T.substr(g, 5) === X ? (a = X, g += 5) : (a = u, z === 0 && U(ah))), a;
              }
              function J1() {
                var a;
                return T.substr(g, 6) === oe ? (a = oe, g += 6) : (a = u, z === 0 && U(lh)), a === u && (T.substr(g, 6) === Se ? (a = Se, g += 6) : (a = u, z === 0 && U(ch))), a;
              }
              function FC() {
                var a;
                return T.substr(g, 10) === me ? (a = me, g += 10) : (a = u, z === 0 && U(uh)), a === u && (T.substr(g, 10) === Re ? (a = Re, g += 10) : (a = u, z === 0 && U(dh)), a === u && (T.substr(g, 10) === $e ? (a = $e, g += 10) : (a = u, z === 0 && U(fh)), a === u && (T.substr(g, 10) === ie ? (a = ie, g += 10) : (a = u, z === 0 && U(bi))))), a;
              }
              function zC() {
                var a;
                return T.substr(g, 10) === ye ? (a = ye, g += 10) : (a = u, z === 0 && U(zu)), a === u && (T.substr(g, 10) === ve ? (a = ve, g += 10) : (a = u, z === 0 && U(Uu)), a === u && (T.substr(g, 10) === De ? (a = De, g += 10) : (a = u, z === 0 && U(Bm)), a === u && (T.substr(g, 10) === Be ? (a = Be, g += 10) : (a = u, z === 0 && U(Wm))))), a;
              }
              function Z1() {
                var a;
                return T.substr(g, 8) === et ? (a = et, g += 8) : (a = u, z === 0 && U(ol)), a === u && (T.substr(g, 8) === le ? (a = le, g += 8) : (a = u, z === 0 && U(Hm)), a === u && (T.substr(g, 8) === Ne ? (a = Ne, g += 8) : (a = u, z === 0 && U(hh)), a === u && (T.substr(g, 8) === Ke ? (a = Ke, g += 8) : (a = u, z === 0 && U(ph)), a === u && (T.substr(g, 8) === at ? (a = at, g += 8) : (a = u, z === 0 && U(Ht)))))), a;
              }
              function ew() {
                var a;
                return T.substr(g, 8) === pt ? (a = pt, g += 8) : (a = u, z === 0 && U(Bu)), a === u && (T.substr(g, 8) === Vt ? (a = Vt, g += 8) : (a = u, z === 0 && U(lc)), a === u && (T.substr(g, 8) === Fe ? (a = Fe, g += 8) : (a = u, z === 0 && U(al)), a === u && (T.substr(g, 8) === ke ? (a = ke, g += 8) : (a = u, z === 0 && U(gh)), a === u && (T.substr(g, 8) === ut ? (a = ut, g += 8) : (a = u, z === 0 && U(Wu)))))), a;
              }
              function tw() {
                var a;
                return T.substr(g, 9) === Pt ? (a = Pt, g += 9) : (a = u, z === 0 && U(ll)), a === u && (T.substr(g, 9) === It ? (a = It, g += 9) : (a = u, z === 0 && U(cc)), a === u && (T.substr(g, 9) === en ? (a = en, g += 9) : (a = u, z === 0 && U(qo)), a === u && (T.substr(g, 9) === on ? (a = on, g += 9) : (a = u, z === 0 && U(mh)), a === u && (T.substr(g, 9) === Dt ? (a = Dt, g += 9) : (a = u, z === 0 && U(qm)))))), a;
              }
              function nw() {
                var a;
                return T.substr(g, 9) === kt ? (a = kt, g += 9) : (a = u, z === 0 && U(Km)), a === u && (T.substr(g, 9) === En ? (a = En, g += 9) : (a = u, z === 0 && U(vh)), a === u && (T.substr(g, 9) === Xr ? (a = Xr, g += 9) : (a = u, z === 0 && U(uc)), a === u && (T.substr(g, 9) === mr ? (a = mr, g += 9) : (a = u, z === 0 && U(dc)), a === u && (T.substr(g, 9) === Bn ? (a = Bn, g += 9) : (a = u, z === 0 && U(Hu)))))), a;
              }
              function UC() {
                var a;
                return T.substr(g, 7) === er ? (a = er, g += 7) : (a = u, z === 0 && U(qu)), a === u && (T.substr(g, 7) === Jr ? (a = Jr, g += 7) : (a = u, z === 0 && U(Ku)), a === u && (T.substr(g, 7) === dn ? (a = dn, g += 7) : (a = u, z === 0 && U(Gu)), a === u && (T.substr(g, 7) === tr ? (a = tr, g += 7) : (a = u, z === 0 && U(Gm)), a === u && (T.substr(g, 7) === Zr ? (a = Zr, g += 7) : (a = u, z === 0 && U(yh)), a === u && (T.substr(g, 7) === es ? (a = es, g += 7) : (a = u, z === 0 && U(Qm))))))), a;
              }
              function BC() {
                var a;
                return T.substr(g, 7) === Ir ? (a = Ir, g += 7) : (a = u, z === 0 && U(Ym)), a === u && (T.substr(g, 7) === kr ? (a = kr, g += 7) : (a = u, z === 0 && U(Qu)), a === u && (T.substr(g, 7) === nr ? (a = nr, g += 7) : (a = u, z === 0 && U(Ti)), a === u && (T.substr(g, 7) === fn ? (a = fn, g += 7) : (a = u, z === 0 && U(wh)), a === u && (T.substr(g, 7) === Nn ? (a = Nn, g += 7) : (a = u, z === 0 && U(Ko)), a === u && (T.substr(g, 7) === ce ? (a = ce, g += 7) : (a = u, z === 0 && U(_s))))))), a;
              }
              function WC() {
                var a;
                return T.substr(g, 9) === je ? (a = je, g += 9) : (a = u, z === 0 && U(cl)), a === u && (T.substr(g, 9) === tt ? (a = tt, g += 9) : (a = u, z === 0 && U(qs)), a === u && (T.substr(g, 9) === nt ? (a = nt, g += 9) : (a = u, z === 0 && U(Yu)), a === u && (T.substr(g, 9) === Ot ? (a = Ot, g += 9) : (a = u, z === 0 && U(Xm))))), a;
              }
              function HC() {
                var a;
                return T.substr(g, 9) === mt ? (a = mt, g += 9) : (a = u, z === 0 && U(Jm)), a === u && (T.substr(g, 9) === Pn ? (a = Pn, g += 9) : (a = u, z === 0 && U(no)), a === u && (T.substr(g, 9) === Ft ? (a = Ft, g += 9) : (a = u, z === 0 && U(ul)), a === u && (T.substr(g, 9) === Wn ? (a = Wn, g += 9) : (a = u, z === 0 && U(Go))))), a;
              }
              function rw() {
                var a;
                return T.substr(g, 9) === Qt ? (a = Qt, g += 9) : (a = u, z === 0 && U(fc)), a === u && (T.substr(g, 9) === dt ? (a = dt, g += 9) : (a = u, z === 0 && U(Xu)), a === u && (T.substr(g, 9) === it ? (a = it, g += 9) : (a = u, z === 0 && U(Qo)), a === u && (T.substr(g, 9) === At ? (a = At, g += 9) : (a = u, z === 0 && U(Ci))))), a;
              }
              function qC() {
                var a;
                return T.substr(g, 12) === xt ? (a = xt, g += 12) : (a = u, z === 0 && U(qt)), a === u && (T.substr(g, 12) === bn ? (a = bn, g += 12) : (a = u, z === 0 && U(Bt)), a === u && (T.substr(g, 12) === Dn ? (a = Dn, g += 12) : (a = u, z === 0 && U(Si)), a === u && (T.substr(g, 12) === Ds ? (a = Ds, g += 12) : (a = u, z === 0 && U(Ln))))), a;
              }
              function KC() {
                var a;
                return T.substr(g, 7) === $a ? (a = $a, g += 7) : (a = u, z === 0 && U(or)), a === u && (T.substr(g, 7) === Ar ? (a = Ar, g += 7) : (a = u, z === 0 && U(ro))), a;
              }
              function GC() {
                var a;
                return T.substr(g, 5) === di ? (a = di, g += 5) : (a = u, z === 0 && U(Yo)), a === u && (T.substr(g, 5) === Rr ? (a = Rr, g += 5) : (a = u, z === 0 && U(ar))), a;
              }
              function sw() {
                var a;
                return T.substr(g, 5) === Va ? (a = Va, g += 5) : (a = u, z === 0 && U(hc)), a === u && (T.substr(g, 5) === Do ? (a = Do, g += 5) : (a = u, z === 0 && U(_h))), a;
              }
              function QC() {
                var a;
                return T.substr(g, 7) === Hi ? (a = Hi, g += 7) : (a = u, z === 0 && U(xh)), a === u && (T.substr(g, 7) === qi ? (a = qi, g += 7) : (a = u, z === 0 && U(pc))), a;
              }
              function YC() {
                var a;
                return T.substr(g, 9) === jo ? (a = jo, g += 9) : (a = u, z === 0 && U(Eh)), a === u && (T.substr(g, 9) === Fa ? (a = Fa, g += 9) : (a = u, z === 0 && U(Ks))), a;
              }
              function XC() {
                var a;
                return T.substr(g, 12) === Gl ? (a = Gl, g += 12) : (a = u, z === 0 && U(gc)), a === u && (T.substr(g, 12) === zt ? (a = zt, g += 12) : (a = u, z === 0 && U(Ju)), a === u && (T.substr(g, 12) === za ? (a = za, g += 12) : (a = u, z === 0 && U(bh)), a === u && (T.substr(g, 12) === fi ? (a = fi, g += 12) : (a = u, z === 0 && U(Zm))))), a;
              }
              function JC() {
                var a;
                return T.substr(g, 3) === js ? (a = js, g += 3) : (a = u, z === 0 && U(Ii)), a === u && (T.substr(g, 3) === vr ? (a = vr, g += 3) : (a = u, z === 0 && U(Xo)), a === u && (T.substr(g, 3) === Oo ? (a = Oo, g += 3) : (a = u, z === 0 && U(Jo)))), a;
              }
              function ZC() {
                var a;
                return T.substr(g, 3) === Ua ? (a = Ua, g += 3) : (a = u, z === 0 && U(mc)), a === u && (T.substr(g, 3) === hi ? (a = hi, g += 3) : (a = u, z === 0 && U(vc)), a === u && (T.substr(g, 3) === rr ? (a = rr, g += 3) : (a = u, z === 0 && U(Mr)))), a;
              }
              function iw() {
                var a;
                return T.substr(g, 4) === Ba ? (a = Ba, g += 4) : (a = u, z === 0 && U($r)), a === u && (T.substr(g, 4) === jn ? (a = jn, g += 4) : (a = u, z === 0 && U(so))), a;
              }
              function ow() {
                var a;
                return T.substr(g, 7) === Lo ? (a = Lo, g += 7) : (a = u, z === 0 && U(Gs)), a === u && (T.substr(g, 7) === Wa ? (a = Wa, g += 7) : (a = u, z === 0 && U(Qs)), a === u && (T.substr(g, 7) === Ha ? (a = Ha, g += 7) : (a = u, z === 0 && U(io)), a === u && (T.substr(g, 7) === Ki ? (a = Ki, g += 7) : (a = u, z === 0 && U(Th)), a === u && (T.substr(g, 7) === Gi ? (a = Gi, g += 7) : (a = u, z === 0 && U(Zu)), a === u && (T.substr(g, 7) === Os ? (a = Os, g += 7) : (a = u, z === 0 && U(ed))))))), a;
              }
              function aw() {
                var a;
                return T.substr(g, 7) === pi ? (a = pi, g += 7) : (a = u, z === 0 && U(xr)), a === u && (T.substr(g, 7) === Ql ? (a = Ql, g += 7) : (a = u, z === 0 && U(Er)), a === u && (T.substr(g, 7) === ps ? (a = ps, g += 7) : (a = u, z === 0 && U(Kt)), a === u && (T.substr(g, 7) === sr ? (a = sr, g += 7) : (a = u, z === 0 && U(is)), a === u && (T.substr(g, 7) === gi ? (a = gi, g += 7) : (a = u, z === 0 && U(Ch)), a === u && (T.substr(g, 7) === Ls ? (a = Ls, g += 7) : (a = u, z === 0 && U(Sh))))))), a;
              }
              function lw() {
                var a;
                return T.substr(g, 11) === Ms ? (a = Ms, g += 11) : (a = u, z === 0 && U(td)), a === u && (T.substr(g, 11) === Lt ? (a = Lt, g += 11) : (a = u, z === 0 && U(nd)), a === u && (T.substr(g, 11) === $s ? (a = $s, g += 11) : (a = u, z === 0 && U(Ih)), a === u && (T.substr(g, 11) === yt ? (a = yt, g += 11) : (a = u, z === 0 && U(yc))))), a;
              }
              function eS() {
                var a;
                return T.substr(g, 5) === Vs ? (a = Vs, g += 5) : (a = u, z === 0 && U(kh)), a === u && (T.substr(g, 5) === qa ? (a = qa, g += 5) : (a = u, z === 0 && U(Zo)), a === u && (T.substr(g, 5) === Qi ? (a = Qi, g += 5) : (a = u, z === 0 && U(rd)), a === u && (T.substr(g, 5) === Ka ? (a = Ka, g += 5) : (a = u, z === 0 && U(e0))))), a;
              }
              function tS() {
                var a;
                return T.substr(g, 3) === Ga ? (a = Ga, g += 3) : (a = u, z === 0 && U(dl)), a === u && (T.substr(g, 3) === Qa ? (a = Qa, g += 3) : (a = u, z === 0 && U(wc)), a === u && (T.substr(g, 3) === Mo ? (a = Mo, g += 3) : (a = u, z === 0 && U(Ah)))), a;
              }
              function nS() {
                var a;
                return T.substr(g, 11) === ts ? (a = ts, g += 11) : (a = u, z === 0 && U(Rh)), a === u && (T.substr(g, 11) === hn ? (a = hn, g += 11) : (a = u, z === 0 && U(ea))), a;
              }
              function rS() {
                var a;
                return T.substr(g, 9) === Nr ? (a = Nr, g += 9) : (a = u, z === 0 && U(Nh)), a === u && (T.substr(g, 9) === Pr ? (a = Pr, g += 9) : (a = u, z === 0 && U(_c))), a;
              }
              function sS() {
                var a;
                return T.substr(g, 4) === Fs ? (a = Fs, g += 4) : (a = u, z === 0 && U(xc)), a === u && (T.substr(g, 4) === yr ? (a = yr, g += 4) : (a = u, z === 0 && U(ta))), a;
              }
              function cw() {
                var a;
                return T.substr(g, 8) === ns ? (a = ns, g += 8) : (a = u, z === 0 && U(sd)), a === u && (T.substr(g, 8) === Yl ? (a = Yl, g += 8) : (a = u, z === 0 && U(id)), a === u && (T.substr(g, 8) === Ya ? (a = Ya, g += 8) : (a = u, z === 0 && U(od)), a === u && (T.substr(g, 8) === Hn ? (a = Hn, g += 8) : (a = u, z === 0 && U(ad))))), a;
              }
              function iS() {
                var a;
                return T.substr(g, 7) === Xl ? (a = Xl, g += 7) : (a = u, z === 0 && U(na)), a === u && (T.substr(g, 7) === Xa ? (a = Xa, g += 7) : (a = u, z === 0 && U(Vr))), a;
              }
              function oS() {
                var a;
                return T.substr(g, 15) === gs ? (a = gs, g += 15) : (a = u, z === 0 && U(oo)), a;
              }
              function aS() {
                var a;
                return T.substr(g, 15) === mi ? (a = mi, g += 15) : (a = u, z === 0 && U(ld)), a;
              }
              function lS() {
                var a;
                return T.substr(g, 11) === Ja ? (a = Ja, g += 11) : (a = u, z === 0 && U(Ph)), a;
              }
              function cS() {
                var a;
                return T.substr(g, 11) === Dr ? (a = Dr, g += 11) : (a = u, z === 0 && U(Ys)), a;
              }
              function uS() {
                var a;
                return T.substr(g, 9) === jr ? (a = jr, g += 9) : (a = u, z === 0 && U(ki)), a;
              }
              function dS() {
                var a;
                return T.substr(g, 9) === ms ? (a = ms, g += 9) : (a = u, z === 0 && U(cd)), a;
              }
              function uw() {
                var a;
                return T.substr(g, 5) === zs ? (a = zs, g += 5) : (a = u, z === 0 && U(Dh)), a;
              }
              function dw() {
                var a;
                return T.substr(g, 10) === Wt ? (a = Wt, g += 10) : (a = u, z === 0 && U(Xs)), a;
              }
              function fw() {
                var a;
                return T.substr(g, 10) === Jl ? (a = Jl, g += 10) : (a = u, z === 0 && U(Ai)), a;
              }
              function Ce() {
                var a, w;
                for (z++, a = [], w = T.charAt(g), to.test(w) ? g++ : (w = u, z === 0 && U(ao)); w !== u; ) a.push(w), w = T.charAt(g), to.test(w) ? g++ : (w = u, z === 0 && U(ao));
                return z--, w = u, z === 0 && U(fl), a;
              }
              function nu() {
                var a, w;
                if (a = [], w = T.charAt(g), to.test(w) ? g++ : (w = u, z === 0 && U(ao)), w !== u) for (; w !== u; ) a.push(w), w = T.charAt(g), to.test(w) ? g++ : (w = u, z === 0 && U(ao));
                else a = u;
                return a;
              }
              function fS() {
                var a, w;
                if (a = [], w = T.charAt(g), Lu.test(w) ? g++ : (w = u, z === 0 && U(hl)), w !== u) for (; w !== u; ) a.push(w), w = T.charAt(g), Lu.test(w) ? g++ : (w = u, z === 0 && U(hl));
                else a = u;
                return a;
              }
              function Gp() {
                var a, w, A;
                for (a = g, w = [], A = T.charAt(g), eh.test(A) ? g++ : (A = u, z === 0 && U(ud)); A !== u; ) w.push(A), A = T.charAt(g), eh.test(A) ? g++ : (A = u, z === 0 && U(ud));
                return Q = a, w = Ap(w), a = w, a;
              }
              function Fn() {
                var a;
                return T.charCodeAt(g) === 34 ? (a = vi, g++) : (a = u, z === 0 && U(Ri)), a;
              }
              function jt() {
                var a, w, A, I, ee;
                if (a = g, T.charCodeAt(g) === 34 ? (w = vi, g++) : (w = u, z === 0 && U(Ri)), w !== u) {
                  for (pw(), A = [], I = hw(); I !== u; ) A.push(I), I = hw();
                  I = pw(), T.charCodeAt(g) === 34 ? (ee = vi, g++) : (ee = u, z === 0 && U(Ri)), ee !== u ? (Q = a, a = Rp(A)) : (g = a, a = u);
                } else g = a, a = u;
                return a;
              }
              function hw() {
                var a, w, A, I;
                return a = T.charAt(g), Vm.test(a) ? g++ : (a = u, z === 0 && U(xs)), a === u && (a = g, w = hS(), w !== u ? (A = g, T.charCodeAt(g) === 92 ? (I = yi, g++) : (I = u, z === 0 && U(ra)), I !== u && (Q = A, I = Np()), A = I, A === u && (A = g, T.charCodeAt(g) === 34 ? (I = vi, g++) : (I = u, z === 0 && U(Ri)), I !== u && (Q = A, I = v0()), A = I), A !== u ? (Q = a, a = Mc(A)) : (g = a, a = u)) : (g = a, a = u)), a;
              }
              function pw() {
                var a, w;
                for (z++, a = [], w = T.charAt(g), to.test(w) ? g++ : (w = u, z === 0 && U(ao)); w !== u; ) a.push(w), w = T.charAt(g), to.test(w) ? g++ : (w = u, z === 0 && U(ao));
                return z--, w = u, z === 0 && U(fl), a;
              }
              function hS() {
                var a;
                return T.charCodeAt(g) === 92 ? (a = yi, g++) : (a = u, z === 0 && U(ra)), a;
              }
              function j0() {
                var a, w, A, I, ee, de, xe, Ve, ft;
                return a = g, w = Fn(), w !== u ? (A = g, I = T.charAt(g), Ei.test(I) ? g++ : (I = u, z === 0 && U(Fr)), I !== u ? (ee = T.charAt(g), Ei.test(ee) ? g++ : (ee = u, z === 0 && U(Fr)), ee !== u ? (de = T.charAt(g), Ei.test(de) ? g++ : (de = u, z === 0 && U(Fr)), de !== u ? (xe = T.charAt(g), Ei.test(xe) ? g++ : (xe = u, z === 0 && U(Fr)), xe !== u ? (I = [
                  I,
                  ee,
                  de,
                  xe
                ], A = I) : (g = A, A = u)) : (g = A, A = u)) : (g = A, A = u)) : (g = A, A = u), A !== u ? (T.charCodeAt(g) === 46 ? (I = Us, g++) : (I = u, z === 0 && U(Es)), I !== u ? (ee = g, de = T.charAt(g), Ei.test(de) ? g++ : (de = u, z === 0 && U(Fr)), de !== u ? (xe = T.charAt(g), Ei.test(xe) ? g++ : (xe = u, z === 0 && U(Fr)), xe !== u ? (de = [
                  de,
                  xe
                ], ee = de) : (g = ee, ee = u)) : (g = ee, ee = u), ee !== u ? (T.charCodeAt(g) === 46 ? (de = Us, g++) : (de = u, z === 0 && U(Es)), de !== u ? (xe = g, Ve = T.charAt(g), Ei.test(Ve) ? g++ : (Ve = u, z === 0 && U(Fr)), Ve !== u ? (ft = T.charAt(g), Ei.test(ft) ? g++ : (ft = u, z === 0 && U(Fr)), ft !== u ? (Ve = [
                  Ve,
                  ft
                ], xe = Ve) : (g = xe, xe = u)) : (g = xe, xe = u), xe !== u ? (Ve = Fn(), Ve !== u ? (Q = a, a = Dd(A, ee, xe)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function gw() {
                var a, w, A, I, ee, de, xe, Ve, ft;
                if (a = g, w = Fn(), w !== u) {
                  if (A = [], I = T.charAt(g), _r.test(I) ? g++ : (I = u, z === 0 && U(Gn)), I !== u) for (; I !== u; ) A.push(I), I = T.charAt(g), _r.test(I) ? g++ : (I = u, z === 0 && U(Gn));
                  else A = u;
                  if (A !== u) if (T.charCodeAt(g) === 58 ? (I = vs, g++) : (I = u, z === 0 && U(os)), I !== u) {
                    if (ee = [], de = T.charAt(g), _r.test(de) ? g++ : (de = u, z === 0 && U(Gn)), de !== u) for (; de !== u; ) ee.push(de), de = T.charAt(g), _r.test(de) ? g++ : (de = u, z === 0 && U(Gn));
                    else ee = u;
                    if (ee !== u) if (T.charCodeAt(g) === 58 ? (de = vs, g++) : (de = u, z === 0 && U(os)), de !== u) {
                      if (xe = [], Ve = T.charAt(g), _r.test(Ve) ? g++ : (Ve = u, z === 0 && U(Gn)), Ve !== u) for (; Ve !== u; ) xe.push(Ve), Ve = T.charAt(g), _r.test(Ve) ? g++ : (Ve = u, z === 0 && U(Gn));
                      else xe = u;
                      xe !== u ? (Ve = mw(), Ve === u && (Ve = null), ft = Fn(), ft !== u ? (Q = a, a = Ur(A, ee, xe, Ve)) : (g = a, a = u)) : (g = a, a = u);
                    } else g = a, a = u;
                    else g = a, a = u;
                  } else g = a, a = u;
                  else g = a, a = u;
                } else g = a, a = u;
                return a;
              }
              function mw() {
                var a, w, A, I;
                if (a = g, T.charCodeAt(g) === 46 ? (w = Us, g++) : (w = u, z === 0 && U(Es)), w !== u) {
                  if (A = [], I = T.charAt(g), _r.test(I) ? g++ : (I = u, z === 0 && U(Gn)), I !== u) for (; I !== u; ) A.push(I), I = T.charAt(g), _r.test(I) ? g++ : (I = u, z === 0 && U(Gn));
                  else A = u;
                  A !== u ? (Q = a, a = St(A)) : (g = a, a = u);
                } else g = a, a = u;
                return a;
              }
              function pS() {
                var a, w, A, I;
                return a = g, w = Fn(), w !== u ? (A = gS(), A !== u ? (I = Fn(), I !== u ? (Q = a, a = vn(A)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function gS() {
                var a, w, A, I;
                return a = g, w = mS(), w !== u ? (T.charCodeAt(g) === 47 ? (A = qn, g++) : (A = u, z === 0 && U(Ec)), A !== u ? (I = yw(), I !== u ? (Q = a, a = ln(w, I)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function mS() {
                var a;
                return a = T.charAt(g), Fm.test(a) ? g++ : (a = u, z === 0 && U(dd)), a;
              }
              function vw() {
                var a, w, A, I;
                return a = g, w = Fn(), w !== u ? (A = yw(), A !== u ? (I = Fn(), I !== u ? (Q = a, a = Sn(A)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function yw() {
                var a, w;
                return a = g, w = Sw(), w !== u && (Q = a, w = br(w)), a = w, a;
              }
              function vS() {
                var a, w, A, I;
                return a = g, w = Fn(), w !== u ? (A = yS(), I = Fn(), I !== u ? (Q = a, a = aa(A)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function yS() {
                var a, w, A, I, ee, de, xe;
                if (a = g, w = g, A = O0(), A !== u) {
                  for (I = [], ee = g, T.charCodeAt(g) === 58 ? (de = vs, g++) : (de = u, z === 0 && U(os)), de !== u ? (xe = O0(), xe !== u ? (Q = ee, ee = cn(A, xe)) : (g = ee, ee = u)) : (g = ee, ee = u); ee !== u; ) I.push(ee), ee = g, T.charCodeAt(g) === 58 ? (de = vs, g++) : (de = u, z === 0 && U(os)), de !== u ? (xe = O0(), xe !== u ? (Q = ee, ee = cn(A, xe)) : (g = ee, ee = u)) : (g = ee, ee = u);
                  Q = w, w = xl(A, I);
                } else g = w, w = u;
                return w === u && (w = null), Q = a, w = uo(w), a = w, a;
              }
              function O0() {
                var a, w, A, I, ee, de;
                return a = g, T.charCodeAt(g) === 63 ? (w = Yi, g++) : (w = u, z === 0 && U(Gt)), w !== u && (Q = a, w = $c()), a = w, a === u && (a = g, T.charCodeAt(g) === 45 ? (w = Kn, g++) : (w = u, z === 0 && U(pl)), w !== u && (Q = a, w = jd()), a = w, a === u && (a = g, w = ti(), w !== u ? (T.charCodeAt(g) === 47 ? (A = qn, g++) : (A = u, z === 0 && U(Ec)), A !== u ? (I = ti(), I !== u ? (T.charCodeAt(g) === 43 ? (ee = Xi, g++) : (ee = u, z === 0 && U(gl)), ee !== u ? (de = ti(), de !== u ? (Q = a, a = El(w, I, de)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = ti(), w !== u ? (T.charCodeAt(g) === 47 ? (A = qn, g++) : (A = u, z === 0 && U(Ec)), A !== u ? (I = ti(), I !== u ? (Q = a, a = cr(w, I)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = ti(), w !== u ? (T.charCodeAt(g) === 43 ? (A = Xi, g++) : (A = u, z === 0 && U(gl)), A !== u ? (I = ti(), I !== u ? (Q = a, a = Od(w, I)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = ti(), w !== u && (Q = a, w = la(w)), a = w, a === u && (a = g, T.charCodeAt(g) === 42 ? (w = Ji, g++) : (w = u, z === 0 && U(bc)), w !== u ? (A = ti(), A !== u ? (Q = a, a = Zs(A)) : (g = a, a = u)) : (g = a, a = u))))))), a;
              }
              function wS() {
                var a, w, A, I;
                return a = g, w = Fn(), w !== u ? (A = ww(), A !== u ? (I = Fn(), I !== u ? (Q = a, a = Vc(A)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function ww() {
                var a, w;
                return a = g, T.substr(g, 3) === rs ? (w = rs, g += 3) : (w = u, z === 0 && U(Tc)), w !== u && (Q = a, w = Ld(w)), a = w, a === u && (a = g, T.substr(g, 3) === $o ? (w = $o, g += 3) : (w = u, z === 0 && U(fd)), w !== u && (Q = a, w = Pi(w)), a = w, a === u && (a = g, T.substr(g, 7) === pn ? (w = pn, g += 7) : (w = u, z === 0 && U(lo)), w !== u && (Q = a, w = Fc(w)), a = w, a === u && (a = g, T.substr(g, 3) === Or ? (w = Or, g += 3) : (w = u, z === 0 && U(Yt)), w !== u && (Q = a, w = Di()), a = w, a === u && (a = g, T.charCodeAt(g) === 42 ? (w = Ji, g++) : (w = u, z === 0 && U(bc)), w !== u && (Q = a, w = zc(w)), a = w)))), a;
              }
              function _w() {
                var a, w, A, I;
                return a = g, w = Qd(), w !== u && (Q = a, w = bl(w)), a = w, a === u && (a = g, w = Fn(), w !== u ? (T.charCodeAt(g) === 45 ? (A = Kn, g++) : (A = u, z === 0 && U(pl)), A !== u ? (I = Fn(), I !== u ? (Q = a, a = Md()) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = Fn(), w !== u ? (A = Fn(), A !== u ? (Q = a, a = Uc()) : (g = a, a = u)) : (g = a, a = u))), a;
              }
              function Qd() {
                var a, w, A, I;
                if (a = g, w = Fn(), w !== u) {
                  if (A = [], I = T.charAt(g), _r.test(I) ? g++ : (I = u, z === 0 && U(Gn)), I !== u) for (; I !== u; ) A.push(I), I = T.charAt(g), _r.test(I) ? g++ : (I = u, z === 0 && U(Gn));
                  else A = u;
                  A !== u ? (I = Fn(), I !== u ? (Q = a, a = Bc(A)) : (g = a, a = u)) : (g = a, a = u);
                } else g = a, a = u;
                return a;
              }
              function Yd() {
                var a, w, A, I, ee, de, xe, Ve, ft, Ut;
                return a = g, qp(), w = Ce(), A = L0(), A === u && (A = null), Ce(), I = NS(), I === u && (I = null), Ce(), ee = PS(), ee !== u ? (Ce(), de = Nw(), de === u && (de = null), xe = _S(), xe === u && (xe = null), Ce(), Ve = L0(), Ve === u && (Ve = null), Ce(), ft = kw(), ft === u && (ft = null), Ut = Yd(), Ut === u && (Ut = null), Q = a, a = Qn(A, I, ee, de, xe, Ve, ft, Ut)) : (g = a, a = u), a === u && (a = g, Ce(), w = xS(), w !== u ? (A = Ce(), Q = a, a = ji(w)) : (g = a, a = u)), a;
              }
              function _S() {
                var a, w, A, I;
                return a = g, w = Aw(), w !== u ? (T.charCodeAt(g) === 61 ? (A = Zi, g++) : (A = u, z === 0 && U(nn)), A !== u ? (I = Rw(), I !== u ? (w = [
                  w,
                  A,
                  I
                ], a = w) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function xS() {
                var a, w;
                return a = g, w = ww(), w !== u && (Q = a, w = us(w)), a = w, a;
              }
              function L0() {
                var a, w, A, I, ee;
                if (a = g, w = M0(), w !== u) {
                  for (A = [], I = g, Ce(), ee = M0(), ee !== u ? (Q = I, I = Yn(w, ee)) : (g = I, I = u); I !== u; ) A.push(I), I = g, Ce(), ee = M0(), ee !== u ? (Q = I, I = Yn(w, ee)) : (g = I, I = u);
                  Q = a, a = Pp(w, A);
                } else g = a, a = u;
                return a;
              }
              function M0() {
                var a, w, A, I;
                return a = g, w = Tw(), w !== u ? (A = Cw(), A !== u ? (Q = a, a = $d()) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = Tw(), w !== u ? (A = Tr(), A !== u ? (I = Cw(), I !== u ? (Q = a, a = Vd(A)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = ES(), w !== u && (Q = a, w = y0(w)), a = w)), a;
              }
              function Tr() {
                var a, w, A, I, ee, de, xe, Ve, ft, Ut, wt, Xe, yn;
                if (a = g, w = Ce(), A = Sl(), A !== u) if (T.substr(g, 4) === ss ? (I = ss, g += 4) : (I = u, z === 0 && U(mn)), I !== u) if (ee = nu(), ee !== u) if (de = bS(), de === u && (de = null), xe = Ce(), Ve = ua(), Ve !== u) {
                  for (ft = Ce(), Ut = [], wt = g, Xe = Tr(), Xe !== u && (Q = wt, Xe = ei(de, Xe)), wt = Xe; wt !== u; ) Ut.push(wt), wt = g, Xe = Tr(), Xe !== u && (Q = wt, Xe = ei(de, Xe)), wt = Xe;
                  Q = a, a = Dp(de, Ut);
                } else g = a, a = u;
                else g = a, a = u;
                else g = a, a = u;
                else g = a, a = u;
                if (a === u) {
                  if (a = g, w = Ce(), A = Sl(), A !== u) if (T.substr(g, 4) === Zl ? (I = Zl, g += 4) : (I = u, z === 0 && U(Cc)), I !== u) if (ee = nu(), ee !== u) if (de = TS(), de === u && (de = null), xe = Ce(), Ve = ua(), Ve !== u) {
                    for (ft = Ce(), Ut = [], wt = g, Xe = Tr(), Xe !== u && (Q = wt, Xe = Wc(de, Xe)), wt = Xe; wt !== u; ) Ut.push(wt), wt = g, Xe = Tr(), Xe !== u && (Q = wt, Xe = Wc(de, Xe)), wt = Xe;
                    Q = a, a = fo(de, Ut);
                  } else g = a, a = u;
                  else g = a, a = u;
                  else g = a, a = u;
                  else g = a, a = u;
                  if (a === u) {
                    if (a = g, w = Ce(), A = Sl(), A !== u) if (T.charCodeAt(g) === 37 ? (I = wi, g++) : (I = u, z === 0 && U(co)), I !== u) if (ee = SS(), ee !== u) if (de = nu(), de !== u) if (xe = Sw(), xe !== u) if (Ve = Ce(), ft = ua(), ft !== u) {
                      for (Ut = Ce(), wt = [], Xe = g, yn = Tr(), yn !== u && (Q = Xe, yn = Hc(ee, xe, yn)), Xe = yn; Xe !== u; ) wt.push(Xe), Xe = g, yn = Tr(), yn !== u && (Q = Xe, yn = Hc(ee, xe, yn)), Xe = yn;
                      Q = a, a = ho(ee, xe, wt);
                    } else g = a, a = u;
                    else g = a, a = u;
                    else g = a, a = u;
                    else g = a, a = u;
                    else g = a, a = u;
                    else g = a, a = u;
                    if (a === u) {
                      if (a = g, w = Ce(), A = Sl(), A !== u) if (T.charCodeAt(g) === 37 ? (I = wi, g++) : (I = u, z === 0 && U(co)), I !== u) if (ee = IS(), ee !== u) if (de = nu(), de !== u) if (xe = kS(), xe !== u) if (Ve = Ce(), ft = ua(), ft !== u) {
                        for (Ut = Ce(), wt = [], Xe = g, yn = Tr(), yn !== u && (Q = Xe, yn = Fd(ee, xe, yn)), Xe = yn; Xe !== u; ) wt.push(Xe), Xe = g, yn = Tr(), yn !== u && (Q = Xe, yn = Fd(ee, xe, yn)), Xe = yn;
                        Q = a, a = jp(ee, xe, wt);
                      } else g = a, a = u;
                      else g = a, a = u;
                      else g = a, a = u;
                      else g = a, a = u;
                      else g = a, a = u;
                      else g = a, a = u;
                      if (a === u) {
                        if (a = g, w = Ce(), A = Sl(), A !== u) if (T.substr(g, 5) === ys ? (I = ys, g += 5) : (I = u, z === 0 && U(ml)), I !== u) if (ee = nu(), ee !== u) if (de = Gp(), xe = Ce(), Ve = ua(), Ve !== u) {
                          for (ft = Ce(), Ut = [], wt = g, Xe = Tr(), Xe !== u && (Q = wt, Xe = qc(de, Xe)), wt = Xe; wt !== u; ) Ut.push(wt), wt = g, Xe = Tr(), Xe !== u && (Q = wt, Xe = qc(de, Xe)), wt = Xe;
                          Q = a, a = Kc(de, Ut);
                        } else g = a, a = u;
                        else g = a, a = u;
                        else g = a, a = u;
                        else g = a, a = u;
                        if (a === u) {
                          if (a = g, w = Ce(), A = Sl(), A !== u) if (T.charCodeAt(g) === 37 ? (I = wi, g++) : (I = u, z === 0 && U(co)), I !== u) if (ee = Gp(), de = nu(), de !== u) {
                            if (xe = [], Ve = Ew(), Ve !== u) for (; Ve !== u; ) xe.push(Ve), Ve = Ew();
                            else xe = u;
                            if (xe !== u) if (Ve = ua(), Ve !== u) {
                              for (ft = Ce(), Ut = [], wt = g, Xe = Tr(), Xe !== u && (Q = wt, Xe = Op(ee, xe, Xe)), wt = Xe; wt !== u; ) Ut.push(wt), wt = g, Xe = Tr(), Xe !== u && (Q = wt, Xe = Op(ee, xe, Xe)), wt = Xe;
                              Q = a, a = w0(ee, xe, Ut);
                            } else g = a, a = u;
                            else g = a, a = u;
                          } else g = a, a = u;
                          else g = a, a = u;
                          else g = a, a = u;
                          if (a === u) {
                            if (a = g, w = [], A = xw(), A !== u) for (; A !== u; ) w.push(A), A = xw();
                            else w = u;
                            if (w !== u) {
                              for (A = [], I = g, ee = Ce(), de = Tr(), de !== u ? (Q = I, I = zd(w, de)) : (g = I, I = u); I !== u; ) A.push(I), I = g, ee = Ce(), de = Tr(), de !== u ? (Q = I, I = zd(w, de)) : (g = I, I = u);
                              Q = a, a = Lp(w, A);
                            } else g = a, a = u;
                          }
                        }
                      }
                    }
                  }
                }
                return a;
              }
              function xw() {
                var a, w, A, I;
                return a = g, w = g, z++, T.substr(g, 2) === Bs ? (A = Bs, g += 2) : (A = u, z === 0 && U(t0)), z--, A === u ? w = void 0 : (g = w, w = u), w !== u ? (A = g, z++, T.charCodeAt(g) === 125 ? (I = _i, g++) : (I = u, z === 0 && U(Tn)), z--, I === u ? A = void 0 : (g = A, A = u), A !== u ? (T.length > g ? (I = T.charAt(g), g++) : (I = u, z === 0 && U(Sc)), I !== u ? (Q = a, a = po(I)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function Ew() {
                var a, w, A;
                return a = g, w = g, z++, A = ua(), z--, A === u ? w = void 0 : (g = w, w = u), w !== u ? (T.length > g ? (A = T.charAt(g), g++) : (A = u, z === 0 && U(Sc)), A !== u ? (Q = a, a = _0(A)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function ES() {
                var a, w, A, I;
                if (a = g, w = CS(), w !== u) {
                  for (A = [], I = T.charAt(g), Lr.test(I) ? g++ : (I = u, z === 0 && U(Ic)); I !== u; ) A.push(I), I = T.charAt(g), Lr.test(I) ? g++ : (I = u, z === 0 && U(Ic));
                  I = fS(), I !== u ? (Q = a, a = ca(A)) : (g = a, a = u);
                } else g = a, a = u;
                return a;
              }
              function bS() {
                var a, w, A, I, ee, de, xe;
                if (a = g, w = $0(), w !== u) {
                  for (Ce(), A = [], I = g, T.charCodeAt(g) === 44 ? (ee = Ws, g++) : (ee = u, z === 0 && U(sa)), ee !== u ? (de = Ce(), xe = $0(), xe !== u ? (ee = [
                    ee,
                    de,
                    xe
                  ], I = ee) : (g = I, I = u)) : (g = I, I = u); I !== u; ) A.push(I), I = g, T.charCodeAt(g) === 44 ? (ee = Ws, g++) : (ee = u, z === 0 && U(sa)), ee !== u ? (de = Ce(), xe = $0(), xe !== u ? (ee = [
                    ee,
                    de,
                    xe
                  ], I = ee) : (g = I, I = u)) : (g = I, I = u);
                  Q = a, a = Mp(w, A);
                } else g = a, a = u;
                return a;
              }
              function $0() {
                var a, w, A;
                return a = g, w = bw(), w !== u ? (A = F0(), A !== u ? (Q = a, a = Jt(w, A)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function TS() {
                var a, w, A, I, ee, de, xe;
                if (a = g, w = V0(), w !== u) {
                  for (Ce(), A = [], I = g, T.charCodeAt(g) === 44 ? (ee = Ws, g++) : (ee = u, z === 0 && U(sa)), ee !== u ? (de = Ce(), xe = V0(), xe !== u ? (ee = [
                    ee,
                    de,
                    xe
                  ], I = ee) : (g = I, I = u)) : (g = I, I = u); I !== u; ) A.push(I), I = g, T.charCodeAt(g) === 44 ? (ee = Ws, g++) : (ee = u, z === 0 && U(sa)), ee !== u ? (de = Ce(), xe = V0(), xe !== u ? (ee = [
                    ee,
                    de,
                    xe
                  ], I = ee) : (g = I, I = u)) : (g = I, I = u);
                  Q = a, a = x0(w, A);
                } else g = a, a = u;
                return a;
              }
              function V0() {
                var a, w, A, I;
                return a = g, w = bw(), w !== u ? (A = F0(), A !== u ? (I = F0(), I !== u ? (Q = a, a = $p(w, A, I)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function bw() {
                var a, w;
                return a = g, T.charCodeAt(g) === 89 ? (w = Za, g++) : (w = u, z === 0 && U(bs)), w !== u && (Q = a, w = E0()), a = w, a === u && (a = g, T.charCodeAt(g) === 71 ? (w = ec, g++) : (w = u, z === 0 && U(zr)), w !== u && (Q = a, w = b0()), a = w, a === u && (a = g, T.charCodeAt(g) === 82 ? (w = Vo, g++) : (w = u, z === 0 && U(vl)), w !== u && (Q = a, w = Vp()), a = w, a === u && (a = g, T.charCodeAt(g) === 66 ? (w = Fo, g++) : (w = u, z === 0 && U(hd)), w !== u && (Q = a, w = Fp()), a = w, a === u && (a = g, T.charCodeAt(g) === 79 ? (w = tc, g++) : (w = u, z === 0 && U(pd)), w !== u && (Q = a, w = T0()), a = w, a === u && (a = g, T.charCodeAt(g) === 67 ? (w = Hs, g++) : (w = u, z === 0 && U(jh)), w !== u && (Q = a, w = Br()), a = w))))), a;
              }
              function F0() {
                var a, w, A;
                return a = g, w = Il(), w !== u ? (A = kl(), A !== u ? (Q = a, a = Ud(w, A)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function Tw() {
                var a;
                return T.charCodeAt(g) === 123 ? (a = nc, g++) : (a = u, z === 0 && U(Oh)), a;
              }
              function Cw() {
                var a;
                return T.charCodeAt(g) === 125 ? (a = _i, g++) : (a = u, z === 0 && U(Tn)), a;
              }
              function Sl() {
                var a;
                return T.charCodeAt(g) === 91 ? (a = rc, g++) : (a = u, z === 0 && U(Lh)), a;
              }
              function ua() {
                var a;
                return T.charCodeAt(g) === 93 ? (a = sc, g++) : (a = u, z === 0 && U(Mh)), a;
              }
              function CS() {
                var a;
                return T.charCodeAt(g) === 59 ? (a = el, g++) : (a = u, z === 0 && U($h)), a;
              }
              function SS() {
                var a, w;
                return a = g, T.substr(g, 3) === eo ? (w = eo, g += 3) : (w = u, z === 0 && U(Vh)), w !== u && (Q = a, w = C0()), a = w, a === u && (a = g, T.substr(g, 3) === On ? (w = On, g += 3) : (w = u, z === 0 && U(Fh)), w !== u && (Q = a, w = Oi()), a = w, a === u && (a = g, T.substr(g, 3) === tl ? (w = tl, g += 3) : (w = u, z === 0 && U(zh)), w !== u && (Q = a, w = Gc()), a = w)), a;
              }
              function IS() {
                var a, w;
                return a = g, T.substr(g, 3) === nl ? (w = nl, g += 3) : (w = u, z === 0 && U(yl)), w !== u && (Q = a, w = go()), a = w, a;
              }
              function Sw() {
                var a, w, A, I, ee;
                return a = g, w = Iw(), w === u && (w = null), A = da(), A !== u ? (I = da(), I === u && (I = null), ee = mw(), ee === u && (ee = null), Q = a, a = Qc(w, A, I, ee)) : (g = a, a = u), a;
              }
              function kS() {
                var a, w, A, I;
                return a = g, w = Iw(), w === u && (w = null), A = da(), A !== u ? (I = da(), I === u && (I = null), Q = a, a = Bd(w, A, I)) : (g = a, a = u), a;
              }
              function Iw() {
                var a, w, A;
                return a = g, w = AS(), w !== u ? (A = RS(), A === u && (A = null), Q = a, a = Wd(w, A)) : (g = a, a = u), a;
              }
              function AS() {
                var a, w, A, I;
                return a = g, w = da(), w !== u ? (A = da(), A === u && (A = null), T.charCodeAt(g) === 58 ? (I = vs, g++) : (I = u, z === 0 && U(os)), I !== u ? (Q = a, a = S0(w, A)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function RS() {
                var a, w, A, I;
                return a = g, w = da(), w !== u ? (A = da(), A === u && (A = null), T.charCodeAt(g) === 58 ? (I = vs, g++) : (I = u, z === 0 && U(os)), I !== u ? (Q = a, a = Hd(w, A)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function da() {
                var a, w;
                return a = g, w = T.charAt(g), _r.test(w) ? g++ : (w = u, z === 0 && U(Gn)), w !== u && (Q = a, w = I0(w)), a = w, a;
              }
              function kw() {
                var a, w, A, I, ee;
                return a = g, w = Aw(), w !== u ? (A = Yd(), A !== u ? (I = Rw(), I !== u ? (Ce(), ee = kw(), ee === u && (ee = null), Q = a, a = zp(A, ee)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function Aw() {
                var a;
                return T.charCodeAt(g) === 40 ? (a = ws, g++) : (a = u, z === 0 && U(Uh)), a;
              }
              function Rw() {
                var a;
                return T.charCodeAt(g) === 41 ? (a = p, g++) : (a = u, z === 0 && U(kc)), a;
              }
              function NS() {
                var a, w, A, I, ee, de, xe;
                if (a = g, w = ti(), w !== u) {
                  for (A = [], I = Yp(); I !== u; ) A.push(I), I = Yp();
                  for (I = [], ee = Qp(); ee !== u; ) I.push(ee), ee = Qp();
                  for (ee = [], de = Yp(); de !== u; ) ee.push(de), de = Yp();
                  for (de = [], xe = Qp(); xe !== u; ) de.push(xe), xe = Qp();
                  Q = a, a = Up(w);
                } else g = a, a = u;
                return a;
              }
              function Qp() {
                var a;
                return T.charCodeAt(g) === 46 ? (a = Us, g++) : (a = u, z === 0 && U(Es)), a;
              }
              function ti() {
                var a, w, A;
                if (z++, a = g, w = [], A = T.charAt(g), _r.test(A) ? g++ : (A = u, z === 0 && U(Gn)), A !== u) for (; A !== u; ) w.push(A), A = T.charAt(g), _r.test(A) ? g++ : (A = u, z === 0 && U(Gn));
                else w = u;
                return w !== u && (Q = a, w = Yc(w)), a = w, z--, a === u && (w = u, z === 0 && U(Ac)), a;
              }
              function Yp() {
                var a, w, A;
                if (a = g, w = [], T.charCodeAt(g) === 32 ? (A = E, g++) : (A = u, z === 0 && U(gd)), A !== u) for (; A !== u; ) w.push(A), T.charCodeAt(g) === 32 ? (A = E, g++) : (A = u, z === 0 && U(gd));
                else w = u;
                return w !== u && (Q = a, w = Xc()), a = w, a;
              }
              function PS() {
                var a, w, A, I, ee, de, xe, Ve, ft;
                return a = g, w = Xp(), w === u && (w = null), A = g, z++, I = jS(), z--, I !== u ? (g = A, A = void 0) : A = u, A !== u ? (I = Pw(), I !== u ? (ee = U0(), ee === u && (ee = null), de = Il(), de !== u ? (xe = kl(), xe !== u ? (Ve = z0(), Ve === u && (Ve = null), ft = Xd(), ft === u && (ft = null), Ce(), T.substr(g, 4) === k ? g += 4 : z === 0 && U(md), Q = a, a = Bp(w, I, ee, de, xe, Ve, ft)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = Xp(), w === u && (w = null), A = Il(), A !== u ? (I = kl(), I !== u ? (ee = LS(), ee === u && (ee = null), de = Il(), de !== u ? (xe = kl(), xe !== u ? (Ve = z0(), Ve === u && (Ve = null), ft = Xd(), ft === u && (ft = null), Q = a, a = qd(w, A, I, ee, de, xe, Ve, ft)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, w = Xp(), w === u && (w = null), A = U0(), A === u && (A = null), I = Il(), I !== u ? (ee = kl(), ee !== u ? (de = z0(), de === u && (de = null), xe = Xd(), xe === u && (xe = null), Q = a, a = k0(w, A, I, ee, de, xe)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, T.substr(g, 5) === $ ? (w = $, g += 5) : (w = u, z === 0 && U(Bh)), w !== u ? (A = Xd(), A === u && (A = null), Q = a, a = Wp(A)) : (g = a, a = u), a === u && (a = g, T.substr(g, 3) === ne ? (w = ne, g += 3) : (w = u, z === 0 && U(Wh)), w !== u ? (A = Xd(), A === u && (A = null), Q = a, a = Kd(A)) : (g = a, a = u), a === u && (a = g, w = Xp(), w !== u ? (T.charCodeAt(g) === 64 ? (A = ue, g++) : (A = u, z === 0 && U(Hh)), A !== u ? (I = Il(), I !== u ? (ee = kl(), ee !== u ? (Q = a, a = Jc(w, I, ee)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, T.substr(g, 2) === Ae ? (w = Ae, g += 2) : (w = u, z === 0 && U(qh)), w !== u && (Q = a, w = Gd()), a = w)))))), a;
              }
              function Xd() {
                var a, w, A, I;
                return a = g, w = g, A = g, z++, T.substr(g, 2) === Rt ? (I = Rt, g += 2) : (I = u, z === 0 && U(Rc)), z--, I === u ? A = void 0 : (g = A, A = u), A !== u ? (T.charCodeAt(g) === 43 ? (I = Xi, g++) : (I = u, z === 0 && U(gl)), I !== u ? (A = [
                  A,
                  I
                ], w = A) : (g = w, w = u)) : (g = w, w = u), w !== u && (Q = a, w = Zc(w)), a = w, a === u && (a = g, w = g, A = g, z++, T.substr(g, 3) === an ? (I = an, g += 3) : (I = u, z === 0 && U(Kh)), z--, I === u ? A = void 0 : (g = A, A = u), A !== u ? (T.charCodeAt(g) === 35 ? (I = bt, g++) : (I = u, z === 0 && U(Gh)), I !== u ? (A = [
                  A,
                  I
                ], w = A) : (g = w, w = u)) : (g = w, w = u), w !== u && (Q = a, w = Hp(w)), a = w), a;
              }
              function z0() {
                var a, w;
                return a = g, T.charCodeAt(g) === 61 ? g++ : z === 0 && U(nn), w = OS(), w !== u ? (Q = a, a = A0(w)) : (g = a, a = u), a;
              }
              function Nw() {
                var a, w, A;
                return a = g, w = DS(), w !== u ? (Ce(), A = Nw(), A === u && (A = null), Q = a, a = eu(w, A)) : (g = a, a = u), a;
              }
              function DS() {
                var a, w, A;
                return a = g, T.charCodeAt(g) === 36 ? (w = gn, g++) : (w = u, z === 0 && U(Qh)), w !== u ? (A = ti(), A !== u ? (Q = a, a = R0(A)) : (g = a, a = u)) : (g = a, a = u), a === u && (a = g, T.substr(g, 2) === tn ? (w = tn, g += 2) : (w = u, z === 0 && U(n0)), w !== u && (Q = a, w = Tl()), a = w, a === u && (a = g, T.substr(g, 2) === wr ? (w = wr, g += 2) : (w = u, z === 0 && U(Yh)), w !== u && (Q = a, w = N0()), a = w, a === u && (a = g, T.substr(g, 2) === ir ? (w = ir, g += 2) : (w = u, z === 0 && U(r0)), w !== u && (Q = a, w = tu()), a = w, a === u && (a = g, T.substr(g, 2) === xi ? (w = xi, g += 2) : (w = u, z === 0 && U(s0)), w !== u && (Q = a, w = s()), a = w, a === u && (a = g, T.charCodeAt(g) === 33 ? (w = zo, g++) : (w = u, z === 0 && U(Xh)), w !== u && (Q = a, w = o()), a = w, a === u && (a = g, T.charCodeAt(g) === 63 ? (w = Yi, g++) : (w = u, z === 0 && U(Gt)), w !== u && (Q = a, w = d()), a = w, a === u && (a = g, T.charCodeAt(g) === 8252 ? (w = Kf, g++) : (w = u, z === 0 && U(Jh)), w !== u && (Q = a, w = v()), a = w, a === u && (a = g, T.charCodeAt(g) === 8263 ? (w = Gf, g++) : (w = u, z === 0 && U(Zh)), w !== u && (Q = a, w = _()), a = w, a === u && (a = g, T.charCodeAt(g) === 8265 ? (w = Qf, g++) : (w = u, z === 0 && U(Nc)), w !== u && (Q = a, w = b()), a = w, a === u && (a = g, T.charCodeAt(g) === 8264 ? (w = Uo, g++) : (w = u, z === 0 && U(i0)), w !== u && (Q = a, w = D()), a = w, a === u && (a = g, T.charCodeAt(g) === 9633 ? (w = jm, g++) : (w = u, z === 0 && U(o0)), w !== u && (Q = a, w = K()), a = w, a === u && (a = g, T.charCodeAt(g) === 61 ? (w = Zi, g++) : (w = u, z === 0 && U(nn)), w !== u && (Q = a, w = J()), a = w, a === u && (a = g, T.charCodeAt(g) === 8734 ? (w = Om, g++) : (w = u, z === 0 && U(a0)), w !== u && (Q = a, w = ae()), a = w, a === u && (a = g, T.charCodeAt(g) === 10866 ? (w = Lm, g++) : (w = u, z === 0 && U(as)), w !== u && (Q = a, w = be()), a = w, a === u && (a = g, T.charCodeAt(g) === 10865 ? (w = Yf, g++) : (w = u, z === 0 && U(vd)), w !== u && (Q = a, w = Te()), a = w, a === u && (a = g, T.charCodeAt(g) === 177 ? (w = Xf, g++) : (w = u, z === 0 && U(Pc)), w !== u && (Q = a, w = Ee()), a = w, a === u && (a = g, T.charCodeAt(g) === 8723 ? (w = rl, g++) : (w = u, z === 0 && U(ep)), w !== u && (Q = a, w = Me()), a = w, a === u && (a = g, T.substr(g, 2) === Rt ? (w = Rt, g += 2) : (w = u, z === 0 && U(Rc)), w !== u && (Q = a, w = We()), a = w, a === u && (a = g, T.substr(g, 2) === Bo ? (w = Bo, g += 2) : (w = u, z === 0 && U(tp)), w !== u && (Q = a, w = qe()), a = w, a === u && (a = g, T.charCodeAt(g) === 10752 ? (w = Mm, g++) : (w = u, z === 0 && U(np)), w !== u && (Q = a, w = rn()), a = w, a === u && (a = g, T.charCodeAt(g) === 10227 ? (w = ic, g++) : (w = u, z === 0 && U(yd)), w !== u && (Q = a, w = re()), a = w, a === u && (a = g, T.charCodeAt(g) === 8594 ? (w = $m, g++) : (w = u, z === 0 && U(ia)), w !== u && (Q = a, w = te()), a = w, a === u && (a = g, T.charCodeAt(g) === 8593 ? (w = Jf, g++) : (w = u, z === 0 && U(wd)), w !== u && (Q = a, w = se()), a = w, a === u && (a = g, T.charCodeAt(g) === 8646 ? (w = ju, g++) : (w = u, z === 0 && U(_d)), w !== u && (Q = a, w = Ie()), a = w, a === u && (a = g, T.charCodeAt(g) === 68 ? (w = Ou, g++) : (w = u, z === 0 && U(l0)), w !== u && (Q = a, w = Qe()), a = w))))))))))))))))))))))))), a;
              }
              function Pw() {
                var a;
                return a = T.charAt(g), sl.test(a) ? g++ : (a = u, z === 0 && U(rp)), a;
              }
              function jS() {
                var a, w, A, I, ee;
                return a = g, w = Pw(), w !== u ? (A = U0(), A === u && (A = null), I = Il(), I !== u ? (ee = kl(), ee !== u ? (w = [
                  w,
                  A,
                  I,
                  ee
                ], a = w) : (g = a, a = u)) : (g = a, a = u)) : (g = a, a = u), a;
              }
              function Xp() {
                var a;
                return a = T.charAt(g), th.test(a) ? g++ : (a = u, z === 0 && U(sp)), a;
              }
              function OS() {
                var a;
                return a = T.charAt(g), nh.test(a) ? g++ : (a = u, z === 0 && U(ip)), a;
              }
              function Il() {
                var a;
                return a = T.charAt(g), rh.test(a) ? g++ : (a = u, z === 0 && U(op)), a;
              }
              function kl() {
                var a;
                return a = T.charAt(g), sh.test(a) ? g++ : (a = u, z === 0 && U(ap)), a;
              }
              function U0() {
                var a;
                return T.charCodeAt(g) === 120 ? (a = Zf, g++) : (a = u, z === 0 && U(c0)), a;
              }
              function LS() {
                var a;
                return a = T.charAt(g), Mu.test(a) ? g++ : (a = u, z === 0 && U(lr)), a;
              }
              var Jp = [];
              function Hr(a) {
                var w = Object.assign(a, AC());
                return Jp.push(w), w;
              }
              function B0(a) {
                return parseInt(a.join(""), 10);
              }
              function Al(a) {
                return a.join("").match(/\?/) ? a.join("") : B0(a);
              }
              function fa(a) {
                var w = {};
                return a.forEach(function(A) {
                  for (var I in A) Array.isArray(A[I]) ? w[I] = w[I] ? w[I].concat(A[I]) : A[I] : w[I] = w[I] ? jw(w[I]) + " " + Dw(A[I]) : A[I];
                }), w;
              }
              function Dw(a) {
                if (typeof a != "string") return a;
                var w = /^\s+/;
                return a.replace(w, "");
              }
              function jw(a) {
                if (typeof a != "string") return a;
                var w = /\s+$/;
                return a.replace(w, "");
              }
              if (Cl = M(), Y.peg$library) return {
                peg$result: Cl,
                peg$currPos: g,
                peg$FAILED: u,
                peg$maxFailExpected: Et,
                peg$maxFailPos: Mt
              };
              if (Cl !== u && g === T.length) return Cl;
              throw Cl !== u && g < T.length && U(NC()), PC(Et, Mt < T.length ? T.charAt(Mt) : null, Mt < T.length ? P0(Mt, Mt + 1) : P0(Mt, Mt));
            }
            return {
              StartRules: [
                "pgn",
                "tags",
                "game",
                "games"
              ],
              SyntaxError: L,
              parse: W
            };
          });
        })(l);
        var c = l.exports, f = i(c);
        function m(P, O) {
          return !O || O.startRule === "games" ? C(P, O) : y(P, O);
        }
        function y(P, O = {
          startRule: "game"
        }) {
          P = P.trim();
          let L = f.parse(P, O), H = {
            moves: [],
            messages: []
          };
          return O.startRule === "pgn" ? H.moves = L : O.startRule === "tags" ? H.tags = L : H = L, x(H, P, O);
        }
        function x(P, O, L) {
          function H(T) {
            if (L.startRule !== "tags") {
              let Y = T.moves[T.moves.length - 1];
              if (typeof Y == "string" && (T.moves.pop(), T.tags)) {
                let u = T.tags.Result;
                u && Y !== u && T.messages.push({
                  key: "Result",
                  value: u,
                  message: "Result in tags is different to result in SAN"
                }), T.tags.Result = Y;
              }
            }
            return T;
          }
          function W(T) {
            function Y(u) {
              function ge(q) {
                return q.split(/\s+/)[1];
              }
              function j(q, G) {
                function F(Oe) {
                  return Oe === "w" ? "b" : "w";
                }
                return q.turn = G, q.variations && q.variations.forEach(function(Oe) {
                  let Le = G;
                  Oe.forEach((Ge) => Le = j(Ge, Le));
                }), F(G);
              }
              let V = L.fen || u.tags && u.tags.FEN || "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1", B = ge(V);
              return u.moves.forEach((q) => B = j(q, B)), u;
            }
            return T.moves ? Y(T) : T;
          }
          return W(H(P));
        }
        function C(P, O = {
          startRule: "games"
        }) {
          function L(Y) {
            if (!Array.isArray(Y)) return [];
            if (Y.length === 0) return Y;
            let u = Y.pop();
            return (u.tags !== void 0 || u.moves.length > 0) && Y.push(u), Y;
          }
          function H(Y, u, ge = {
            startRule: "games"
          }) {
            return L(Y);
          }
          const W = Object.assign({
            startRule: "games"
          }, O);
          let T = f.parse(P, W);
          return T ? (H(T, P, W), T.forEach((Y) => {
            x(Y, P, W);
          }), T) : [];
        }
        const S = (P, O = `
`) => P.replace(/\r?\n/g, O);
        function N(P, O = {
          startRule: "games"
        }) {
          let L = S(P).split(/\n\n+/), H = [], W = {
            tags: "",
            pgn: "",
            all: ""
          };
          return L.forEach(function(T) {
            if (T.startsWith("[")) W.tags = T;
            else if (T) {
              W.pgn = T;
              let Y = W.tags ? W.tags + `

` + W.pgn : W.pgn;
              W.all = Y, H.push(W), W = {
                tags: "",
                pgn: "",
                all: ""
              };
            }
          }), H;
        }
        t.parse = m, t.parseGame = y, t.parseGames = C, t.split = N;
      });
    }(af, af.exports)), af.exports;
  }
  var ZN = JN();
  function e4(n) {
    const e = [], t = [];
    let r = Date.now();
    try {
      const { cleanedPgn: i, annotationMap: l } = t4(n), c = n4(i);
      console.log("PGN preparato per il parsing:", c);
      const f = ZN.parse(c, {
        startRule: "game"
      });
      console.log("Parsed PGN:", JSON.stringify(f, null, 2));
      const m = /* @__PURE__ */ new Map(), y = new Cr();
      return wb(f.moves, y, null, 0, e, t, m, r, l), Dy({
        nodes: e,
        connections: t,
        annotations: []
      });
    } catch (i) {
      return console.error("Errore nel parsing del PGN:", i), i4(n);
    }
  }
  function t4(n) {
    const e = /* @__PURE__ */ new Map(), t = /\[%cal\s+([^\]]+)\]/g, r = /\[%csl\s+([^\]]+)\]/g, i = /\[%evp[^\]]*\]/g;
    let l, c = n;
    for (; (l = t.exec(n)) !== null; ) {
      const f = l[0], m = l[1], y = l.index, x = P_(n, y);
      if (x) {
        e.has(x) || e.set(x, {
          arrows: [],
          squares: []
        });
        const C = r4(m);
        e.get(x).arrows.push(...C);
      }
      c = c.replace(f, " ");
    }
    for (; (l = r.exec(n)) !== null; ) {
      const f = l[0], m = l[1], y = l.index, x = P_(n, y);
      if (x) {
        e.has(x) || e.set(x, {
          arrows: [],
          squares: []
        });
        const C = s4(m);
        e.get(x).squares.push(...C);
      }
      c = c.replace(f, " ");
    }
    return c = c.replace(i, " "), c = c.replace(/[^()\[\]{}0-9.]+/g, " "), c = c.replace(/\s+/g, " ").trim(), {
      cleanedPgn: c,
      annotationMap: e
    };
  }
  function n4(n) {
    return /\[\s*(\w+)\s+\"([^\"]*)\"\s*\]/.test(n) || (n = `[Event "Chess Analysis"]
[Site "Chess Notes"]
[Date "2025.04.03"]
[Round "?"]
[White "White"]
[Black "Black"]
[Result "*"]

` + n), n;
  }
  function P_(n, e) {
    const t = n.substring(0, e), r = /([KQRBNP]?[a-h]?[1-8]?x?[a-h][1-8](=[QRBN])?[+#]?|O-O(?:-O)?)/g;
    let i = null, l;
    for (; (l = r.exec(t)) !== null; ) i = l[0];
    return i;
  }
  function r4(n) {
    const e = [];
    return n.split(",").forEach((r) => {
      if (r = r.trim(), r.length >= 5) {
        const i = r[0], l = r.substring(1, 3), c = r.substring(3, 5);
        l && c && e.push({
          from: l,
          to: c,
          color: _b(i)
        });
      }
    }), e;
  }
  function s4(n) {
    const e = [];
    return n.split(",").forEach((r) => {
      if (r = r.trim(), r.length >= 3) {
        const i = r[0], l = r.substring(1, 3);
        l && e.push({
          square: l,
          color: _b(i)
        });
      }
    }), e;
  }
  function wb(n, e, t, r, i, l, c, f, m) {
    var _a3;
    if (!n || n.length === 0) return;
    let y = t;
    for (const x of n) try {
      const C = new Cr(e.fen());
      if (C.move(x.notation.notation)) {
        const N = C.fen();
        if (c.has(N)) {
          const P = c.get(N);
          y !== null && l.push({
            id: `conn-${f++}`,
            fromId: y,
            toId: P
          }), y = P;
        } else {
          const P = f++, O = x.commentAfter || x.commentMove || "";
          let L = [], H = [];
          if (m.has(x.notation.notation)) {
            const T = m.get(x.notation.notation);
            L = T.arrows, H = T.squares;
          }
          const W = {
            id: P,
            x: 100 + r * 100,
            y: 100 * (i.length % 5),
            label: x.notation.notation,
            description: O,
            type: "move",
            fenPosition: N,
            arrows: L,
            squares: H
          };
          i.push(W), c.set(N, P), y !== null && l.push({
            id: `conn-${f++}`,
            fromId: y,
            toId: P
          }), y = P;
        }
        e.move(x.notation.notation);
      }
      if (x.variations && x.variations.length > 0) for (const N of x.variations) wb(N, new Cr(C.fen()), y, r + 1, i, l, c, f, m);
    } catch (C) {
      console.warn(`Errore nell'elaborare la mossa ${((_a3 = x.notation) == null ? void 0 : _a3.notation) || "sconosciuta"}:`, C);
    }
  }
  function i4(n) {
    console.log("Utilizzando parser di fallback per PGN problematico");
    const e = [], t = [];
    let r = Date.now();
    try {
      let i = n.replace(/\[%[^\]]*\]/g, "");
      i = i.replace(/[^()\[\]{}0-9.]+/g, " ");
      const l = i.match(/\b([KQRBNP]?[a-h]?[1-8]?x?[a-h][1-8](=[QRBN])?[+#]?|O-O(?:-O)?)\b/g);
      if (l && l.length > 0) {
        const c = new Cr();
        let f = null;
        for (let m = 0; m < l.length; m++) try {
          const y = l[m], x = c.move(y);
          if (x) {
            const C = r++, S = {
              id: C,
              x: 100 + m * 100,
              y: 50,
              label: x.san,
              description: "",
              type: "move",
              fenPosition: c.fen(),
              arrows: [],
              squares: []
            };
            e.push(S), f !== null && t.push({
              id: `conn-${r++}`,
              fromId: f,
              toId: C
            }), f = C;
          }
        } catch (y) {
          console.warn(`Errore nell'eseguire la mossa "${l[m]}" nel fallback:`, y);
        }
      }
      return Dy({
        nodes: e,
        connections: t,
        annotations: []
      });
    } catch (i) {
      return console.error("Errore anche nel parser di fallback:", i), {
        nodes: [],
        connections: []
      };
    }
  }
  function _b(n) {
    switch (n.toUpperCase()) {
      case "R":
        return "red";
      case "G":
        return "green";
      case "B":
        return "blue";
      case "Y":
        return "yellow";
      case "C":
        return "cyan";
      default:
        return "red";
    }
  }
  const xb = ({ onClose: n, setCanvasData: e }) => {
    const [t, r] = R.useState(""), [i, l] = R.useState(false), [c, f] = R.useState(""), m = R.useCallback(async () => {
      if (!t.trim()) {
        f("Inserisci un PGN valido");
        return;
      }
      l(true), f("");
      try {
        const y = e4(t);
        if (!y || !y.nodes || !y.connections) throw new Error("Parsing PGN fallito");
        e({
          nodes: y.nodes,
          connections: y.connections,
          annotations: []
        }), localStorage.setItem("canvasData", JSON.stringify({
          nodes: y.nodes,
          connections: y.connections,
          annotations: []
        })), n();
      } catch (y) {
        console.error("Errore durante l'importazione del PGN:", y), f(`Errore: ${y.message || "Formato PGN non valido"}`);
      } finally {
        l(false);
      }
    }, [
      t,
      e,
      n
    ]);
    return h.jsx("div", {
      className: "fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm",
      children: h.jsxs("div", {
        className: "bg-gray-800 rounded-lg shadow-xl w-[90%] max-w-2xl p-6",
        onClick: (y) => y.stopPropagation(),
        children: [
          h.jsxs("div", {
            className: "flex justify-between items-center mb-4",
            children: [
              h.jsx("h2", {
                className: "text-xl font-bold text-gray-100",
                children: "Importa PGN"
              }),
              h.jsx("button", {
                onClick: n,
                className: "p-1.5 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-400 hover:text-gray-200 transition-colors",
                children: h.jsx("svg", {
                  className: "w-5 h-5",
                  fill: "none",
                  stroke: "currentColor",
                  viewBox: "0 0 24 24",
                  children: h.jsx("path", {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M6 18L18 6M6 6l12 12"
                  })
                })
              })
            ]
          }),
          h.jsx("div", {
            className: "mb-4",
            children: h.jsx("textarea", {
              value: t,
              onChange: (y) => r(y.target.value),
              className: "w-full bg-gray-700 text-gray-200 text-sm p-4 rounded-md resize-none h-64 focus:ring-2 focus:ring-blue-500",
              placeholder: "Incolla qui il PGN con varianti e annotazioni..."
            })
          }),
          c && h.jsx("div", {
            className: "mb-4 p-3 bg-red-900/30 border border-red-800 rounded-md text-red-400 text-sm",
            children: c
          }),
          h.jsxs("div", {
            className: "flex justify-end gap-3",
            children: [
              h.jsx("button", {
                onClick: n,
                className: "px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-md transition-colors",
                children: "Annulla"
              }),
              h.jsx("button", {
                onClick: m,
                disabled: i,
                className: "px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-md transition-colors disabled:opacity-50 flex items-center",
                children: i ? h.jsxs(h.Fragment, {
                  children: [
                    h.jsxs("svg", {
                      className: "animate-spin -ml-1 mr-2 h-4 w-4 text-white",
                      xmlns: "http://www.w3.org/2000/svg",
                      fill: "none",
                      viewBox: "0 0 24 24",
                      children: [
                        h.jsx("circle", {
                          className: "opacity-25",
                          cx: "12",
                          cy: "12",
                          r: "10",
                          stroke: "currentColor",
                          strokeWidth: "4"
                        }),
                        h.jsx("path", {
                          className: "opacity-75",
                          fill: "currentColor",
                          d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                        })
                      ]
                    }),
                    "Elaborazione..."
                  ]
                }) : "Importa"
              })
            ]
          })
        ]
      })
    });
  };
  xb.propTypes = {
    onClose: fe.func.isRequired,
    setCanvasData: fe.func.isRequired
  };
  const zy = ({ repertoire: n, onSelect: e, onDelete: t, onRename: r, isActive: i, isLoading: l }) => {
    const [c, f] = R.useState(false), [m, y] = R.useState(false), [x, C] = R.useState(n.title || "Apertura senza titolo"), S = () => {
      !m && !l && e(n);
    }, N = (Y) => {
      Y.stopPropagation(), window.confirm(`Sei sicuro di voler eliminare "${n.title || "questa apertura"}"?`) && t(n.id);
    }, P = (Y) => {
      Y.stopPropagation(), y(true);
    }, O = (Y) => {
      Y.preventDefault(), Y.stopPropagation(), x.trim() && r(n.id, x.trim()), y(false);
    }, L = (Y) => {
      if (!Y) return "Data non disponibile";
      let u;
      if (Y.toDate && typeof Y.toDate == "function") u = Y.toDate();
      else if (typeof Y == "string") u = new Date(Y);
      else return "Data non disponibile";
      return u.toLocaleDateString("it-IT", {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "2-digit",
        minute: "2-digit"
      });
    }, H = n.updatedAt || n.createdAt, W = i ? "border-blue-500 bg-gray-750" : "border-gray-700 bg-gray-800", T = l ? "cursor-wait" : "cursor-pointer";
    return h.jsxs("div", {
      className: `mb-2 rounded-lg border ${W} hover:bg-gray-750 transition-colors ${T} overflow-hidden relative ${l === n.id ? "opacity-70" : ""}`,
      onClick: S,
      onMouseEnter: () => f(true),
      onMouseLeave: () => f(false),
      children: [
        h.jsx("div", {
          className: "p-3",
          children: m ? h.jsxs("form", {
            onSubmit: O,
            onClick: (Y) => Y.stopPropagation(),
            children: [
              h.jsx("input", {
                type: "text",
                value: x,
                onChange: (Y) => C(Y.target.value),
                className: "w-full bg-gray-700 text-white px-2 py-1 rounded mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500",
                autoFocus: true,
                onBlur: O
              }),
              h.jsxs("div", {
                className: "flex justify-end gap-2",
                children: [
                  h.jsx("button", {
                    type: "button",
                    className: "text-xs text-gray-400 hover:text-gray-200",
                    onClick: (Y) => {
                      Y.stopPropagation(), y(false), C(n.title || "Apertura senza titolo");
                    },
                    children: "Annulla"
                  }),
                  h.jsx("button", {
                    type: "submit",
                    className: "text-xs text-blue-400 hover:text-blue-300",
                    children: "Salva"
                  })
                ]
              })
            ]
          }) : h.jsxs("div", {
            className: "flex flex-col",
            children: [
              h.jsxs("div", {
                className: "flex items-center",
                children: [
                  h.jsxs("h3", {
                    className: "text-white font-medium truncate pr-16",
                    children: [
                      n.title || "Apertura senza titolo",
                      l === n.id && h.jsxs("svg", {
                        className: "inline-block animate-spin ml-2 h-4 w-4 text-blue-300",
                        xmlns: "http://www.w3.org/2000/svg",
                        fill: "none",
                        viewBox: "0 0 24 24",
                        children: [
                          h.jsx("circle", {
                            className: "opacity-25",
                            cx: "12",
                            cy: "12",
                            r: "10",
                            stroke: "currentColor",
                            strokeWidth: "4"
                          }),
                          h.jsx("path", {
                            className: "opacity-75",
                            fill: "currentColor",
                            d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                          })
                        ]
                      })
                    ]
                  }),
                  i && h.jsx("span", {
                    className: "ml-2 text-xs bg-blue-500/20 border border-blue-500/40 text-blue-300 px-1.5 rounded-full",
                    children: "Attivo"
                  })
                ]
              }),
              h.jsxs("p", {
                className: "text-gray-400 text-xs mt-1",
                children: [
                  "Aggiornato: ",
                  L(H)
                ]
              })
            ]
          })
        }),
        c && !m && !l && h.jsxs("div", {
          className: "absolute top-2 right-2 flex gap-1",
          children: [
            h.jsx("button", {
              onClick: P,
              className: "p-1.5 rounded bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white transition-colors",
              title: "Rinomina",
              children: h.jsx("svg", {
                className: "w-3.5 h-3.5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24",
                children: h.jsx("path", {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                })
              })
            }),
            h.jsx("button", {
              onClick: N,
              className: "p-1.5 rounded bg-red-900/50 hover:bg-red-800/80 text-red-300 hover:text-red-100 transition-colors",
              title: "Elimina",
              children: h.jsx("svg", {
                className: "w-3.5 h-3.5",
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24",
                children: h.jsx("path", {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                })
              })
            })
          ]
        })
      ]
    });
  };
  zy.propTypes = {
    repertoire: fe.shape({
      id: fe.string,
      title: fe.string,
      canvasData: fe.oneOfType([
        fe.string,
        fe.object
      ]),
      createdAt: fe.oneOfType([
        fe.string,
        fe.object
      ]),
      updatedAt: fe.oneOfType([
        fe.string,
        fe.object
      ]),
      uid: fe.string
    }).isRequired,
    onSelect: fe.func.isRequired,
    onDelete: fe.func.isRequired,
    onRename: fe.func.isRequired,
    isActive: fe.bool,
    isLoading: fe.oneOfType([
      fe.bool,
      fe.string
    ])
  };
  zy.defaultProps = {
    isActive: false,
    isLoading: false
  };
  const o4 = () => {
  };
  var D_ = {};
  const Eb = function(n) {
    const e = [];
    let t = 0;
    for (let r = 0; r < n.length; r++) {
      let i = n.charCodeAt(r);
      i < 128 ? e[t++] = i : i < 2048 ? (e[t++] = i >> 6 | 192, e[t++] = i & 63 | 128) : (i & 64512) === 55296 && r + 1 < n.length && (n.charCodeAt(r + 1) & 64512) === 56320 ? (i = 65536 + ((i & 1023) << 10) + (n.charCodeAt(++r) & 1023), e[t++] = i >> 18 | 240, e[t++] = i >> 12 & 63 | 128, e[t++] = i >> 6 & 63 | 128, e[t++] = i & 63 | 128) : (e[t++] = i >> 12 | 224, e[t++] = i >> 6 & 63 | 128, e[t++] = i & 63 | 128);
    }
    return e;
  }, a4 = function(n) {
    const e = [];
    let t = 0, r = 0;
    for (; t < n.length; ) {
      const i = n[t++];
      if (i < 128) e[r++] = String.fromCharCode(i);
      else if (i > 191 && i < 224) {
        const l = n[t++];
        e[r++] = String.fromCharCode((i & 31) << 6 | l & 63);
      } else if (i > 239 && i < 365) {
        const l = n[t++], c = n[t++], f = n[t++], m = ((i & 7) << 18 | (l & 63) << 12 | (c & 63) << 6 | f & 63) - 65536;
        e[r++] = String.fromCharCode(55296 + (m >> 10)), e[r++] = String.fromCharCode(56320 + (m & 1023));
      } else {
        const l = n[t++], c = n[t++];
        e[r++] = String.fromCharCode((i & 15) << 12 | (l & 63) << 6 | c & 63);
      }
    }
    return e.join("");
  }, bb = {
    byteToCharMap_: null,
    charToByteMap_: null,
    byteToCharMapWebSafe_: null,
    charToByteMapWebSafe_: null,
    ENCODED_VALS_BASE: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",
    get ENCODED_VALS() {
      return this.ENCODED_VALS_BASE + "+/=";
    },
    get ENCODED_VALS_WEBSAFE() {
      return this.ENCODED_VALS_BASE + "-_.";
    },
    HAS_NATIVE_SUPPORT: typeof atob == "function",
    encodeByteArray(n, e) {
      if (!Array.isArray(n)) throw Error("encodeByteArray takes an array as a parameter");
      this.init_();
      const t = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_, r = [];
      for (let i = 0; i < n.length; i += 3) {
        const l = n[i], c = i + 1 < n.length, f = c ? n[i + 1] : 0, m = i + 2 < n.length, y = m ? n[i + 2] : 0, x = l >> 2, C = (l & 3) << 4 | f >> 4;
        let S = (f & 15) << 2 | y >> 6, N = y & 63;
        m || (N = 64, c || (S = 64)), r.push(t[x], t[C], t[S], t[N]);
      }
      return r.join("");
    },
    encodeString(n, e) {
      return this.HAS_NATIVE_SUPPORT && !e ? btoa(n) : this.encodeByteArray(Eb(n), e);
    },
    decodeString(n, e) {
      return this.HAS_NATIVE_SUPPORT && !e ? atob(n) : a4(this.decodeStringToByteArray(n, e));
    },
    decodeStringToByteArray(n, e) {
      this.init_();
      const t = e ? this.charToByteMapWebSafe_ : this.charToByteMap_, r = [];
      for (let i = 0; i < n.length; ) {
        const l = t[n.charAt(i++)], f = i < n.length ? t[n.charAt(i)] : 0;
        ++i;
        const y = i < n.length ? t[n.charAt(i)] : 64;
        ++i;
        const C = i < n.length ? t[n.charAt(i)] : 64;
        if (++i, l == null || f == null || y == null || C == null) throw new l4();
        const S = l << 2 | f >> 4;
        if (r.push(S), y !== 64) {
          const N = f << 4 & 240 | y >> 2;
          if (r.push(N), C !== 64) {
            const P = y << 6 & 192 | C;
            r.push(P);
          }
        }
      }
      return r;
    },
    init_() {
      if (!this.byteToCharMap_) {
        this.byteToCharMap_ = {}, this.charToByteMap_ = {}, this.byteToCharMapWebSafe_ = {}, this.charToByteMapWebSafe_ = {};
        for (let n = 0; n < this.ENCODED_VALS.length; n++) this.byteToCharMap_[n] = this.ENCODED_VALS.charAt(n), this.charToByteMap_[this.byteToCharMap_[n]] = n, this.byteToCharMapWebSafe_[n] = this.ENCODED_VALS_WEBSAFE.charAt(n), this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]] = n, n >= this.ENCODED_VALS_BASE.length && (this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)] = n, this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)] = n);
      }
    }
  };
  class l4 extends Error {
    constructor() {
      super(...arguments), this.name = "DecodeBase64StringError";
    }
  }
  const c4 = function(n) {
    const e = Eb(n);
    return bb.encodeByteArray(e, true);
  }, Dg = function(n) {
    return c4(n).replace(/\./g, "");
  }, Tb = function(n) {
    try {
      return bb.decodeString(n, true);
    } catch (e) {
      console.error("base64Decode failed: ", e);
    }
    return null;
  };
  function u4() {
    if (typeof self < "u") return self;
    if (typeof window < "u") return window;
    if (typeof global < "u") return global;
    throw new Error("Unable to locate global object.");
  }
  const d4 = () => u4().__FIREBASE_DEFAULTS__, f4 = () => {
    if (typeof process > "u" || typeof D_ > "u") return;
    const n = D_.__FIREBASE_DEFAULTS__;
    if (n) return JSON.parse(n);
  }, h4 = () => {
    if (typeof document > "u") return;
    let n;
    try {
      n = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);
    } catch {
      return;
    }
    const e = n && Tb(n[1]);
    return e && JSON.parse(e);
  }, um = () => {
    try {
      return o4() || d4() || f4() || h4();
    } catch (n) {
      console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);
      return;
    }
  }, Cb = (n) => {
    var e, t;
    return (t = (e = um()) === null || e === void 0 ? void 0 : e.emulatorHosts) === null || t === void 0 ? void 0 : t[n];
  }, p4 = (n) => {
    const e = Cb(n);
    if (!e) return;
    const t = e.lastIndexOf(":");
    if (t <= 0 || t + 1 === e.length) throw new Error(`Invalid host ${e} with no separate hostname and port!`);
    const r = parseInt(e.substring(t + 1), 10);
    return e[0] === "[" ? [
      e.substring(1, t - 1),
      r
    ] : [
      e.substring(0, t),
      r
    ];
  }, Sb = () => {
    var n;
    return (n = um()) === null || n === void 0 ? void 0 : n.config;
  }, Ib = (n) => {
    var e;
    return (e = um()) === null || e === void 0 ? void 0 : e[`_${n}`];
  };
  class g4 {
    constructor() {
      this.reject = () => {
      }, this.resolve = () => {
      }, this.promise = new Promise((e, t) => {
        this.resolve = e, this.reject = t;
      });
    }
    wrapCallback(e) {
      return (t, r) => {
        t ? this.reject(t) : this.resolve(r), typeof e == "function" && (this.promise.catch(() => {
        }), e.length === 1 ? e(t) : e(t, r));
      };
    }
  }
  function m4(n, e) {
    if (n.uid) throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');
    const t = {
      alg: "none",
      type: "JWT"
    }, r = e || "demo-project", i = n.iat || 0, l = n.sub || n.user_id;
    if (!l) throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");
    const c = Object.assign({
      iss: `https://securetoken.google.com/${r}`,
      aud: r,
      iat: i,
      exp: i + 3600,
      auth_time: i,
      sub: l,
      user_id: l,
      firebase: {
        sign_in_provider: "custom",
        identities: {}
      }
    }, n);
    return [
      Dg(JSON.stringify(t)),
      Dg(JSON.stringify(c)),
      ""
    ].join(".");
  }
  function gr() {
    return typeof navigator < "u" && typeof navigator.userAgent == "string" ? navigator.userAgent : "";
  }
  function v4() {
    return typeof window < "u" && !!(window.cordova || window.phonegap || window.PhoneGap) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr());
  }
  function y4() {
    var n;
    const e = (n = um()) === null || n === void 0 ? void 0 : n.forceEnvironment;
    if (e === "node") return true;
    if (e === "browser") return false;
    try {
      return Object.prototype.toString.call(global.process) === "[object process]";
    } catch {
      return false;
    }
  }
  function w4() {
    return typeof navigator < "u" && navigator.userAgent === "Cloudflare-Workers";
  }
  function kb() {
    const n = typeof chrome == "object" ? chrome.runtime : typeof browser == "object" ? browser.runtime : void 0;
    return typeof n == "object" && n.id !== void 0;
  }
  function _4() {
    return typeof navigator == "object" && navigator.product === "ReactNative";
  }
  function x4() {
    const n = gr();
    return n.indexOf("MSIE ") >= 0 || n.indexOf("Trident/") >= 0;
  }
  function E4() {
    return !y4() && !!navigator.userAgent && navigator.userAgent.includes("Safari") && !navigator.userAgent.includes("Chrome");
  }
  function Ab() {
    try {
      return typeof indexedDB == "object";
    } catch {
      return false;
    }
  }
  function Rb() {
    return new Promise((n, e) => {
      try {
        let t = true;
        const r = "validate-browser-context-for-indexeddb-analytics-module", i = self.indexedDB.open(r);
        i.onsuccess = () => {
          i.result.close(), t || self.indexedDB.deleteDatabase(r), n(true);
        }, i.onupgradeneeded = () => {
          t = false;
        }, i.onerror = () => {
          var l;
          e(((l = i.error) === null || l === void 0 ? void 0 : l.message) || "");
        };
      } catch (t) {
        e(t);
      }
    });
  }
  function b4() {
    return !(typeof navigator > "u" || !navigator.cookieEnabled);
  }
  const T4 = "FirebaseError";
  class ui extends Error {
    constructor(e, t, r) {
      super(t), this.code = e, this.customData = r, this.name = T4, Object.setPrototypeOf(this, ui.prototype), Error.captureStackTrace && Error.captureStackTrace(this, Wl.prototype.create);
    }
  }
  class Wl {
    constructor(e, t, r) {
      this.service = e, this.serviceName = t, this.errors = r;
    }
    create(e, ...t) {
      const r = t[0] || {}, i = `${this.service}/${e}`, l = this.errors[e], c = l ? C4(l, r) : "Error", f = `${this.serviceName}: ${c} (${i}).`;
      return new ui(i, f, r);
    }
  }
  function C4(n, e) {
    return n.replace(S4, (t, r) => {
      const i = e[r];
      return i != null ? String(i) : `<${r}?>`;
    });
  }
  const S4 = /\{\$([^}]+)}/g;
  function I4(n) {
    for (const e in n) if (Object.prototype.hasOwnProperty.call(n, e)) return false;
    return true;
  }
  function Ia(n, e) {
    if (n === e) return true;
    const t = Object.keys(n), r = Object.keys(e);
    for (const i of t) {
      if (!r.includes(i)) return false;
      const l = n[i], c = e[i];
      if (j_(l) && j_(c)) {
        if (!Ia(l, c)) return false;
      } else if (l !== c) return false;
    }
    for (const i of r) if (!t.includes(i)) return false;
    return true;
  }
  function j_(n) {
    return n !== null && typeof n == "object";
  }
  function Lf(n) {
    const e = [];
    for (const [t, r] of Object.entries(n)) Array.isArray(r) ? r.forEach((i) => {
      e.push(encodeURIComponent(t) + "=" + encodeURIComponent(i));
    }) : e.push(encodeURIComponent(t) + "=" + encodeURIComponent(r));
    return e.length ? "&" + e.join("&") : "";
  }
  function lf(n) {
    const e = {};
    return n.replace(/^\?/, "").split("&").forEach((r) => {
      if (r) {
        const [i, l] = r.split("=");
        e[decodeURIComponent(i)] = decodeURIComponent(l);
      }
    }), e;
  }
  function cf(n) {
    const e = n.indexOf("?");
    if (!e) return "";
    const t = n.indexOf("#", e);
    return n.substring(e, t > 0 ? t : void 0);
  }
  function k4(n, e) {
    const t = new A4(n, e);
    return t.subscribe.bind(t);
  }
  class A4 {
    constructor(e, t) {
      this.observers = [], this.unsubscribes = [], this.observerCount = 0, this.task = Promise.resolve(), this.finalized = false, this.onNoObservers = t, this.task.then(() => {
        e(this);
      }).catch((r) => {
        this.error(r);
      });
    }
    next(e) {
      this.forEachObserver((t) => {
        t.next(e);
      });
    }
    error(e) {
      this.forEachObserver((t) => {
        t.error(e);
      }), this.close(e);
    }
    complete() {
      this.forEachObserver((e) => {
        e.complete();
      }), this.close();
    }
    subscribe(e, t, r) {
      let i;
      if (e === void 0 && t === void 0 && r === void 0) throw new Error("Missing Observer.");
      R4(e, [
        "next",
        "error",
        "complete"
      ]) ? i = e : i = {
        next: e,
        error: t,
        complete: r
      }, i.next === void 0 && (i.next = uv), i.error === void 0 && (i.error = uv), i.complete === void 0 && (i.complete = uv);
      const l = this.unsubscribeOne.bind(this, this.observers.length);
      return this.finalized && this.task.then(() => {
        try {
          this.finalError ? i.error(this.finalError) : i.complete();
        } catch {
        }
      }), this.observers.push(i), l;
    }
    unsubscribeOne(e) {
      this.observers === void 0 || this.observers[e] === void 0 || (delete this.observers[e], this.observerCount -= 1, this.observerCount === 0 && this.onNoObservers !== void 0 && this.onNoObservers(this));
    }
    forEachObserver(e) {
      if (!this.finalized) for (let t = 0; t < this.observers.length; t++) this.sendOne(t, e);
    }
    sendOne(e, t) {
      this.task.then(() => {
        if (this.observers !== void 0 && this.observers[e] !== void 0) try {
          t(this.observers[e]);
        } catch (r) {
          typeof console < "u" && console.error && console.error(r);
        }
      });
    }
    close(e) {
      this.finalized || (this.finalized = true, e !== void 0 && (this.finalError = e), this.task.then(() => {
        this.observers = void 0, this.onNoObservers = void 0;
      }));
    }
  }
  function R4(n, e) {
    if (typeof n != "object" || n === null) return false;
    for (const t of e) if (t in n && typeof n[t] == "function") return true;
    return false;
  }
  function uv() {
  }
  const N4 = 1e3, P4 = 2, D4 = 4 * 60 * 60 * 1e3, j4 = 0.5;
  function O_(n, e = N4, t = P4) {
    const r = e * Math.pow(t, n), i = Math.round(j4 * r * (Math.random() - 0.5) * 2);
    return Math.min(D4, r + i);
  }
  function xn(n) {
    return n && n._delegate ? n._delegate : n;
  }
  class ai {
    constructor(e, t, r) {
      this.name = e, this.instanceFactory = t, this.type = r, this.multipleInstances = false, this.serviceProps = {}, this.instantiationMode = "LAZY", this.onInstanceCreated = null;
    }
    setInstantiationMode(e) {
      return this.instantiationMode = e, this;
    }
    setMultipleInstances(e) {
      return this.multipleInstances = e, this;
    }
    setServiceProps(e) {
      return this.serviceProps = e, this;
    }
    setInstanceCreatedCallback(e) {
      return this.onInstanceCreated = e, this;
    }
  }
  const Nl = "[DEFAULT]";
  class O4 {
    constructor(e, t) {
      this.name = e, this.container = t, this.component = null, this.instances = /* @__PURE__ */ new Map(), this.instancesDeferred = /* @__PURE__ */ new Map(), this.instancesOptions = /* @__PURE__ */ new Map(), this.onInitCallbacks = /* @__PURE__ */ new Map();
    }
    get(e) {
      const t = this.normalizeInstanceIdentifier(e);
      if (!this.instancesDeferred.has(t)) {
        const r = new g4();
        if (this.instancesDeferred.set(t, r), this.isInitialized(t) || this.shouldAutoInitialize()) try {
          const i = this.getOrInitializeService({
            instanceIdentifier: t
          });
          i && r.resolve(i);
        } catch {
        }
      }
      return this.instancesDeferred.get(t).promise;
    }
    getImmediate(e) {
      var t;
      const r = this.normalizeInstanceIdentifier(e == null ? void 0 : e.identifier), i = (t = e == null ? void 0 : e.optional) !== null && t !== void 0 ? t : false;
      if (this.isInitialized(r) || this.shouldAutoInitialize()) try {
        return this.getOrInitializeService({
          instanceIdentifier: r
        });
      } catch (l) {
        if (i) return null;
        throw l;
      }
      else {
        if (i) return null;
        throw Error(`Service ${this.name} is not available`);
      }
    }
    getComponent() {
      return this.component;
    }
    setComponent(e) {
      if (e.name !== this.name) throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);
      if (this.component) throw Error(`Component for ${this.name} has already been provided`);
      if (this.component = e, !!this.shouldAutoInitialize()) {
        if (M4(e)) try {
          this.getOrInitializeService({
            instanceIdentifier: Nl
          });
        } catch {
        }
        for (const [t, r] of this.instancesDeferred.entries()) {
          const i = this.normalizeInstanceIdentifier(t);
          try {
            const l = this.getOrInitializeService({
              instanceIdentifier: i
            });
            r.resolve(l);
          } catch {
          }
        }
      }
    }
    clearInstance(e = Nl) {
      this.instancesDeferred.delete(e), this.instancesOptions.delete(e), this.instances.delete(e);
    }
    async delete() {
      const e = Array.from(this.instances.values());
      await Promise.all([
        ...e.filter((t) => "INTERNAL" in t).map((t) => t.INTERNAL.delete()),
        ...e.filter((t) => "_delete" in t).map((t) => t._delete())
      ]);
    }
    isComponentSet() {
      return this.component != null;
    }
    isInitialized(e = Nl) {
      return this.instances.has(e);
    }
    getOptions(e = Nl) {
      return this.instancesOptions.get(e) || {};
    }
    initialize(e = {}) {
      const { options: t = {} } = e, r = this.normalizeInstanceIdentifier(e.instanceIdentifier);
      if (this.isInitialized(r)) throw Error(`${this.name}(${r}) has already been initialized`);
      if (!this.isComponentSet()) throw Error(`Component ${this.name} has not been registered yet`);
      const i = this.getOrInitializeService({
        instanceIdentifier: r,
        options: t
      });
      for (const [l, c] of this.instancesDeferred.entries()) {
        const f = this.normalizeInstanceIdentifier(l);
        r === f && c.resolve(i);
      }
      return i;
    }
    onInit(e, t) {
      var r;
      const i = this.normalizeInstanceIdentifier(t), l = (r = this.onInitCallbacks.get(i)) !== null && r !== void 0 ? r : /* @__PURE__ */ new Set();
      l.add(e), this.onInitCallbacks.set(i, l);
      const c = this.instances.get(i);
      return c && e(c, i), () => {
        l.delete(e);
      };
    }
    invokeOnInitCallbacks(e, t) {
      const r = this.onInitCallbacks.get(t);
      if (r) for (const i of r) try {
        i(e, t);
      } catch {
      }
    }
    getOrInitializeService({ instanceIdentifier: e, options: t = {} }) {
      let r = this.instances.get(e);
      if (!r && this.component && (r = this.component.instanceFactory(this.container, {
        instanceIdentifier: L4(e),
        options: t
      }), this.instances.set(e, r), this.instancesOptions.set(e, t), this.invokeOnInitCallbacks(r, e), this.component.onInstanceCreated)) try {
        this.component.onInstanceCreated(this.container, e, r);
      } catch {
      }
      return r || null;
    }
    normalizeInstanceIdentifier(e = Nl) {
      return this.component ? this.component.multipleInstances ? e : Nl : e;
    }
    shouldAutoInitialize() {
      return !!this.component && this.component.instantiationMode !== "EXPLICIT";
    }
  }
  function L4(n) {
    return n === Nl ? void 0 : n;
  }
  function M4(n) {
    return n.instantiationMode === "EAGER";
  }
  class $4 {
    constructor(e) {
      this.name = e, this.providers = /* @__PURE__ */ new Map();
    }
    addComponent(e) {
      const t = this.getProvider(e.name);
      if (t.isComponentSet()) throw new Error(`Component ${e.name} has already been registered with ${this.name}`);
      t.setComponent(e);
    }
    addOrOverwriteComponent(e) {
      this.getProvider(e.name).isComponentSet() && this.providers.delete(e.name), this.addComponent(e);
    }
    getProvider(e) {
      if (this.providers.has(e)) return this.providers.get(e);
      const t = new O4(e, this);
      return this.providers.set(e, t), t;
    }
    getProviders() {
      return Array.from(this.providers.values());
    }
  }
  var Tt;
  (function(n) {
    n[n.DEBUG = 0] = "DEBUG", n[n.VERBOSE = 1] = "VERBOSE", n[n.INFO = 2] = "INFO", n[n.WARN = 3] = "WARN", n[n.ERROR = 4] = "ERROR", n[n.SILENT = 5] = "SILENT";
  })(Tt || (Tt = {}));
  const V4 = {
    debug: Tt.DEBUG,
    verbose: Tt.VERBOSE,
    info: Tt.INFO,
    warn: Tt.WARN,
    error: Tt.ERROR,
    silent: Tt.SILENT
  }, F4 = Tt.INFO, z4 = {
    [Tt.DEBUG]: "log",
    [Tt.VERBOSE]: "log",
    [Tt.INFO]: "info",
    [Tt.WARN]: "warn",
    [Tt.ERROR]: "error"
  }, U4 = (n, e, ...t) => {
    if (e < n.logLevel) return;
    const r = (/* @__PURE__ */ new Date()).toISOString(), i = z4[e];
    if (i) console[i](`[${r}]  ${n.name}:`, ...t);
    else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);
  };
  class dm {
    constructor(e) {
      this.name = e, this._logLevel = F4, this._logHandler = U4, this._userLogHandler = null;
    }
    get logLevel() {
      return this._logLevel;
    }
    set logLevel(e) {
      if (!(e in Tt)) throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);
      this._logLevel = e;
    }
    setLogLevel(e) {
      this._logLevel = typeof e == "string" ? V4[e] : e;
    }
    get logHandler() {
      return this._logHandler;
    }
    set logHandler(e) {
      if (typeof e != "function") throw new TypeError("Value assigned to `logHandler` must be a function");
      this._logHandler = e;
    }
    get userLogHandler() {
      return this._userLogHandler;
    }
    set userLogHandler(e) {
      this._userLogHandler = e;
    }
    debug(...e) {
      this._userLogHandler && this._userLogHandler(this, Tt.DEBUG, ...e), this._logHandler(this, Tt.DEBUG, ...e);
    }
    log(...e) {
      this._userLogHandler && this._userLogHandler(this, Tt.VERBOSE, ...e), this._logHandler(this, Tt.VERBOSE, ...e);
    }
    info(...e) {
      this._userLogHandler && this._userLogHandler(this, Tt.INFO, ...e), this._logHandler(this, Tt.INFO, ...e);
    }
    warn(...e) {
      this._userLogHandler && this._userLogHandler(this, Tt.WARN, ...e), this._logHandler(this, Tt.WARN, ...e);
    }
    error(...e) {
      this._userLogHandler && this._userLogHandler(this, Tt.ERROR, ...e), this._logHandler(this, Tt.ERROR, ...e);
    }
  }
  const B4 = (n, e) => e.some((t) => n instanceof t);
  let L_, M_;
  function W4() {
    return L_ || (L_ = [
      IDBDatabase,
      IDBObjectStore,
      IDBIndex,
      IDBCursor,
      IDBTransaction
    ]);
  }
  function H4() {
    return M_ || (M_ = [
      IDBCursor.prototype.advance,
      IDBCursor.prototype.continue,
      IDBCursor.prototype.continuePrimaryKey
    ]);
  }
  const Nb = /* @__PURE__ */ new WeakMap(), Bv = /* @__PURE__ */ new WeakMap(), Pb = /* @__PURE__ */ new WeakMap(), dv = /* @__PURE__ */ new WeakMap(), Uy = /* @__PURE__ */ new WeakMap();
  function q4(n) {
    const e = new Promise((t, r) => {
      const i = () => {
        n.removeEventListener("success", l), n.removeEventListener("error", c);
      }, l = () => {
        t(ba(n.result)), i();
      }, c = () => {
        r(n.error), i();
      };
      n.addEventListener("success", l), n.addEventListener("error", c);
    });
    return e.then((t) => {
      t instanceof IDBCursor && Nb.set(t, n);
    }).catch(() => {
    }), Uy.set(e, n), e;
  }
  function K4(n) {
    if (Bv.has(n)) return;
    const e = new Promise((t, r) => {
      const i = () => {
        n.removeEventListener("complete", l), n.removeEventListener("error", c), n.removeEventListener("abort", c);
      }, l = () => {
        t(), i();
      }, c = () => {
        r(n.error || new DOMException("AbortError", "AbortError")), i();
      };
      n.addEventListener("complete", l), n.addEventListener("error", c), n.addEventListener("abort", c);
    });
    Bv.set(n, e);
  }
  let Wv = {
    get(n, e, t) {
      if (n instanceof IDBTransaction) {
        if (e === "done") return Bv.get(n);
        if (e === "objectStoreNames") return n.objectStoreNames || Pb.get(n);
        if (e === "store") return t.objectStoreNames[1] ? void 0 : t.objectStore(t.objectStoreNames[0]);
      }
      return ba(n[e]);
    },
    set(n, e, t) {
      return n[e] = t, true;
    },
    has(n, e) {
      return n instanceof IDBTransaction && (e === "done" || e === "store") ? true : e in n;
    }
  };
  function G4(n) {
    Wv = n(Wv);
  }
  function Q4(n) {
    return n === IDBDatabase.prototype.transaction && !("objectStoreNames" in IDBTransaction.prototype) ? function(e, ...t) {
      const r = n.call(fv(this), e, ...t);
      return Pb.set(r, e.sort ? e.sort() : [
        e
      ]), ba(r);
    } : H4().includes(n) ? function(...e) {
      return n.apply(fv(this), e), ba(Nb.get(this));
    } : function(...e) {
      return ba(n.apply(fv(this), e));
    };
  }
  function Y4(n) {
    return typeof n == "function" ? Q4(n) : (n instanceof IDBTransaction && K4(n), B4(n, W4()) ? new Proxy(n, Wv) : n);
  }
  function ba(n) {
    if (n instanceof IDBRequest) return q4(n);
    if (dv.has(n)) return dv.get(n);
    const e = Y4(n);
    return e !== n && (dv.set(n, e), Uy.set(e, n)), e;
  }
  const fv = (n) => Uy.get(n);
  function Db(n, e, { blocked: t, upgrade: r, blocking: i, terminated: l } = {}) {
    const c = indexedDB.open(n, e), f = ba(c);
    return r && c.addEventListener("upgradeneeded", (m) => {
      r(ba(c.result), m.oldVersion, m.newVersion, ba(c.transaction), m);
    }), t && c.addEventListener("blocked", (m) => t(m.oldVersion, m.newVersion, m)), f.then((m) => {
      l && m.addEventListener("close", () => l()), i && m.addEventListener("versionchange", (y) => i(y.oldVersion, y.newVersion, y));
    }).catch(() => {
    }), f;
  }
  const X4 = [
    "get",
    "getKey",
    "getAll",
    "getAllKeys",
    "count"
  ], J4 = [
    "put",
    "add",
    "delete",
    "clear"
  ], hv = /* @__PURE__ */ new Map();
  function $_(n, e) {
    if (!(n instanceof IDBDatabase && !(e in n) && typeof e == "string")) return;
    if (hv.get(e)) return hv.get(e);
    const t = e.replace(/FromIndex$/, ""), r = e !== t, i = J4.includes(t);
    if (!(t in (r ? IDBIndex : IDBObjectStore).prototype) || !(i || X4.includes(t))) return;
    const l = async function(c, ...f) {
      const m = this.transaction(c, i ? "readwrite" : "readonly");
      let y = m.store;
      return r && (y = y.index(f.shift())), (await Promise.all([
        y[t](...f),
        i && m.done
      ]))[0];
    };
    return hv.set(e, l), l;
  }
  G4((n) => ({
    ...n,
    get: (e, t, r) => $_(e, t) || n.get(e, t, r),
    has: (e, t) => !!$_(e, t) || n.has(e, t)
  }));
  class Z4 {
    constructor(e) {
      this.container = e;
    }
    getPlatformInfoString() {
      return this.container.getProviders().map((t) => {
        if (eP(t)) {
          const r = t.getImmediate();
          return `${r.library}/${r.version}`;
        } else return null;
      }).filter((t) => t).join(" ");
    }
  }
  function eP(n) {
    const e = n.getComponent();
    return (e == null ? void 0 : e.type) === "VERSION";
  }
  const Hv = "@firebase/app", V_ = "0.11.4";
  const So = new dm("@firebase/app"), tP = "@firebase/app-compat", nP = "@firebase/analytics-compat", rP = "@firebase/analytics", sP = "@firebase/app-check-compat", iP = "@firebase/app-check", oP = "@firebase/auth", aP = "@firebase/auth-compat", lP = "@firebase/database", cP = "@firebase/data-connect", uP = "@firebase/database-compat", dP = "@firebase/functions", fP = "@firebase/functions-compat", hP = "@firebase/installations", pP = "@firebase/installations-compat", gP = "@firebase/messaging", mP = "@firebase/messaging-compat", vP = "@firebase/performance", yP = "@firebase/performance-compat", wP = "@firebase/remote-config", _P = "@firebase/remote-config-compat", xP = "@firebase/storage", EP = "@firebase/storage-compat", bP = "@firebase/firestore", TP = "@firebase/vertexai", CP = "@firebase/firestore-compat", SP = "firebase", IP = "11.6.0";
  const qv = "[DEFAULT]", kP = {
    [Hv]: "fire-core",
    [tP]: "fire-core-compat",
    [rP]: "fire-analytics",
    [nP]: "fire-analytics-compat",
    [iP]: "fire-app-check",
    [sP]: "fire-app-check-compat",
    [oP]: "fire-auth",
    [aP]: "fire-auth-compat",
    [lP]: "fire-rtdb",
    [cP]: "fire-data-connect",
    [uP]: "fire-rtdb-compat",
    [dP]: "fire-fn",
    [fP]: "fire-fn-compat",
    [hP]: "fire-iid",
    [pP]: "fire-iid-compat",
    [gP]: "fire-fcm",
    [mP]: "fire-fcm-compat",
    [vP]: "fire-perf",
    [yP]: "fire-perf-compat",
    [wP]: "fire-rc",
    [_P]: "fire-rc-compat",
    [xP]: "fire-gcs",
    [EP]: "fire-gcs-compat",
    [bP]: "fire-fst",
    [CP]: "fire-fst-compat",
    [TP]: "fire-vertex",
    "fire-js": "fire-js",
    [SP]: "fire-js-all"
  };
  const jg = /* @__PURE__ */ new Map(), AP = /* @__PURE__ */ new Map(), Kv = /* @__PURE__ */ new Map();
  function F_(n, e) {
    try {
      n.container.addComponent(e);
    } catch (t) {
      So.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`, t);
    }
  }
  function zi(n) {
    const e = n.name;
    if (Kv.has(e)) return So.debug(`There were multiple attempts to register component ${e}.`), false;
    Kv.set(e, n);
    for (const t of jg.values()) F_(t, n);
    for (const t of AP.values()) F_(t, n);
    return true;
  }
  function Hl(n, e) {
    const t = n.container.getProvider("heartbeat").getImmediate({
      optional: true
    });
    return t && t.triggerHeartbeat(), n.container.getProvider(e);
  }
  function ds(n) {
    return n == null ? false : n.settings !== void 0;
  }
  const RP = {
    "no-app": "No Firebase App '{$appName}' has been created - call initializeApp() first",
    "bad-app-name": "Illegal App name: '{$appName}'",
    "duplicate-app": "Firebase App named '{$appName}' already exists with different options or config",
    "app-deleted": "Firebase App named '{$appName}' already deleted",
    "server-app-deleted": "Firebase Server App has been deleted",
    "no-options": "Need to provide options, when not being deployed to hosting via source.",
    "invalid-app-argument": "firebase.{$appName}() takes either no argument or a Firebase App instance.",
    "invalid-log-argument": "First argument to `onLog` must be null or a function.",
    "idb-open": "Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",
    "idb-get": "Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",
    "idb-set": "Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",
    "idb-delete": "Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",
    "finalization-registry-not-supported": "FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",
    "invalid-server-app-environment": "FirebaseServerApp is not for use in browser environments."
  }, Ta = new Wl("app", "Firebase", RP);
  class NP {
    constructor(e, t, r) {
      this._isDeleted = false, this._options = Object.assign({}, e), this._config = Object.assign({}, t), this._name = t.name, this._automaticDataCollectionEnabled = t.automaticDataCollectionEnabled, this._container = r, this.container.addComponent(new ai("app", () => this, "PUBLIC"));
    }
    get automaticDataCollectionEnabled() {
      return this.checkDestroyed(), this._automaticDataCollectionEnabled;
    }
    set automaticDataCollectionEnabled(e) {
      this.checkDestroyed(), this._automaticDataCollectionEnabled = e;
    }
    get name() {
      return this.checkDestroyed(), this._name;
    }
    get options() {
      return this.checkDestroyed(), this._options;
    }
    get config() {
      return this.checkDestroyed(), this._config;
    }
    get container() {
      return this._container;
    }
    get isDeleted() {
      return this._isDeleted;
    }
    set isDeleted(e) {
      this._isDeleted = e;
    }
    checkDestroyed() {
      if (this.isDeleted) throw Ta.create("app-deleted", {
        appName: this._name
      });
    }
  }
  const Su = IP;
  function jb(n, e = {}) {
    let t = n;
    typeof e != "object" && (e = {
      name: e
    });
    const r = Object.assign({
      name: qv,
      automaticDataCollectionEnabled: false
    }, e), i = r.name;
    if (typeof i != "string" || !i) throw Ta.create("bad-app-name", {
      appName: String(i)
    });
    if (t || (t = Sb()), !t) throw Ta.create("no-options");
    const l = jg.get(i);
    if (l) {
      if (Ia(t, l.options) && Ia(r, l.config)) return l;
      throw Ta.create("duplicate-app", {
        appName: i
      });
    }
    const c = new $4(i);
    for (const m of Kv.values()) c.addComponent(m);
    const f = new NP(t, r, c);
    return jg.set(i, f), f;
  }
  function By(n = qv) {
    const e = jg.get(n);
    if (!e && n === qv && Sb()) return jb();
    if (!e) throw Ta.create("no-app", {
      appName: n
    });
    return e;
  }
  function Ns(n, e, t) {
    var r;
    let i = (r = kP[n]) !== null && r !== void 0 ? r : n;
    t && (i += `-${t}`);
    const l = i.match(/\s|\//), c = e.match(/\s|\//);
    if (l || c) {
      const f = [
        `Unable to register library "${i}" with version "${e}":`
      ];
      l && f.push(`library name "${i}" contains illegal characters (whitespace or "/")`), l && c && f.push("and"), c && f.push(`version name "${e}" contains illegal characters (whitespace or "/")`), So.warn(f.join(" "));
      return;
    }
    zi(new ai(`${i}-version`, () => ({
      library: i,
      version: e
    }), "VERSION"));
  }
  const PP = "firebase-heartbeat-database", DP = 1, Cf = "firebase-heartbeat-store";
  let pv = null;
  function Ob() {
    return pv || (pv = Db(PP, DP, {
      upgrade: (n, e) => {
        switch (e) {
          case 0:
            try {
              n.createObjectStore(Cf);
            } catch (t) {
              console.warn(t);
            }
        }
      }
    }).catch((n) => {
      throw Ta.create("idb-open", {
        originalErrorMessage: n.message
      });
    })), pv;
  }
  async function jP(n) {
    try {
      const t = (await Ob()).transaction(Cf), r = await t.objectStore(Cf).get(Lb(n));
      return await t.done, r;
    } catch (e) {
      if (e instanceof ui) So.warn(e.message);
      else {
        const t = Ta.create("idb-get", {
          originalErrorMessage: e == null ? void 0 : e.message
        });
        So.warn(t.message);
      }
    }
  }
  async function z_(n, e) {
    try {
      const r = (await Ob()).transaction(Cf, "readwrite");
      await r.objectStore(Cf).put(e, Lb(n)), await r.done;
    } catch (t) {
      if (t instanceof ui) So.warn(t.message);
      else {
        const r = Ta.create("idb-set", {
          originalErrorMessage: t == null ? void 0 : t.message
        });
        So.warn(r.message);
      }
    }
  }
  function Lb(n) {
    return `${n.name}!${n.options.appId}`;
  }
  const OP = 1024, LP = 30;
  class MP {
    constructor(e) {
      this.container = e, this._heartbeatsCache = null;
      const t = this.container.getProvider("app").getImmediate();
      this._storage = new VP(t), this._heartbeatsCachePromise = this._storage.read().then((r) => (this._heartbeatsCache = r, r));
    }
    async triggerHeartbeat() {
      var e, t;
      try {
        const i = this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(), l = U_();
        if (((e = this._heartbeatsCache) === null || e === void 0 ? void 0 : e.heartbeats) == null && (this._heartbeatsCache = await this._heartbeatsCachePromise, ((t = this._heartbeatsCache) === null || t === void 0 ? void 0 : t.heartbeats) == null) || this._heartbeatsCache.lastSentHeartbeatDate === l || this._heartbeatsCache.heartbeats.some((c) => c.date === l)) return;
        if (this._heartbeatsCache.heartbeats.push({
          date: l,
          agent: i
        }), this._heartbeatsCache.heartbeats.length > LP) {
          const c = FP(this._heartbeatsCache.heartbeats);
          this._heartbeatsCache.heartbeats.splice(c, 1);
        }
        return this._storage.overwrite(this._heartbeatsCache);
      } catch (r) {
        So.warn(r);
      }
    }
    async getHeartbeatsHeader() {
      var e;
      try {
        if (this._heartbeatsCache === null && await this._heartbeatsCachePromise, ((e = this._heartbeatsCache) === null || e === void 0 ? void 0 : e.heartbeats) == null || this._heartbeatsCache.heartbeats.length === 0) return "";
        const t = U_(), { heartbeatsToSend: r, unsentEntries: i } = $P(this._heartbeatsCache.heartbeats), l = Dg(JSON.stringify({
          version: 2,
          heartbeats: r
        }));
        return this._heartbeatsCache.lastSentHeartbeatDate = t, i.length > 0 ? (this._heartbeatsCache.heartbeats = i, await this._storage.overwrite(this._heartbeatsCache)) : (this._heartbeatsCache.heartbeats = [], this._storage.overwrite(this._heartbeatsCache)), l;
      } catch (t) {
        return So.warn(t), "";
      }
    }
  }
  function U_() {
    return (/* @__PURE__ */ new Date()).toISOString().substring(0, 10);
  }
  function $P(n, e = OP) {
    const t = [];
    let r = n.slice();
    for (const i of n) {
      const l = t.find((c) => c.agent === i.agent);
      if (l) {
        if (l.dates.push(i.date), B_(t) > e) {
          l.dates.pop();
          break;
        }
      } else if (t.push({
        agent: i.agent,
        dates: [
          i.date
        ]
      }), B_(t) > e) {
        t.pop();
        break;
      }
      r = r.slice(1);
    }
    return {
      heartbeatsToSend: t,
      unsentEntries: r
    };
  }
  class VP {
    constructor(e) {
      this.app = e, this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();
    }
    async runIndexedDBEnvironmentCheck() {
      return Ab() ? Rb().then(() => true).catch(() => false) : false;
    }
    async read() {
      if (await this._canUseIndexedDBPromise) {
        const t = await jP(this.app);
        return (t == null ? void 0 : t.heartbeats) ? t : {
          heartbeats: []
        };
      } else return {
        heartbeats: []
      };
    }
    async overwrite(e) {
      var t;
      if (await this._canUseIndexedDBPromise) {
        const i = await this.read();
        return z_(this.app, {
          lastSentHeartbeatDate: (t = e.lastSentHeartbeatDate) !== null && t !== void 0 ? t : i.lastSentHeartbeatDate,
          heartbeats: e.heartbeats
        });
      } else return;
    }
    async add(e) {
      var t;
      if (await this._canUseIndexedDBPromise) {
        const i = await this.read();
        return z_(this.app, {
          lastSentHeartbeatDate: (t = e.lastSentHeartbeatDate) !== null && t !== void 0 ? t : i.lastSentHeartbeatDate,
          heartbeats: [
            ...i.heartbeats,
            ...e.heartbeats
          ]
        });
      } else return;
    }
  }
  function B_(n) {
    return Dg(JSON.stringify({
      version: 2,
      heartbeats: n
    })).length;
  }
  function FP(n) {
    if (n.length === 0) return -1;
    let e = 0, t = n[0].date;
    for (let r = 1; r < n.length; r++) n[r].date < t && (t = n[r].date, e = r);
    return e;
  }
  function zP(n) {
    zi(new ai("platform-logger", (e) => new Z4(e), "PRIVATE")), zi(new ai("heartbeat", (e) => new MP(e), "PRIVATE")), Ns(Hv, V_, n), Ns(Hv, V_, "esm2017"), Ns("fire-js", "");
  }
  zP("");
  function Wy(n, e) {
    var t = {};
    for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && e.indexOf(r) < 0 && (t[r] = n[r]);
    if (n != null && typeof Object.getOwnPropertySymbols == "function") for (var i = 0, r = Object.getOwnPropertySymbols(n); i < r.length; i++) e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(n, r[i]) && (t[r[i]] = n[r[i]]);
    return t;
  }
  function Mb() {
    return {
      "dependent-sdk-initialized-before-auth": "Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."
    };
  }
  const UP = Mb, $b = new Wl("auth", "Firebase", Mb());
  const Og = new dm("@firebase/auth");
  function BP(n, ...e) {
    Og.logLevel <= Tt.WARN && Og.warn(`Auth (${Su}): ${n}`, ...e);
  }
  function yg(n, ...e) {
    Og.logLevel <= Tt.ERROR && Og.error(`Auth (${Su}): ${n}`, ...e);
  }
  function Ps(n, ...e) {
    throw qy(n, ...e);
  }
  function si(n, ...e) {
    return qy(n, ...e);
  }
  function Hy(n, e, t) {
    const r = Object.assign(Object.assign({}, UP()), {
      [e]: t
    });
    return new Wl("auth", "Firebase", r).create(e, {
      appName: n.name
    });
  }
  function bo(n) {
    return Hy(n, "operation-not-supported-in-this-environment", "Operations that alter the current user are not supported in conjunction with FirebaseServerApp");
  }
  function WP(n, e, t) {
    const r = t;
    if (!(e instanceof r)) throw r.name !== e.constructor.name && Ps(n, "argument-error"), Hy(n, "argument-error", `Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`);
  }
  function qy(n, ...e) {
    if (typeof n != "string") {
      const t = e[0], r = [
        ...e.slice(1)
      ];
      return r[0] && (r[0].appName = n.name), n._errorFactory.create(t, ...r);
    }
    return $b.create(n, ...e);
  }
  function rt(n, e, ...t) {
    if (!n) throw qy(e, ...t);
  }
  function _o(n) {
    const e = "INTERNAL ASSERTION FAILED: " + n;
    throw yg(e), new Error(e);
  }
  function Io(n, e) {
    n || _o(e);
  }
  function Gv() {
    var n;
    return typeof self < "u" && ((n = self.location) === null || n === void 0 ? void 0 : n.href) || "";
  }
  function HP() {
    return W_() === "http:" || W_() === "https:";
  }
  function W_() {
    var n;
    return typeof self < "u" && ((n = self.location) === null || n === void 0 ? void 0 : n.protocol) || null;
  }
  function qP() {
    return typeof navigator < "u" && navigator && "onLine" in navigator && typeof navigator.onLine == "boolean" && (HP() || kb() || "connection" in navigator) ? navigator.onLine : true;
  }
  function KP() {
    if (typeof navigator > "u") return null;
    const n = navigator;
    return n.languages && n.languages[0] || n.language || null;
  }
  class Mf {
    constructor(e, t) {
      this.shortDelay = e, this.longDelay = t, Io(t > e, "Short delay should be less than long delay!"), this.isMobile = v4() || _4();
    }
    get() {
      return qP() ? this.isMobile ? this.longDelay : this.shortDelay : Math.min(5e3, this.shortDelay);
    }
  }
  function Ky(n, e) {
    Io(n.emulator, "Emulator should always be set here");
    const { url: t } = n.emulator;
    return e ? `${t}${e.startsWith("/") ? e.slice(1) : e}` : t;
  }
  class Vb {
    static initialize(e, t, r) {
      this.fetchImpl = e, t && (this.headersImpl = t), r && (this.responseImpl = r);
    }
    static fetch() {
      if (this.fetchImpl) return this.fetchImpl;
      if (typeof self < "u" && "fetch" in self) return self.fetch;
      if (typeof globalThis < "u" && globalThis.fetch) return globalThis.fetch;
      if (typeof fetch < "u") return fetch;
      _o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill");
    }
    static headers() {
      if (this.headersImpl) return this.headersImpl;
      if (typeof self < "u" && "Headers" in self) return self.Headers;
      if (typeof globalThis < "u" && globalThis.Headers) return globalThis.Headers;
      if (typeof Headers < "u") return Headers;
      _o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill");
    }
    static response() {
      if (this.responseImpl) return this.responseImpl;
      if (typeof self < "u" && "Response" in self) return self.Response;
      if (typeof globalThis < "u" && globalThis.Response) return globalThis.Response;
      if (typeof Response < "u") return Response;
      _o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill");
    }
  }
  const GP = {
    CREDENTIAL_MISMATCH: "custom-token-mismatch",
    MISSING_CUSTOM_TOKEN: "internal-error",
    INVALID_IDENTIFIER: "invalid-email",
    MISSING_CONTINUE_URI: "internal-error",
    INVALID_PASSWORD: "wrong-password",
    MISSING_PASSWORD: "missing-password",
    INVALID_LOGIN_CREDENTIALS: "invalid-credential",
    EMAIL_EXISTS: "email-already-in-use",
    PASSWORD_LOGIN_DISABLED: "operation-not-allowed",
    INVALID_IDP_RESPONSE: "invalid-credential",
    INVALID_PENDING_TOKEN: "invalid-credential",
    FEDERATED_USER_ID_ALREADY_LINKED: "credential-already-in-use",
    MISSING_REQ_TYPE: "internal-error",
    EMAIL_NOT_FOUND: "user-not-found",
    RESET_PASSWORD_EXCEED_LIMIT: "too-many-requests",
    EXPIRED_OOB_CODE: "expired-action-code",
    INVALID_OOB_CODE: "invalid-action-code",
    MISSING_OOB_CODE: "internal-error",
    CREDENTIAL_TOO_OLD_LOGIN_AGAIN: "requires-recent-login",
    INVALID_ID_TOKEN: "invalid-user-token",
    TOKEN_EXPIRED: "user-token-expired",
    USER_NOT_FOUND: "user-token-expired",
    TOO_MANY_ATTEMPTS_TRY_LATER: "too-many-requests",
    PASSWORD_DOES_NOT_MEET_REQUIREMENTS: "password-does-not-meet-requirements",
    INVALID_CODE: "invalid-verification-code",
    INVALID_SESSION_INFO: "invalid-verification-id",
    INVALID_TEMPORARY_PROOF: "invalid-credential",
    MISSING_SESSION_INFO: "missing-verification-id",
    SESSION_EXPIRED: "code-expired",
    MISSING_ANDROID_PACKAGE_NAME: "missing-android-pkg-name",
    UNAUTHORIZED_DOMAIN: "unauthorized-continue-uri",
    INVALID_OAUTH_CLIENT_ID: "invalid-oauth-client-id",
    ADMIN_ONLY_OPERATION: "admin-restricted-operation",
    INVALID_MFA_PENDING_CREDENTIAL: "invalid-multi-factor-session",
    MFA_ENROLLMENT_NOT_FOUND: "multi-factor-info-not-found",
    MISSING_MFA_ENROLLMENT_ID: "missing-multi-factor-info",
    MISSING_MFA_PENDING_CREDENTIAL: "missing-multi-factor-session",
    SECOND_FACTOR_EXISTS: "second-factor-already-in-use",
    SECOND_FACTOR_LIMIT_EXCEEDED: "maximum-second-factor-count-exceeded",
    BLOCKING_FUNCTION_ERROR_RESPONSE: "internal-error",
    RECAPTCHA_NOT_ENABLED: "recaptcha-not-enabled",
    MISSING_RECAPTCHA_TOKEN: "missing-recaptcha-token",
    INVALID_RECAPTCHA_TOKEN: "invalid-recaptcha-token",
    INVALID_RECAPTCHA_ACTION: "invalid-recaptcha-action",
    MISSING_CLIENT_TYPE: "missing-client-type",
    MISSING_RECAPTCHA_VERSION: "missing-recaptcha-version",
    INVALID_RECAPTCHA_VERSION: "invalid-recaptcha-version",
    INVALID_REQ_TYPE: "invalid-req-type"
  };
  const QP = [
    "/v1/accounts:signInWithCustomToken",
    "/v1/accounts:signInWithEmailLink",
    "/v1/accounts:signInWithIdp",
    "/v1/accounts:signInWithPassword",
    "/v1/accounts:signInWithPhoneNumber",
    "/v1/token"
  ], YP = new Mf(3e4, 6e4);
  function No(n, e) {
    return n.tenantId && !e.tenantId ? Object.assign(Object.assign({}, e), {
      tenantId: n.tenantId
    }) : e;
  }
  async function Po(n, e, t, r, i = {}) {
    return Fb(n, i, async () => {
      let l = {}, c = {};
      r && (e === "GET" ? c = r : l = {
        body: JSON.stringify(r)
      });
      const f = Lf(Object.assign({
        key: n.config.apiKey
      }, c)).slice(1), m = await n._getAdditionalHeaders();
      m["Content-Type"] = "application/json", n.languageCode && (m["X-Firebase-Locale"] = n.languageCode);
      const y = Object.assign({
        method: e,
        headers: m
      }, l);
      return w4() || (y.referrerPolicy = "no-referrer"), Vb.fetch()(await zb(n, n.config.apiHost, t, f), y);
    });
  }
  async function Fb(n, e, t) {
    n._canInitEmulator = false;
    const r = Object.assign(Object.assign({}, GP), e);
    try {
      const i = new JP(n), l = await Promise.race([
        t(),
        i.promise
      ]);
      i.clearNetworkTimeout();
      const c = await l.json();
      if ("needConfirmation" in c) throw og(n, "account-exists-with-different-credential", c);
      if (l.ok && !("errorMessage" in c)) return c;
      {
        const f = l.ok ? c.errorMessage : c.error.message, [m, y] = f.split(" : ");
        if (m === "FEDERATED_USER_ID_ALREADY_LINKED") throw og(n, "credential-already-in-use", c);
        if (m === "EMAIL_EXISTS") throw og(n, "email-already-in-use", c);
        if (m === "USER_DISABLED") throw og(n, "user-disabled", c);
        const x = r[m] || m.toLowerCase().replace(/[_\s]+/g, "-");
        if (y) throw Hy(n, x, y);
        Ps(n, x);
      }
    } catch (i) {
      if (i instanceof ui) throw i;
      Ps(n, "network-request-failed", {
        message: String(i)
      });
    }
  }
  async function $f(n, e, t, r, i = {}) {
    const l = await Po(n, e, t, r, i);
    return "mfaPendingCredential" in l && Ps(n, "multi-factor-auth-required", {
      _serverResponse: l
    }), l;
  }
  async function zb(n, e, t, r) {
    const i = `${e}${t}?${r}`, l = n, c = l.config.emulator ? Ky(n.config, i) : `${n.config.apiScheme}://${i}`;
    return QP.includes(t) && (await l._persistenceManagerAvailable, l._getPersistenceType() === "COOKIE") ? l._getPersistence()._getFinalTarget(c).toString() : c;
  }
  function XP(n) {
    switch (n) {
      case "ENFORCE":
        return "ENFORCE";
      case "AUDIT":
        return "AUDIT";
      case "OFF":
        return "OFF";
      default:
        return "ENFORCEMENT_STATE_UNSPECIFIED";
    }
  }
  class JP {
    clearNetworkTimeout() {
      clearTimeout(this.timer);
    }
    constructor(e) {
      this.auth = e, this.timer = null, this.promise = new Promise((t, r) => {
        this.timer = setTimeout(() => r(si(this.auth, "network-request-failed")), YP.get());
      });
    }
  }
  function og(n, e, t) {
    const r = {
      appName: n.name
    };
    t.email && (r.email = t.email), t.phoneNumber && (r.phoneNumber = t.phoneNumber);
    const i = si(n, e, r);
    return i.customData._tokenResponse = t, i;
  }
  function H_(n) {
    return n !== void 0 && n.enterprise !== void 0;
  }
  class ZP {
    constructor(e) {
      if (this.siteKey = "", this.recaptchaEnforcementState = [], e.recaptchaKey === void 0) throw new Error("recaptchaKey undefined");
      this.siteKey = e.recaptchaKey.split("/")[3], this.recaptchaEnforcementState = e.recaptchaEnforcementState;
    }
    getProviderEnforcementState(e) {
      if (!this.recaptchaEnforcementState || this.recaptchaEnforcementState.length === 0) return null;
      for (const t of this.recaptchaEnforcementState) if (t.provider && t.provider === e) return XP(t.enforcementState);
      return null;
    }
    isProviderEnabled(e) {
      return this.getProviderEnforcementState(e) === "ENFORCE" || this.getProviderEnforcementState(e) === "AUDIT";
    }
    isAnyProviderEnabled() {
      return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER") || this.isProviderEnabled("PHONE_PROVIDER");
    }
  }
  async function e5(n, e) {
    return Po(n, "GET", "/v2/recaptchaConfig", No(n, e));
  }
  async function t5(n, e) {
    return Po(n, "POST", "/v1/accounts:delete", e);
  }
  async function Lg(n, e) {
    return Po(n, "POST", "/v1/accounts:lookup", e);
  }
  function mf(n) {
    if (n) try {
      const e = new Date(Number(n));
      if (!isNaN(e.getTime())) return e.toUTCString();
    } catch {
    }
  }
  async function n5(n, e = false) {
    const t = xn(n), r = await t.getIdToken(e), i = Gy(r);
    rt(i && i.exp && i.auth_time && i.iat, t.auth, "internal-error");
    const l = typeof i.firebase == "object" ? i.firebase : void 0, c = l == null ? void 0 : l.sign_in_provider;
    return {
      claims: i,
      token: r,
      authTime: mf(gv(i.auth_time)),
      issuedAtTime: mf(gv(i.iat)),
      expirationTime: mf(gv(i.exp)),
      signInProvider: c || null,
      signInSecondFactor: (l == null ? void 0 : l.sign_in_second_factor) || null
    };
  }
  function gv(n) {
    return Number(n) * 1e3;
  }
  function Gy(n) {
    const [e, t, r] = n.split(".");
    if (e === void 0 || t === void 0 || r === void 0) return yg("JWT malformed, contained fewer than 3 sections"), null;
    try {
      const i = Tb(t);
      return i ? JSON.parse(i) : (yg("Failed to decode base64 JWT payload"), null);
    } catch (i) {
      return yg("Caught error parsing JWT payload as JSON", i == null ? void 0 : i.toString()), null;
    }
  }
  function q_(n) {
    const e = Gy(n);
    return rt(e, "internal-error"), rt(typeof e.exp < "u", "internal-error"), rt(typeof e.iat < "u", "internal-error"), Number(e.exp) - Number(e.iat);
  }
  async function Sf(n, e, t = false) {
    if (t) return e;
    try {
      return await e;
    } catch (r) {
      throw r instanceof ui && r5(r) && n.auth.currentUser === n && await n.auth.signOut(), r;
    }
  }
  function r5({ code: n }) {
    return n === "auth/user-disabled" || n === "auth/user-token-expired";
  }
  class s5 {
    constructor(e) {
      this.user = e, this.isRunning = false, this.timerId = null, this.errorBackoff = 3e4;
    }
    _start() {
      this.isRunning || (this.isRunning = true, this.schedule());
    }
    _stop() {
      this.isRunning && (this.isRunning = false, this.timerId !== null && clearTimeout(this.timerId));
    }
    getInterval(e) {
      var t;
      if (e) {
        const r = this.errorBackoff;
        return this.errorBackoff = Math.min(this.errorBackoff * 2, 96e4), r;
      } else {
        this.errorBackoff = 3e4;
        const i = ((t = this.user.stsTokenManager.expirationTime) !== null && t !== void 0 ? t : 0) - Date.now() - 3e5;
        return Math.max(0, i);
      }
    }
    schedule(e = false) {
      if (!this.isRunning) return;
      const t = this.getInterval(e);
      this.timerId = setTimeout(async () => {
        await this.iteration();
      }, t);
    }
    async iteration() {
      try {
        await this.user.getIdToken(true);
      } catch (e) {
        (e == null ? void 0 : e.code) === "auth/network-request-failed" && this.schedule(true);
        return;
      }
      this.schedule();
    }
  }
  class Qv {
    constructor(e, t) {
      this.createdAt = e, this.lastLoginAt = t, this._initializeTime();
    }
    _initializeTime() {
      this.lastSignInTime = mf(this.lastLoginAt), this.creationTime = mf(this.createdAt);
    }
    _copy(e) {
      this.createdAt = e.createdAt, this.lastLoginAt = e.lastLoginAt, this._initializeTime();
    }
    toJSON() {
      return {
        createdAt: this.createdAt,
        lastLoginAt: this.lastLoginAt
      };
    }
  }
  async function Mg(n) {
    var e;
    const t = n.auth, r = await n.getIdToken(), i = await Sf(n, Lg(t, {
      idToken: r
    }));
    rt(i == null ? void 0 : i.users.length, t, "internal-error");
    const l = i.users[0];
    n._notifyReloadListener(l);
    const c = !((e = l.providerUserInfo) === null || e === void 0) && e.length ? Ub(l.providerUserInfo) : [], f = o5(n.providerData, c), m = n.isAnonymous, y = !(n.email && l.passwordHash) && !(f == null ? void 0 : f.length), x = m ? y : false, C = {
      uid: l.localId,
      displayName: l.displayName || null,
      photoURL: l.photoUrl || null,
      email: l.email || null,
      emailVerified: l.emailVerified || false,
      phoneNumber: l.phoneNumber || null,
      tenantId: l.tenantId || null,
      providerData: f,
      metadata: new Qv(l.createdAt, l.lastLoginAt),
      isAnonymous: x
    };
    Object.assign(n, C);
  }
  async function i5(n) {
    const e = xn(n);
    await Mg(e), await e.auth._persistUserIfCurrent(e), e.auth._notifyListenersIfCurrent(e);
  }
  function o5(n, e) {
    return [
      ...n.filter((r) => !e.some((i) => i.providerId === r.providerId)),
      ...e
    ];
  }
  function Ub(n) {
    return n.map((e) => {
      var { providerId: t } = e, r = Wy(e, [
        "providerId"
      ]);
      return {
        providerId: t,
        uid: r.rawId || "",
        displayName: r.displayName || null,
        email: r.email || null,
        phoneNumber: r.phoneNumber || null,
        photoURL: r.photoUrl || null
      };
    });
  }
  async function a5(n, e) {
    const t = await Fb(n, {}, async () => {
      const r = Lf({
        grant_type: "refresh_token",
        refresh_token: e
      }).slice(1), { tokenApiHost: i, apiKey: l } = n.config, c = await zb(n, i, "/v1/token", `key=${l}`), f = await n._getAdditionalHeaders();
      return f["Content-Type"] = "application/x-www-form-urlencoded", Vb.fetch()(c, {
        method: "POST",
        headers: f,
        body: r
      });
    });
    return {
      accessToken: t.access_token,
      expiresIn: t.expires_in,
      refreshToken: t.refresh_token
    };
  }
  async function l5(n, e) {
    return Po(n, "POST", "/v2/accounts:revokeToken", No(n, e));
  }
  class cu {
    constructor() {
      this.refreshToken = null, this.accessToken = null, this.expirationTime = null;
    }
    get isExpired() {
      return !this.expirationTime || Date.now() > this.expirationTime - 3e4;
    }
    updateFromServerResponse(e) {
      rt(e.idToken, "internal-error"), rt(typeof e.idToken < "u", "internal-error"), rt(typeof e.refreshToken < "u", "internal-error");
      const t = "expiresIn" in e && typeof e.expiresIn < "u" ? Number(e.expiresIn) : q_(e.idToken);
      this.updateTokensAndExpiration(e.idToken, e.refreshToken, t);
    }
    updateFromIdToken(e) {
      rt(e.length !== 0, "internal-error");
      const t = q_(e);
      this.updateTokensAndExpiration(e, null, t);
    }
    async getToken(e, t = false) {
      return !t && this.accessToken && !this.isExpired ? this.accessToken : (rt(this.refreshToken, e, "user-token-expired"), this.refreshToken ? (await this.refresh(e, this.refreshToken), this.accessToken) : null);
    }
    clearRefreshToken() {
      this.refreshToken = null;
    }
    async refresh(e, t) {
      const { accessToken: r, refreshToken: i, expiresIn: l } = await a5(e, t);
      this.updateTokensAndExpiration(r, i, Number(l));
    }
    updateTokensAndExpiration(e, t, r) {
      this.refreshToken = t || null, this.accessToken = e || null, this.expirationTime = Date.now() + r * 1e3;
    }
    static fromJSON(e, t) {
      const { refreshToken: r, accessToken: i, expirationTime: l } = t, c = new cu();
      return r && (rt(typeof r == "string", "internal-error", {
        appName: e
      }), c.refreshToken = r), i && (rt(typeof i == "string", "internal-error", {
        appName: e
      }), c.accessToken = i), l && (rt(typeof l == "number", "internal-error", {
        appName: e
      }), c.expirationTime = l), c;
    }
    toJSON() {
      return {
        refreshToken: this.refreshToken,
        accessToken: this.accessToken,
        expirationTime: this.expirationTime
      };
    }
    _assign(e) {
      this.accessToken = e.accessToken, this.refreshToken = e.refreshToken, this.expirationTime = e.expirationTime;
    }
    _clone() {
      return Object.assign(new cu(), this.toJSON());
    }
    _performRefresh() {
      return _o("not implemented");
    }
  }
  function ma(n, e) {
    rt(typeof n == "string" || typeof n > "u", "internal-error", {
      appName: e
    });
  }
  class ni {
    constructor(e) {
      var { uid: t, auth: r, stsTokenManager: i } = e, l = Wy(e, [
        "uid",
        "auth",
        "stsTokenManager"
      ]);
      this.providerId = "firebase", this.proactiveRefresh = new s5(this), this.reloadUserInfo = null, this.reloadListener = null, this.uid = t, this.auth = r, this.stsTokenManager = i, this.accessToken = i.accessToken, this.displayName = l.displayName || null, this.email = l.email || null, this.emailVerified = l.emailVerified || false, this.phoneNumber = l.phoneNumber || null, this.photoURL = l.photoURL || null, this.isAnonymous = l.isAnonymous || false, this.tenantId = l.tenantId || null, this.providerData = l.providerData ? [
        ...l.providerData
      ] : [], this.metadata = new Qv(l.createdAt || void 0, l.lastLoginAt || void 0);
    }
    async getIdToken(e) {
      const t = await Sf(this, this.stsTokenManager.getToken(this.auth, e));
      return rt(t, this.auth, "internal-error"), this.accessToken !== t && (this.accessToken = t, await this.auth._persistUserIfCurrent(this), this.auth._notifyListenersIfCurrent(this)), t;
    }
    getIdTokenResult(e) {
      return n5(this, e);
    }
    reload() {
      return i5(this);
    }
    _assign(e) {
      this !== e && (rt(this.uid === e.uid, this.auth, "internal-error"), this.displayName = e.displayName, this.photoURL = e.photoURL, this.email = e.email, this.emailVerified = e.emailVerified, this.phoneNumber = e.phoneNumber, this.isAnonymous = e.isAnonymous, this.tenantId = e.tenantId, this.providerData = e.providerData.map((t) => Object.assign({}, t)), this.metadata._copy(e.metadata), this.stsTokenManager._assign(e.stsTokenManager));
    }
    _clone(e) {
      const t = new ni(Object.assign(Object.assign({}, this), {
        auth: e,
        stsTokenManager: this.stsTokenManager._clone()
      }));
      return t.metadata._copy(this.metadata), t;
    }
    _onReload(e) {
      rt(!this.reloadListener, this.auth, "internal-error"), this.reloadListener = e, this.reloadUserInfo && (this._notifyReloadListener(this.reloadUserInfo), this.reloadUserInfo = null);
    }
    _notifyReloadListener(e) {
      this.reloadListener ? this.reloadListener(e) : this.reloadUserInfo = e;
    }
    _startProactiveRefresh() {
      this.proactiveRefresh._start();
    }
    _stopProactiveRefresh() {
      this.proactiveRefresh._stop();
    }
    async _updateTokensIfNecessary(e, t = false) {
      let r = false;
      e.idToken && e.idToken !== this.stsTokenManager.accessToken && (this.stsTokenManager.updateFromServerResponse(e), r = true), t && await Mg(this), await this.auth._persistUserIfCurrent(this), r && this.auth._notifyListenersIfCurrent(this);
    }
    async delete() {
      if (ds(this.auth.app)) return Promise.reject(bo(this.auth));
      const e = await this.getIdToken();
      return await Sf(this, t5(this.auth, {
        idToken: e
      })), this.stsTokenManager.clearRefreshToken(), this.auth.signOut();
    }
    toJSON() {
      return Object.assign(Object.assign({
        uid: this.uid,
        email: this.email || void 0,
        emailVerified: this.emailVerified,
        displayName: this.displayName || void 0,
        isAnonymous: this.isAnonymous,
        photoURL: this.photoURL || void 0,
        phoneNumber: this.phoneNumber || void 0,
        tenantId: this.tenantId || void 0,
        providerData: this.providerData.map((e) => Object.assign({}, e)),
        stsTokenManager: this.stsTokenManager.toJSON(),
        _redirectEventId: this._redirectEventId
      }, this.metadata.toJSON()), {
        apiKey: this.auth.config.apiKey,
        appName: this.auth.name
      });
    }
    get refreshToken() {
      return this.stsTokenManager.refreshToken || "";
    }
    static _fromJSON(e, t) {
      var r, i, l, c, f, m, y, x;
      const C = (r = t.displayName) !== null && r !== void 0 ? r : void 0, S = (i = t.email) !== null && i !== void 0 ? i : void 0, N = (l = t.phoneNumber) !== null && l !== void 0 ? l : void 0, P = (c = t.photoURL) !== null && c !== void 0 ? c : void 0, O = (f = t.tenantId) !== null && f !== void 0 ? f : void 0, L = (m = t._redirectEventId) !== null && m !== void 0 ? m : void 0, H = (y = t.createdAt) !== null && y !== void 0 ? y : void 0, W = (x = t.lastLoginAt) !== null && x !== void 0 ? x : void 0, { uid: T, emailVerified: Y, isAnonymous: u, providerData: ge, stsTokenManager: j } = t;
      rt(T && j, e, "internal-error");
      const M = cu.fromJSON(this.name, j);
      rt(typeof T == "string", e, "internal-error"), ma(C, e.name), ma(S, e.name), rt(typeof Y == "boolean", e, "internal-error"), rt(typeof u == "boolean", e, "internal-error"), ma(N, e.name), ma(P, e.name), ma(O, e.name), ma(L, e.name), ma(H, e.name), ma(W, e.name);
      const V = new ni({
        uid: T,
        auth: e,
        email: S,
        emailVerified: Y,
        displayName: C,
        isAnonymous: u,
        photoURL: P,
        phoneNumber: N,
        tenantId: O,
        stsTokenManager: M,
        createdAt: H,
        lastLoginAt: W
      });
      return ge && Array.isArray(ge) && (V.providerData = ge.map((B) => Object.assign({}, B))), L && (V._redirectEventId = L), V;
    }
    static async _fromIdTokenResponse(e, t, r = false) {
      const i = new cu();
      i.updateFromServerResponse(t);
      const l = new ni({
        uid: t.localId,
        auth: e,
        stsTokenManager: i,
        isAnonymous: r
      });
      return await Mg(l), l;
    }
    static async _fromGetAccountInfoResponse(e, t, r) {
      const i = t.users[0];
      rt(i.localId !== void 0, "internal-error");
      const l = i.providerUserInfo !== void 0 ? Ub(i.providerUserInfo) : [], c = !(i.email && i.passwordHash) && !(l == null ? void 0 : l.length), f = new cu();
      f.updateFromIdToken(r);
      const m = new ni({
        uid: i.localId,
        auth: e,
        stsTokenManager: f,
        isAnonymous: c
      }), y = {
        uid: i.localId,
        displayName: i.displayName || null,
        photoURL: i.photoUrl || null,
        email: i.email || null,
        emailVerified: i.emailVerified || false,
        phoneNumber: i.phoneNumber || null,
        tenantId: i.tenantId || null,
        providerData: l,
        metadata: new Qv(i.createdAt, i.lastLoginAt),
        isAnonymous: !(i.email && i.passwordHash) && !(l == null ? void 0 : l.length)
      };
      return Object.assign(m, y), m;
    }
  }
  const K_ = /* @__PURE__ */ new Map();
  function xo(n) {
    Io(n instanceof Function, "Expected a class definition");
    let e = K_.get(n);
    return e ? (Io(e instanceof n, "Instance stored in cache mismatched with class"), e) : (e = new n(), K_.set(n, e), e);
  }
  class Bb {
    constructor() {
      this.type = "NONE", this.storage = {};
    }
    async _isAvailable() {
      return true;
    }
    async _set(e, t) {
      this.storage[e] = t;
    }
    async _get(e) {
      const t = this.storage[e];
      return t === void 0 ? null : t;
    }
    async _remove(e) {
      delete this.storage[e];
    }
    _addListener(e, t) {
    }
    _removeListener(e, t) {
    }
  }
  Bb.type = "NONE";
  const G_ = Bb;
  function wg(n, e, t) {
    return `firebase:${n}:${e}:${t}`;
  }
  class uu {
    constructor(e, t, r) {
      this.persistence = e, this.auth = t, this.userKey = r;
      const { config: i, name: l } = this.auth;
      this.fullUserKey = wg(this.userKey, i.apiKey, l), this.fullPersistenceKey = wg("persistence", i.apiKey, l), this.boundEventHandler = t._onStorageEvent.bind(t), this.persistence._addListener(this.fullUserKey, this.boundEventHandler);
    }
    setCurrentUser(e) {
      return this.persistence._set(this.fullUserKey, e.toJSON());
    }
    async getCurrentUser() {
      const e = await this.persistence._get(this.fullUserKey);
      if (!e) return null;
      if (typeof e == "string") {
        const t = await Lg(this.auth, {
          idToken: e
        }).catch(() => {
        });
        return t ? ni._fromGetAccountInfoResponse(this.auth, t, e) : null;
      }
      return ni._fromJSON(this.auth, e);
    }
    removeCurrentUser() {
      return this.persistence._remove(this.fullUserKey);
    }
    savePersistenceForRedirect() {
      return this.persistence._set(this.fullPersistenceKey, this.persistence.type);
    }
    async setPersistence(e) {
      if (this.persistence === e) return;
      const t = await this.getCurrentUser();
      if (await this.removeCurrentUser(), this.persistence = e, t) return this.setCurrentUser(t);
    }
    delete() {
      this.persistence._removeListener(this.fullUserKey, this.boundEventHandler);
    }
    static async create(e, t, r = "authUser") {
      if (!t.length) return new uu(xo(G_), e, r);
      const i = (await Promise.all(t.map(async (y) => {
        if (await y._isAvailable()) return y;
      }))).filter((y) => y);
      let l = i[0] || xo(G_);
      const c = wg(r, e.config.apiKey, e.name);
      let f = null;
      for (const y of t) try {
        const x = await y._get(c);
        if (x) {
          let C;
          if (typeof x == "string") {
            const S = await Lg(e, {
              idToken: x
            }).catch(() => {
            });
            if (!S) break;
            C = await ni._fromGetAccountInfoResponse(e, S, x);
          } else C = ni._fromJSON(e, x);
          y !== l && (f = C), l = y;
          break;
        }
      } catch {
      }
      const m = i.filter((y) => y._shouldAllowMigration);
      return !l._shouldAllowMigration || !m.length ? new uu(l, e, r) : (l = m[0], f && await l._set(c, f.toJSON()), await Promise.all(t.map(async (y) => {
        if (y !== l) try {
          await y._remove(c);
        } catch {
        }
      })), new uu(l, e, r));
    }
  }
  function Q_(n) {
    const e = n.toLowerCase();
    if (e.includes("opera/") || e.includes("opr/") || e.includes("opios/")) return "Opera";
    if (Kb(e)) return "IEMobile";
    if (e.includes("msie") || e.includes("trident/")) return "IE";
    if (e.includes("edge/")) return "Edge";
    if (Wb(e)) return "Firefox";
    if (e.includes("silk/")) return "Silk";
    if (Qb(e)) return "Blackberry";
    if (Yb(e)) return "Webos";
    if (Hb(e)) return "Safari";
    if ((e.includes("chrome/") || qb(e)) && !e.includes("edge/")) return "Chrome";
    if (Gb(e)) return "Android";
    {
      const t = /([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/, r = n.match(t);
      if ((r == null ? void 0 : r.length) === 2) return r[1];
    }
    return "Other";
  }
  function Wb(n = gr()) {
    return /firefox\//i.test(n);
  }
  function Hb(n = gr()) {
    const e = n.toLowerCase();
    return e.includes("safari/") && !e.includes("chrome/") && !e.includes("crios/") && !e.includes("android");
  }
  function qb(n = gr()) {
    return /crios\//i.test(n);
  }
  function Kb(n = gr()) {
    return /iemobile/i.test(n);
  }
  function Gb(n = gr()) {
    return /android/i.test(n);
  }
  function Qb(n = gr()) {
    return /blackberry/i.test(n);
  }
  function Yb(n = gr()) {
    return /webos/i.test(n);
  }
  function Qy(n = gr()) {
    return /iphone|ipad|ipod/i.test(n) || /macintosh/i.test(n) && /mobile/i.test(n);
  }
  function c5(n = gr()) {
    var e;
    return Qy(n) && !!(!((e = window.navigator) === null || e === void 0) && e.standalone);
  }
  function u5() {
    return x4() && document.documentMode === 10;
  }
  function Xb(n = gr()) {
    return Qy(n) || Gb(n) || Yb(n) || Qb(n) || /windows phone/i.test(n) || Kb(n);
  }
  function Jb(n, e = []) {
    let t;
    switch (n) {
      case "Browser":
        t = Q_(gr());
        break;
      case "Worker":
        t = `${Q_(gr())}-${n}`;
        break;
      default:
        t = n;
    }
    const r = e.length ? e.join(",") : "FirebaseCore-web";
    return `${t}/JsCore/${Su}/${r}`;
  }
  class d5 {
    constructor(e) {
      this.auth = e, this.queue = [];
    }
    pushCallback(e, t) {
      const r = (l) => new Promise((c, f) => {
        try {
          const m = e(l);
          c(m);
        } catch (m) {
          f(m);
        }
      });
      r.onAbort = t, this.queue.push(r);
      const i = this.queue.length - 1;
      return () => {
        this.queue[i] = () => Promise.resolve();
      };
    }
    async runMiddleware(e) {
      if (this.auth.currentUser === e) return;
      const t = [];
      try {
        for (const r of this.queue) await r(e), r.onAbort && t.push(r.onAbort);
      } catch (r) {
        t.reverse();
        for (const i of t) try {
          i();
        } catch {
        }
        throw this.auth._errorFactory.create("login-blocked", {
          originalMessage: r == null ? void 0 : r.message
        });
      }
    }
  }
  async function f5(n, e = {}) {
    return Po(n, "GET", "/v2/passwordPolicy", No(n, e));
  }
  const h5 = 6;
  class p5 {
    constructor(e) {
      var t, r, i, l;
      const c = e.customStrengthOptions;
      this.customStrengthOptions = {}, this.customStrengthOptions.minPasswordLength = (t = c.minPasswordLength) !== null && t !== void 0 ? t : h5, c.maxPasswordLength && (this.customStrengthOptions.maxPasswordLength = c.maxPasswordLength), c.containsLowercaseCharacter !== void 0 && (this.customStrengthOptions.containsLowercaseLetter = c.containsLowercaseCharacter), c.containsUppercaseCharacter !== void 0 && (this.customStrengthOptions.containsUppercaseLetter = c.containsUppercaseCharacter), c.containsNumericCharacter !== void 0 && (this.customStrengthOptions.containsNumericCharacter = c.containsNumericCharacter), c.containsNonAlphanumericCharacter !== void 0 && (this.customStrengthOptions.containsNonAlphanumericCharacter = c.containsNonAlphanumericCharacter), this.enforcementState = e.enforcementState, this.enforcementState === "ENFORCEMENT_STATE_UNSPECIFIED" && (this.enforcementState = "OFF"), this.allowedNonAlphanumericCharacters = (i = (r = e.allowedNonAlphanumericCharacters) === null || r === void 0 ? void 0 : r.join("")) !== null && i !== void 0 ? i : "", this.forceUpgradeOnSignin = (l = e.forceUpgradeOnSignin) !== null && l !== void 0 ? l : false, this.schemaVersion = e.schemaVersion;
    }
    validatePassword(e) {
      var t, r, i, l, c, f;
      const m = {
        isValid: true,
        passwordPolicy: this
      };
      return this.validatePasswordLengthOptions(e, m), this.validatePasswordCharacterOptions(e, m), m.isValid && (m.isValid = (t = m.meetsMinPasswordLength) !== null && t !== void 0 ? t : true), m.isValid && (m.isValid = (r = m.meetsMaxPasswordLength) !== null && r !== void 0 ? r : true), m.isValid && (m.isValid = (i = m.containsLowercaseLetter) !== null && i !== void 0 ? i : true), m.isValid && (m.isValid = (l = m.containsUppercaseLetter) !== null && l !== void 0 ? l : true), m.isValid && (m.isValid = (c = m.containsNumericCharacter) !== null && c !== void 0 ? c : true), m.isValid && (m.isValid = (f = m.containsNonAlphanumericCharacter) !== null && f !== void 0 ? f : true), m;
    }
    validatePasswordLengthOptions(e, t) {
      const r = this.customStrengthOptions.minPasswordLength, i = this.customStrengthOptions.maxPasswordLength;
      r && (t.meetsMinPasswordLength = e.length >= r), i && (t.meetsMaxPasswordLength = e.length <= i);
    }
    validatePasswordCharacterOptions(e, t) {
      this.updatePasswordCharacterOptionsStatuses(t, false, false, false, false);
      let r;
      for (let i = 0; i < e.length; i++) r = e.charAt(i), this.updatePasswordCharacterOptionsStatuses(t, r >= "a" && r <= "z", r >= "A" && r <= "Z", r >= "0" && r <= "9", this.allowedNonAlphanumericCharacters.includes(r));
    }
    updatePasswordCharacterOptionsStatuses(e, t, r, i, l) {
      this.customStrengthOptions.containsLowercaseLetter && (e.containsLowercaseLetter || (e.containsLowercaseLetter = t)), this.customStrengthOptions.containsUppercaseLetter && (e.containsUppercaseLetter || (e.containsUppercaseLetter = r)), this.customStrengthOptions.containsNumericCharacter && (e.containsNumericCharacter || (e.containsNumericCharacter = i)), this.customStrengthOptions.containsNonAlphanumericCharacter && (e.containsNonAlphanumericCharacter || (e.containsNonAlphanumericCharacter = l));
    }
  }
  class g5 {
    constructor(e, t, r, i) {
      this.app = e, this.heartbeatServiceProvider = t, this.appCheckServiceProvider = r, this.config = i, this.currentUser = null, this.emulatorConfig = null, this.operations = Promise.resolve(), this.authStateSubscription = new Y_(this), this.idTokenSubscription = new Y_(this), this.beforeStateQueue = new d5(this), this.redirectUser = null, this.isProactiveRefreshEnabled = false, this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION = 1, this._canInitEmulator = true, this._isInitialized = false, this._deleted = false, this._initializationPromise = null, this._popupRedirectResolver = null, this._errorFactory = $b, this._agentRecaptchaConfig = null, this._tenantRecaptchaConfigs = {}, this._projectPasswordPolicy = null, this._tenantPasswordPolicies = {}, this._resolvePersistenceManagerAvailable = void 0, this.lastNotifiedUid = void 0, this.languageCode = null, this.tenantId = null, this.settings = {
        appVerificationDisabledForTesting: false
      }, this.frameworks = [], this.name = e.name, this.clientVersion = i.sdkClientVersion, this._persistenceManagerAvailable = new Promise((l) => this._resolvePersistenceManagerAvailable = l);
    }
    _initializeWithPersistence(e, t) {
      return t && (this._popupRedirectResolver = xo(t)), this._initializationPromise = this.queue(async () => {
        var r, i, l;
        if (!this._deleted && (this.persistenceManager = await uu.create(this, e), (r = this._resolvePersistenceManagerAvailable) === null || r === void 0 || r.call(this), !this._deleted)) {
          if (!((i = this._popupRedirectResolver) === null || i === void 0) && i._shouldInitProactively) try {
            await this._popupRedirectResolver._initialize(this);
          } catch {
          }
          await this.initializeCurrentUser(t), this.lastNotifiedUid = ((l = this.currentUser) === null || l === void 0 ? void 0 : l.uid) || null, !this._deleted && (this._isInitialized = true);
        }
      }), this._initializationPromise;
    }
    async _onStorageEvent() {
      if (this._deleted) return;
      const e = await this.assertedPersistence.getCurrentUser();
      if (!(!this.currentUser && !e)) {
        if (this.currentUser && e && this.currentUser.uid === e.uid) {
          this._currentUser._assign(e), await this.currentUser.getIdToken();
          return;
        }
        await this._updateCurrentUser(e, true);
      }
    }
    async initializeCurrentUserFromIdToken(e) {
      try {
        const t = await Lg(this, {
          idToken: e
        }), r = await ni._fromGetAccountInfoResponse(this, t, e);
        await this.directlySetCurrentUser(r);
      } catch (t) {
        console.warn("FirebaseServerApp could not login user with provided authIdToken: ", t), await this.directlySetCurrentUser(null);
      }
    }
    async initializeCurrentUser(e) {
      var t;
      if (ds(this.app)) {
        const c = this.app.settings.authIdToken;
        return c ? new Promise((f) => {
          setTimeout(() => this.initializeCurrentUserFromIdToken(c).then(f, f));
        }) : this.directlySetCurrentUser(null);
      }
      const r = await this.assertedPersistence.getCurrentUser();
      let i = r, l = false;
      if (e && this.config.authDomain) {
        await this.getOrInitRedirectPersistenceManager();
        const c = (t = this.redirectUser) === null || t === void 0 ? void 0 : t._redirectEventId, f = i == null ? void 0 : i._redirectEventId, m = await this.tryRedirectSignIn(e);
        (!c || c === f) && (m == null ? void 0 : m.user) && (i = m.user, l = true);
      }
      if (!i) return this.directlySetCurrentUser(null);
      if (!i._redirectEventId) {
        if (l) try {
          await this.beforeStateQueue.runMiddleware(i);
        } catch (c) {
          i = r, this._popupRedirectResolver._overrideRedirectResult(this, () => Promise.reject(c));
        }
        return i ? this.reloadAndSetCurrentUserOrClear(i) : this.directlySetCurrentUser(null);
      }
      return rt(this._popupRedirectResolver, this, "argument-error"), await this.getOrInitRedirectPersistenceManager(), this.redirectUser && this.redirectUser._redirectEventId === i._redirectEventId ? this.directlySetCurrentUser(i) : this.reloadAndSetCurrentUserOrClear(i);
    }
    async tryRedirectSignIn(e) {
      let t = null;
      try {
        t = await this._popupRedirectResolver._completeRedirectFn(this, e, true);
      } catch {
        await this._setRedirectUser(null);
      }
      return t;
    }
    async reloadAndSetCurrentUserOrClear(e) {
      try {
        await Mg(e);
      } catch (t) {
        if ((t == null ? void 0 : t.code) !== "auth/network-request-failed") return this.directlySetCurrentUser(null);
      }
      return this.directlySetCurrentUser(e);
    }
    useDeviceLanguage() {
      this.languageCode = KP();
    }
    async _delete() {
      this._deleted = true;
    }
    async updateCurrentUser(e) {
      if (ds(this.app)) return Promise.reject(bo(this));
      const t = e ? xn(e) : null;
      return t && rt(t.auth.config.apiKey === this.config.apiKey, this, "invalid-user-token"), this._updateCurrentUser(t && t._clone(this));
    }
    async _updateCurrentUser(e, t = false) {
      if (!this._deleted) return e && rt(this.tenantId === e.tenantId, this, "tenant-id-mismatch"), t || await this.beforeStateQueue.runMiddleware(e), this.queue(async () => {
        await this.directlySetCurrentUser(e), this.notifyAuthListeners();
      });
    }
    async signOut() {
      return ds(this.app) ? Promise.reject(bo(this)) : (await this.beforeStateQueue.runMiddleware(null), (this.redirectPersistenceManager || this._popupRedirectResolver) && await this._setRedirectUser(null), this._updateCurrentUser(null, true));
    }
    setPersistence(e) {
      return ds(this.app) ? Promise.reject(bo(this)) : this.queue(async () => {
        await this.assertedPersistence.setPersistence(xo(e));
      });
    }
    _getRecaptchaConfig() {
      return this.tenantId == null ? this._agentRecaptchaConfig : this._tenantRecaptchaConfigs[this.tenantId];
    }
    async validatePassword(e) {
      this._getPasswordPolicyInternal() || await this._updatePasswordPolicy();
      const t = this._getPasswordPolicyInternal();
      return t.schemaVersion !== this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION ? Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version", {})) : t.validatePassword(e);
    }
    _getPasswordPolicyInternal() {
      return this.tenantId === null ? this._projectPasswordPolicy : this._tenantPasswordPolicies[this.tenantId];
    }
    async _updatePasswordPolicy() {
      const e = await f5(this), t = new p5(e);
      this.tenantId === null ? this._projectPasswordPolicy = t : this._tenantPasswordPolicies[this.tenantId] = t;
    }
    _getPersistenceType() {
      return this.assertedPersistence.persistence.type;
    }
    _getPersistence() {
      return this.assertedPersistence.persistence;
    }
    _updateErrorMap(e) {
      this._errorFactory = new Wl("auth", "Firebase", e());
    }
    onAuthStateChanged(e, t, r) {
      return this.registerStateListener(this.authStateSubscription, e, t, r);
    }
    beforeAuthStateChanged(e, t) {
      return this.beforeStateQueue.pushCallback(e, t);
    }
    onIdTokenChanged(e, t, r) {
      return this.registerStateListener(this.idTokenSubscription, e, t, r);
    }
    authStateReady() {
      return new Promise((e, t) => {
        if (this.currentUser) e();
        else {
          const r = this.onAuthStateChanged(() => {
            r(), e();
          }, t);
        }
      });
    }
    async revokeAccessToken(e) {
      if (this.currentUser) {
        const t = await this.currentUser.getIdToken(), r = {
          providerId: "apple.com",
          tokenType: "ACCESS_TOKEN",
          token: e,
          idToken: t
        };
        this.tenantId != null && (r.tenantId = this.tenantId), await l5(this, r);
      }
    }
    toJSON() {
      var e;
      return {
        apiKey: this.config.apiKey,
        authDomain: this.config.authDomain,
        appName: this.name,
        currentUser: (e = this._currentUser) === null || e === void 0 ? void 0 : e.toJSON()
      };
    }
    async _setRedirectUser(e, t) {
      const r = await this.getOrInitRedirectPersistenceManager(t);
      return e === null ? r.removeCurrentUser() : r.setCurrentUser(e);
    }
    async getOrInitRedirectPersistenceManager(e) {
      if (!this.redirectPersistenceManager) {
        const t = e && xo(e) || this._popupRedirectResolver;
        rt(t, this, "argument-error"), this.redirectPersistenceManager = await uu.create(this, [
          xo(t._redirectPersistence)
        ], "redirectUser"), this.redirectUser = await this.redirectPersistenceManager.getCurrentUser();
      }
      return this.redirectPersistenceManager;
    }
    async _redirectUserForId(e) {
      var t, r;
      return this._isInitialized && await this.queue(async () => {
      }), ((t = this._currentUser) === null || t === void 0 ? void 0 : t._redirectEventId) === e ? this._currentUser : ((r = this.redirectUser) === null || r === void 0 ? void 0 : r._redirectEventId) === e ? this.redirectUser : null;
    }
    async _persistUserIfCurrent(e) {
      if (e === this.currentUser) return this.queue(async () => this.directlySetCurrentUser(e));
    }
    _notifyListenersIfCurrent(e) {
      e === this.currentUser && this.notifyAuthListeners();
    }
    _key() {
      return `${this.config.authDomain}:${this.config.apiKey}:${this.name}`;
    }
    _startProactiveRefresh() {
      this.isProactiveRefreshEnabled = true, this.currentUser && this._currentUser._startProactiveRefresh();
    }
    _stopProactiveRefresh() {
      this.isProactiveRefreshEnabled = false, this.currentUser && this._currentUser._stopProactiveRefresh();
    }
    get _currentUser() {
      return this.currentUser;
    }
    notifyAuthListeners() {
      var e, t;
      if (!this._isInitialized) return;
      this.idTokenSubscription.next(this.currentUser);
      const r = (t = (e = this.currentUser) === null || e === void 0 ? void 0 : e.uid) !== null && t !== void 0 ? t : null;
      this.lastNotifiedUid !== r && (this.lastNotifiedUid = r, this.authStateSubscription.next(this.currentUser));
    }
    registerStateListener(e, t, r, i) {
      if (this._deleted) return () => {
      };
      const l = typeof t == "function" ? t : t.next.bind(t);
      let c = false;
      const f = this._isInitialized ? Promise.resolve() : this._initializationPromise;
      if (rt(f, this, "internal-error"), f.then(() => {
        c || l(this.currentUser);
      }), typeof t == "function") {
        const m = e.addObserver(t, r, i);
        return () => {
          c = true, m();
        };
      } else {
        const m = e.addObserver(t);
        return () => {
          c = true, m();
        };
      }
    }
    async directlySetCurrentUser(e) {
      this.currentUser && this.currentUser !== e && this._currentUser._stopProactiveRefresh(), e && this.isProactiveRefreshEnabled && e._startProactiveRefresh(), this.currentUser = e, e ? await this.assertedPersistence.setCurrentUser(e) : await this.assertedPersistence.removeCurrentUser();
    }
    queue(e) {
      return this.operations = this.operations.then(e, e), this.operations;
    }
    get assertedPersistence() {
      return rt(this.persistenceManager, this, "internal-error"), this.persistenceManager;
    }
    _logFramework(e) {
      !e || this.frameworks.includes(e) || (this.frameworks.push(e), this.frameworks.sort(), this.clientVersion = Jb(this.config.clientPlatform, this._getFrameworks()));
    }
    _getFrameworks() {
      return this.frameworks;
    }
    async _getAdditionalHeaders() {
      var e;
      const t = {
        "X-Client-Version": this.clientVersion
      };
      this.app.options.appId && (t["X-Firebase-gmpid"] = this.app.options.appId);
      const r = await ((e = this.heartbeatServiceProvider.getImmediate({
        optional: true
      })) === null || e === void 0 ? void 0 : e.getHeartbeatsHeader());
      r && (t["X-Firebase-Client"] = r);
      const i = await this._getAppCheckToken();
      return i && (t["X-Firebase-AppCheck"] = i), t;
    }
    async _getAppCheckToken() {
      var e;
      if (ds(this.app) && this.app.settings.appCheckToken) return this.app.settings.appCheckToken;
      const t = await ((e = this.appCheckServiceProvider.getImmediate({
        optional: true
      })) === null || e === void 0 ? void 0 : e.getToken());
      return (t == null ? void 0 : t.error) && BP(`Error while retrieving App Check token: ${t.error}`), t == null ? void 0 : t.token;
    }
  }
  function Oa(n) {
    return xn(n);
  }
  class Y_ {
    constructor(e) {
      this.auth = e, this.observer = null, this.addObserver = k4((t) => this.observer = t);
    }
    get next() {
      return rt(this.observer, this.auth, "internal-error"), this.observer.next.bind(this.observer);
    }
  }
  let fm = {
    async loadJS() {
      throw new Error("Unable to load external scripts");
    },
    recaptchaV2Script: "",
    recaptchaEnterpriseScript: "",
    gapiScript: ""
  };
  function m5(n) {
    fm = n;
  }
  function Zb(n) {
    return fm.loadJS(n);
  }
  function v5() {
    return fm.recaptchaEnterpriseScript;
  }
  function y5() {
    return fm.gapiScript;
  }
  function w5(n) {
    return `__${n}${Math.floor(Math.random() * 1e6)}`;
  }
  class _5 {
    constructor() {
      this.enterprise = new x5();
    }
    ready(e) {
      e();
    }
    execute(e, t) {
      return Promise.resolve("token");
    }
    render(e, t) {
      return "";
    }
  }
  class x5 {
    ready(e) {
      e();
    }
    execute(e, t) {
      return Promise.resolve("token");
    }
    render(e, t) {
      return "";
    }
  }
  const E5 = "recaptcha-enterprise", e2 = "NO_RECAPTCHA";
  class b5 {
    constructor(e) {
      this.type = E5, this.auth = Oa(e);
    }
    async verify(e = "verify", t = false) {
      async function r(l) {
        if (!t) {
          if (l.tenantId == null && l._agentRecaptchaConfig != null) return l._agentRecaptchaConfig.siteKey;
          if (l.tenantId != null && l._tenantRecaptchaConfigs[l.tenantId] !== void 0) return l._tenantRecaptchaConfigs[l.tenantId].siteKey;
        }
        return new Promise(async (c, f) => {
          e5(l, {
            clientType: "CLIENT_TYPE_WEB",
            version: "RECAPTCHA_ENTERPRISE"
          }).then((m) => {
            if (m.recaptchaKey === void 0) f(new Error("recaptcha Enterprise site key undefined"));
            else {
              const y = new ZP(m);
              return l.tenantId == null ? l._agentRecaptchaConfig = y : l._tenantRecaptchaConfigs[l.tenantId] = y, c(y.siteKey);
            }
          }).catch((m) => {
            f(m);
          });
        });
      }
      function i(l, c, f) {
        const m = window.grecaptcha;
        H_(m) ? m.enterprise.ready(() => {
          m.enterprise.execute(l, {
            action: e
          }).then((y) => {
            c(y);
          }).catch(() => {
            c(e2);
          });
        }) : f(Error("No reCAPTCHA enterprise script loaded."));
      }
      return this.auth.settings.appVerificationDisabledForTesting ? new _5().execute("siteKey", {
        action: "verify"
      }) : new Promise((l, c) => {
        r(this.auth).then((f) => {
          if (!t && H_(window.grecaptcha)) i(f, l, c);
          else {
            if (typeof window > "u") {
              c(new Error("RecaptchaVerifier is only supported in browser"));
              return;
            }
            let m = v5();
            m.length !== 0 && (m += f), Zb(m).then(() => {
              i(f, l, c);
            }).catch((y) => {
              c(y);
            });
          }
        }).catch((f) => {
          c(f);
        });
      });
    }
  }
  async function X_(n, e, t, r = false, i = false) {
    const l = new b5(n);
    let c;
    if (i) c = e2;
    else try {
      c = await l.verify(t);
    } catch {
      c = await l.verify(t, true);
    }
    const f = Object.assign({}, e);
    if (t === "mfaSmsEnrollment" || t === "mfaSmsSignIn") {
      if ("phoneEnrollmentInfo" in f) {
        const m = f.phoneEnrollmentInfo.phoneNumber, y = f.phoneEnrollmentInfo.recaptchaToken;
        Object.assign(f, {
          phoneEnrollmentInfo: {
            phoneNumber: m,
            recaptchaToken: y,
            captchaResponse: c,
            clientType: "CLIENT_TYPE_WEB",
            recaptchaVersion: "RECAPTCHA_ENTERPRISE"
          }
        });
      } else if ("phoneSignInInfo" in f) {
        const m = f.phoneSignInInfo.recaptchaToken;
        Object.assign(f, {
          phoneSignInInfo: {
            recaptchaToken: m,
            captchaResponse: c,
            clientType: "CLIENT_TYPE_WEB",
            recaptchaVersion: "RECAPTCHA_ENTERPRISE"
          }
        });
      }
      return f;
    }
    return r ? Object.assign(f, {
      captchaResp: c
    }) : Object.assign(f, {
      captchaResponse: c
    }), Object.assign(f, {
      clientType: "CLIENT_TYPE_WEB"
    }), Object.assign(f, {
      recaptchaVersion: "RECAPTCHA_ENTERPRISE"
    }), f;
  }
  async function Yv(n, e, t, r, i) {
    var l;
    if (!((l = n._getRecaptchaConfig()) === null || l === void 0) && l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")) {
      const c = await X_(n, e, t, t === "getOobCode");
      return r(n, c);
    } else return r(n, e).catch(async (c) => {
      if (c.code === "auth/missing-recaptcha-token") {
        console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);
        const f = await X_(n, e, t, t === "getOobCode");
        return r(n, f);
      } else return Promise.reject(c);
    });
  }
  function T5(n, e) {
    const t = Hl(n, "auth");
    if (t.isInitialized()) {
      const i = t.getImmediate(), l = t.getOptions();
      if (Ia(l, e ?? {})) return i;
      Ps(i, "already-initialized");
    }
    return t.initialize({
      options: e
    });
  }
  function C5(n, e) {
    const t = (e == null ? void 0 : e.persistence) || [], r = (Array.isArray(t) ? t : [
      t
    ]).map(xo);
    (e == null ? void 0 : e.errorMap) && n._updateErrorMap(e.errorMap), n._initializeWithPersistence(r, e == null ? void 0 : e.popupRedirectResolver);
  }
  function S5(n, e, t) {
    const r = Oa(n);
    rt(/^https?:\/\//.test(e), r, "invalid-emulator-scheme");
    const i = false, l = t2(e), { host: c, port: f } = I5(e), m = f === null ? "" : `:${f}`, y = {
      url: `${l}//${c}${m}/`
    }, x = Object.freeze({
      host: c,
      port: f,
      protocol: l.replace(":", ""),
      options: Object.freeze({
        disableWarnings: i
      })
    });
    if (!r._canInitEmulator) {
      rt(r.config.emulator && r.emulatorConfig, r, "emulator-config-failed"), rt(Ia(y, r.config.emulator) && Ia(x, r.emulatorConfig), r, "emulator-config-failed");
      return;
    }
    r.config.emulator = y, r.emulatorConfig = x, r.settings.appVerificationDisabledForTesting = true, k5();
  }
  function t2(n) {
    const e = n.indexOf(":");
    return e < 0 ? "" : n.substr(0, e + 1);
  }
  function I5(n) {
    const e = t2(n), t = /(\/\/)?([^?#/]+)/.exec(n.substr(e.length));
    if (!t) return {
      host: "",
      port: null
    };
    const r = t[2].split("@").pop() || "", i = /^(\[[^\]]+\])(:|$)/.exec(r);
    if (i) {
      const l = i[1];
      return {
        host: l,
        port: J_(r.substr(l.length + 1))
      };
    } else {
      const [l, c] = r.split(":");
      return {
        host: l,
        port: J_(c)
      };
    }
  }
  function J_(n) {
    if (!n) return null;
    const e = Number(n);
    return isNaN(e) ? null : e;
  }
  function k5() {
    function n() {
      const e = document.createElement("p"), t = e.style;
      e.innerText = "Running in emulator mode. Do not use with production credentials.", t.position = "fixed", t.width = "100%", t.backgroundColor = "#ffffff", t.border = ".1em solid #000000", t.color = "#b50000", t.bottom = "0px", t.left = "0px", t.margin = "0px", t.zIndex = "10000", t.textAlign = "center", e.classList.add("firebase-emulator-warning"), document.body.appendChild(e);
    }
    typeof console < "u" && typeof console.info == "function" && console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."), typeof window < "u" && typeof document < "u" && (document.readyState === "loading" ? window.addEventListener("DOMContentLoaded", n) : n());
  }
  class Yy {
    constructor(e, t) {
      this.providerId = e, this.signInMethod = t;
    }
    toJSON() {
      return _o("not implemented");
    }
    _getIdTokenResponse(e) {
      return _o("not implemented");
    }
    _linkToIdToken(e, t) {
      return _o("not implemented");
    }
    _getReauthenticationResolver(e) {
      return _o("not implemented");
    }
  }
  async function A5(n, e) {
    return Po(n, "POST", "/v1/accounts:signUp", e);
  }
  async function R5(n, e) {
    return $f(n, "POST", "/v1/accounts:signInWithPassword", No(n, e));
  }
  async function N5(n, e) {
    return Po(n, "POST", "/v1/accounts:sendOobCode", No(n, e));
  }
  async function P5(n, e) {
    return N5(n, e);
  }
  async function D5(n, e) {
    return $f(n, "POST", "/v1/accounts:signInWithEmailLink", No(n, e));
  }
  async function j5(n, e) {
    return $f(n, "POST", "/v1/accounts:signInWithEmailLink", No(n, e));
  }
  class If extends Yy {
    constructor(e, t, r, i = null) {
      super("password", r), this._email = e, this._password = t, this._tenantId = i;
    }
    static _fromEmailAndPassword(e, t) {
      return new If(e, t, "password");
    }
    static _fromEmailAndCode(e, t, r = null) {
      return new If(e, t, "emailLink", r);
    }
    toJSON() {
      return {
        email: this._email,
        password: this._password,
        signInMethod: this.signInMethod,
        tenantId: this._tenantId
      };
    }
    static fromJSON(e) {
      const t = typeof e == "string" ? JSON.parse(e) : e;
      if ((t == null ? void 0 : t.email) && (t == null ? void 0 : t.password)) {
        if (t.signInMethod === "password") return this._fromEmailAndPassword(t.email, t.password);
        if (t.signInMethod === "emailLink") return this._fromEmailAndCode(t.email, t.password, t.tenantId);
      }
      return null;
    }
    async _getIdTokenResponse(e) {
      switch (this.signInMethod) {
        case "password":
          const t = {
            returnSecureToken: true,
            email: this._email,
            password: this._password,
            clientType: "CLIENT_TYPE_WEB"
          };
          return Yv(e, t, "signInWithPassword", R5);
        case "emailLink":
          return D5(e, {
            email: this._email,
            oobCode: this._password
          });
        default:
          Ps(e, "internal-error");
      }
    }
    async _linkToIdToken(e, t) {
      switch (this.signInMethod) {
        case "password":
          const r = {
            idToken: t,
            returnSecureToken: true,
            email: this._email,
            password: this._password,
            clientType: "CLIENT_TYPE_WEB"
          };
          return Yv(e, r, "signUpPassword", A5);
        case "emailLink":
          return j5(e, {
            idToken: t,
            email: this._email,
            oobCode: this._password
          });
        default:
          Ps(e, "internal-error");
      }
    }
    _getReauthenticationResolver(e) {
      return this._getIdTokenResponse(e);
    }
  }
  async function du(n, e) {
    return $f(n, "POST", "/v1/accounts:signInWithIdp", No(n, e));
  }
  const O5 = "http://localhost";
  class Ml extends Yy {
    constructor() {
      super(...arguments), this.pendingToken = null;
    }
    static _fromParams(e) {
      const t = new Ml(e.providerId, e.signInMethod);
      return e.idToken || e.accessToken ? (e.idToken && (t.idToken = e.idToken), e.accessToken && (t.accessToken = e.accessToken), e.nonce && !e.pendingToken && (t.nonce = e.nonce), e.pendingToken && (t.pendingToken = e.pendingToken)) : e.oauthToken && e.oauthTokenSecret ? (t.accessToken = e.oauthToken, t.secret = e.oauthTokenSecret) : Ps("argument-error"), t;
    }
    toJSON() {
      return {
        idToken: this.idToken,
        accessToken: this.accessToken,
        secret: this.secret,
        nonce: this.nonce,
        pendingToken: this.pendingToken,
        providerId: this.providerId,
        signInMethod: this.signInMethod
      };
    }
    static fromJSON(e) {
      const t = typeof e == "string" ? JSON.parse(e) : e, { providerId: r, signInMethod: i } = t, l = Wy(t, [
        "providerId",
        "signInMethod"
      ]);
      if (!r || !i) return null;
      const c = new Ml(r, i);
      return c.idToken = l.idToken || void 0, c.accessToken = l.accessToken || void 0, c.secret = l.secret, c.nonce = l.nonce, c.pendingToken = l.pendingToken || null, c;
    }
    _getIdTokenResponse(e) {
      const t = this.buildRequest();
      return du(e, t);
    }
    _linkToIdToken(e, t) {
      const r = this.buildRequest();
      return r.idToken = t, du(e, r);
    }
    _getReauthenticationResolver(e) {
      const t = this.buildRequest();
      return t.autoCreate = false, du(e, t);
    }
    buildRequest() {
      const e = {
        requestUri: O5,
        returnSecureToken: true
      };
      if (this.pendingToken) e.pendingToken = this.pendingToken;
      else {
        const t = {};
        this.idToken && (t.id_token = this.idToken), this.accessToken && (t.access_token = this.accessToken), this.secret && (t.oauth_token_secret = this.secret), t.providerId = this.providerId, this.nonce && !this.pendingToken && (t.nonce = this.nonce), e.postBody = Lf(t);
      }
      return e;
    }
  }
  function L5(n) {
    switch (n) {
      case "recoverEmail":
        return "RECOVER_EMAIL";
      case "resetPassword":
        return "PASSWORD_RESET";
      case "signIn":
        return "EMAIL_SIGNIN";
      case "verifyEmail":
        return "VERIFY_EMAIL";
      case "verifyAndChangeEmail":
        return "VERIFY_AND_CHANGE_EMAIL";
      case "revertSecondFactorAddition":
        return "REVERT_SECOND_FACTOR_ADDITION";
      default:
        return null;
    }
  }
  function M5(n) {
    const e = lf(cf(n)).link, t = e ? lf(cf(e)).deep_link_id : null, r = lf(cf(n)).deep_link_id;
    return (r ? lf(cf(r)).link : null) || r || t || e || n;
  }
  class Xy {
    constructor(e) {
      var t, r, i, l, c, f;
      const m = lf(cf(e)), y = (t = m.apiKey) !== null && t !== void 0 ? t : null, x = (r = m.oobCode) !== null && r !== void 0 ? r : null, C = L5((i = m.mode) !== null && i !== void 0 ? i : null);
      rt(y && x && C, "argument-error"), this.apiKey = y, this.operation = C, this.code = x, this.continueUrl = (l = m.continueUrl) !== null && l !== void 0 ? l : null, this.languageCode = (c = m.languageCode) !== null && c !== void 0 ? c : null, this.tenantId = (f = m.tenantId) !== null && f !== void 0 ? f : null;
    }
    static parseLink(e) {
      const t = M5(e);
      try {
        return new Xy(t);
      } catch {
        return null;
      }
    }
  }
  class Iu {
    constructor() {
      this.providerId = Iu.PROVIDER_ID;
    }
    static credential(e, t) {
      return If._fromEmailAndPassword(e, t);
    }
    static credentialWithLink(e, t) {
      const r = Xy.parseLink(t);
      return rt(r, "argument-error"), If._fromEmailAndCode(e, r.code, r.tenantId);
    }
  }
  Iu.PROVIDER_ID = "password";
  Iu.EMAIL_PASSWORD_SIGN_IN_METHOD = "password";
  Iu.EMAIL_LINK_SIGN_IN_METHOD = "emailLink";
  class Jy {
    constructor(e) {
      this.providerId = e, this.defaultLanguageCode = null, this.customParameters = {};
    }
    setDefaultLanguage(e) {
      this.defaultLanguageCode = e;
    }
    setCustomParameters(e) {
      return this.customParameters = e, this;
    }
    getCustomParameters() {
      return this.customParameters;
    }
  }
  class Vf extends Jy {
    constructor() {
      super(...arguments), this.scopes = [];
    }
    addScope(e) {
      return this.scopes.includes(e) || this.scopes.push(e), this;
    }
    getScopes() {
      return [
        ...this.scopes
      ];
    }
  }
  class ya extends Vf {
    constructor() {
      super("facebook.com");
    }
    static credential(e) {
      return Ml._fromParams({
        providerId: ya.PROVIDER_ID,
        signInMethod: ya.FACEBOOK_SIGN_IN_METHOD,
        accessToken: e
      });
    }
    static credentialFromResult(e) {
      return ya.credentialFromTaggedObject(e);
    }
    static credentialFromError(e) {
      return ya.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e || !("oauthAccessToken" in e) || !e.oauthAccessToken) return null;
      try {
        return ya.credential(e.oauthAccessToken);
      } catch {
        return null;
      }
    }
  }
  ya.FACEBOOK_SIGN_IN_METHOD = "facebook.com";
  ya.PROVIDER_ID = "facebook.com";
  class yo extends Vf {
    constructor() {
      super("google.com"), this.addScope("profile");
    }
    static credential(e, t) {
      return Ml._fromParams({
        providerId: yo.PROVIDER_ID,
        signInMethod: yo.GOOGLE_SIGN_IN_METHOD,
        idToken: e,
        accessToken: t
      });
    }
    static credentialFromResult(e) {
      return yo.credentialFromTaggedObject(e);
    }
    static credentialFromError(e) {
      return yo.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e) return null;
      const { oauthIdToken: t, oauthAccessToken: r } = e;
      if (!t && !r) return null;
      try {
        return yo.credential(t, r);
      } catch {
        return null;
      }
    }
  }
  yo.GOOGLE_SIGN_IN_METHOD = "google.com";
  yo.PROVIDER_ID = "google.com";
  class wa extends Vf {
    constructor() {
      super("github.com");
    }
    static credential(e) {
      return Ml._fromParams({
        providerId: wa.PROVIDER_ID,
        signInMethod: wa.GITHUB_SIGN_IN_METHOD,
        accessToken: e
      });
    }
    static credentialFromResult(e) {
      return wa.credentialFromTaggedObject(e);
    }
    static credentialFromError(e) {
      return wa.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e || !("oauthAccessToken" in e) || !e.oauthAccessToken) return null;
      try {
        return wa.credential(e.oauthAccessToken);
      } catch {
        return null;
      }
    }
  }
  wa.GITHUB_SIGN_IN_METHOD = "github.com";
  wa.PROVIDER_ID = "github.com";
  class _a extends Vf {
    constructor() {
      super("twitter.com");
    }
    static credential(e, t) {
      return Ml._fromParams({
        providerId: _a.PROVIDER_ID,
        signInMethod: _a.TWITTER_SIGN_IN_METHOD,
        oauthToken: e,
        oauthTokenSecret: t
      });
    }
    static credentialFromResult(e) {
      return _a.credentialFromTaggedObject(e);
    }
    static credentialFromError(e) {
      return _a.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e) return null;
      const { oauthAccessToken: t, oauthTokenSecret: r } = e;
      if (!t || !r) return null;
      try {
        return _a.credential(t, r);
      } catch {
        return null;
      }
    }
  }
  _a.TWITTER_SIGN_IN_METHOD = "twitter.com";
  _a.PROVIDER_ID = "twitter.com";
  async function $5(n, e) {
    return $f(n, "POST", "/v1/accounts:signUp", No(n, e));
  }
  class $l {
    constructor(e) {
      this.user = e.user, this.providerId = e.providerId, this._tokenResponse = e._tokenResponse, this.operationType = e.operationType;
    }
    static async _fromIdTokenResponse(e, t, r, i = false) {
      const l = await ni._fromIdTokenResponse(e, r, i), c = Z_(r);
      return new $l({
        user: l,
        providerId: c,
        _tokenResponse: r,
        operationType: t
      });
    }
    static async _forOperation(e, t, r) {
      await e._updateTokensIfNecessary(r, true);
      const i = Z_(r);
      return new $l({
        user: e,
        providerId: i,
        _tokenResponse: r,
        operationType: t
      });
    }
  }
  function Z_(n) {
    return n.providerId ? n.providerId : "phoneNumber" in n ? "phone" : null;
  }
  class $g extends ui {
    constructor(e, t, r, i) {
      var l;
      super(t.code, t.message), this.operationType = r, this.user = i, Object.setPrototypeOf(this, $g.prototype), this.customData = {
        appName: e.name,
        tenantId: (l = e.tenantId) !== null && l !== void 0 ? l : void 0,
        _serverResponse: t.customData._serverResponse,
        operationType: r
      };
    }
    static _fromErrorAndOperation(e, t, r, i) {
      return new $g(e, t, r, i);
    }
  }
  function n2(n, e, t, r) {
    return (e === "reauthenticate" ? t._getReauthenticationResolver(n) : t._getIdTokenResponse(n)).catch((l) => {
      throw l.code === "auth/multi-factor-auth-required" ? $g._fromErrorAndOperation(n, l, e, r) : l;
    });
  }
  async function V5(n, e, t = false) {
    const r = await Sf(n, e._linkToIdToken(n.auth, await n.getIdToken()), t);
    return $l._forOperation(n, "link", r);
  }
  async function F5(n, e, t = false) {
    const { auth: r } = n;
    if (ds(r.app)) return Promise.reject(bo(r));
    const i = "reauthenticate";
    try {
      const l = await Sf(n, n2(r, i, e, n), t);
      rt(l.idToken, r, "internal-error");
      const c = Gy(l.idToken);
      rt(c, r, "internal-error");
      const { sub: f } = c;
      return rt(n.uid === f, r, "user-mismatch"), $l._forOperation(n, i, l);
    } catch (l) {
      throw (l == null ? void 0 : l.code) === "auth/user-not-found" && Ps(r, "user-mismatch"), l;
    }
  }
  async function r2(n, e, t = false) {
    if (ds(n.app)) return Promise.reject(bo(n));
    const r = "signIn", i = await n2(n, r, e), l = await $l._fromIdTokenResponse(n, r, i);
    return t || await n._updateCurrentUser(l.user), l;
  }
  async function z5(n, e) {
    return r2(Oa(n), e);
  }
  async function s2(n) {
    const e = Oa(n);
    e._getPasswordPolicyInternal() && await e._updatePasswordPolicy();
  }
  async function U5(n, e, t) {
    if (ds(n.app)) return Promise.reject(bo(n));
    const r = Oa(n), c = await Yv(r, {
      returnSecureToken: true,
      email: e,
      password: t,
      clientType: "CLIENT_TYPE_WEB"
    }, "signUpPassword", $5).catch((m) => {
      throw m.code === "auth/password-does-not-meet-requirements" && s2(n), m;
    }), f = await $l._fromIdTokenResponse(r, "signIn", c);
    return await r._updateCurrentUser(f.user), f;
  }
  function B5(n, e, t) {
    return ds(n.app) ? Promise.reject(bo(n)) : z5(xn(n), Iu.credential(e, t)).catch(async (r) => {
      throw r.code === "auth/password-does-not-meet-requirements" && s2(n), r;
    });
  }
  async function Xv(n, e) {
    const t = xn(n), i = {
      requestType: "VERIFY_EMAIL",
      idToken: await n.getIdToken()
    }, { email: l } = await P5(t.auth, i);
    l !== n.email && await n.reload();
  }
  function W5(n, e, t, r) {
    return xn(n).onIdTokenChanged(e, t, r);
  }
  function H5(n, e, t) {
    return xn(n).beforeAuthStateChanged(e, t);
  }
  function q5(n, e, t, r) {
    return xn(n).onAuthStateChanged(e, t, r);
  }
  const Vg = "__sak";
  class i2 {
    constructor(e, t) {
      this.storageRetriever = e, this.type = t;
    }
    _isAvailable() {
      try {
        return this.storage ? (this.storage.setItem(Vg, "1"), this.storage.removeItem(Vg), Promise.resolve(true)) : Promise.resolve(false);
      } catch {
        return Promise.resolve(false);
      }
    }
    _set(e, t) {
      return this.storage.setItem(e, JSON.stringify(t)), Promise.resolve();
    }
    _get(e) {
      const t = this.storage.getItem(e);
      return Promise.resolve(t ? JSON.parse(t) : null);
    }
    _remove(e) {
      return this.storage.removeItem(e), Promise.resolve();
    }
    get storage() {
      return this.storageRetriever();
    }
  }
  const K5 = 1e3, G5 = 10;
  class o2 extends i2 {
    constructor() {
      super(() => window.localStorage, "LOCAL"), this.boundEventHandler = (e, t) => this.onStorageEvent(e, t), this.listeners = {}, this.localCache = {}, this.pollTimer = null, this.fallbackToPolling = Xb(), this._shouldAllowMigration = true;
    }
    forAllChangedKeys(e) {
      for (const t of Object.keys(this.listeners)) {
        const r = this.storage.getItem(t), i = this.localCache[t];
        r !== i && e(t, i, r);
      }
    }
    onStorageEvent(e, t = false) {
      if (!e.key) {
        this.forAllChangedKeys((c, f, m) => {
          this.notifyListeners(c, m);
        });
        return;
      }
      const r = e.key;
      t ? this.detachListener() : this.stopPolling();
      const i = () => {
        const c = this.storage.getItem(r);
        !t && this.localCache[r] === c || this.notifyListeners(r, c);
      }, l = this.storage.getItem(r);
      u5() && l !== e.newValue && e.newValue !== e.oldValue ? setTimeout(i, G5) : i();
    }
    notifyListeners(e, t) {
      this.localCache[e] = t;
      const r = this.listeners[e];
      if (r) for (const i of Array.from(r)) i(t && JSON.parse(t));
    }
    startPolling() {
      this.stopPolling(), this.pollTimer = setInterval(() => {
        this.forAllChangedKeys((e, t, r) => {
          this.onStorageEvent(new StorageEvent("storage", {
            key: e,
            oldValue: t,
            newValue: r
          }), true);
        });
      }, K5);
    }
    stopPolling() {
      this.pollTimer && (clearInterval(this.pollTimer), this.pollTimer = null);
    }
    attachListener() {
      window.addEventListener("storage", this.boundEventHandler);
    }
    detachListener() {
      window.removeEventListener("storage", this.boundEventHandler);
    }
    _addListener(e, t) {
      Object.keys(this.listeners).length === 0 && (this.fallbackToPolling ? this.startPolling() : this.attachListener()), this.listeners[e] || (this.listeners[e] = /* @__PURE__ */ new Set(), this.localCache[e] = this.storage.getItem(e)), this.listeners[e].add(t);
    }
    _removeListener(e, t) {
      this.listeners[e] && (this.listeners[e].delete(t), this.listeners[e].size === 0 && delete this.listeners[e]), Object.keys(this.listeners).length === 0 && (this.detachListener(), this.stopPolling());
    }
    async _set(e, t) {
      await super._set(e, t), this.localCache[e] = JSON.stringify(t);
    }
    async _get(e) {
      const t = await super._get(e);
      return this.localCache[e] = JSON.stringify(t), t;
    }
    async _remove(e) {
      await super._remove(e), delete this.localCache[e];
    }
  }
  o2.type = "LOCAL";
  const Q5 = o2;
  class a2 extends i2 {
    constructor() {
      super(() => window.sessionStorage, "SESSION");
    }
    _addListener(e, t) {
    }
    _removeListener(e, t) {
    }
  }
  a2.type = "SESSION";
  const l2 = a2;
  function Y5(n) {
    return Promise.all(n.map(async (e) => {
      try {
        return {
          fulfilled: true,
          value: await e
        };
      } catch (t) {
        return {
          fulfilled: false,
          reason: t
        };
      }
    }));
  }
  class hm {
    constructor(e) {
      this.eventTarget = e, this.handlersMap = {}, this.boundEventHandler = this.handleEvent.bind(this);
    }
    static _getInstance(e) {
      const t = this.receivers.find((i) => i.isListeningto(e));
      if (t) return t;
      const r = new hm(e);
      return this.receivers.push(r), r;
    }
    isListeningto(e) {
      return this.eventTarget === e;
    }
    async handleEvent(e) {
      const t = e, { eventId: r, eventType: i, data: l } = t.data, c = this.handlersMap[i];
      if (!(c == null ? void 0 : c.size)) return;
      t.ports[0].postMessage({
        status: "ack",
        eventId: r,
        eventType: i
      });
      const f = Array.from(c).map(async (y) => y(t.origin, l)), m = await Y5(f);
      t.ports[0].postMessage({
        status: "done",
        eventId: r,
        eventType: i,
        response: m
      });
    }
    _subscribe(e, t) {
      Object.keys(this.handlersMap).length === 0 && this.eventTarget.addEventListener("message", this.boundEventHandler), this.handlersMap[e] || (this.handlersMap[e] = /* @__PURE__ */ new Set()), this.handlersMap[e].add(t);
    }
    _unsubscribe(e, t) {
      this.handlersMap[e] && t && this.handlersMap[e].delete(t), (!t || this.handlersMap[e].size === 0) && delete this.handlersMap[e], Object.keys(this.handlersMap).length === 0 && this.eventTarget.removeEventListener("message", this.boundEventHandler);
    }
  }
  hm.receivers = [];
  function Zy(n = "", e = 10) {
    let t = "";
    for (let r = 0; r < e; r++) t += Math.floor(Math.random() * 10);
    return n + t;
  }
  class X5 {
    constructor(e) {
      this.target = e, this.handlers = /* @__PURE__ */ new Set();
    }
    removeMessageHandler(e) {
      e.messageChannel && (e.messageChannel.port1.removeEventListener("message", e.onMessage), e.messageChannel.port1.close()), this.handlers.delete(e);
    }
    async _send(e, t, r = 50) {
      const i = typeof MessageChannel < "u" ? new MessageChannel() : null;
      if (!i) throw new Error("connection_unavailable");
      let l, c;
      return new Promise((f, m) => {
        const y = Zy("", 20);
        i.port1.start();
        const x = setTimeout(() => {
          m(new Error("unsupported_event"));
        }, r);
        c = {
          messageChannel: i,
          onMessage(C) {
            const S = C;
            if (S.data.eventId === y) switch (S.data.status) {
              case "ack":
                clearTimeout(x), l = setTimeout(() => {
                  m(new Error("timeout"));
                }, 3e3);
                break;
              case "done":
                clearTimeout(l), f(S.data.response);
                break;
              default:
                clearTimeout(x), clearTimeout(l), m(new Error("invalid_response"));
                break;
            }
          }
        }, this.handlers.add(c), i.port1.addEventListener("message", c.onMessage), this.target.postMessage({
          eventType: e,
          eventId: y,
          data: t
        }, [
          i.port2
        ]);
      }).finally(() => {
        c && this.removeMessageHandler(c);
      });
    }
  }
  function $i() {
    return window;
  }
  function J5(n) {
    $i().location.href = n;
  }
  function c2() {
    return typeof $i().WorkerGlobalScope < "u" && typeof $i().importScripts == "function";
  }
  async function Z5() {
    if (!(navigator == null ? void 0 : navigator.serviceWorker)) return null;
    try {
      return (await navigator.serviceWorker.ready).active;
    } catch {
      return null;
    }
  }
  function e3() {
    var n;
    return ((n = navigator == null ? void 0 : navigator.serviceWorker) === null || n === void 0 ? void 0 : n.controller) || null;
  }
  function t3() {
    return c2() ? self : null;
  }
  const u2 = "firebaseLocalStorageDb", n3 = 1, Fg = "firebaseLocalStorage", d2 = "fbase_key";
  class Ff {
    constructor(e) {
      this.request = e;
    }
    toPromise() {
      return new Promise((e, t) => {
        this.request.addEventListener("success", () => {
          e(this.request.result);
        }), this.request.addEventListener("error", () => {
          t(this.request.error);
        });
      });
    }
  }
  function pm(n, e) {
    return n.transaction([
      Fg
    ], e ? "readwrite" : "readonly").objectStore(Fg);
  }
  function r3() {
    const n = indexedDB.deleteDatabase(u2);
    return new Ff(n).toPromise();
  }
  function Jv() {
    const n = indexedDB.open(u2, n3);
    return new Promise((e, t) => {
      n.addEventListener("error", () => {
        t(n.error);
      }), n.addEventListener("upgradeneeded", () => {
        const r = n.result;
        try {
          r.createObjectStore(Fg, {
            keyPath: d2
          });
        } catch (i) {
          t(i);
        }
      }), n.addEventListener("success", async () => {
        const r = n.result;
        r.objectStoreNames.contains(Fg) ? e(r) : (r.close(), await r3(), e(await Jv()));
      });
    });
  }
  async function ex(n, e, t) {
    const r = pm(n, true).put({
      [d2]: e,
      value: t
    });
    return new Ff(r).toPromise();
  }
  async function s3(n, e) {
    const t = pm(n, false).get(e), r = await new Ff(t).toPromise();
    return r === void 0 ? null : r.value;
  }
  function tx(n, e) {
    const t = pm(n, true).delete(e);
    return new Ff(t).toPromise();
  }
  const i3 = 800, o3 = 3;
  class f2 {
    constructor() {
      this.type = "LOCAL", this._shouldAllowMigration = true, this.listeners = {}, this.localCache = {}, this.pollTimer = null, this.pendingWrites = 0, this.receiver = null, this.sender = null, this.serviceWorkerReceiverAvailable = false, this.activeServiceWorker = null, this._workerInitializationPromise = this.initializeServiceWorkerMessaging().then(() => {
      }, () => {
      });
    }
    async _openDb() {
      return this.db ? this.db : (this.db = await Jv(), this.db);
    }
    async _withRetries(e) {
      let t = 0;
      for (; ; ) try {
        const r = await this._openDb();
        return await e(r);
      } catch (r) {
        if (t++ > o3) throw r;
        this.db && (this.db.close(), this.db = void 0);
      }
    }
    async initializeServiceWorkerMessaging() {
      return c2() ? this.initializeReceiver() : this.initializeSender();
    }
    async initializeReceiver() {
      this.receiver = hm._getInstance(t3()), this.receiver._subscribe("keyChanged", async (e, t) => ({
        keyProcessed: (await this._poll()).includes(t.key)
      })), this.receiver._subscribe("ping", async (e, t) => [
        "keyChanged"
      ]);
    }
    async initializeSender() {
      var e, t;
      if (this.activeServiceWorker = await Z5(), !this.activeServiceWorker) return;
      this.sender = new X5(this.activeServiceWorker);
      const r = await this.sender._send("ping", {}, 800);
      r && !((e = r[0]) === null || e === void 0) && e.fulfilled && !((t = r[0]) === null || t === void 0) && t.value.includes("keyChanged") && (this.serviceWorkerReceiverAvailable = true);
    }
    async notifyServiceWorker(e) {
      if (!(!this.sender || !this.activeServiceWorker || e3() !== this.activeServiceWorker)) try {
        await this.sender._send("keyChanged", {
          key: e
        }, this.serviceWorkerReceiverAvailable ? 800 : 50);
      } catch {
      }
    }
    async _isAvailable() {
      try {
        if (!indexedDB) return false;
        const e = await Jv();
        return await ex(e, Vg, "1"), await tx(e, Vg), true;
      } catch {
      }
      return false;
    }
    async _withPendingWrite(e) {
      this.pendingWrites++;
      try {
        await e();
      } finally {
        this.pendingWrites--;
      }
    }
    async _set(e, t) {
      return this._withPendingWrite(async () => (await this._withRetries((r) => ex(r, e, t)), this.localCache[e] = t, this.notifyServiceWorker(e)));
    }
    async _get(e) {
      const t = await this._withRetries((r) => s3(r, e));
      return this.localCache[e] = t, t;
    }
    async _remove(e) {
      return this._withPendingWrite(async () => (await this._withRetries((t) => tx(t, e)), delete this.localCache[e], this.notifyServiceWorker(e)));
    }
    async _poll() {
      const e = await this._withRetries((i) => {
        const l = pm(i, false).getAll();
        return new Ff(l).toPromise();
      });
      if (!e) return [];
      if (this.pendingWrites !== 0) return [];
      const t = [], r = /* @__PURE__ */ new Set();
      if (e.length !== 0) for (const { fbase_key: i, value: l } of e) r.add(i), JSON.stringify(this.localCache[i]) !== JSON.stringify(l) && (this.notifyListeners(i, l), t.push(i));
      for (const i of Object.keys(this.localCache)) this.localCache[i] && !r.has(i) && (this.notifyListeners(i, null), t.push(i));
      return t;
    }
    notifyListeners(e, t) {
      this.localCache[e] = t;
      const r = this.listeners[e];
      if (r) for (const i of Array.from(r)) i(t);
    }
    startPolling() {
      this.stopPolling(), this.pollTimer = setInterval(async () => this._poll(), i3);
    }
    stopPolling() {
      this.pollTimer && (clearInterval(this.pollTimer), this.pollTimer = null);
    }
    _addListener(e, t) {
      Object.keys(this.listeners).length === 0 && this.startPolling(), this.listeners[e] || (this.listeners[e] = /* @__PURE__ */ new Set(), this._get(e)), this.listeners[e].add(t);
    }
    _removeListener(e, t) {
      this.listeners[e] && (this.listeners[e].delete(t), this.listeners[e].size === 0 && delete this.listeners[e]), Object.keys(this.listeners).length === 0 && this.stopPolling();
    }
  }
  f2.type = "LOCAL";
  const a3 = f2;
  new Mf(3e4, 6e4);
  function h2(n, e) {
    return e ? xo(e) : (rt(n._popupRedirectResolver, n, "argument-error"), n._popupRedirectResolver);
  }
  class e1 extends Yy {
    constructor(e) {
      super("custom", "custom"), this.params = e;
    }
    _getIdTokenResponse(e) {
      return du(e, this._buildIdpRequest());
    }
    _linkToIdToken(e, t) {
      return du(e, this._buildIdpRequest(t));
    }
    _getReauthenticationResolver(e) {
      return du(e, this._buildIdpRequest());
    }
    _buildIdpRequest(e) {
      const t = {
        requestUri: this.params.requestUri,
        sessionId: this.params.sessionId,
        postBody: this.params.postBody,
        tenantId: this.params.tenantId,
        pendingToken: this.params.pendingToken,
        returnSecureToken: true,
        returnIdpCredential: true
      };
      return e && (t.idToken = e), t;
    }
  }
  function l3(n) {
    return r2(n.auth, new e1(n), n.bypassAuthState);
  }
  function c3(n) {
    const { auth: e, user: t } = n;
    return rt(t, e, "internal-error"), F5(t, new e1(n), n.bypassAuthState);
  }
  async function u3(n) {
    const { auth: e, user: t } = n;
    return rt(t, e, "internal-error"), V5(t, new e1(n), n.bypassAuthState);
  }
  class p2 {
    constructor(e, t, r, i, l = false) {
      this.auth = e, this.resolver = r, this.user = i, this.bypassAuthState = l, this.pendingPromise = null, this.eventManager = null, this.filter = Array.isArray(t) ? t : [
        t
      ];
    }
    execute() {
      return new Promise(async (e, t) => {
        this.pendingPromise = {
          resolve: e,
          reject: t
        };
        try {
          this.eventManager = await this.resolver._initialize(this.auth), await this.onExecution(), this.eventManager.registerConsumer(this);
        } catch (r) {
          this.reject(r);
        }
      });
    }
    async onAuthEvent(e) {
      const { urlResponse: t, sessionId: r, postBody: i, tenantId: l, error: c, type: f } = e;
      if (c) {
        this.reject(c);
        return;
      }
      const m = {
        auth: this.auth,
        requestUri: t,
        sessionId: r,
        tenantId: l || void 0,
        postBody: i || void 0,
        user: this.user,
        bypassAuthState: this.bypassAuthState
      };
      try {
        this.resolve(await this.getIdpTask(f)(m));
      } catch (y) {
        this.reject(y);
      }
    }
    onError(e) {
      this.reject(e);
    }
    getIdpTask(e) {
      switch (e) {
        case "signInViaPopup":
        case "signInViaRedirect":
          return l3;
        case "linkViaPopup":
        case "linkViaRedirect":
          return u3;
        case "reauthViaPopup":
        case "reauthViaRedirect":
          return c3;
        default:
          Ps(this.auth, "internal-error");
      }
    }
    resolve(e) {
      Io(this.pendingPromise, "Pending promise was never set"), this.pendingPromise.resolve(e), this.unregisterAndCleanUp();
    }
    reject(e) {
      Io(this.pendingPromise, "Pending promise was never set"), this.pendingPromise.reject(e), this.unregisterAndCleanUp();
    }
    unregisterAndCleanUp() {
      this.eventManager && this.eventManager.unregisterConsumer(this), this.pendingPromise = null, this.cleanUp();
    }
  }
  const d3 = new Mf(2e3, 1e4);
  async function g2(n, e, t) {
    if (ds(n.app)) return Promise.reject(si(n, "operation-not-supported-in-this-environment"));
    const r = Oa(n);
    WP(n, e, Jy);
    const i = h2(r, t);
    return new Pl(r, "signInViaPopup", e, i).executeNotNull();
  }
  class Pl extends p2 {
    constructor(e, t, r, i, l) {
      super(e, t, i, l), this.provider = r, this.authWindow = null, this.pollId = null, Pl.currentPopupAction && Pl.currentPopupAction.cancel(), Pl.currentPopupAction = this;
    }
    async executeNotNull() {
      const e = await this.execute();
      return rt(e, this.auth, "internal-error"), e;
    }
    async onExecution() {
      Io(this.filter.length === 1, "Popup operations only handle one event");
      const e = Zy();
      this.authWindow = await this.resolver._openPopup(this.auth, this.provider, this.filter[0], e), this.authWindow.associatedEvent = e, this.resolver._originValidation(this.auth).catch((t) => {
        this.reject(t);
      }), this.resolver._isIframeWebStorageSupported(this.auth, (t) => {
        t || this.reject(si(this.auth, "web-storage-unsupported"));
      }), this.pollUserCancellation();
    }
    get eventId() {
      var e;
      return ((e = this.authWindow) === null || e === void 0 ? void 0 : e.associatedEvent) || null;
    }
    cancel() {
      this.reject(si(this.auth, "cancelled-popup-request"));
    }
    cleanUp() {
      this.authWindow && this.authWindow.close(), this.pollId && window.clearTimeout(this.pollId), this.authWindow = null, this.pollId = null, Pl.currentPopupAction = null;
    }
    pollUserCancellation() {
      const e = () => {
        var t, r;
        if (!((r = (t = this.authWindow) === null || t === void 0 ? void 0 : t.window) === null || r === void 0) && r.closed) {
          this.pollId = window.setTimeout(() => {
            this.pollId = null, this.reject(si(this.auth, "popup-closed-by-user"));
          }, 8e3);
          return;
        }
        this.pollId = window.setTimeout(e, d3.get());
      };
      e();
    }
  }
  Pl.currentPopupAction = null;
  const f3 = "pendingRedirect", _g = /* @__PURE__ */ new Map();
  class h3 extends p2 {
    constructor(e, t, r = false) {
      super(e, [
        "signInViaRedirect",
        "linkViaRedirect",
        "reauthViaRedirect",
        "unknown"
      ], t, void 0, r), this.eventId = null;
    }
    async execute() {
      let e = _g.get(this.auth._key());
      if (!e) {
        try {
          const r = await p3(this.resolver, this.auth) ? await super.execute() : null;
          e = () => Promise.resolve(r);
        } catch (t) {
          e = () => Promise.reject(t);
        }
        _g.set(this.auth._key(), e);
      }
      return this.bypassAuthState || _g.set(this.auth._key(), () => Promise.resolve(null)), e();
    }
    async onAuthEvent(e) {
      if (e.type === "signInViaRedirect") return super.onAuthEvent(e);
      if (e.type === "unknown") {
        this.resolve(null);
        return;
      }
      if (e.eventId) {
        const t = await this.auth._redirectUserForId(e.eventId);
        if (t) return this.user = t, super.onAuthEvent(e);
        this.resolve(null);
      }
    }
    async onExecution() {
    }
    cleanUp() {
    }
  }
  async function p3(n, e) {
    const t = v3(e), r = m3(n);
    if (!await r._isAvailable()) return false;
    const i = await r._get(t) === "true";
    return await r._remove(t), i;
  }
  function g3(n, e) {
    _g.set(n._key(), e);
  }
  function m3(n) {
    return xo(n._redirectPersistence);
  }
  function v3(n) {
    return wg(f3, n.config.apiKey, n.name);
  }
  async function y3(n, e, t = false) {
    if (ds(n.app)) return Promise.reject(bo(n));
    const r = Oa(n), i = h2(r, e), c = await new h3(r, i, t).execute();
    return c && !t && (delete c.user._redirectEventId, await r._persistUserIfCurrent(c.user), await r._setRedirectUser(null, e)), c;
  }
  const w3 = 10 * 60 * 1e3;
  class _3 {
    constructor(e) {
      this.auth = e, this.cachedEventUids = /* @__PURE__ */ new Set(), this.consumers = /* @__PURE__ */ new Set(), this.queuedRedirectEvent = null, this.hasHandledPotentialRedirect = false, this.lastProcessedEventTime = Date.now();
    }
    registerConsumer(e) {
      this.consumers.add(e), this.queuedRedirectEvent && this.isEventForConsumer(this.queuedRedirectEvent, e) && (this.sendToConsumer(this.queuedRedirectEvent, e), this.saveEventToCache(this.queuedRedirectEvent), this.queuedRedirectEvent = null);
    }
    unregisterConsumer(e) {
      this.consumers.delete(e);
    }
    onEvent(e) {
      if (this.hasEventBeenHandled(e)) return false;
      let t = false;
      return this.consumers.forEach((r) => {
        this.isEventForConsumer(e, r) && (t = true, this.sendToConsumer(e, r), this.saveEventToCache(e));
      }), this.hasHandledPotentialRedirect || !x3(e) || (this.hasHandledPotentialRedirect = true, t || (this.queuedRedirectEvent = e, t = true)), t;
    }
    sendToConsumer(e, t) {
      var r;
      if (e.error && !m2(e)) {
        const i = ((r = e.error.code) === null || r === void 0 ? void 0 : r.split("auth/")[1]) || "internal-error";
        t.onError(si(this.auth, i));
      } else t.onAuthEvent(e);
    }
    isEventForConsumer(e, t) {
      const r = t.eventId === null || !!e.eventId && e.eventId === t.eventId;
      return t.filter.includes(e.type) && r;
    }
    hasEventBeenHandled(e) {
      return Date.now() - this.lastProcessedEventTime >= w3 && this.cachedEventUids.clear(), this.cachedEventUids.has(nx(e));
    }
    saveEventToCache(e) {
      this.cachedEventUids.add(nx(e)), this.lastProcessedEventTime = Date.now();
    }
  }
  function nx(n) {
    return [
      n.type,
      n.eventId,
      n.sessionId,
      n.tenantId
    ].filter((e) => e).join("-");
  }
  function m2({ type: n, error: e }) {
    return n === "unknown" && (e == null ? void 0 : e.code) === "auth/no-auth-event";
  }
  function x3(n) {
    switch (n.type) {
      case "signInViaRedirect":
      case "linkViaRedirect":
      case "reauthViaRedirect":
        return true;
      case "unknown":
        return m2(n);
      default:
        return false;
    }
  }
  async function E3(n, e = {}) {
    return Po(n, "GET", "/v1/projects", e);
  }
  const b3 = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/, T3 = /^https?/;
  async function C3(n) {
    if (n.config.emulator) return;
    const { authorizedDomains: e } = await E3(n);
    for (const t of e) try {
      if (S3(t)) return;
    } catch {
    }
    Ps(n, "unauthorized-domain");
  }
  function S3(n) {
    const e = Gv(), { protocol: t, hostname: r } = new URL(e);
    if (n.startsWith("chrome-extension://")) {
      const c = new URL(n);
      return c.hostname === "" && r === "" ? t === "chrome-extension:" && n.replace("chrome-extension://", "") === e.replace("chrome-extension://", "") : t === "chrome-extension:" && c.hostname === r;
    }
    if (!T3.test(t)) return false;
    if (b3.test(n)) return r === n;
    const i = n.replace(/\./g, "\\.");
    return new RegExp("^(.+\\." + i + "|" + i + ")$", "i").test(r);
  }
  const I3 = new Mf(3e4, 6e4);
  function rx() {
    const n = $i().___jsl;
    if (n == null ? void 0 : n.H) {
      for (const e of Object.keys(n.H)) if (n.H[e].r = n.H[e].r || [], n.H[e].L = n.H[e].L || [], n.H[e].r = [
        ...n.H[e].L
      ], n.CP) for (let t = 0; t < n.CP.length; t++) n.CP[t] = null;
    }
  }
  function k3(n) {
    return new Promise((e, t) => {
      var r, i, l;
      function c() {
        rx(), gapi.load("gapi.iframes", {
          callback: () => {
            e(gapi.iframes.getContext());
          },
          ontimeout: () => {
            rx(), t(si(n, "network-request-failed"));
          },
          timeout: I3.get()
        });
      }
      if (!((i = (r = $i().gapi) === null || r === void 0 ? void 0 : r.iframes) === null || i === void 0) && i.Iframe) e(gapi.iframes.getContext());
      else if (!((l = $i().gapi) === null || l === void 0) && l.load) c();
      else {
        const f = w5("iframefcb");
        return $i()[f] = () => {
          gapi.load ? c() : t(si(n, "network-request-failed"));
        }, Zb(`${y5()}?onload=${f}`).catch((m) => t(m));
      }
    }).catch((e) => {
      throw xg = null, e;
    });
  }
  let xg = null;
  function A3(n) {
    return xg = xg || k3(n), xg;
  }
  const R3 = new Mf(5e3, 15e3), N3 = "__/auth/iframe", P3 = "emulator/auth/iframe", D3 = {
    style: {
      position: "absolute",
      top: "-100px",
      width: "1px",
      height: "1px"
    },
    "aria-hidden": "true",
    tabindex: "-1"
  }, j3 = /* @__PURE__ */ new Map([
    [
      "identitytoolkit.googleapis.com",
      "p"
    ],
    [
      "staging-identitytoolkit.sandbox.googleapis.com",
      "s"
    ],
    [
      "test-identitytoolkit.sandbox.googleapis.com",
      "t"
    ]
  ]);
  function O3(n) {
    const e = n.config;
    rt(e.authDomain, n, "auth-domain-config-required");
    const t = e.emulator ? Ky(e, P3) : `https://${n.config.authDomain}/${N3}`, r = {
      apiKey: e.apiKey,
      appName: n.name,
      v: Su
    }, i = j3.get(n.config.apiHost);
    i && (r.eid = i);
    const l = n._getFrameworks();
    return l.length && (r.fw = l.join(",")), `${t}?${Lf(r).slice(1)}`;
  }
  async function L3(n) {
    const e = await A3(n), t = $i().gapi;
    return rt(t, n, "internal-error"), e.open({
      where: document.body,
      url: O3(n),
      messageHandlersFilter: t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,
      attributes: D3,
      dontclear: true
    }, (r) => new Promise(async (i, l) => {
      await r.restyle({
        setHideOnLeave: false
      });
      const c = si(n, "network-request-failed"), f = $i().setTimeout(() => {
        l(c);
      }, R3.get());
      function m() {
        $i().clearTimeout(f), i(r);
      }
      r.ping(m).then(m, () => {
        l(c);
      });
    }));
  }
  const M3 = {
    location: "yes",
    resizable: "yes",
    statusbar: "yes",
    toolbar: "no"
  }, $3 = 500, V3 = 600, F3 = "_blank", z3 = "http://localhost";
  class sx {
    constructor(e) {
      this.window = e, this.associatedEvent = null;
    }
    close() {
      if (this.window) try {
        this.window.close();
      } catch {
      }
    }
  }
  function U3(n, e, t, r = $3, i = V3) {
    const l = Math.max((window.screen.availHeight - i) / 2, 0).toString(), c = Math.max((window.screen.availWidth - r) / 2, 0).toString();
    let f = "";
    const m = Object.assign(Object.assign({}, M3), {
      width: r.toString(),
      height: i.toString(),
      top: l,
      left: c
    }), y = gr().toLowerCase();
    t && (f = qb(y) ? F3 : t), Wb(y) && (e = e || z3, m.scrollbars = "yes");
    const x = Object.entries(m).reduce((S, [N, P]) => `${S}${N}=${P},`, "");
    if (c5(y) && f !== "_self") return B3(e || "", f), new sx(null);
    const C = window.open(e || "", f, x);
    rt(C, n, "popup-blocked");
    try {
      C.focus();
    } catch {
    }
    return new sx(C);
  }
  function B3(n, e) {
    const t = document.createElement("a");
    t.href = n, t.target = e;
    const r = document.createEvent("MouseEvent");
    r.initMouseEvent("click", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 1, null), t.dispatchEvent(r);
  }
  const W3 = "__/auth/handler", H3 = "emulator/auth/handler", q3 = encodeURIComponent("fac");
  async function ix(n, e, t, r, i, l) {
    rt(n.config.authDomain, n, "auth-domain-config-required"), rt(n.config.apiKey, n, "invalid-api-key");
    const c = {
      apiKey: n.config.apiKey,
      appName: n.name,
      authType: t,
      redirectUrl: r,
      v: Su,
      eventId: i
    };
    if (e instanceof Jy) {
      e.setDefaultLanguage(n.languageCode), c.providerId = e.providerId || "", I4(e.getCustomParameters()) || (c.customParameters = JSON.stringify(e.getCustomParameters()));
      for (const [x, C] of Object.entries({})) c[x] = C;
    }
    if (e instanceof Vf) {
      const x = e.getScopes().filter((C) => C !== "");
      x.length > 0 && (c.scopes = x.join(","));
    }
    n.tenantId && (c.tid = n.tenantId);
    const f = c;
    for (const x of Object.keys(f)) f[x] === void 0 && delete f[x];
    const m = await n._getAppCheckToken(), y = m ? `#${q3}=${encodeURIComponent(m)}` : "";
    return `${K3(n)}?${Lf(f).slice(1)}${y}`;
  }
  function K3({ config: n }) {
    return n.emulator ? Ky(n, H3) : `https://${n.authDomain}/${W3}`;
  }
  const mv = "webStorageSupport";
  class G3 {
    constructor() {
      this.eventManagers = {}, this.iframes = {}, this.originValidationPromises = {}, this._redirectPersistence = l2, this._completeRedirectFn = y3, this._overrideRedirectResult = g3;
    }
    async _openPopup(e, t, r, i) {
      var l;
      Io((l = this.eventManagers[e._key()]) === null || l === void 0 ? void 0 : l.manager, "_initialize() not called before _openPopup()");
      const c = await ix(e, t, r, Gv(), i);
      return U3(e, c, Zy());
    }
    async _openRedirect(e, t, r, i) {
      await this._originValidation(e);
      const l = await ix(e, t, r, Gv(), i);
      return J5(l), new Promise(() => {
      });
    }
    _initialize(e) {
      const t = e._key();
      if (this.eventManagers[t]) {
        const { manager: i, promise: l } = this.eventManagers[t];
        return i ? Promise.resolve(i) : (Io(l, "If manager is not set, promise should be"), l);
      }
      const r = this.initAndGetManager(e);
      return this.eventManagers[t] = {
        promise: r
      }, r.catch(() => {
        delete this.eventManagers[t];
      }), r;
    }
    async initAndGetManager(e) {
      const t = await L3(e), r = new _3(e);
      return t.register("authEvent", (i) => (rt(i == null ? void 0 : i.authEvent, e, "invalid-auth-event"), {
        status: r.onEvent(i.authEvent) ? "ACK" : "ERROR"
      }), gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER), this.eventManagers[e._key()] = {
        manager: r
      }, this.iframes[e._key()] = t, r;
    }
    _isIframeWebStorageSupported(e, t) {
      this.iframes[e._key()].send(mv, {
        type: mv
      }, (i) => {
        var l;
        const c = (l = i == null ? void 0 : i[0]) === null || l === void 0 ? void 0 : l[mv];
        c !== void 0 && t(!!c), Ps(e, "internal-error");
      }, gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER);
    }
    _originValidation(e) {
      const t = e._key();
      return this.originValidationPromises[t] || (this.originValidationPromises[t] = C3(e)), this.originValidationPromises[t];
    }
    get _shouldInitProactively() {
      return Xb() || Hb() || Qy();
    }
  }
  const Q3 = G3;
  var ox = "@firebase/auth", ax = "1.10.0";
  class Y3 {
    constructor(e) {
      this.auth = e, this.internalListeners = /* @__PURE__ */ new Map();
    }
    getUid() {
      var e;
      return this.assertAuthConfigured(), ((e = this.auth.currentUser) === null || e === void 0 ? void 0 : e.uid) || null;
    }
    async getToken(e) {
      return this.assertAuthConfigured(), await this.auth._initializationPromise, this.auth.currentUser ? {
        accessToken: await this.auth.currentUser.getIdToken(e)
      } : null;
    }
    addAuthTokenListener(e) {
      if (this.assertAuthConfigured(), this.internalListeners.has(e)) return;
      const t = this.auth.onIdTokenChanged((r) => {
        e((r == null ? void 0 : r.stsTokenManager.accessToken) || null);
      });
      this.internalListeners.set(e, t), this.updateProactiveRefresh();
    }
    removeAuthTokenListener(e) {
      this.assertAuthConfigured();
      const t = this.internalListeners.get(e);
      t && (this.internalListeners.delete(e), t(), this.updateProactiveRefresh());
    }
    assertAuthConfigured() {
      rt(this.auth._initializationPromise, "dependent-sdk-initialized-before-auth");
    }
    updateProactiveRefresh() {
      this.internalListeners.size > 0 ? this.auth._startProactiveRefresh() : this.auth._stopProactiveRefresh();
    }
  }
  function X3(n) {
    switch (n) {
      case "Node":
        return "node";
      case "ReactNative":
        return "rn";
      case "Worker":
        return "webworker";
      case "Cordova":
        return "cordova";
      case "WebExtension":
        return "web-extension";
      default:
        return;
    }
  }
  function J3(n) {
    zi(new ai("auth", (e, { options: t }) => {
      const r = e.getProvider("app").getImmediate(), i = e.getProvider("heartbeat"), l = e.getProvider("app-check-internal"), { apiKey: c, authDomain: f } = r.options;
      rt(c && !c.includes(":"), "invalid-api-key", {
        appName: r.name
      });
      const m = {
        apiKey: c,
        authDomain: f,
        clientPlatform: n,
        apiHost: "identitytoolkit.googleapis.com",
        tokenApiHost: "securetoken.googleapis.com",
        apiScheme: "https",
        sdkClientVersion: Jb(n)
      }, y = new g5(r, i, l, m);
      return C5(y, t), y;
    }, "PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e, t, r) => {
      e.getProvider("auth-internal").initialize();
    })), zi(new ai("auth-internal", (e) => {
      const t = Oa(e.getProvider("auth").getImmediate());
      return ((r) => new Y3(r))(t);
    }, "PRIVATE").setInstantiationMode("EXPLICIT")), Ns(ox, ax, X3(n)), Ns(ox, ax, "esm2017");
  }
  const Z3 = 5 * 60, eD = Ib("authIdTokenMaxAge") || Z3;
  let lx = null;
  const tD = (n) => async (e) => {
    const t = e && await e.getIdTokenResult(), r = t && ((/* @__PURE__ */ new Date()).getTime() - Date.parse(t.issuedAtTime)) / 1e3;
    if (r && r > eD) return;
    const i = t == null ? void 0 : t.token;
    lx !== i && (lx = i, await fetch(n, {
      method: i ? "POST" : "DELETE",
      headers: i ? {
        Authorization: `Bearer ${i}`
      } : {}
    }));
  };
  function nD(n = By()) {
    const e = Hl(n, "auth");
    if (e.isInitialized()) return e.getImmediate();
    const t = T5(n, {
      popupRedirectResolver: Q3,
      persistence: [
        a3,
        Q5,
        l2
      ]
    }), r = Ib("authTokenSyncURL");
    if (r && typeof isSecureContext == "boolean" && isSecureContext) {
      const l = new URL(r, location.origin);
      if (location.origin === l.origin) {
        const c = tD(l.toString());
        H5(t, c, () => c(t.currentUser)), W5(t, (f) => c(f));
      }
    }
    const i = Cb("auth");
    return i && S5(t, `http://${i}`), t;
  }
  function rD() {
    var n, e;
    return (e = (n = document.getElementsByTagName("head")) === null || n === void 0 ? void 0 : n[0]) !== null && e !== void 0 ? e : document;
  }
  m5({
    loadJS(n) {
      return new Promise((e, t) => {
        const r = document.createElement("script");
        r.setAttribute("src", n), r.onload = e, r.onerror = (i) => {
          const l = si("internal-error");
          l.customData = i, t(l);
        }, r.type = "text/javascript", r.charset = "UTF-8", rD().appendChild(r);
      });
    },
    gapiScript: "https://apis.google.com/js/api.js",
    recaptchaV2Script: "https://www.google.com/recaptcha/api.js",
    recaptchaEnterpriseScript: "https://www.google.com/recaptcha/enterprise.js?render="
  });
  J3("Browser");
  var cx = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
  var Ca, v2;
  (function() {
    var n;
    function e(j, M) {
      function V() {
      }
      V.prototype = M.prototype, j.D = M.prototype, j.prototype = new V(), j.prototype.constructor = j, j.C = function(B, q, G) {
        for (var F = Array(arguments.length - 2), Oe = 2; Oe < arguments.length; Oe++) F[Oe - 2] = arguments[Oe];
        return M.prototype[q].apply(B, F);
      };
    }
    function t() {
      this.blockSize = -1;
    }
    function r() {
      this.blockSize = -1, this.blockSize = 64, this.g = Array(4), this.B = Array(this.blockSize), this.o = this.h = 0, this.s();
    }
    e(r, t), r.prototype.s = function() {
      this.g[0] = 1732584193, this.g[1] = 4023233417, this.g[2] = 2562383102, this.g[3] = 271733878, this.o = this.h = 0;
    };
    function i(j, M, V) {
      V || (V = 0);
      var B = Array(16);
      if (typeof M == "string") for (var q = 0; 16 > q; ++q) B[q] = M.charCodeAt(V++) | M.charCodeAt(V++) << 8 | M.charCodeAt(V++) << 16 | M.charCodeAt(V++) << 24;
      else for (q = 0; 16 > q; ++q) B[q] = M[V++] | M[V++] << 8 | M[V++] << 16 | M[V++] << 24;
      M = j.g[0], V = j.g[1], q = j.g[2];
      var G = j.g[3], F = M + (G ^ V & (q ^ G)) + B[0] + 3614090360 & 4294967295;
      M = V + (F << 7 & 4294967295 | F >>> 25), F = G + (q ^ M & (V ^ q)) + B[1] + 3905402710 & 4294967295, G = M + (F << 12 & 4294967295 | F >>> 20), F = q + (V ^ G & (M ^ V)) + B[2] + 606105819 & 4294967295, q = G + (F << 17 & 4294967295 | F >>> 15), F = V + (M ^ q & (G ^ M)) + B[3] + 3250441966 & 4294967295, V = q + (F << 22 & 4294967295 | F >>> 10), F = M + (G ^ V & (q ^ G)) + B[4] + 4118548399 & 4294967295, M = V + (F << 7 & 4294967295 | F >>> 25), F = G + (q ^ M & (V ^ q)) + B[5] + 1200080426 & 4294967295, G = M + (F << 12 & 4294967295 | F >>> 20), F = q + (V ^ G & (M ^ V)) + B[6] + 2821735955 & 4294967295, q = G + (F << 17 & 4294967295 | F >>> 15), F = V + (M ^ q & (G ^ M)) + B[7] + 4249261313 & 4294967295, V = q + (F << 22 & 4294967295 | F >>> 10), F = M + (G ^ V & (q ^ G)) + B[8] + 1770035416 & 4294967295, M = V + (F << 7 & 4294967295 | F >>> 25), F = G + (q ^ M & (V ^ q)) + B[9] + 2336552879 & 4294967295, G = M + (F << 12 & 4294967295 | F >>> 20), F = q + (V ^ G & (M ^ V)) + B[10] + 4294925233 & 4294967295, q = G + (F << 17 & 4294967295 | F >>> 15), F = V + (M ^ q & (G ^ M)) + B[11] + 2304563134 & 4294967295, V = q + (F << 22 & 4294967295 | F >>> 10), F = M + (G ^ V & (q ^ G)) + B[12] + 1804603682 & 4294967295, M = V + (F << 7 & 4294967295 | F >>> 25), F = G + (q ^ M & (V ^ q)) + B[13] + 4254626195 & 4294967295, G = M + (F << 12 & 4294967295 | F >>> 20), F = q + (V ^ G & (M ^ V)) + B[14] + 2792965006 & 4294967295, q = G + (F << 17 & 4294967295 | F >>> 15), F = V + (M ^ q & (G ^ M)) + B[15] + 1236535329 & 4294967295, V = q + (F << 22 & 4294967295 | F >>> 10), F = M + (q ^ G & (V ^ q)) + B[1] + 4129170786 & 4294967295, M = V + (F << 5 & 4294967295 | F >>> 27), F = G + (V ^ q & (M ^ V)) + B[6] + 3225465664 & 4294967295, G = M + (F << 9 & 4294967295 | F >>> 23), F = q + (M ^ V & (G ^ M)) + B[11] + 643717713 & 4294967295, q = G + (F << 14 & 4294967295 | F >>> 18), F = V + (G ^ M & (q ^ G)) + B[0] + 3921069994 & 4294967295, V = q + (F << 20 & 4294967295 | F >>> 12), F = M + (q ^ G & (V ^ q)) + B[5] + 3593408605 & 4294967295, M = V + (F << 5 & 4294967295 | F >>> 27), F = G + (V ^ q & (M ^ V)) + B[10] + 38016083 & 4294967295, G = M + (F << 9 & 4294967295 | F >>> 23), F = q + (M ^ V & (G ^ M)) + B[15] + 3634488961 & 4294967295, q = G + (F << 14 & 4294967295 | F >>> 18), F = V + (G ^ M & (q ^ G)) + B[4] + 3889429448 & 4294967295, V = q + (F << 20 & 4294967295 | F >>> 12), F = M + (q ^ G & (V ^ q)) + B[9] + 568446438 & 4294967295, M = V + (F << 5 & 4294967295 | F >>> 27), F = G + (V ^ q & (M ^ V)) + B[14] + 3275163606 & 4294967295, G = M + (F << 9 & 4294967295 | F >>> 23), F = q + (M ^ V & (G ^ M)) + B[3] + 4107603335 & 4294967295, q = G + (F << 14 & 4294967295 | F >>> 18), F = V + (G ^ M & (q ^ G)) + B[8] + 1163531501 & 4294967295, V = q + (F << 20 & 4294967295 | F >>> 12), F = M + (q ^ G & (V ^ q)) + B[13] + 2850285829 & 4294967295, M = V + (F << 5 & 4294967295 | F >>> 27), F = G + (V ^ q & (M ^ V)) + B[2] + 4243563512 & 4294967295, G = M + (F << 9 & 4294967295 | F >>> 23), F = q + (M ^ V & (G ^ M)) + B[7] + 1735328473 & 4294967295, q = G + (F << 14 & 4294967295 | F >>> 18), F = V + (G ^ M & (q ^ G)) + B[12] + 2368359562 & 4294967295, V = q + (F << 20 & 4294967295 | F >>> 12), F = M + (V ^ q ^ G) + B[5] + 4294588738 & 4294967295, M = V + (F << 4 & 4294967295 | F >>> 28), F = G + (M ^ V ^ q) + B[8] + 2272392833 & 4294967295, G = M + (F << 11 & 4294967295 | F >>> 21), F = q + (G ^ M ^ V) + B[11] + 1839030562 & 4294967295, q = G + (F << 16 & 4294967295 | F >>> 16), F = V + (q ^ G ^ M) + B[14] + 4259657740 & 4294967295, V = q + (F << 23 & 4294967295 | F >>> 9), F = M + (V ^ q ^ G) + B[1] + 2763975236 & 4294967295, M = V + (F << 4 & 4294967295 | F >>> 28), F = G + (M ^ V ^ q) + B[4] + 1272893353 & 4294967295, G = M + (F << 11 & 4294967295 | F >>> 21), F = q + (G ^ M ^ V) + B[7] + 4139469664 & 4294967295, q = G + (F << 16 & 4294967295 | F >>> 16), F = V + (q ^ G ^ M) + B[10] + 3200236656 & 4294967295, V = q + (F << 23 & 4294967295 | F >>> 9), F = M + (V ^ q ^ G) + B[13] + 681279174 & 4294967295, M = V + (F << 4 & 4294967295 | F >>> 28), F = G + (M ^ V ^ q) + B[0] + 3936430074 & 4294967295, G = M + (F << 11 & 4294967295 | F >>> 21), F = q + (G ^ M ^ V) + B[3] + 3572445317 & 4294967295, q = G + (F << 16 & 4294967295 | F >>> 16), F = V + (q ^ G ^ M) + B[6] + 76029189 & 4294967295, V = q + (F << 23 & 4294967295 | F >>> 9), F = M + (V ^ q ^ G) + B[9] + 3654602809 & 4294967295, M = V + (F << 4 & 4294967295 | F >>> 28), F = G + (M ^ V ^ q) + B[12] + 3873151461 & 4294967295, G = M + (F << 11 & 4294967295 | F >>> 21), F = q + (G ^ M ^ V) + B[15] + 530742520 & 4294967295, q = G + (F << 16 & 4294967295 | F >>> 16), F = V + (q ^ G ^ M) + B[2] + 3299628645 & 4294967295, V = q + (F << 23 & 4294967295 | F >>> 9), F = M + (q ^ (V | ~G)) + B[0] + 4096336452 & 4294967295, M = V + (F << 6 & 4294967295 | F >>> 26), F = G + (V ^ (M | ~q)) + B[7] + 1126891415 & 4294967295, G = M + (F << 10 & 4294967295 | F >>> 22), F = q + (M ^ (G | ~V)) + B[14] + 2878612391 & 4294967295, q = G + (F << 15 & 4294967295 | F >>> 17), F = V + (G ^ (q | ~M)) + B[5] + 4237533241 & 4294967295, V = q + (F << 21 & 4294967295 | F >>> 11), F = M + (q ^ (V | ~G)) + B[12] + 1700485571 & 4294967295, M = V + (F << 6 & 4294967295 | F >>> 26), F = G + (V ^ (M | ~q)) + B[3] + 2399980690 & 4294967295, G = M + (F << 10 & 4294967295 | F >>> 22), F = q + (M ^ (G | ~V)) + B[10] + 4293915773 & 4294967295, q = G + (F << 15 & 4294967295 | F >>> 17), F = V + (G ^ (q | ~M)) + B[1] + 2240044497 & 4294967295, V = q + (F << 21 & 4294967295 | F >>> 11), F = M + (q ^ (V | ~G)) + B[8] + 1873313359 & 4294967295, M = V + (F << 6 & 4294967295 | F >>> 26), F = G + (V ^ (M | ~q)) + B[15] + 4264355552 & 4294967295, G = M + (F << 10 & 4294967295 | F >>> 22), F = q + (M ^ (G | ~V)) + B[6] + 2734768916 & 4294967295, q = G + (F << 15 & 4294967295 | F >>> 17), F = V + (G ^ (q | ~M)) + B[13] + 1309151649 & 4294967295, V = q + (F << 21 & 4294967295 | F >>> 11), F = M + (q ^ (V | ~G)) + B[4] + 4149444226 & 4294967295, M = V + (F << 6 & 4294967295 | F >>> 26), F = G + (V ^ (M | ~q)) + B[11] + 3174756917 & 4294967295, G = M + (F << 10 & 4294967295 | F >>> 22), F = q + (M ^ (G | ~V)) + B[2] + 718787259 & 4294967295, q = G + (F << 15 & 4294967295 | F >>> 17), F = V + (G ^ (q | ~M)) + B[9] + 3951481745 & 4294967295, j.g[0] = j.g[0] + M & 4294967295, j.g[1] = j.g[1] + (q + (F << 21 & 4294967295 | F >>> 11)) & 4294967295, j.g[2] = j.g[2] + q & 4294967295, j.g[3] = j.g[3] + G & 4294967295;
    }
    r.prototype.u = function(j, M) {
      M === void 0 && (M = j.length);
      for (var V = M - this.blockSize, B = this.B, q = this.h, G = 0; G < M; ) {
        if (q == 0) for (; G <= V; ) i(this, j, G), G += this.blockSize;
        if (typeof j == "string") {
          for (; G < M; ) if (B[q++] = j.charCodeAt(G++), q == this.blockSize) {
            i(this, B), q = 0;
            break;
          }
        } else for (; G < M; ) if (B[q++] = j[G++], q == this.blockSize) {
          i(this, B), q = 0;
          break;
        }
      }
      this.h = q, this.o += M;
    }, r.prototype.v = function() {
      var j = Array((56 > this.h ? this.blockSize : 2 * this.blockSize) - this.h);
      j[0] = 128;
      for (var M = 1; M < j.length - 8; ++M) j[M] = 0;
      var V = 8 * this.o;
      for (M = j.length - 8; M < j.length; ++M) j[M] = V & 255, V /= 256;
      for (this.u(j), j = Array(16), M = V = 0; 4 > M; ++M) for (var B = 0; 32 > B; B += 8) j[V++] = this.g[M] >>> B & 255;
      return j;
    };
    function l(j, M) {
      var V = f;
      return Object.prototype.hasOwnProperty.call(V, j) ? V[j] : V[j] = M(j);
    }
    function c(j, M) {
      this.h = M;
      for (var V = [], B = true, q = j.length - 1; 0 <= q; q--) {
        var G = j[q] | 0;
        B && G == M || (V[q] = G, B = false);
      }
      this.g = V;
    }
    var f = {};
    function m(j) {
      return -128 <= j && 128 > j ? l(j, function(M) {
        return new c([
          M | 0
        ], 0 > M ? -1 : 0);
      }) : new c([
        j | 0
      ], 0 > j ? -1 : 0);
    }
    function y(j) {
      if (isNaN(j) || !isFinite(j)) return C;
      if (0 > j) return L(y(-j));
      for (var M = [], V = 1, B = 0; j >= V; B++) M[B] = j / V | 0, V *= 4294967296;
      return new c(M, 0);
    }
    function x(j, M) {
      if (j.length == 0) throw Error("number format error: empty string");
      if (M = M || 10, 2 > M || 36 < M) throw Error("radix out of range: " + M);
      if (j.charAt(0) == "-") return L(x(j.substring(1), M));
      if (0 <= j.indexOf("-")) throw Error('number format error: interior "-" character');
      for (var V = y(Math.pow(M, 8)), B = C, q = 0; q < j.length; q += 8) {
        var G = Math.min(8, j.length - q), F = parseInt(j.substring(q, q + G), M);
        8 > G ? (G = y(Math.pow(M, G)), B = B.j(G).add(y(F))) : (B = B.j(V), B = B.add(y(F)));
      }
      return B;
    }
    var C = m(0), S = m(1), N = m(16777216);
    n = c.prototype, n.m = function() {
      if (O(this)) return -L(this).m();
      for (var j = 0, M = 1, V = 0; V < this.g.length; V++) {
        var B = this.i(V);
        j += (0 <= B ? B : 4294967296 + B) * M, M *= 4294967296;
      }
      return j;
    }, n.toString = function(j) {
      if (j = j || 10, 2 > j || 36 < j) throw Error("radix out of range: " + j);
      if (P(this)) return "0";
      if (O(this)) return "-" + L(this).toString(j);
      for (var M = y(Math.pow(j, 6)), V = this, B = ""; ; ) {
        var q = Y(V, M).g;
        V = H(V, q.j(M));
        var G = ((0 < V.g.length ? V.g[0] : V.h) >>> 0).toString(j);
        if (V = q, P(V)) return G + B;
        for (; 6 > G.length; ) G = "0" + G;
        B = G + B;
      }
    }, n.i = function(j) {
      return 0 > j ? 0 : j < this.g.length ? this.g[j] : this.h;
    };
    function P(j) {
      if (j.h != 0) return false;
      for (var M = 0; M < j.g.length; M++) if (j.g[M] != 0) return false;
      return true;
    }
    function O(j) {
      return j.h == -1;
    }
    n.l = function(j) {
      return j = H(this, j), O(j) ? -1 : P(j) ? 0 : 1;
    };
    function L(j) {
      for (var M = j.g.length, V = [], B = 0; B < M; B++) V[B] = ~j.g[B];
      return new c(V, ~j.h).add(S);
    }
    n.abs = function() {
      return O(this) ? L(this) : this;
    }, n.add = function(j) {
      for (var M = Math.max(this.g.length, j.g.length), V = [], B = 0, q = 0; q <= M; q++) {
        var G = B + (this.i(q) & 65535) + (j.i(q) & 65535), F = (G >>> 16) + (this.i(q) >>> 16) + (j.i(q) >>> 16);
        B = F >>> 16, G &= 65535, F &= 65535, V[q] = F << 16 | G;
      }
      return new c(V, V[V.length - 1] & -2147483648 ? -1 : 0);
    };
    function H(j, M) {
      return j.add(L(M));
    }
    n.j = function(j) {
      if (P(this) || P(j)) return C;
      if (O(this)) return O(j) ? L(this).j(L(j)) : L(L(this).j(j));
      if (O(j)) return L(this.j(L(j)));
      if (0 > this.l(N) && 0 > j.l(N)) return y(this.m() * j.m());
      for (var M = this.g.length + j.g.length, V = [], B = 0; B < 2 * M; B++) V[B] = 0;
      for (B = 0; B < this.g.length; B++) for (var q = 0; q < j.g.length; q++) {
        var G = this.i(B) >>> 16, F = this.i(B) & 65535, Oe = j.i(q) >>> 16, Le = j.i(q) & 65535;
        V[2 * B + 2 * q] += F * Le, W(V, 2 * B + 2 * q), V[2 * B + 2 * q + 1] += G * Le, W(V, 2 * B + 2 * q + 1), V[2 * B + 2 * q + 1] += F * Oe, W(V, 2 * B + 2 * q + 1), V[2 * B + 2 * q + 2] += G * Oe, W(V, 2 * B + 2 * q + 2);
      }
      for (B = 0; B < M; B++) V[B] = V[2 * B + 1] << 16 | V[2 * B];
      for (B = M; B < 2 * M; B++) V[B] = 0;
      return new c(V, 0);
    };
    function W(j, M) {
      for (; (j[M] & 65535) != j[M]; ) j[M + 1] += j[M] >>> 16, j[M] &= 65535, M++;
    }
    function T(j, M) {
      this.g = j, this.h = M;
    }
    function Y(j, M) {
      if (P(M)) throw Error("division by zero");
      if (P(j)) return new T(C, C);
      if (O(j)) return M = Y(L(j), M), new T(L(M.g), L(M.h));
      if (O(M)) return M = Y(j, L(M)), new T(L(M.g), M.h);
      if (30 < j.g.length) {
        if (O(j) || O(M)) throw Error("slowDivide_ only works with positive integers.");
        for (var V = S, B = M; 0 >= B.l(j); ) V = u(V), B = u(B);
        var q = ge(V, 1), G = ge(B, 1);
        for (B = ge(B, 2), V = ge(V, 2); !P(B); ) {
          var F = G.add(B);
          0 >= F.l(j) && (q = q.add(V), G = F), B = ge(B, 1), V = ge(V, 1);
        }
        return M = H(j, q.j(M)), new T(q, M);
      }
      for (q = C; 0 <= j.l(M); ) {
        for (V = Math.max(1, Math.floor(j.m() / M.m())), B = Math.ceil(Math.log(V) / Math.LN2), B = 48 >= B ? 1 : Math.pow(2, B - 48), G = y(V), F = G.j(M); O(F) || 0 < F.l(j); ) V -= B, G = y(V), F = G.j(M);
        P(G) && (G = S), q = q.add(G), j = H(j, F);
      }
      return new T(q, j);
    }
    n.A = function(j) {
      return Y(this, j).h;
    }, n.and = function(j) {
      for (var M = Math.max(this.g.length, j.g.length), V = [], B = 0; B < M; B++) V[B] = this.i(B) & j.i(B);
      return new c(V, this.h & j.h);
    }, n.or = function(j) {
      for (var M = Math.max(this.g.length, j.g.length), V = [], B = 0; B < M; B++) V[B] = this.i(B) | j.i(B);
      return new c(V, this.h | j.h);
    }, n.xor = function(j) {
      for (var M = Math.max(this.g.length, j.g.length), V = [], B = 0; B < M; B++) V[B] = this.i(B) ^ j.i(B);
      return new c(V, this.h ^ j.h);
    };
    function u(j) {
      for (var M = j.g.length + 1, V = [], B = 0; B < M; B++) V[B] = j.i(B) << 1 | j.i(B - 1) >>> 31;
      return new c(V, j.h);
    }
    function ge(j, M) {
      var V = M >> 5;
      M %= 32;
      for (var B = j.g.length - V, q = [], G = 0; G < B; G++) q[G] = 0 < M ? j.i(G + V) >>> M | j.i(G + V + 1) << 32 - M : j.i(G + V);
      return new c(q, j.h);
    }
    r.prototype.digest = r.prototype.v, r.prototype.reset = r.prototype.s, r.prototype.update = r.prototype.u, v2 = r, c.prototype.add = c.prototype.add, c.prototype.multiply = c.prototype.j, c.prototype.modulo = c.prototype.A, c.prototype.compare = c.prototype.l, c.prototype.toNumber = c.prototype.m, c.prototype.toString = c.prototype.toString, c.prototype.getBits = c.prototype.i, c.fromNumber = y, c.fromString = x, Ca = c;
  }).apply(typeof cx < "u" ? cx : typeof self < "u" ? self : typeof window < "u" ? window : {});
  var ag = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
  var y2, uf, w2, Eg, Zv, _2, x2, E2;
  (function() {
    var n, e = typeof Object.defineProperties == "function" ? Object.defineProperty : function(p, E, k) {
      return p == Array.prototype || p == Object.prototype || (p[E] = k.value), p;
    };
    function t(p) {
      p = [
        typeof globalThis == "object" && globalThis,
        p,
        typeof window == "object" && window,
        typeof self == "object" && self,
        typeof ag == "object" && ag
      ];
      for (var E = 0; E < p.length; ++E) {
        var k = p[E];
        if (k && k.Math == Math) return k;
      }
      throw Error("Cannot find global object");
    }
    var r = t(this);
    function i(p, E) {
      if (E) e: {
        var k = r;
        p = p.split(".");
        for (var $ = 0; $ < p.length - 1; $++) {
          var ne = p[$];
          if (!(ne in k)) break e;
          k = k[ne];
        }
        p = p[p.length - 1], $ = k[p], E = E($), E != $ && E != null && e(k, p, {
          configurable: true,
          writable: true,
          value: E
        });
      }
    }
    function l(p, E) {
      p instanceof String && (p += "");
      var k = 0, $ = false, ne = {
        next: function() {
          if (!$ && k < p.length) {
            var ue = k++;
            return {
              value: E(ue, p[ue]),
              done: false
            };
          }
          return $ = true, {
            done: true,
            value: void 0
          };
        }
      };
      return ne[Symbol.iterator] = function() {
        return ne;
      }, ne;
    }
    i("Array.prototype.values", function(p) {
      return p || function() {
        return l(this, function(E, k) {
          return k;
        });
      };
    });
    var c = c || {}, f = this || self;
    function m(p) {
      var E = typeof p;
      return E = E != "object" ? E : p ? Array.isArray(p) ? "array" : E : "null", E == "array" || E == "object" && typeof p.length == "number";
    }
    function y(p) {
      var E = typeof p;
      return E == "object" && p != null || E == "function";
    }
    function x(p, E, k) {
      return p.call.apply(p.bind, arguments);
    }
    function C(p, E, k) {
      if (!p) throw Error();
      if (2 < arguments.length) {
        var $ = Array.prototype.slice.call(arguments, 2);
        return function() {
          var ne = Array.prototype.slice.call(arguments);
          return Array.prototype.unshift.apply(ne, $), p.apply(E, ne);
        };
      }
      return function() {
        return p.apply(E, arguments);
      };
    }
    function S(p, E, k) {
      return S = Function.prototype.bind && Function.prototype.bind.toString().indexOf("native code") != -1 ? x : C, S.apply(null, arguments);
    }
    function N(p, E) {
      var k = Array.prototype.slice.call(arguments, 1);
      return function() {
        var $ = k.slice();
        return $.push.apply($, arguments), p.apply(this, $);
      };
    }
    function P(p, E) {
      function k() {
      }
      k.prototype = E.prototype, p.aa = E.prototype, p.prototype = new k(), p.prototype.constructor = p, p.Qb = function($, ne, ue) {
        for (var Ae = Array(arguments.length - 2), Rt = 2; Rt < arguments.length; Rt++) Ae[Rt - 2] = arguments[Rt];
        return E.prototype[ne].apply($, Ae);
      };
    }
    function O(p) {
      const E = p.length;
      if (0 < E) {
        const k = Array(E);
        for (let $ = 0; $ < E; $++) k[$] = p[$];
        return k;
      }
      return [];
    }
    function L(p, E) {
      for (let k = 1; k < arguments.length; k++) {
        const $ = arguments[k];
        if (m($)) {
          const ne = p.length || 0, ue = $.length || 0;
          p.length = ne + ue;
          for (let Ae = 0; Ae < ue; Ae++) p[ne + Ae] = $[Ae];
        } else p.push($);
      }
    }
    class H {
      constructor(E, k) {
        this.i = E, this.j = k, this.h = 0, this.g = null;
      }
      get() {
        let E;
        return 0 < this.h ? (this.h--, E = this.g, this.g = E.next, E.next = null) : E = this.i(), E;
      }
    }
    function W(p) {
      return /^[\s\xa0]*$/.test(p);
    }
    function T() {
      var p = f.navigator;
      return p && (p = p.userAgent) ? p : "";
    }
    function Y(p) {
      return Y[" "](p), p;
    }
    Y[" "] = function() {
    };
    var u = T().indexOf("Gecko") != -1 && !(T().toLowerCase().indexOf("webkit") != -1 && T().indexOf("Edge") == -1) && !(T().indexOf("Trident") != -1 || T().indexOf("MSIE") != -1) && T().indexOf("Edge") == -1;
    function ge(p, E, k) {
      for (const $ in p) E.call(k, p[$], $, p);
    }
    function j(p, E) {
      for (const k in p) E.call(void 0, p[k], k, p);
    }
    function M(p) {
      const E = {};
      for (const k in p) E[k] = p[k];
      return E;
    }
    const V = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
    function B(p, E) {
      let k, $;
      for (let ne = 1; ne < arguments.length; ne++) {
        $ = arguments[ne];
        for (k in $) p[k] = $[k];
        for (let ue = 0; ue < V.length; ue++) k = V[ue], Object.prototype.hasOwnProperty.call($, k) && (p[k] = $[k]);
      }
    }
    function q(p) {
      var E = 1;
      p = p.split(":");
      const k = [];
      for (; 0 < E && p.length; ) k.push(p.shift()), E--;
      return p.length && k.push(p.join(":")), k;
    }
    function G(p) {
      f.setTimeout(() => {
        throw p;
      }, 0);
    }
    function F() {
      var p = Pe;
      let E = null;
      return p.g && (E = p.g, p.g = p.g.next, p.g || (p.h = null), E.next = null), E;
    }
    class Oe {
      constructor() {
        this.h = this.g = null;
      }
      add(E, k) {
        const $ = Le.get();
        $.set(E, k), this.h ? this.h.next = $ : this.g = $, this.h = $;
      }
    }
    var Le = new H(() => new Ge(), (p) => p.reset());
    class Ge {
      constructor() {
        this.next = this.g = this.h = null;
      }
      set(E, k) {
        this.h = E, this.g = k, this.next = null;
      }
      reset() {
        this.next = this.g = this.h = null;
      }
    }
    let Ye, he = false, Pe = new Oe(), pe = () => {
      const p = f.Promise.resolve(void 0);
      Ye = () => {
        p.then(X);
      };
    };
    var X = () => {
      for (var p; p = F(); ) {
        try {
          p.h.call(p.g);
        } catch (k) {
          G(k);
        }
        var E = Le;
        E.j(p), 100 > E.h && (E.h++, p.next = E.g, E.g = p);
      }
      he = false;
    };
    function oe() {
      this.s = this.s, this.C = this.C;
    }
    oe.prototype.s = false, oe.prototype.ma = function() {
      this.s || (this.s = true, this.N());
    }, oe.prototype.N = function() {
      if (this.C) for (; this.C.length; ) this.C.shift()();
    };
    function Se(p, E) {
      this.type = p, this.g = this.target = E, this.defaultPrevented = false;
    }
    Se.prototype.h = function() {
      this.defaultPrevented = true;
    };
    var me = function() {
      if (!f.addEventListener || !Object.defineProperty) return false;
      var p = false, E = Object.defineProperty({}, "passive", {
        get: function() {
          p = true;
        }
      });
      try {
        const k = () => {
        };
        f.addEventListener("test", k, E), f.removeEventListener("test", k, E);
      } catch {
      }
      return p;
    }();
    function Re(p, E) {
      if (Se.call(this, p ? p.type : ""), this.relatedTarget = this.g = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = "", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = false, this.state = null, this.pointerId = 0, this.pointerType = "", this.i = null, p) {
        var k = this.type = p.type, $ = p.changedTouches && p.changedTouches.length ? p.changedTouches[0] : null;
        if (this.target = p.target || p.srcElement, this.g = E, E = p.relatedTarget) {
          if (u) {
            e: {
              try {
                Y(E.nodeName);
                var ne = true;
                break e;
              } catch {
              }
              ne = false;
            }
            ne || (E = null);
          }
        } else k == "mouseover" ? E = p.fromElement : k == "mouseout" && (E = p.toElement);
        this.relatedTarget = E, $ ? (this.clientX = $.clientX !== void 0 ? $.clientX : $.pageX, this.clientY = $.clientY !== void 0 ? $.clientY : $.pageY, this.screenX = $.screenX || 0, this.screenY = $.screenY || 0) : (this.clientX = p.clientX !== void 0 ? p.clientX : p.pageX, this.clientY = p.clientY !== void 0 ? p.clientY : p.pageY, this.screenX = p.screenX || 0, this.screenY = p.screenY || 0), this.button = p.button, this.key = p.key || "", this.ctrlKey = p.ctrlKey, this.altKey = p.altKey, this.shiftKey = p.shiftKey, this.metaKey = p.metaKey, this.pointerId = p.pointerId || 0, this.pointerType = typeof p.pointerType == "string" ? p.pointerType : $e[p.pointerType] || "", this.state = p.state, this.i = p, p.defaultPrevented && Re.aa.h.call(this);
      }
    }
    P(Re, Se);
    var $e = {
      2: "touch",
      3: "pen",
      4: "mouse"
    };
    Re.prototype.h = function() {
      Re.aa.h.call(this);
      var p = this.i;
      p.preventDefault ? p.preventDefault() : p.returnValue = false;
    };
    var ie = "closure_listenable_" + (1e6 * Math.random() | 0), ye = 0;
    function ve(p, E, k, $, ne) {
      this.listener = p, this.proxy = null, this.src = E, this.type = k, this.capture = !!$, this.ha = ne, this.key = ++ye, this.da = this.fa = false;
    }
    function De(p) {
      p.da = true, p.listener = null, p.proxy = null, p.src = null, p.ha = null;
    }
    function Be(p) {
      this.src = p, this.g = {}, this.h = 0;
    }
    Be.prototype.add = function(p, E, k, $, ne) {
      var ue = p.toString();
      p = this.g[ue], p || (p = this.g[ue] = [], this.h++);
      var Ae = le(p, E, $, ne);
      return -1 < Ae ? (E = p[Ae], k || (E.fa = false)) : (E = new ve(E, this.src, ue, !!$, ne), E.fa = k, p.push(E)), E;
    };
    function et(p, E) {
      var k = E.type;
      if (k in p.g) {
        var $ = p.g[k], ne = Array.prototype.indexOf.call($, E, void 0), ue;
        (ue = 0 <= ne) && Array.prototype.splice.call($, ne, 1), ue && (De(E), p.g[k].length == 0 && (delete p.g[k], p.h--));
      }
    }
    function le(p, E, k, $) {
      for (var ne = 0; ne < p.length; ++ne) {
        var ue = p[ne];
        if (!ue.da && ue.listener == E && ue.capture == !!k && ue.ha == $) return ne;
      }
      return -1;
    }
    var Ne = "closure_lm_" + (1e6 * Math.random() | 0), Ke = {};
    function at(p, E, k, $, ne) {
      if (Array.isArray(E)) {
        for (var ue = 0; ue < E.length; ue++) at(p, E[ue], k, $, ne);
        return null;
      }
      return k = on(k), p && p[ie] ? p.K(E, k, y($) ? !!$.capture : false, ne) : pt(p, E, k, false, $, ne);
    }
    function pt(p, E, k, $, ne, ue) {
      if (!E) throw Error("Invalid event type");
      var Ae = y(ne) ? !!ne.capture : !!ne, Rt = It(p);
      if (Rt || (p[Ne] = Rt = new Be(p)), k = Rt.add(E, k, $, Ae, ue), k.proxy) return k;
      if ($ = Vt(), k.proxy = $, $.src = p, $.listener = k, p.addEventListener) me || (ne = Ae), ne === void 0 && (ne = false), p.addEventListener(E.toString(), $, ne);
      else if (p.attachEvent) p.attachEvent(ut(E.toString()), $);
      else if (p.addListener && p.removeListener) p.addListener($);
      else throw Error("addEventListener and attachEvent are unavailable.");
      return k;
    }
    function Vt() {
      function p(k) {
        return E.call(p.src, p.listener, k);
      }
      const E = Pt;
      return p;
    }
    function Fe(p, E, k, $, ne) {
      if (Array.isArray(E)) for (var ue = 0; ue < E.length; ue++) Fe(p, E[ue], k, $, ne);
      else $ = y($) ? !!$.capture : !!$, k = on(k), p && p[ie] ? (p = p.i, E = String(E).toString(), E in p.g && (ue = p.g[E], k = le(ue, k, $, ne), -1 < k && (De(ue[k]), Array.prototype.splice.call(ue, k, 1), ue.length == 0 && (delete p.g[E], p.h--)))) : p && (p = It(p)) && (E = p.g[E.toString()], p = -1, E && (p = le(E, k, $, ne)), (k = -1 < p ? E[p] : null) && ke(k));
    }
    function ke(p) {
      if (typeof p != "number" && p && !p.da) {
        var E = p.src;
        if (E && E[ie]) et(E.i, p);
        else {
          var k = p.type, $ = p.proxy;
          E.removeEventListener ? E.removeEventListener(k, $, p.capture) : E.detachEvent ? E.detachEvent(ut(k), $) : E.addListener && E.removeListener && E.removeListener($), (k = It(E)) ? (et(k, p), k.h == 0 && (k.src = null, E[Ne] = null)) : De(p);
        }
      }
    }
    function ut(p) {
      return p in Ke ? Ke[p] : Ke[p] = "on" + p;
    }
    function Pt(p, E) {
      if (p.da) p = true;
      else {
        E = new Re(E, this);
        var k = p.listener, $ = p.ha || p.src;
        p.fa && ke(p), p = k.call($, E);
      }
      return p;
    }
    function It(p) {
      return p = p[Ne], p instanceof Be ? p : null;
    }
    var en = "__closure_events_fn_" + (1e9 * Math.random() >>> 0);
    function on(p) {
      return typeof p == "function" ? p : (p[en] || (p[en] = function(E) {
        return p.handleEvent(E);
      }), p[en]);
    }
    function Dt() {
      oe.call(this), this.i = new Be(this), this.M = this, this.F = null;
    }
    P(Dt, oe), Dt.prototype[ie] = true, Dt.prototype.removeEventListener = function(p, E, k, $) {
      Fe(this, p, E, k, $);
    };
    function kt(p, E) {
      var k, $ = p.F;
      if ($) for (k = []; $; $ = $.F) k.push($);
      if (p = p.M, $ = E.type || E, typeof E == "string") E = new Se(E, p);
      else if (E instanceof Se) E.target = E.target || p;
      else {
        var ne = E;
        E = new Se($, p), B(E, ne);
      }
      if (ne = true, k) for (var ue = k.length - 1; 0 <= ue; ue--) {
        var Ae = E.g = k[ue];
        ne = En(Ae, $, true, E) && ne;
      }
      if (Ae = E.g = p, ne = En(Ae, $, true, E) && ne, ne = En(Ae, $, false, E) && ne, k) for (ue = 0; ue < k.length; ue++) Ae = E.g = k[ue], ne = En(Ae, $, false, E) && ne;
    }
    Dt.prototype.N = function() {
      if (Dt.aa.N.call(this), this.i) {
        var p = this.i, E;
        for (E in p.g) {
          for (var k = p.g[E], $ = 0; $ < k.length; $++) De(k[$]);
          delete p.g[E], p.h--;
        }
      }
      this.F = null;
    }, Dt.prototype.K = function(p, E, k, $) {
      return this.i.add(String(p), E, false, k, $);
    }, Dt.prototype.L = function(p, E, k, $) {
      return this.i.add(String(p), E, true, k, $);
    };
    function En(p, E, k, $) {
      if (E = p.i.g[String(E)], !E) return true;
      E = E.concat();
      for (var ne = true, ue = 0; ue < E.length; ++ue) {
        var Ae = E[ue];
        if (Ae && !Ae.da && Ae.capture == k) {
          var Rt = Ae.listener, an = Ae.ha || Ae.src;
          Ae.fa && et(p.i, Ae), ne = Rt.call(an, $) !== false && ne;
        }
      }
      return ne && !$.defaultPrevented;
    }
    function Xr(p, E, k) {
      if (typeof p == "function") k && (p = S(p, k));
      else if (p && typeof p.handleEvent == "function") p = S(p.handleEvent, p);
      else throw Error("Invalid listener argument");
      return 2147483647 < Number(E) ? -1 : f.setTimeout(p, E || 0);
    }
    function mr(p) {
      p.g = Xr(() => {
        p.g = null, p.i && (p.i = false, mr(p));
      }, p.l);
      const E = p.h;
      p.h = null, p.m.apply(null, E);
    }
    class Bn extends oe {
      constructor(E, k) {
        super(), this.m = E, this.l = k, this.h = null, this.i = false, this.g = null;
      }
      j(E) {
        this.h = arguments, this.g ? this.i = true : mr(this);
      }
      N() {
        super.N(), this.g && (f.clearTimeout(this.g), this.g = null, this.i = false, this.h = null);
      }
    }
    function er(p) {
      oe.call(this), this.h = p, this.g = {};
    }
    P(er, oe);
    var Jr = [];
    function dn(p) {
      ge(p.g, function(E, k) {
        this.g.hasOwnProperty(k) && ke(E);
      }, p), p.g = {};
    }
    er.prototype.N = function() {
      er.aa.N.call(this), dn(this);
    }, er.prototype.handleEvent = function() {
      throw Error("EventHandler.handleEvent not implemented");
    };
    var tr = f.JSON.stringify, Zr = f.JSON.parse, es = class {
      stringify(p) {
        return f.JSON.stringify(p, void 0);
      }
      parse(p) {
        return f.JSON.parse(p, void 0);
      }
    };
    function Ir() {
    }
    Ir.prototype.h = null;
    function kr(p) {
      return p.h || (p.h = p.i());
    }
    function nr() {
    }
    var fn = {
      OPEN: "a",
      kb: "b",
      Ja: "c",
      wb: "d"
    };
    function Nn() {
      Se.call(this, "d");
    }
    P(Nn, Se);
    function ce() {
      Se.call(this, "c");
    }
    P(ce, Se);
    var je = {}, tt = null;
    function nt() {
      return tt = tt || new Dt();
    }
    je.La = "serverreachability";
    function Ot(p) {
      Se.call(this, je.La, p);
    }
    P(Ot, Se);
    function mt(p) {
      const E = nt();
      kt(E, new Ot(E));
    }
    je.STAT_EVENT = "statevent";
    function Pn(p, E) {
      Se.call(this, je.STAT_EVENT, p), this.stat = E;
    }
    P(Pn, Se);
    function Ft(p) {
      const E = nt();
      kt(E, new Pn(E, p));
    }
    je.Ma = "timingevent";
    function Wn(p, E) {
      Se.call(this, je.Ma, p), this.size = E;
    }
    P(Wn, Se);
    function Qt(p, E) {
      if (typeof p != "function") throw Error("Fn must not be null and must be a function");
      return f.setTimeout(function() {
        p();
      }, E);
    }
    function dt() {
      this.g = true;
    }
    dt.prototype.xa = function() {
      this.g = false;
    };
    function it(p, E, k, $, ne, ue) {
      p.info(function() {
        if (p.g) if (ue) for (var Ae = "", Rt = ue.split("&"), an = 0; an < Rt.length; an++) {
          var bt = Rt[an].split("=");
          if (1 < bt.length) {
            var gn = bt[0];
            bt = bt[1];
            var tn = gn.split("_");
            Ae = 2 <= tn.length && tn[1] == "type" ? Ae + (gn + "=" + bt + "&") : Ae + (gn + "=redacted&");
          }
        }
        else Ae = null;
        else Ae = ue;
        return "XMLHTTP REQ (" + $ + ") [attempt " + ne + "]: " + E + `
` + k + `
` + Ae;
      });
    }
    function At(p, E, k, $, ne, ue, Ae) {
      p.info(function() {
        return "XMLHTTP RESP (" + $ + ") [ attempt " + ne + "]: " + E + `
` + k + `
` + ue + " " + Ae;
      });
    }
    function xt(p, E, k, $) {
      p.info(function() {
        return "XMLHTTP TEXT (" + E + "): " + Dn(p, k) + ($ ? " " + $ : "");
      });
    }
    function bn(p, E) {
      p.info(function() {
        return "TIMEOUT: " + E;
      });
    }
    dt.prototype.info = function() {
    };
    function Dn(p, E) {
      if (!p.g) return E;
      if (!E) return null;
      try {
        var k = JSON.parse(E);
        if (k) {
          for (p = 0; p < k.length; p++) if (Array.isArray(k[p])) {
            var $ = k[p];
            if (!(2 > $.length)) {
              var ne = $[1];
              if (Array.isArray(ne) && !(1 > ne.length)) {
                var ue = ne[0];
                if (ue != "noop" && ue != "stop" && ue != "close") for (var Ae = 1; Ae < ne.length; Ae++) ne[Ae] = "";
              }
            }
          }
        }
        return tr(k);
      } catch {
        return E;
      }
    }
    var Ds = {
      NO_ERROR: 0,
      gb: 1,
      tb: 2,
      sb: 3,
      nb: 4,
      rb: 5,
      ub: 6,
      Ia: 7,
      TIMEOUT: 8,
      xb: 9
    }, $a = {
      lb: "complete",
      Hb: "success",
      Ja: "error",
      Ia: "abort",
      zb: "ready",
      Ab: "readystatechange",
      TIMEOUT: "timeout",
      vb: "incrementaldata",
      yb: "progress",
      ob: "downloadprogress",
      Pb: "uploadprogress"
    }, Ar;
    function di() {
    }
    P(di, Ir), di.prototype.g = function() {
      return new XMLHttpRequest();
    }, di.prototype.i = function() {
      return {};
    }, Ar = new di();
    function Rr(p, E, k, $) {
      this.j = p, this.i = E, this.l = k, this.R = $ || 1, this.U = new er(this), this.I = 45e3, this.H = null, this.o = false, this.m = this.A = this.v = this.L = this.F = this.S = this.B = null, this.D = [], this.g = null, this.C = 0, this.s = this.u = null, this.X = -1, this.J = false, this.O = 0, this.M = null, this.W = this.K = this.T = this.P = false, this.h = new Va();
    }
    function Va() {
      this.i = null, this.g = "", this.h = false;
    }
    var Do = {}, Hi = {};
    function qi(p, E, k) {
      p.L = 1, p.v = $s(sr(E)), p.m = k, p.P = true, jo(p, null);
    }
    function jo(p, E) {
      p.F = Date.now(), zt(p), p.A = sr(p.v);
      var k = p.A, $ = p.R;
      Array.isArray($) || ($ = [
        String($)
      ]), Fs(k.i, "t", $), p.C = 0, k = p.j.J, p.h = new Va(), p.g = sc(p.j, k ? E : null, !p.m), 0 < p.O && (p.M = new Bn(S(p.Y, p, p.g), p.O)), E = p.U, k = p.g, $ = p.ca;
      var ne = "readystatechange";
      Array.isArray(ne) || (ne && (Jr[0] = ne.toString()), ne = Jr);
      for (var ue = 0; ue < ne.length; ue++) {
        var Ae = at(k, ne[ue], $ || E.handleEvent, false, E.h || E);
        if (!Ae) break;
        E.g[Ae.key] = Ae;
      }
      E = p.H ? M(p.H) : {}, p.m ? (p.u || (p.u = "POST"), E["Content-Type"] = "application/x-www-form-urlencoded", p.g.ea(p.A, p.u, p.m, E)) : (p.u = "GET", p.g.ea(p.A, p.u, null, E)), mt(), it(p.i, p.u, p.A, p.l, p.R, p.m);
    }
    Rr.prototype.ca = function(p) {
      p = p.target;
      const E = this.M;
      E && Kn(p) == 3 ? E.j() : this.Y(p);
    }, Rr.prototype.Y = function(p) {
      try {
        if (p == this.g) e: {
          const tn = Kn(this.g);
          var E = this.g.Ba();
          const wr = this.g.Z();
          if (!(3 > tn) && (tn != 3 || this.g && (this.h.h || this.g.oa() || Xi(this.g)))) {
            this.J || tn != 4 || E == 7 || (E == 8 || 0 >= wr ? mt(3) : mt(2)), fi(this);
            var k = this.g.Z();
            this.X = k;
            t: if (Fa(this)) {
              var $ = Xi(this.g);
              p = "";
              var ne = $.length, ue = Kn(this.g) == 4;
              if (!this.h.i) {
                if (typeof TextDecoder > "u") {
                  vr(this), js(this);
                  var Ae = "";
                  break t;
                }
                this.h.i = new f.TextDecoder();
              }
              for (E = 0; E < ne; E++) this.h.h = true, p += this.h.i.decode($[E], {
                stream: !(ue && E == ne - 1)
              });
              $.length = 0, this.h.g += p, this.C = 0, Ae = this.h.g;
            } else Ae = this.g.oa();
            if (this.o = k == 200, At(this.i, this.u, this.A, this.l, this.R, tn, k), this.o) {
              if (this.T && !this.K) {
                t: {
                  if (this.g) {
                    var Rt, an = this.g;
                    if ((Rt = an.g ? an.g.getResponseHeader("X-HTTP-Initial-Response") : null) && !W(Rt)) {
                      var bt = Rt;
                      break t;
                    }
                  }
                  bt = null;
                }
                if (k = bt) xt(this.i, this.l, k, "Initial handshake response via X-HTTP-Initial-Response"), this.K = true, Oo(this, k);
                else {
                  this.o = false, this.s = 3, Ft(12), vr(this), js(this);
                  break e;
                }
              }
              if (this.P) {
                k = true;
                let ir;
                for (; !this.J && this.C < Ae.length; ) if (ir = Gl(this, Ae), ir == Hi) {
                  tn == 4 && (this.s = 4, Ft(14), k = false), xt(this.i, this.l, null, "[Incomplete Response]");
                  break;
                } else if (ir == Do) {
                  this.s = 4, Ft(15), xt(this.i, this.l, Ae, "[Invalid Chunk]"), k = false;
                  break;
                } else xt(this.i, this.l, ir, null), Oo(this, ir);
                if (Fa(this) && this.C != 0 && (this.h.g = this.h.g.slice(this.C), this.C = 0), tn != 4 || Ae.length != 0 || this.h.h || (this.s = 1, Ft(16), k = false), this.o = this.o && k, !k) xt(this.i, this.l, Ae, "[Invalid Chunked Response]"), vr(this), js(this);
                else if (0 < Ae.length && !this.W) {
                  this.W = true;
                  var gn = this.j;
                  gn.g == this && gn.ba && !gn.M && (gn.j.info("Great, no buffering proxy detected. Bytes received: " + Ae.length), Za(gn), gn.M = true, Ft(11));
                }
              } else xt(this.i, this.l, Ae, null), Oo(this, Ae);
              tn == 4 && vr(this), this.o && !this.J && (tn == 4 ? Fo(this.j, this) : (this.o = false, zt(this)));
            } else Ji(this.g), k == 400 && 0 < Ae.indexOf("Unknown SID") ? (this.s = 3, Ft(12)) : (this.s = 0, Ft(13)), vr(this), js(this);
          }
        }
      } catch {
      } finally {
      }
    };
    function Fa(p) {
      return p.g ? p.u == "GET" && p.L != 2 && p.j.Ca : false;
    }
    function Gl(p, E) {
      var k = p.C, $ = E.indexOf(`
`, k);
      return $ == -1 ? Hi : (k = Number(E.substring(k, $)), isNaN(k) ? Do : ($ += 1, $ + k > E.length ? Hi : (E = E.slice($, $ + k), p.C = $ + k, E)));
    }
    Rr.prototype.cancel = function() {
      this.J = true, vr(this);
    };
    function zt(p) {
      p.S = Date.now() + p.I, za(p, p.I);
    }
    function za(p, E) {
      if (p.B != null) throw Error("WatchDog timer not null");
      p.B = Qt(S(p.ba, p), E);
    }
    function fi(p) {
      p.B && (f.clearTimeout(p.B), p.B = null);
    }
    Rr.prototype.ba = function() {
      this.B = null;
      const p = Date.now();
      0 <= p - this.S ? (bn(this.i, this.A), this.L != 2 && (mt(), Ft(17)), vr(this), this.s = 2, js(this)) : za(this, this.S - p);
    };
    function js(p) {
      p.j.G == 0 || p.J || Fo(p.j, p);
    }
    function vr(p) {
      fi(p);
      var E = p.M;
      E && typeof E.ma == "function" && E.ma(), p.M = null, dn(p.U), p.g && (E = p.g, p.g = null, E.abort(), E.ma());
    }
    function Oo(p, E) {
      try {
        var k = p.j;
        if (k.G != 0 && (k.g == p || jn(k.h, p))) {
          if (!p.K && jn(k.h, p) && k.G == 3) {
            try {
              var $ = k.Da.g.parse(E);
            } catch {
              $ = null;
            }
            if (Array.isArray($) && $.length == 3) {
              var ne = $;
              if (ne[0] == 0) {
                e: if (!k.u) {
                  if (k.g) if (k.g.F + 3e3 < p.F) Vo(k), Or(k);
                  else break e;
                  Ws(k), Ft(18);
                }
              } else k.za = ne[1], 0 < k.za - k.T && 37500 > ne[2] && k.F && k.v == 0 && !k.C && (k.C = Qt(S(k.Za, k), 6e3));
              if (1 >= Ba(k.h) && k.ca) {
                try {
                  k.ca();
                } catch {
                }
                k.ca = void 0;
              }
            } else Hs(k, 11);
          } else if ((p.K || k.g == p) && Vo(k), !W(E)) for (ne = k.Da.g.parse(E), E = 0; E < ne.length; E++) {
            let bt = ne[E];
            if (k.T = bt[0], bt = bt[1], k.G == 2) if (bt[0] == "c") {
              k.K = bt[1], k.ia = bt[2];
              const gn = bt[3];
              gn != null && (k.la = gn, k.j.info("VER=" + k.la));
              const tn = bt[4];
              tn != null && (k.Aa = tn, k.j.info("SVER=" + k.Aa));
              const wr = bt[5];
              wr != null && typeof wr == "number" && 0 < wr && ($ = 1.5 * wr, k.L = $, k.j.info("backChannelRequestTimeoutMs_=" + $)), $ = k;
              const ir = p.g;
              if (ir) {
                const xi = ir.g ? ir.g.getResponseHeader("X-Client-Wire-Protocol") : null;
                if (xi) {
                  var ue = $.h;
                  ue.g || xi.indexOf("spdy") == -1 && xi.indexOf("quic") == -1 && xi.indexOf("h2") == -1 || (ue.j = ue.l, ue.g = /* @__PURE__ */ new Set(), ue.h && (Lo(ue, ue.h), ue.h = null));
                }
                if ($.D) {
                  const zo = ir.g ? ir.g.getResponseHeader("X-HTTP-Session-Id") : null;
                  zo && ($.ya = zo, Lt($.I, $.D, zo));
                }
              }
              k.G = 3, k.l && k.l.ua(), k.ba && (k.R = Date.now() - p.F, k.j.info("Handshake RTT: " + k.R + "ms")), $ = k;
              var Ae = p;
              if ($.qa = rc($, $.J ? $.ia : null, $.W), Ae.K) {
                Wa($.h, Ae);
                var Rt = Ae, an = $.L;
                an && (Rt.I = an), Rt.B && (fi(Rt), zt(Rt)), $.g = Ae;
              } else _i($);
              0 < k.i.length && ss(k);
            } else bt[0] != "stop" && bt[0] != "close" || Hs(k, 7);
            else k.G == 3 && (bt[0] == "stop" || bt[0] == "close" ? bt[0] == "stop" ? Hs(k, 7) : pn(k) : bt[0] != "noop" && k.l && k.l.ta(bt), k.v = 0);
          }
        }
        mt(4);
      } catch {
      }
    }
    var Ua = class {
      constructor(p, E) {
        this.g = p, this.map = E;
      }
    };
    function hi(p) {
      this.l = p || 10, f.PerformanceNavigationTiming ? (p = f.performance.getEntriesByType("navigation"), p = 0 < p.length && (p[0].nextHopProtocol == "hq" || p[0].nextHopProtocol == "h2")) : p = !!(f.chrome && f.chrome.loadTimes && f.chrome.loadTimes() && f.chrome.loadTimes().wasFetchedViaSpdy), this.j = p ? this.l : 1, this.g = null, 1 < this.j && (this.g = /* @__PURE__ */ new Set()), this.h = null, this.i = [];
    }
    function rr(p) {
      return p.h ? true : p.g ? p.g.size >= p.j : false;
    }
    function Ba(p) {
      return p.h ? 1 : p.g ? p.g.size : 0;
    }
    function jn(p, E) {
      return p.h ? p.h == E : p.g ? p.g.has(E) : false;
    }
    function Lo(p, E) {
      p.g ? p.g.add(E) : p.h = E;
    }
    function Wa(p, E) {
      p.h && p.h == E ? p.h = null : p.g && p.g.has(E) && p.g.delete(E);
    }
    hi.prototype.cancel = function() {
      if (this.i = Ha(this), this.h) this.h.cancel(), this.h = null;
      else if (this.g && this.g.size !== 0) {
        for (const p of this.g.values()) p.cancel();
        this.g.clear();
      }
    };
    function Ha(p) {
      if (p.h != null) return p.i.concat(p.h.D);
      if (p.g != null && p.g.size !== 0) {
        let E = p.i;
        for (const k of p.g.values()) E = E.concat(k.D);
        return E;
      }
      return O(p.i);
    }
    function Ki(p) {
      if (p.V && typeof p.V == "function") return p.V();
      if (typeof Map < "u" && p instanceof Map || typeof Set < "u" && p instanceof Set) return Array.from(p.values());
      if (typeof p == "string") return p.split("");
      if (m(p)) {
        for (var E = [], k = p.length, $ = 0; $ < k; $++) E.push(p[$]);
        return E;
      }
      E = [], k = 0;
      for ($ in p) E[k++] = p[$];
      return E;
    }
    function Gi(p) {
      if (p.na && typeof p.na == "function") return p.na();
      if (!p.V || typeof p.V != "function") {
        if (typeof Map < "u" && p instanceof Map) return Array.from(p.keys());
        if (!(typeof Set < "u" && p instanceof Set)) {
          if (m(p) || typeof p == "string") {
            var E = [];
            p = p.length;
            for (var k = 0; k < p; k++) E.push(k);
            return E;
          }
          E = [], k = 0;
          for (const $ in p) E[k++] = $;
          return E;
        }
      }
    }
    function Os(p, E) {
      if (p.forEach && typeof p.forEach == "function") p.forEach(E, void 0);
      else if (m(p) || typeof p == "string") Array.prototype.forEach.call(p, E, void 0);
      else for (var k = Gi(p), $ = Ki(p), ne = $.length, ue = 0; ue < ne; ue++) E.call(void 0, $[ue], k && k[ue], p);
    }
    var pi = RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");
    function Ql(p, E) {
      if (p) {
        p = p.split("&");
        for (var k = 0; k < p.length; k++) {
          var $ = p[k].indexOf("="), ne = null;
          if (0 <= $) {
            var ue = p[k].substring(0, $);
            ne = p[k].substring($ + 1);
          } else ue = p[k];
          E(ue, ne ? decodeURIComponent(ne.replace(/\+/g, " ")) : "");
        }
      }
    }
    function ps(p) {
      if (this.g = this.o = this.j = "", this.s = null, this.m = this.l = "", this.h = false, p instanceof ps) {
        this.h = p.h, gi(this, p.j), this.o = p.o, this.g = p.g, Ls(this, p.s), this.l = p.l;
        var E = p.i, k = new ts();
        k.i = E.i, E.g && (k.g = new Map(E.g), k.h = E.h), Ms(this, k), this.m = p.m;
      } else p && (E = String(p).match(pi)) ? (this.h = false, gi(this, E[1] || "", true), this.o = yt(E[2] || ""), this.g = yt(E[3] || "", true), Ls(this, E[4]), this.l = yt(E[5] || "", true), Ms(this, E[6] || "", true), this.m = yt(E[7] || "")) : (this.h = false, this.i = new ts(null, this.h));
    }
    ps.prototype.toString = function() {
      var p = [], E = this.j;
      E && p.push(Vs(E, Qi, true), ":");
      var k = this.g;
      return (k || E == "file") && (p.push("//"), (E = this.o) && p.push(Vs(E, Qi, true), "@"), p.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g, "%$1")), k = this.s, k != null && p.push(":", String(k))), (k = this.l) && (this.g && k.charAt(0) != "/" && p.push("/"), p.push(Vs(k, k.charAt(0) == "/" ? Ga : Ka, true))), (k = this.i.toString()) && p.push("?", k), (k = this.m) && p.push("#", Vs(k, Mo)), p.join("");
    };
    function sr(p) {
      return new ps(p);
    }
    function gi(p, E, k) {
      p.j = k ? yt(E, true) : E, p.j && (p.j = p.j.replace(/:$/, ""));
    }
    function Ls(p, E) {
      if (E) {
        if (E = Number(E), isNaN(E) || 0 > E) throw Error("Bad port number " + E);
        p.s = E;
      } else p.s = null;
    }
    function Ms(p, E, k) {
      E instanceof ts ? (p.i = E, ns(p.i, p.h)) : (k || (E = Vs(E, Qa)), p.i = new ts(E, p.h));
    }
    function Lt(p, E, k) {
      p.i.set(E, k);
    }
    function $s(p) {
      return Lt(p, "zx", Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ Date.now()).toString(36)), p;
    }
    function yt(p, E) {
      return p ? E ? decodeURI(p.replace(/%25/g, "%2525")) : decodeURIComponent(p) : "";
    }
    function Vs(p, E, k) {
      return typeof p == "string" ? (p = encodeURI(p).replace(E, qa), k && (p = p.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), p) : null;
    }
    function qa(p) {
      return p = p.charCodeAt(0), "%" + (p >> 4 & 15).toString(16) + (p & 15).toString(16);
    }
    var Qi = /[#\/\?@]/g, Ka = /[#\?:]/g, Ga = /[#\?]/g, Qa = /[#\?@]/g, Mo = /#/g;
    function ts(p, E) {
      this.h = this.g = null, this.i = p || null, this.j = !!E;
    }
    function hn(p) {
      p.g || (p.g = /* @__PURE__ */ new Map(), p.h = 0, p.i && Ql(p.i, function(E, k) {
        p.add(decodeURIComponent(E.replace(/\+/g, " ")), k);
      }));
    }
    n = ts.prototype, n.add = function(p, E) {
      hn(this), this.i = null, p = yr(this, p);
      var k = this.g.get(p);
      return k || this.g.set(p, k = []), k.push(E), this.h += 1, this;
    };
    function Nr(p, E) {
      hn(p), E = yr(p, E), p.g.has(E) && (p.i = null, p.h -= p.g.get(E).length, p.g.delete(E));
    }
    function Pr(p, E) {
      return hn(p), E = yr(p, E), p.g.has(E);
    }
    n.forEach = function(p, E) {
      hn(this), this.g.forEach(function(k, $) {
        k.forEach(function(ne) {
          p.call(E, ne, $, this);
        }, this);
      }, this);
    }, n.na = function() {
      hn(this);
      const p = Array.from(this.g.values()), E = Array.from(this.g.keys()), k = [];
      for (let $ = 0; $ < E.length; $++) {
        const ne = p[$];
        for (let ue = 0; ue < ne.length; ue++) k.push(E[$]);
      }
      return k;
    }, n.V = function(p) {
      hn(this);
      let E = [];
      if (typeof p == "string") Pr(this, p) && (E = E.concat(this.g.get(yr(this, p))));
      else {
        p = Array.from(this.g.values());
        for (let k = 0; k < p.length; k++) E = E.concat(p[k]);
      }
      return E;
    }, n.set = function(p, E) {
      return hn(this), this.i = null, p = yr(this, p), Pr(this, p) && (this.h -= this.g.get(p).length), this.g.set(p, [
        E
      ]), this.h += 1, this;
    }, n.get = function(p, E) {
      return p ? (p = this.V(p), 0 < p.length ? String(p[0]) : E) : E;
    };
    function Fs(p, E, k) {
      Nr(p, E), 0 < k.length && (p.i = null, p.g.set(yr(p, E), O(k)), p.h += k.length);
    }
    n.toString = function() {
      if (this.i) return this.i;
      if (!this.g) return "";
      const p = [], E = Array.from(this.g.keys());
      for (var k = 0; k < E.length; k++) {
        var $ = E[k];
        const ue = encodeURIComponent(String($)), Ae = this.V($);
        for ($ = 0; $ < Ae.length; $++) {
          var ne = ue;
          Ae[$] !== "" && (ne += "=" + encodeURIComponent(String(Ae[$]))), p.push(ne);
        }
      }
      return this.i = p.join("&");
    };
    function yr(p, E) {
      return E = String(E), p.j && (E = E.toLowerCase()), E;
    }
    function ns(p, E) {
      E && !p.j && (hn(p), p.i = null, p.g.forEach(function(k, $) {
        var ne = $.toLowerCase();
        $ != ne && (Nr(this, $), Fs(this, ne, k));
      }, p)), p.j = E;
    }
    function Yl(p, E) {
      const k = new dt();
      if (f.Image) {
        const $ = new Image();
        $.onload = N(Hn, k, "TestLoadImage: loaded", true, E, $), $.onerror = N(Hn, k, "TestLoadImage: error", false, E, $), $.onabort = N(Hn, k, "TestLoadImage: abort", false, E, $), $.ontimeout = N(Hn, k, "TestLoadImage: timeout", false, E, $), f.setTimeout(function() {
          $.ontimeout && $.ontimeout();
        }, 1e4), $.src = p;
      } else E(false);
    }
    function Ya(p, E) {
      const k = new dt(), $ = new AbortController(), ne = setTimeout(() => {
        $.abort(), Hn(k, "TestPingServer: timeout", false, E);
      }, 1e4);
      fetch(p, {
        signal: $.signal
      }).then((ue) => {
        clearTimeout(ne), ue.ok ? Hn(k, "TestPingServer: ok", true, E) : Hn(k, "TestPingServer: server error", false, E);
      }).catch(() => {
        clearTimeout(ne), Hn(k, "TestPingServer: error", false, E);
      });
    }
    function Hn(p, E, k, $, ne) {
      try {
        ne && (ne.onload = null, ne.onerror = null, ne.onabort = null, ne.ontimeout = null), $(k);
      } catch {
      }
    }
    function Xl() {
      this.g = new es();
    }
    function Xa(p, E, k) {
      const $ = k || "";
      try {
        Os(p, function(ne, ue) {
          let Ae = ne;
          y(ne) && (Ae = tr(ne)), E.push($ + ue + "=" + encodeURIComponent(Ae));
        });
      } catch (ne) {
        throw E.push($ + "type=" + encodeURIComponent("_badmap")), ne;
      }
    }
    function gs(p) {
      this.l = p.Ub || null, this.j = p.eb || false;
    }
    P(gs, Ir), gs.prototype.g = function() {
      return new mi(this.l, this.j);
    }, gs.prototype.i = /* @__PURE__ */ function(p) {
      return function() {
        return p;
      };
    }({});
    function mi(p, E) {
      Dt.call(this), this.D = p, this.o = E, this.m = void 0, this.status = this.readyState = 0, this.responseType = this.responseText = this.response = this.statusText = "", this.onreadystatechange = null, this.u = new Headers(), this.h = null, this.B = "GET", this.A = "", this.g = false, this.v = this.j = this.l = null;
    }
    P(mi, Dt), n = mi.prototype, n.open = function(p, E) {
      if (this.readyState != 0) throw this.abort(), Error("Error reopening a connection");
      this.B = p, this.A = E, this.readyState = 1, jr(this);
    }, n.send = function(p) {
      if (this.readyState != 1) throw this.abort(), Error("need to call open() first. ");
      this.g = true;
      const E = {
        headers: this.u,
        method: this.B,
        credentials: this.m,
        cache: void 0
      };
      p && (E.body = p), (this.D || f).fetch(new Request(this.A, E)).then(this.Sa.bind(this), this.ga.bind(this));
    }, n.abort = function() {
      this.response = this.responseText = "", this.u = new Headers(), this.status = 0, this.j && this.j.cancel("Request was aborted.").catch(() => {
      }), 1 <= this.readyState && this.g && this.readyState != 4 && (this.g = false, Dr(this)), this.readyState = 0;
    }, n.Sa = function(p) {
      if (this.g && (this.l = p, this.h || (this.status = this.l.status, this.statusText = this.l.statusText, this.h = p.headers, this.readyState = 2, jr(this)), this.g && (this.readyState = 3, jr(this), this.g))) if (this.responseType === "arraybuffer") p.arrayBuffer().then(this.Qa.bind(this), this.ga.bind(this));
      else if (typeof f.ReadableStream < "u" && "body" in p) {
        if (this.j = p.body.getReader(), this.o) {
          if (this.responseType) throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');
          this.response = [];
        } else this.response = this.responseText = "", this.v = new TextDecoder();
        Ja(this);
      } else p.text().then(this.Ra.bind(this), this.ga.bind(this));
    };
    function Ja(p) {
      p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p));
    }
    n.Pa = function(p) {
      if (this.g) {
        if (this.o && p.value) this.response.push(p.value);
        else if (!this.o) {
          var E = p.value ? p.value : new Uint8Array(0);
          (E = this.v.decode(E, {
            stream: !p.done
          })) && (this.response = this.responseText += E);
        }
        p.done ? Dr(this) : jr(this), this.readyState == 3 && Ja(this);
      }
    }, n.Ra = function(p) {
      this.g && (this.response = this.responseText = p, Dr(this));
    }, n.Qa = function(p) {
      this.g && (this.response = p, Dr(this));
    }, n.ga = function() {
      this.g && Dr(this);
    };
    function Dr(p) {
      p.readyState = 4, p.l = null, p.j = null, p.v = null, jr(p);
    }
    n.setRequestHeader = function(p, E) {
      this.u.append(p, E);
    }, n.getResponseHeader = function(p) {
      return this.h && this.h.get(p.toLowerCase()) || "";
    }, n.getAllResponseHeaders = function() {
      if (!this.h) return "";
      const p = [], E = this.h.entries();
      for (var k = E.next(); !k.done; ) k = k.value, p.push(k[0] + ": " + k[1]), k = E.next();
      return p.join(`\r
`);
    };
    function jr(p) {
      p.onreadystatechange && p.onreadystatechange.call(p);
    }
    Object.defineProperty(mi.prototype, "withCredentials", {
      get: function() {
        return this.m === "include";
      },
      set: function(p) {
        this.m = p ? "include" : "same-origin";
      }
    });
    function ms(p) {
      let E = "";
      return ge(p, function(k, $) {
        E += $, E += ":", E += k, E += `\r
`;
      }), E;
    }
    function zs(p, E, k) {
      e: {
        for ($ in k) {
          var $ = false;
          break e;
        }
        $ = true;
      }
      $ || (k = ms(k), typeof p == "string" ? k != null && encodeURIComponent(String(k)) : Lt(p, E, k));
    }
    function Wt(p) {
      Dt.call(this), this.headers = /* @__PURE__ */ new Map(), this.o = p || null, this.h = false, this.v = this.g = null, this.D = "", this.m = 0, this.l = "", this.j = this.B = this.u = this.A = false, this.I = null, this.H = "", this.J = false;
    }
    P(Wt, Dt);
    var Jl = /^https?$/i, vi = [
      "POST",
      "PUT"
    ];
    n = Wt.prototype, n.Ha = function(p) {
      this.J = p;
    }, n.ea = function(p, E, k, $) {
      if (this.g) throw Error("[goog.net.XhrIo] Object is active with another request=" + this.D + "; newUri=" + p);
      E = E ? E.toUpperCase() : "GET", this.D = p, this.l = "", this.m = 0, this.A = false, this.h = true, this.g = this.o ? this.o.g() : Ar.g(), this.v = this.o ? kr(this.o) : kr(Ar), this.g.onreadystatechange = S(this.Ea, this);
      try {
        this.B = true, this.g.open(E, String(p), true), this.B = false;
      } catch (ue) {
        yi(this, ue);
        return;
      }
      if (p = k || "", k = new Map(this.headers), $) if (Object.getPrototypeOf($) === Object.prototype) for (var ne in $) k.set(ne, $[ne]);
      else if (typeof $.keys == "function" && typeof $.get == "function") for (const ue of $.keys()) k.set(ue, $.get(ue));
      else throw Error("Unknown input type for opt_headers: " + String($));
      $ = Array.from(k.keys()).find((ue) => ue.toLowerCase() == "content-type"), ne = f.FormData && p instanceof f.FormData, !(0 <= Array.prototype.indexOf.call(vi, E, void 0)) || $ || ne || k.set("Content-Type", "application/x-www-form-urlencoded;charset=utf-8");
      for (const [ue, Ae] of k) this.g.setRequestHeader(ue, Ae);
      this.H && (this.g.responseType = this.H), "withCredentials" in this.g && this.g.withCredentials !== this.J && (this.g.withCredentials = this.J);
      try {
        Yi(this), this.u = true, this.g.send(p), this.u = false;
      } catch (ue) {
        yi(this, ue);
      }
    };
    function yi(p, E) {
      p.h = false, p.g && (p.j = true, p.g.abort(), p.j = false), p.l = E, p.m = 5, Us(p), qn(p);
    }
    function Us(p) {
      p.A || (p.A = true, kt(p, "complete"), kt(p, "error"));
    }
    n.abort = function(p) {
      this.g && this.h && (this.h = false, this.j = true, this.g.abort(), this.j = false, this.m = p || 7, kt(this, "complete"), kt(this, "abort"), qn(this));
    }, n.N = function() {
      this.g && (this.h && (this.h = false, this.j = true, this.g.abort(), this.j = false), qn(this, true)), Wt.aa.N.call(this);
    }, n.Ea = function() {
      this.s || (this.B || this.u || this.j ? vs(this) : this.bb());
    }, n.bb = function() {
      vs(this);
    };
    function vs(p) {
      if (p.h && typeof c < "u" && (!p.v[1] || Kn(p) != 4 || p.Z() != 2)) {
        if (p.u && Kn(p) == 4) Xr(p.Ea, 0, p);
        else if (kt(p, "readystatechange"), Kn(p) == 4) {
          p.h = false;
          try {
            const Ae = p.Z();
            e: switch (Ae) {
              case 200:
              case 201:
              case 202:
              case 204:
              case 206:
              case 304:
              case 1223:
                var E = true;
                break e;
              default:
                E = false;
            }
            var k;
            if (!(k = E)) {
              var $;
              if ($ = Ae === 0) {
                var ne = String(p.D).match(pi)[1] || null;
                !ne && f.self && f.self.location && (ne = f.self.location.protocol.slice(0, -1)), $ = !Jl.test(ne ? ne.toLowerCase() : "");
              }
              k = $;
            }
            if (k) kt(p, "complete"), kt(p, "success");
            else {
              p.m = 6;
              try {
                var ue = 2 < Kn(p) ? p.g.statusText : "";
              } catch {
                ue = "";
              }
              p.l = ue + " [" + p.Z() + "]", Us(p);
            }
          } finally {
            qn(p);
          }
        }
      }
    }
    function qn(p, E) {
      if (p.g) {
        Yi(p);
        const k = p.g, $ = p.v[0] ? () => {
        } : null;
        p.g = null, p.v = null, E || kt(p, "ready");
        try {
          k.onreadystatechange = $;
        } catch {
        }
      }
    }
    function Yi(p) {
      p.I && (f.clearTimeout(p.I), p.I = null);
    }
    n.isActive = function() {
      return !!this.g;
    };
    function Kn(p) {
      return p.g ? p.g.readyState : 0;
    }
    n.Z = function() {
      try {
        return 2 < Kn(this) ? this.g.status : -1;
      } catch {
        return -1;
      }
    }, n.oa = function() {
      try {
        return this.g ? this.g.responseText : "";
      } catch {
        return "";
      }
    }, n.Oa = function(p) {
      if (this.g) {
        var E = this.g.responseText;
        return p && E.indexOf(p) == 0 && (E = E.substring(p.length)), Zr(E);
      }
    };
    function Xi(p) {
      try {
        if (!p.g) return null;
        if ("response" in p.g) return p.g.response;
        switch (p.H) {
          case "":
          case "text":
            return p.g.responseText;
          case "arraybuffer":
            if ("mozResponseArrayBuffer" in p.g) return p.g.mozResponseArrayBuffer;
        }
        return null;
      } catch {
        return null;
      }
    }
    function Ji(p) {
      const E = {};
      p = (p.g && 2 <= Kn(p) && p.g.getAllResponseHeaders() || "").split(`\r
`);
      for (let $ = 0; $ < p.length; $++) {
        if (W(p[$])) continue;
        var k = q(p[$]);
        const ne = k[0];
        if (k = k[1], typeof k != "string") continue;
        k = k.trim();
        const ue = E[ne] || [];
        E[ne] = ue, ue.push(k);
      }
      j(E, function($) {
        return $.join(", ");
      });
    }
    n.Ba = function() {
      return this.m;
    }, n.Ka = function() {
      return typeof this.l == "string" ? this.l : String(this.l);
    };
    function rs(p, E, k) {
      return k && k.internalChannelParams && k.internalChannelParams[p] || E;
    }
    function $o(p) {
      this.Aa = 0, this.i = [], this.j = new dt(), this.ia = this.qa = this.I = this.W = this.g = this.ya = this.D = this.H = this.m = this.S = this.o = null, this.Ya = this.U = 0, this.Va = rs("failFast", false, p), this.F = this.C = this.u = this.s = this.l = null, this.X = true, this.za = this.T = -1, this.Y = this.v = this.B = 0, this.Ta = rs("baseRetryDelayMs", 5e3, p), this.cb = rs("retryDelaySeedMs", 1e4, p), this.Wa = rs("forwardChannelMaxRetries", 2, p), this.wa = rs("forwardChannelRequestTimeoutMs", 2e4, p), this.pa = p && p.xmlHttpFactory || void 0, this.Xa = p && p.Tb || void 0, this.Ca = p && p.useFetchStreams || false, this.L = void 0, this.J = p && p.supportsCrossDomainXhr || false, this.K = "", this.h = new hi(p && p.concurrentRequestLimit), this.Da = new Xl(), this.P = p && p.fastHandshake || false, this.O = p && p.encodeInitMessageHeaders || false, this.P && this.O && (this.O = false), this.Ua = p && p.Rb || false, p && p.xa && this.j.xa(), p && p.forceLongPolling && (this.X = false), this.ba = !this.P && this.X && p && p.detectBufferingProxy || false, this.ja = void 0, p && p.longPollingTimeout && 0 < p.longPollingTimeout && (this.ja = p.longPollingTimeout), this.ca = void 0, this.R = 0, this.M = false, this.ka = this.A = null;
    }
    n = $o.prototype, n.la = 8, n.G = 1, n.connect = function(p, E, k, $) {
      Ft(0), this.W = p, this.H = E || {}, k && $ !== void 0 && (this.H.OSID = k, this.H.OAID = $), this.F = this.X, this.I = rc(this, null, this.W), ss(this);
    };
    function pn(p) {
      if (Zi(p), p.G == 3) {
        var E = p.U++, k = sr(p.I);
        if (Lt(k, "SID", p.K), Lt(k, "RID", E), Lt(k, "TYPE", "terminate"), ys(p, k), E = new Rr(p, p.j, E), E.L = 2, E.v = $s(sr(k)), k = false, f.navigator && f.navigator.sendBeacon) try {
          k = f.navigator.sendBeacon(E.v.toString(), "");
        } catch {
        }
        !k && f.Image && (new Image().src = E.v, k = true), k || (E.g = sc(E.j, null), E.g.ea(E.v)), E.F = Date.now(), zt(E);
      }
      nc(p);
    }
    function Or(p) {
      p.g && (Za(p), p.g.cancel(), p.g = null);
    }
    function Zi(p) {
      Or(p), p.u && (f.clearTimeout(p.u), p.u = null), Vo(p), p.h.cancel(), p.s && (typeof p.s == "number" && f.clearTimeout(p.s), p.s = null);
    }
    function ss(p) {
      if (!rr(p.h) && !p.s) {
        p.s = true;
        var E = p.Ga;
        Ye || pe(), he || (Ye(), he = true), Pe.add(E, p), p.B = 0;
      }
    }
    function Zl(p, E) {
      return Ba(p.h) >= p.h.j - (p.s ? 1 : 0) ? false : p.s ? (p.i = E.D.concat(p.i), true) : p.G == 1 || p.G == 2 || p.B >= (p.Va ? 0 : p.Wa) ? false : (p.s = Qt(S(p.Ga, p, E), tc(p, p.B)), p.B++, true);
    }
    n.Ga = function(p) {
      if (this.s) if (this.s = null, this.G == 1) {
        if (!p) {
          this.U = Math.floor(1e5 * Math.random()), p = this.U++;
          const ne = new Rr(this, this.j, p);
          let ue = this.o;
          if (this.S && (ue ? (ue = M(ue), B(ue, this.S)) : ue = this.S), this.m !== null || this.O || (ne.H = ue, ue = null), this.P) e: {
            for (var E = 0, k = 0; k < this.i.length; k++) {
              t: {
                var $ = this.i[k];
                if ("__data__" in $.map && ($ = $.map.__data__, typeof $ == "string")) {
                  $ = $.length;
                  break t;
                }
                $ = void 0;
              }
              if ($ === void 0) break;
              if (E += $, 4096 < E) {
                E = k;
                break e;
              }
              if (E === 4096 || k === this.i.length - 1) {
                E = k + 1;
                break e;
              }
            }
            E = 1e3;
          }
          else E = 1e3;
          E = Bs(this, ne, E), k = sr(this.I), Lt(k, "RID", p), Lt(k, "CVER", 22), this.D && Lt(k, "X-HTTP-Session-Id", this.D), ys(this, k), ue && (this.O ? E = "headers=" + encodeURIComponent(String(ms(ue))) + "&" + E : this.m && zs(k, this.m, ue)), Lo(this.h, ne), this.Ua && Lt(k, "TYPE", "init"), this.P ? (Lt(k, "$req", E), Lt(k, "SID", "null"), ne.T = true, qi(ne, k, null)) : qi(ne, k, E), this.G = 2;
        }
      } else this.G == 3 && (p ? wi(this, p) : this.i.length == 0 || rr(this.h) || wi(this));
    };
    function wi(p, E) {
      var k;
      E ? k = E.l : k = p.U++;
      const $ = sr(p.I);
      Lt($, "SID", p.K), Lt($, "RID", k), Lt($, "AID", p.T), ys(p, $), p.m && p.o && zs($, p.m, p.o), k = new Rr(p, p.j, k, p.B + 1), p.m === null && (k.H = p.o), E && (p.i = E.D.concat(p.i)), E = Bs(p, k, 1e3), k.I = Math.round(0.5 * p.wa) + Math.round(0.5 * p.wa * Math.random()), Lo(p.h, k), qi(k, $, E);
    }
    function ys(p, E) {
      p.H && ge(p.H, function(k, $) {
        Lt(E, $, k);
      }), p.l && Os({}, function(k, $) {
        Lt(E, $, k);
      });
    }
    function Bs(p, E, k) {
      k = Math.min(p.i.length, k);
      var $ = p.l ? S(p.l.Na, p.l, p) : null;
      e: {
        var ne = p.i;
        let ue = -1;
        for (; ; ) {
          const Ae = [
            "count=" + k
          ];
          ue == -1 ? 0 < k ? (ue = ne[0].g, Ae.push("ofs=" + ue)) : ue = 0 : Ae.push("ofs=" + ue);
          let Rt = true;
          for (let an = 0; an < k; an++) {
            let bt = ne[an].g;
            const gn = ne[an].map;
            if (bt -= ue, 0 > bt) ue = Math.max(0, ne[an].g - 100), Rt = false;
            else try {
              Xa(gn, Ae, "req" + bt + "_");
            } catch {
              $ && $(gn);
            }
          }
          if (Rt) {
            $ = Ae.join("&");
            break e;
          }
        }
      }
      return p = p.i.splice(0, k), E.D = p, $;
    }
    function _i(p) {
      if (!p.g && !p.u) {
        p.Y = 1;
        var E = p.Fa;
        Ye || pe(), he || (Ye(), he = true), Pe.add(E, p), p.v = 0;
      }
    }
    function Ws(p) {
      return p.g || p.u || 3 <= p.v ? false : (p.Y++, p.u = Qt(S(p.Fa, p), tc(p, p.v)), p.v++, true);
    }
    n.Fa = function() {
      if (this.u = null, ec(this), this.ba && !(this.M || this.g == null || 0 >= this.R)) {
        var p = 2 * this.R;
        this.j.info("BP detection timer enabled: " + p), this.A = Qt(S(this.ab, this), p);
      }
    }, n.ab = function() {
      this.A && (this.A = null, this.j.info("BP detection timeout reached."), this.j.info("Buffering proxy detected and switch to long-polling!"), this.F = false, this.M = true, Ft(10), Or(this), ec(this));
    };
    function Za(p) {
      p.A != null && (f.clearTimeout(p.A), p.A = null);
    }
    function ec(p) {
      p.g = new Rr(p, p.j, "rpc", p.Y), p.m === null && (p.g.H = p.o), p.g.O = 0;
      var E = sr(p.qa);
      Lt(E, "RID", "rpc"), Lt(E, "SID", p.K), Lt(E, "AID", p.T), Lt(E, "CI", p.F ? "0" : "1"), !p.F && p.ja && Lt(E, "TO", p.ja), Lt(E, "TYPE", "xmlhttp"), ys(p, E), p.m && p.o && zs(E, p.m, p.o), p.L && (p.g.I = p.L);
      var k = p.g;
      p = p.ia, k.L = 1, k.v = $s(sr(E)), k.m = null, k.P = true, jo(k, p);
    }
    n.Za = function() {
      this.C != null && (this.C = null, Or(this), Ws(this), Ft(19));
    };
    function Vo(p) {
      p.C != null && (f.clearTimeout(p.C), p.C = null);
    }
    function Fo(p, E) {
      var k = null;
      if (p.g == E) {
        Vo(p), Za(p), p.g = null;
        var $ = 2;
      } else if (jn(p.h, E)) k = E.D, Wa(p.h, E), $ = 1;
      else return;
      if (p.G != 0) {
        if (E.o) if ($ == 1) {
          k = E.m ? E.m.length : 0, E = Date.now() - E.F;
          var ne = p.B;
          $ = nt(), kt($, new Wn($, k)), ss(p);
        } else _i(p);
        else if (ne = E.s, ne == 3 || ne == 0 && 0 < E.X || !($ == 1 && Zl(p, E) || $ == 2 && Ws(p))) switch (k && 0 < k.length && (E = p.h, E.i = E.i.concat(k)), ne) {
          case 1:
            Hs(p, 5);
            break;
          case 4:
            Hs(p, 10);
            break;
          case 3:
            Hs(p, 6);
            break;
          default:
            Hs(p, 2);
        }
      }
    }
    function tc(p, E) {
      let k = p.Ta + Math.floor(Math.random() * p.cb);
      return p.isActive() || (k *= 2), k * E;
    }
    function Hs(p, E) {
      if (p.j.info("Error code " + E), E == 2) {
        var k = S(p.fb, p), $ = p.Xa;
        const ne = !$;
        $ = new ps($ || "//www.google.com/images/cleardot.gif"), f.location && f.location.protocol == "http" || gi($, "https"), $s($), ne ? Yl($.toString(), k) : Ya($.toString(), k);
      } else Ft(2);
      p.G = 0, p.l && p.l.sa(E), nc(p), Zi(p);
    }
    n.fb = function(p) {
      p ? (this.j.info("Successfully pinged google.com"), Ft(2)) : (this.j.info("Failed to ping google.com"), Ft(1));
    };
    function nc(p) {
      if (p.G = 0, p.ka = [], p.l) {
        const E = Ha(p.h);
        (E.length != 0 || p.i.length != 0) && (L(p.ka, E), L(p.ka, p.i), p.h.i.length = 0, O(p.i), p.i.length = 0), p.l.ra();
      }
    }
    function rc(p, E, k) {
      var $ = k instanceof ps ? sr(k) : new ps(k);
      if ($.g != "") E && ($.g = E + "." + $.g), Ls($, $.s);
      else {
        var ne = f.location;
        $ = ne.protocol, E = E ? E + "." + ne.hostname : ne.hostname, ne = +ne.port;
        var ue = new ps(null);
        $ && gi(ue, $), E && (ue.g = E), ne && Ls(ue, ne), k && (ue.l = k), $ = ue;
      }
      return k = p.D, E = p.ya, k && E && Lt($, k, E), Lt($, "VER", p.la), ys(p, $), $;
    }
    function sc(p, E, k) {
      if (E && !p.J) throw Error("Can't create secondary domain capable XhrIo object.");
      return E = p.Ca && !p.pa ? new Wt(new gs({
        eb: k
      })) : new Wt(p.pa), E.Ha(p.J), E;
    }
    n.isActive = function() {
      return !!this.l && this.l.isActive(this);
    };
    function el() {
    }
    n = el.prototype, n.ua = function() {
    }, n.ta = function() {
    }, n.sa = function() {
    }, n.ra = function() {
    }, n.isActive = function() {
      return true;
    }, n.Na = function() {
    };
    function eo() {
    }
    eo.prototype.g = function(p, E) {
      return new On(p, E);
    };
    function On(p, E) {
      Dt.call(this), this.g = new $o(E), this.l = p, this.h = E && E.messageUrlParams || null, p = E && E.messageHeaders || null, E && E.clientProtocolHeaderRequired && (p ? p["X-Client-Protocol"] = "webchannel" : p = {
        "X-Client-Protocol": "webchannel"
      }), this.g.o = p, p = E && E.initMessageHeaders || null, E && E.messageContentType && (p ? p["X-WebChannel-Content-Type"] = E.messageContentType : p = {
        "X-WebChannel-Content-Type": E.messageContentType
      }), E && E.va && (p ? p["X-WebChannel-Client-Profile"] = E.va : p = {
        "X-WebChannel-Client-Profile": E.va
      }), this.g.S = p, (p = E && E.Sb) && !W(p) && (this.g.m = p), this.v = E && E.supportsCrossDomainXhr || false, this.u = E && E.sendRawJson || false, (E = E && E.httpSessionIdParam) && !W(E) && (this.g.D = E, p = this.h, p !== null && E in p && (p = this.h, E in p && delete p[E])), this.j = new ws(this);
    }
    P(On, Dt), On.prototype.m = function() {
      this.g.l = this.j, this.v && (this.g.J = true), this.g.connect(this.l, this.h || void 0);
    }, On.prototype.close = function() {
      pn(this.g);
    }, On.prototype.o = function(p) {
      var E = this.g;
      if (typeof p == "string") {
        var k = {};
        k.__data__ = p, p = k;
      } else this.u && (k = {}, k.__data__ = tr(p), p = k);
      E.i.push(new Ua(E.Ya++, p)), E.G == 3 && ss(E);
    }, On.prototype.N = function() {
      this.g.l = null, delete this.j, pn(this.g), delete this.g, On.aa.N.call(this);
    };
    function tl(p) {
      Nn.call(this), p.__headers__ && (this.headers = p.__headers__, this.statusCode = p.__status__, delete p.__headers__, delete p.__status__);
      var E = p.__sm__;
      if (E) {
        e: {
          for (const k in E) {
            p = k;
            break e;
          }
          p = void 0;
        }
        (this.i = p) && (p = this.i, E = E !== null && p in E ? E[p] : void 0), this.data = E;
      } else this.data = p;
    }
    P(tl, Nn);
    function nl() {
      ce.call(this), this.status = 1;
    }
    P(nl, ce);
    function ws(p) {
      this.g = p;
    }
    P(ws, el), ws.prototype.ua = function() {
      kt(this.g, "a");
    }, ws.prototype.ta = function(p) {
      kt(this.g, new tl(p));
    }, ws.prototype.sa = function(p) {
      kt(this.g, new nl());
    }, ws.prototype.ra = function() {
      kt(this.g, "b");
    }, eo.prototype.createWebChannel = eo.prototype.g, On.prototype.send = On.prototype.o, On.prototype.open = On.prototype.m, On.prototype.close = On.prototype.close, E2 = function() {
      return new eo();
    }, x2 = function() {
      return nt();
    }, _2 = je, Zv = {
      mb: 0,
      pb: 1,
      qb: 2,
      Jb: 3,
      Ob: 4,
      Lb: 5,
      Mb: 6,
      Kb: 7,
      Ib: 8,
      Nb: 9,
      PROXY: 10,
      NOPROXY: 11,
      Gb: 12,
      Cb: 13,
      Db: 14,
      Bb: 15,
      Eb: 16,
      Fb: 17,
      ib: 18,
      hb: 19,
      jb: 20
    }, Ds.NO_ERROR = 0, Ds.TIMEOUT = 8, Ds.HTTP_ERROR = 6, Eg = Ds, $a.COMPLETE = "complete", w2 = $a, nr.EventType = fn, fn.OPEN = "a", fn.CLOSE = "b", fn.ERROR = "c", fn.MESSAGE = "d", Dt.prototype.listen = Dt.prototype.K, uf = nr, Wt.prototype.listenOnce = Wt.prototype.L, Wt.prototype.getLastError = Wt.prototype.Ka, Wt.prototype.getLastErrorCode = Wt.prototype.Ba, Wt.prototype.getStatus = Wt.prototype.Z, Wt.prototype.getResponseJson = Wt.prototype.Oa, Wt.prototype.getResponseText = Wt.prototype.oa, Wt.prototype.send = Wt.prototype.ea, Wt.prototype.setWithCredentials = Wt.prototype.Ha, y2 = Wt;
  }).apply(typeof ag < "u" ? ag : typeof self < "u" ? self : typeof window < "u" ? window : {});
  const ux = "@firebase/firestore", dx = "4.7.10";
  class hr {
    constructor(e) {
      this.uid = e;
    }
    isAuthenticated() {
      return this.uid != null;
    }
    toKey() {
      return this.isAuthenticated() ? "uid:" + this.uid : "anonymous-user";
    }
    isEqual(e) {
      return e.uid === this.uid;
    }
  }
  hr.UNAUTHENTICATED = new hr(null), hr.GOOGLE_CREDENTIALS = new hr("google-credentials-uid"), hr.FIRST_PARTY = new hr("first-party-uid"), hr.MOCK_USER = new hr("mock-user");
  let ku = "11.5.0";
  const Vl = new dm("@firebase/firestore");
  function iu() {
    return Vl.logLevel;
  }
  function Ue(n, ...e) {
    if (Vl.logLevel <= Tt.DEBUG) {
      const t = e.map(t1);
      Vl.debug(`Firestore (${ku}): ${n}`, ...t);
    }
  }
  function ko(n, ...e) {
    if (Vl.logLevel <= Tt.ERROR) {
      const t = e.map(t1);
      Vl.error(`Firestore (${ku}): ${n}`, ...t);
    }
  }
  function gu(n, ...e) {
    if (Vl.logLevel <= Tt.WARN) {
      const t = e.map(t1);
      Vl.warn(`Firestore (${ku}): ${n}`, ...t);
    }
  }
  function t1(n) {
    if (typeof n == "string") return n;
    try {
      return function(t) {
        return JSON.stringify(t);
      }(n);
    } catch {
      return n;
    }
  }
  function st(n = "Unexpected state") {
    const e = `FIRESTORE (${ku}) INTERNAL ASSERTION FAILED: ` + n;
    throw ko(e), new Error(e);
  }
  function $t(n, e) {
    n || st();
  }
  function ct(n, e) {
    return n;
  }
  const _e = {
    OK: "ok",
    CANCELLED: "cancelled",
    UNKNOWN: "unknown",
    INVALID_ARGUMENT: "invalid-argument",
    DEADLINE_EXCEEDED: "deadline-exceeded",
    NOT_FOUND: "not-found",
    ALREADY_EXISTS: "already-exists",
    PERMISSION_DENIED: "permission-denied",
    UNAUTHENTICATED: "unauthenticated",
    RESOURCE_EXHAUSTED: "resource-exhausted",
    FAILED_PRECONDITION: "failed-precondition",
    ABORTED: "aborted",
    OUT_OF_RANGE: "out-of-range",
    UNIMPLEMENTED: "unimplemented",
    INTERNAL: "internal",
    UNAVAILABLE: "unavailable",
    DATA_LOSS: "data-loss"
  };
  class He extends ui {
    constructor(e, t) {
      super(e, t), this.code = e, this.message = t, this.toString = () => `${this.name}: [code=${this.code}]: ${this.message}`;
    }
  }
  class To {
    constructor() {
      this.promise = new Promise((e, t) => {
        this.resolve = e, this.reject = t;
      });
    }
  }
  class b2 {
    constructor(e, t) {
      this.user = t, this.type = "OAuth", this.headers = /* @__PURE__ */ new Map(), this.headers.set("Authorization", `Bearer ${e}`);
    }
  }
  class sD {
    getToken() {
      return Promise.resolve(null);
    }
    invalidateToken() {
    }
    start(e, t) {
      e.enqueueRetryable(() => t(hr.UNAUTHENTICATED));
    }
    shutdown() {
    }
  }
  class iD {
    constructor(e) {
      this.token = e, this.changeListener = null;
    }
    getToken() {
      return Promise.resolve(this.token);
    }
    invalidateToken() {
    }
    start(e, t) {
      this.changeListener = t, e.enqueueRetryable(() => t(this.token.user));
    }
    shutdown() {
      this.changeListener = null;
    }
  }
  class oD {
    constructor(e) {
      this.t = e, this.currentUser = hr.UNAUTHENTICATED, this.i = 0, this.forceRefresh = false, this.auth = null;
    }
    start(e, t) {
      $t(this.o === void 0);
      let r = this.i;
      const i = (m) => this.i !== r ? (r = this.i, t(m)) : Promise.resolve();
      let l = new To();
      this.o = () => {
        this.i++, this.currentUser = this.u(), l.resolve(), l = new To(), e.enqueueRetryable(() => i(this.currentUser));
      };
      const c = () => {
        const m = l;
        e.enqueueRetryable(async () => {
          await m.promise, await i(this.currentUser);
        });
      }, f = (m) => {
        Ue("FirebaseAuthCredentialsProvider", "Auth detected"), this.auth = m, this.o && (this.auth.addAuthTokenListener(this.o), c());
      };
      this.t.onInit((m) => f(m)), setTimeout(() => {
        if (!this.auth) {
          const m = this.t.getImmediate({
            optional: true
          });
          m ? f(m) : (Ue("FirebaseAuthCredentialsProvider", "Auth not yet detected"), l.resolve(), l = new To());
        }
      }, 0), c();
    }
    getToken() {
      const e = this.i, t = this.forceRefresh;
      return this.forceRefresh = false, this.auth ? this.auth.getToken(t).then((r) => this.i !== e ? (Ue("FirebaseAuthCredentialsProvider", "getToken aborted due to token change."), this.getToken()) : r ? ($t(typeof r.accessToken == "string"), new b2(r.accessToken, this.currentUser)) : null) : Promise.resolve(null);
    }
    invalidateToken() {
      this.forceRefresh = true;
    }
    shutdown() {
      this.auth && this.o && this.auth.removeAuthTokenListener(this.o), this.o = void 0;
    }
    u() {
      const e = this.auth && this.auth.getUid();
      return $t(e === null || typeof e == "string"), new hr(e);
    }
  }
  class aD {
    constructor(e, t, r) {
      this.l = e, this.h = t, this.P = r, this.type = "FirstParty", this.user = hr.FIRST_PARTY, this.T = /* @__PURE__ */ new Map();
    }
    I() {
      return this.P ? this.P() : null;
    }
    get headers() {
      this.T.set("X-Goog-AuthUser", this.l);
      const e = this.I();
      return e && this.T.set("Authorization", e), this.h && this.T.set("X-Goog-Iam-Authorization-Token", this.h), this.T;
    }
  }
  class lD {
    constructor(e, t, r) {
      this.l = e, this.h = t, this.P = r;
    }
    getToken() {
      return Promise.resolve(new aD(this.l, this.h, this.P));
    }
    start(e, t) {
      e.enqueueRetryable(() => t(hr.FIRST_PARTY));
    }
    shutdown() {
    }
    invalidateToken() {
    }
  }
  class fx {
    constructor(e) {
      this.value = e, this.type = "AppCheck", this.headers = /* @__PURE__ */ new Map(), e && e.length > 0 && this.headers.set("x-firebase-appcheck", this.value);
    }
  }
  class cD {
    constructor(e, t) {
      this.A = t, this.forceRefresh = false, this.appCheck = null, this.R = null, this.V = null, ds(e) && e.settings.appCheckToken && (this.V = e.settings.appCheckToken);
    }
    start(e, t) {
      $t(this.o === void 0);
      const r = (l) => {
        l.error != null && Ue("FirebaseAppCheckTokenProvider", `Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);
        const c = l.token !== this.R;
        return this.R = l.token, Ue("FirebaseAppCheckTokenProvider", `Received ${c ? "new" : "existing"} token.`), c ? t(l.token) : Promise.resolve();
      };
      this.o = (l) => {
        e.enqueueRetryable(() => r(l));
      };
      const i = (l) => {
        Ue("FirebaseAppCheckTokenProvider", "AppCheck detected"), this.appCheck = l, this.o && this.appCheck.addTokenListener(this.o);
      };
      this.A.onInit((l) => i(l)), setTimeout(() => {
        if (!this.appCheck) {
          const l = this.A.getImmediate({
            optional: true
          });
          l ? i(l) : Ue("FirebaseAppCheckTokenProvider", "AppCheck not yet detected");
        }
      }, 0);
    }
    getToken() {
      if (this.V) return Promise.resolve(new fx(this.V));
      const e = this.forceRefresh;
      return this.forceRefresh = false, this.appCheck ? this.appCheck.getToken(e).then((t) => t ? ($t(typeof t.token == "string"), this.R = t.token, new fx(t.token)) : null) : Promise.resolve(null);
    }
    invalidateToken() {
      this.forceRefresh = true;
    }
    shutdown() {
      this.appCheck && this.o && this.appCheck.removeTokenListener(this.o), this.o = void 0;
    }
  }
  function uD(n) {
    const e = typeof self < "u" && (self.crypto || self.msCrypto), t = new Uint8Array(n);
    if (e && typeof e.getRandomValues == "function") e.getRandomValues(t);
    else for (let r = 0; r < n; r++) t[r] = Math.floor(256 * Math.random());
    return t;
  }
  function T2() {
    return new TextEncoder();
  }
  class C2 {
    static newId() {
      const e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", t = 62 * Math.floor(4.129032258064516);
      let r = "";
      for (; r.length < 20; ) {
        const i = uD(40);
        for (let l = 0; l < i.length; ++l) r.length < 20 && i[l] < t && (r += e.charAt(i[l] % 62));
      }
      return r;
    }
  }
  function vt(n, e) {
    return n < e ? -1 : n > e ? 1 : 0;
  }
  function ey(n, e) {
    let t = 0;
    for (; t < n.length && t < e.length; ) {
      const r = n.codePointAt(t), i = e.codePointAt(t);
      if (r !== i) {
        if (r < 128 && i < 128) return vt(r, i);
        {
          const l = T2(), c = dD(l.encode(hx(n, t)), l.encode(hx(e, t)));
          return c !== 0 ? c : vt(r, i);
        }
      }
      t += r > 65535 ? 2 : 1;
    }
    return vt(n.length, e.length);
  }
  function hx(n, e) {
    return n.codePointAt(e) > 65535 ? n.substring(e, e + 2) : n.substring(e, e + 1);
  }
  function dD(n, e) {
    for (let t = 0; t < n.length && t < e.length; ++t) if (n[t] !== e[t]) return vt(n[t], e[t]);
    return vt(n.length, e.length);
  }
  function mu(n, e, t) {
    return n.length === e.length && n.every((r, i) => t(r, e[i]));
  }
  const px = -62135596800, gx = 1e6;
  class An {
    static now() {
      return An.fromMillis(Date.now());
    }
    static fromDate(e) {
      return An.fromMillis(e.getTime());
    }
    static fromMillis(e) {
      const t = Math.floor(e / 1e3), r = Math.floor((e - 1e3 * t) * gx);
      return new An(t, r);
    }
    constructor(e, t) {
      if (this.seconds = e, this.nanoseconds = t, t < 0) throw new He(_e.INVALID_ARGUMENT, "Timestamp nanoseconds out of range: " + t);
      if (t >= 1e9) throw new He(_e.INVALID_ARGUMENT, "Timestamp nanoseconds out of range: " + t);
      if (e < px) throw new He(_e.INVALID_ARGUMENT, "Timestamp seconds out of range: " + e);
      if (e >= 253402300800) throw new He(_e.INVALID_ARGUMENT, "Timestamp seconds out of range: " + e);
    }
    toDate() {
      return new Date(this.toMillis());
    }
    toMillis() {
      return 1e3 * this.seconds + this.nanoseconds / gx;
    }
    _compareTo(e) {
      return this.seconds === e.seconds ? vt(this.nanoseconds, e.nanoseconds) : vt(this.seconds, e.seconds);
    }
    isEqual(e) {
      return e.seconds === this.seconds && e.nanoseconds === this.nanoseconds;
    }
    toString() {
      return "Timestamp(seconds=" + this.seconds + ", nanoseconds=" + this.nanoseconds + ")";
    }
    toJSON() {
      return {
        seconds: this.seconds,
        nanoseconds: this.nanoseconds
      };
    }
    valueOf() {
      const e = this.seconds - px;
      return String(e).padStart(12, "0") + "." + String(this.nanoseconds).padStart(9, "0");
    }
  }
  class ot {
    static fromTimestamp(e) {
      return new ot(e);
    }
    static min() {
      return new ot(new An(0, 0));
    }
    static max() {
      return new ot(new An(253402300799, 999999999));
    }
    constructor(e) {
      this.timestamp = e;
    }
    compareTo(e) {
      return this.timestamp._compareTo(e.timestamp);
    }
    isEqual(e) {
      return this.timestamp.isEqual(e.timestamp);
    }
    toMicroseconds() {
      return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;
    }
    toString() {
      return "SnapshotVersion(" + this.timestamp.toString() + ")";
    }
    toTimestamp() {
      return this.timestamp;
    }
  }
  const mx = "__name__";
  class Li {
    constructor(e, t, r) {
      t === void 0 ? t = 0 : t > e.length && st(), r === void 0 ? r = e.length - t : r > e.length - t && st(), this.segments = e, this.offset = t, this.len = r;
    }
    get length() {
      return this.len;
    }
    isEqual(e) {
      return Li.comparator(this, e) === 0;
    }
    child(e) {
      const t = this.segments.slice(this.offset, this.limit());
      return e instanceof Li ? e.forEach((r) => {
        t.push(r);
      }) : t.push(e), this.construct(t);
    }
    limit() {
      return this.offset + this.length;
    }
    popFirst(e) {
      return e = e === void 0 ? 1 : e, this.construct(this.segments, this.offset + e, this.length - e);
    }
    popLast() {
      return this.construct(this.segments, this.offset, this.length - 1);
    }
    firstSegment() {
      return this.segments[this.offset];
    }
    lastSegment() {
      return this.get(this.length - 1);
    }
    get(e) {
      return this.segments[this.offset + e];
    }
    isEmpty() {
      return this.length === 0;
    }
    isPrefixOf(e) {
      if (e.length < this.length) return false;
      for (let t = 0; t < this.length; t++) if (this.get(t) !== e.get(t)) return false;
      return true;
    }
    isImmediateParentOf(e) {
      if (this.length + 1 !== e.length) return false;
      for (let t = 0; t < this.length; t++) if (this.get(t) !== e.get(t)) return false;
      return true;
    }
    forEach(e) {
      for (let t = this.offset, r = this.limit(); t < r; t++) e(this.segments[t]);
    }
    toArray() {
      return this.segments.slice(this.offset, this.limit());
    }
    static comparator(e, t) {
      const r = Math.min(e.length, t.length);
      for (let i = 0; i < r; i++) {
        const l = Li.compareSegments(e.get(i), t.get(i));
        if (l !== 0) return l;
      }
      return vt(e.length, t.length);
    }
    static compareSegments(e, t) {
      const r = Li.isNumericId(e), i = Li.isNumericId(t);
      return r && !i ? -1 : !r && i ? 1 : r && i ? Li.extractNumericId(e).compare(Li.extractNumericId(t)) : ey(e, t);
    }
    static isNumericId(e) {
      return e.startsWith("__id") && e.endsWith("__");
    }
    static extractNumericId(e) {
      return Ca.fromString(e.substring(4, e.length - 2));
    }
  }
  class Xt extends Li {
    construct(e, t, r) {
      return new Xt(e, t, r);
    }
    canonicalString() {
      return this.toArray().join("/");
    }
    toString() {
      return this.canonicalString();
    }
    toUriEncodedString() {
      return this.toArray().map(encodeURIComponent).join("/");
    }
    static fromString(...e) {
      const t = [];
      for (const r of e) {
        if (r.indexOf("//") >= 0) throw new He(_e.INVALID_ARGUMENT, `Invalid segment (${r}). Paths must not contain // in them.`);
        t.push(...r.split("/").filter((i) => i.length > 0));
      }
      return new Xt(t);
    }
    static emptyPath() {
      return new Xt([]);
    }
  }
  const fD = /^[_a-zA-Z][_a-zA-Z0-9]*$/;
  class Jn extends Li {
    construct(e, t, r) {
      return new Jn(e, t, r);
    }
    static isValidIdentifier(e) {
      return fD.test(e);
    }
    canonicalString() {
      return this.toArray().map((e) => (e = e.replace(/\\/g, "\\\\").replace(/`/g, "\\`"), Jn.isValidIdentifier(e) || (e = "`" + e + "`"), e)).join(".");
    }
    toString() {
      return this.canonicalString();
    }
    isKeyField() {
      return this.length === 1 && this.get(0) === mx;
    }
    static keyField() {
      return new Jn([
        mx
      ]);
    }
    static fromServerFormat(e) {
      const t = [];
      let r = "", i = 0;
      const l = () => {
        if (r.length === 0) throw new He(_e.INVALID_ARGUMENT, `Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);
        t.push(r), r = "";
      };
      let c = false;
      for (; i < e.length; ) {
        const f = e[i];
        if (f === "\\") {
          if (i + 1 === e.length) throw new He(_e.INVALID_ARGUMENT, "Path has trailing escape character: " + e);
          const m = e[i + 1];
          if (m !== "\\" && m !== "." && m !== "`") throw new He(_e.INVALID_ARGUMENT, "Path has invalid escape sequence: " + e);
          r += m, i += 2;
        } else f === "`" ? (c = !c, i++) : f !== "." || c ? (r += f, i++) : (l(), i++);
      }
      if (l(), c) throw new He(_e.INVALID_ARGUMENT, "Unterminated ` in path: " + e);
      return new Jn(t);
    }
    static emptyPath() {
      return new Jn([]);
    }
  }
  class Ze {
    constructor(e) {
      this.path = e;
    }
    static fromPath(e) {
      return new Ze(Xt.fromString(e));
    }
    static fromName(e) {
      return new Ze(Xt.fromString(e).popFirst(5));
    }
    static empty() {
      return new Ze(Xt.emptyPath());
    }
    get collectionGroup() {
      return this.path.popLast().lastSegment();
    }
    hasCollectionId(e) {
      return this.path.length >= 2 && this.path.get(this.path.length - 2) === e;
    }
    getCollectionGroup() {
      return this.path.get(this.path.length - 2);
    }
    getCollectionPath() {
      return this.path.popLast();
    }
    isEqual(e) {
      return e !== null && Xt.comparator(this.path, e.path) === 0;
    }
    toString() {
      return this.path.toString();
    }
    static comparator(e, t) {
      return Xt.comparator(e.path, t.path);
    }
    static isDocumentKey(e) {
      return e.length % 2 == 0;
    }
    static fromSegments(e) {
      return new Ze(new Xt(e.slice()));
    }
  }
  const kf = -1;
  function hD(n, e) {
    const t = n.toTimestamp().seconds, r = n.toTimestamp().nanoseconds + 1, i = ot.fromTimestamp(r === 1e9 ? new An(t + 1, 0) : new An(t, r));
    return new ka(i, Ze.empty(), e);
  }
  function pD(n) {
    return new ka(n.readTime, n.key, kf);
  }
  class ka {
    constructor(e, t, r) {
      this.readTime = e, this.documentKey = t, this.largestBatchId = r;
    }
    static min() {
      return new ka(ot.min(), Ze.empty(), kf);
    }
    static max() {
      return new ka(ot.max(), Ze.empty(), kf);
    }
  }
  function gD(n, e) {
    let t = n.readTime.compareTo(e.readTime);
    return t !== 0 ? t : (t = Ze.comparator(n.documentKey, e.documentKey), t !== 0 ? t : vt(n.largestBatchId, e.largestBatchId));
  }
  const mD = "The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";
  class vD {
    constructor() {
      this.onCommittedListeners = [];
    }
    addOnCommittedListener(e) {
      this.onCommittedListeners.push(e);
    }
    raiseOnCommittedEvent() {
      this.onCommittedListeners.forEach((e) => e());
    }
  }
  async function Au(n) {
    if (n.code !== _e.FAILED_PRECONDITION || n.message !== mD) throw n;
    Ue("LocalStore", "Unexpectedly lost primary lease");
  }
  class we {
    constructor(e) {
      this.nextCallback = null, this.catchCallback = null, this.result = void 0, this.error = void 0, this.isDone = false, this.callbackAttached = false, e((t) => {
        this.isDone = true, this.result = t, this.nextCallback && this.nextCallback(t);
      }, (t) => {
        this.isDone = true, this.error = t, this.catchCallback && this.catchCallback(t);
      });
    }
    catch(e) {
      return this.next(void 0, e);
    }
    next(e, t) {
      return this.callbackAttached && st(), this.callbackAttached = true, this.isDone ? this.error ? this.wrapFailure(t, this.error) : this.wrapSuccess(e, this.result) : new we((r, i) => {
        this.nextCallback = (l) => {
          this.wrapSuccess(e, l).next(r, i);
        }, this.catchCallback = (l) => {
          this.wrapFailure(t, l).next(r, i);
        };
      });
    }
    toPromise() {
      return new Promise((e, t) => {
        this.next(e, t);
      });
    }
    wrapUserFunction(e) {
      try {
        const t = e();
        return t instanceof we ? t : we.resolve(t);
      } catch (t) {
        return we.reject(t);
      }
    }
    wrapSuccess(e, t) {
      return e ? this.wrapUserFunction(() => e(t)) : we.resolve(t);
    }
    wrapFailure(e, t) {
      return e ? this.wrapUserFunction(() => e(t)) : we.reject(t);
    }
    static resolve(e) {
      return new we((t, r) => {
        t(e);
      });
    }
    static reject(e) {
      return new we((t, r) => {
        r(e);
      });
    }
    static waitFor(e) {
      return new we((t, r) => {
        let i = 0, l = 0, c = false;
        e.forEach((f) => {
          ++i, f.next(() => {
            ++l, c && l === i && t();
          }, (m) => r(m));
        }), c = true, l === i && t();
      });
    }
    static or(e) {
      let t = we.resolve(false);
      for (const r of e) t = t.next((i) => i ? we.resolve(i) : r());
      return t;
    }
    static forEach(e, t) {
      const r = [];
      return e.forEach((i, l) => {
        r.push(t.call(this, i, l));
      }), this.waitFor(r);
    }
    static mapArray(e, t) {
      return new we((r, i) => {
        const l = e.length, c = new Array(l);
        let f = 0;
        for (let m = 0; m < l; m++) {
          const y = m;
          t(e[y]).next((x) => {
            c[y] = x, ++f, f === l && r(c);
          }, (x) => i(x));
        }
      });
    }
    static doWhile(e, t) {
      return new we((r, i) => {
        const l = () => {
          e() === true ? t().next(() => {
            l();
          }, i) : r();
        };
        l();
      });
    }
  }
  function yD(n) {
    const e = n.match(/Android ([\d.]+)/i), t = e ? e[1].split(".").slice(0, 2).join(".") : "-1";
    return Number(t);
  }
  function Ru(n) {
    return n.name === "IndexedDbTransactionError";
  }
  class gm {
    constructor(e, t) {
      this.previousValue = e, t && (t.sequenceNumberHandler = (r) => this.oe(r), this._e = (r) => t.writeSequenceNumber(r));
    }
    oe(e) {
      return this.previousValue = Math.max(e, this.previousValue), this.previousValue;
    }
    next() {
      const e = ++this.previousValue;
      return this._e && this._e(e), e;
    }
  }
  gm.ae = -1;
  const n1 = -1;
  function mm(n) {
    return n == null;
  }
  function zg(n) {
    return n === 0 && 1 / n == -1 / 0;
  }
  function wD(n) {
    return typeof n == "number" && Number.isInteger(n) && !zg(n) && n <= Number.MAX_SAFE_INTEGER && n >= Number.MIN_SAFE_INTEGER;
  }
  const S2 = "";
  function _D(n) {
    let e = "";
    for (let t = 0; t < n.length; t++) e.length > 0 && (e = vx(e)), e = xD(n.get(t), e);
    return vx(e);
  }
  function xD(n, e) {
    let t = e;
    const r = n.length;
    for (let i = 0; i < r; i++) {
      const l = n.charAt(i);
      switch (l) {
        case "\0":
          t += "";
          break;
        case S2:
          t += "";
          break;
        default:
          t += l;
      }
    }
    return t;
  }
  function vx(n) {
    return n + S2 + "";
  }
  function yx(n) {
    let e = 0;
    for (const t in n) Object.prototype.hasOwnProperty.call(n, t) && e++;
    return e;
  }
  function La(n, e) {
    for (const t in n) Object.prototype.hasOwnProperty.call(n, t) && e(t, n[t]);
  }
  function I2(n) {
    for (const e in n) if (Object.prototype.hasOwnProperty.call(n, e)) return false;
    return true;
  }
  class sn {
    constructor(e, t) {
      this.comparator = e, this.root = t || Xn.EMPTY;
    }
    insert(e, t) {
      return new sn(this.comparator, this.root.insert(e, t, this.comparator).copy(null, null, Xn.BLACK, null, null));
    }
    remove(e) {
      return new sn(this.comparator, this.root.remove(e, this.comparator).copy(null, null, Xn.BLACK, null, null));
    }
    get(e) {
      let t = this.root;
      for (; !t.isEmpty(); ) {
        const r = this.comparator(e, t.key);
        if (r === 0) return t.value;
        r < 0 ? t = t.left : r > 0 && (t = t.right);
      }
      return null;
    }
    indexOf(e) {
      let t = 0, r = this.root;
      for (; !r.isEmpty(); ) {
        const i = this.comparator(e, r.key);
        if (i === 0) return t + r.left.size;
        i < 0 ? r = r.left : (t += r.left.size + 1, r = r.right);
      }
      return -1;
    }
    isEmpty() {
      return this.root.isEmpty();
    }
    get size() {
      return this.root.size;
    }
    minKey() {
      return this.root.minKey();
    }
    maxKey() {
      return this.root.maxKey();
    }
    inorderTraversal(e) {
      return this.root.inorderTraversal(e);
    }
    forEach(e) {
      this.inorderTraversal((t, r) => (e(t, r), false));
    }
    toString() {
      const e = [];
      return this.inorderTraversal((t, r) => (e.push(`${t}:${r}`), false)), `{${e.join(", ")}}`;
    }
    reverseTraversal(e) {
      return this.root.reverseTraversal(e);
    }
    getIterator() {
      return new lg(this.root, null, this.comparator, false);
    }
    getIteratorFrom(e) {
      return new lg(this.root, e, this.comparator, false);
    }
    getReverseIterator() {
      return new lg(this.root, null, this.comparator, true);
    }
    getReverseIteratorFrom(e) {
      return new lg(this.root, e, this.comparator, true);
    }
  }
  class lg {
    constructor(e, t, r, i) {
      this.isReverse = i, this.nodeStack = [];
      let l = 1;
      for (; !e.isEmpty(); ) if (l = t ? r(e.key, t) : 1, t && i && (l *= -1), l < 0) e = this.isReverse ? e.left : e.right;
      else {
        if (l === 0) {
          this.nodeStack.push(e);
          break;
        }
        this.nodeStack.push(e), e = this.isReverse ? e.right : e.left;
      }
    }
    getNext() {
      let e = this.nodeStack.pop();
      const t = {
        key: e.key,
        value: e.value
      };
      if (this.isReverse) for (e = e.left; !e.isEmpty(); ) this.nodeStack.push(e), e = e.right;
      else for (e = e.right; !e.isEmpty(); ) this.nodeStack.push(e), e = e.left;
      return t;
    }
    hasNext() {
      return this.nodeStack.length > 0;
    }
    peek() {
      if (this.nodeStack.length === 0) return null;
      const e = this.nodeStack[this.nodeStack.length - 1];
      return {
        key: e.key,
        value: e.value
      };
    }
  }
  class Xn {
    constructor(e, t, r, i, l) {
      this.key = e, this.value = t, this.color = r ?? Xn.RED, this.left = i ?? Xn.EMPTY, this.right = l ?? Xn.EMPTY, this.size = this.left.size + 1 + this.right.size;
    }
    copy(e, t, r, i, l) {
      return new Xn(e ?? this.key, t ?? this.value, r ?? this.color, i ?? this.left, l ?? this.right);
    }
    isEmpty() {
      return false;
    }
    inorderTraversal(e) {
      return this.left.inorderTraversal(e) || e(this.key, this.value) || this.right.inorderTraversal(e);
    }
    reverseTraversal(e) {
      return this.right.reverseTraversal(e) || e(this.key, this.value) || this.left.reverseTraversal(e);
    }
    min() {
      return this.left.isEmpty() ? this : this.left.min();
    }
    minKey() {
      return this.min().key;
    }
    maxKey() {
      return this.right.isEmpty() ? this.key : this.right.maxKey();
    }
    insert(e, t, r) {
      let i = this;
      const l = r(e, i.key);
      return i = l < 0 ? i.copy(null, null, null, i.left.insert(e, t, r), null) : l === 0 ? i.copy(null, t, null, null, null) : i.copy(null, null, null, null, i.right.insert(e, t, r)), i.fixUp();
    }
    removeMin() {
      if (this.left.isEmpty()) return Xn.EMPTY;
      let e = this;
      return e.left.isRed() || e.left.left.isRed() || (e = e.moveRedLeft()), e = e.copy(null, null, null, e.left.removeMin(), null), e.fixUp();
    }
    remove(e, t) {
      let r, i = this;
      if (t(e, i.key) < 0) i.left.isEmpty() || i.left.isRed() || i.left.left.isRed() || (i = i.moveRedLeft()), i = i.copy(null, null, null, i.left.remove(e, t), null);
      else {
        if (i.left.isRed() && (i = i.rotateRight()), i.right.isEmpty() || i.right.isRed() || i.right.left.isRed() || (i = i.moveRedRight()), t(e, i.key) === 0) {
          if (i.right.isEmpty()) return Xn.EMPTY;
          r = i.right.min(), i = i.copy(r.key, r.value, null, null, i.right.removeMin());
        }
        i = i.copy(null, null, null, null, i.right.remove(e, t));
      }
      return i.fixUp();
    }
    isRed() {
      return this.color;
    }
    fixUp() {
      let e = this;
      return e.right.isRed() && !e.left.isRed() && (e = e.rotateLeft()), e.left.isRed() && e.left.left.isRed() && (e = e.rotateRight()), e.left.isRed() && e.right.isRed() && (e = e.colorFlip()), e;
    }
    moveRedLeft() {
      let e = this.colorFlip();
      return e.right.left.isRed() && (e = e.copy(null, null, null, null, e.right.rotateRight()), e = e.rotateLeft(), e = e.colorFlip()), e;
    }
    moveRedRight() {
      let e = this.colorFlip();
      return e.left.left.isRed() && (e = e.rotateRight(), e = e.colorFlip()), e;
    }
    rotateLeft() {
      const e = this.copy(null, null, Xn.RED, null, this.right.left);
      return this.right.copy(null, null, this.color, e, null);
    }
    rotateRight() {
      const e = this.copy(null, null, Xn.RED, this.left.right, null);
      return this.left.copy(null, null, this.color, null, e);
    }
    colorFlip() {
      const e = this.left.copy(null, null, !this.left.color, null, null), t = this.right.copy(null, null, !this.right.color, null, null);
      return this.copy(null, null, !this.color, e, t);
    }
    checkMaxDepth() {
      const e = this.check();
      return Math.pow(2, e) <= this.size + 1;
    }
    check() {
      if (this.isRed() && this.left.isRed() || this.right.isRed()) throw st();
      const e = this.left.check();
      if (e !== this.right.check()) throw st();
      return e + (this.isRed() ? 0 : 1);
    }
  }
  Xn.EMPTY = null, Xn.RED = true, Xn.BLACK = false;
  Xn.EMPTY = new class {
    constructor() {
      this.size = 0;
    }
    get key() {
      throw st();
    }
    get value() {
      throw st();
    }
    get color() {
      throw st();
    }
    get left() {
      throw st();
    }
    get right() {
      throw st();
    }
    copy(e, t, r, i, l) {
      return this;
    }
    insert(e, t, r) {
      return new Xn(e, t);
    }
    remove(e, t) {
      return this;
    }
    isEmpty() {
      return true;
    }
    inorderTraversal(e) {
      return false;
    }
    reverseTraversal(e) {
      return false;
    }
    minKey() {
      return null;
    }
    maxKey() {
      return null;
    }
    isRed() {
      return false;
    }
    checkMaxDepth() {
      return true;
    }
    check() {
      return 0;
    }
  }();
  class Rn {
    constructor(e) {
      this.comparator = e, this.data = new sn(this.comparator);
    }
    has(e) {
      return this.data.get(e) !== null;
    }
    first() {
      return this.data.minKey();
    }
    last() {
      return this.data.maxKey();
    }
    get size() {
      return this.data.size;
    }
    indexOf(e) {
      return this.data.indexOf(e);
    }
    forEach(e) {
      this.data.inorderTraversal((t, r) => (e(t), false));
    }
    forEachInRange(e, t) {
      const r = this.data.getIteratorFrom(e[0]);
      for (; r.hasNext(); ) {
        const i = r.getNext();
        if (this.comparator(i.key, e[1]) >= 0) return;
        t(i.key);
      }
    }
    forEachWhile(e, t) {
      let r;
      for (r = t !== void 0 ? this.data.getIteratorFrom(t) : this.data.getIterator(); r.hasNext(); ) if (!e(r.getNext().key)) return;
    }
    firstAfterOrEqual(e) {
      const t = this.data.getIteratorFrom(e);
      return t.hasNext() ? t.getNext().key : null;
    }
    getIterator() {
      return new wx(this.data.getIterator());
    }
    getIteratorFrom(e) {
      return new wx(this.data.getIteratorFrom(e));
    }
    add(e) {
      return this.copy(this.data.remove(e).insert(e, true));
    }
    delete(e) {
      return this.has(e) ? this.copy(this.data.remove(e)) : this;
    }
    isEmpty() {
      return this.data.isEmpty();
    }
    unionWith(e) {
      let t = this;
      return t.size < e.size && (t = e, e = this), e.forEach((r) => {
        t = t.add(r);
      }), t;
    }
    isEqual(e) {
      if (!(e instanceof Rn) || this.size !== e.size) return false;
      const t = this.data.getIterator(), r = e.data.getIterator();
      for (; t.hasNext(); ) {
        const i = t.getNext().key, l = r.getNext().key;
        if (this.comparator(i, l) !== 0) return false;
      }
      return true;
    }
    toArray() {
      const e = [];
      return this.forEach((t) => {
        e.push(t);
      }), e;
    }
    toString() {
      const e = [];
      return this.forEach((t) => e.push(t)), "SortedSet(" + e.toString() + ")";
    }
    copy(e) {
      const t = new Rn(this.comparator);
      return t.data = e, t;
    }
  }
  class wx {
    constructor(e) {
      this.iter = e;
    }
    getNext() {
      return this.iter.getNext().key;
    }
    hasNext() {
      return this.iter.hasNext();
    }
  }
  class fs {
    constructor(e) {
      this.fields = e, e.sort(Jn.comparator);
    }
    static empty() {
      return new fs([]);
    }
    unionWith(e) {
      let t = new Rn(Jn.comparator);
      for (const r of this.fields) t = t.add(r);
      for (const r of e) t = t.add(r);
      return new fs(t.toArray());
    }
    covers(e) {
      for (const t of this.fields) if (t.isPrefixOf(e)) return true;
      return false;
    }
    isEqual(e) {
      return mu(this.fields, e.fields, (t, r) => t.isEqual(r));
    }
  }
  class k2 extends Error {
    constructor() {
      super(...arguments), this.name = "Base64DecodeError";
    }
  }
  class Zn {
    constructor(e) {
      this.binaryString = e;
    }
    static fromBase64String(e) {
      const t = function(i) {
        try {
          return atob(i);
        } catch (l) {
          throw typeof DOMException < "u" && l instanceof DOMException ? new k2("Invalid base64 string: " + l) : l;
        }
      }(e);
      return new Zn(t);
    }
    static fromUint8Array(e) {
      const t = function(i) {
        let l = "";
        for (let c = 0; c < i.length; ++c) l += String.fromCharCode(i[c]);
        return l;
      }(e);
      return new Zn(t);
    }
    [Symbol.iterator]() {
      let e = 0;
      return {
        next: () => e < this.binaryString.length ? {
          value: this.binaryString.charCodeAt(e++),
          done: false
        } : {
          value: void 0,
          done: true
        }
      };
    }
    toBase64() {
      return function(t) {
        return btoa(t);
      }(this.binaryString);
    }
    toUint8Array() {
      return function(t) {
        const r = new Uint8Array(t.length);
        for (let i = 0; i < t.length; i++) r[i] = t.charCodeAt(i);
        return r;
      }(this.binaryString);
    }
    approximateByteSize() {
      return 2 * this.binaryString.length;
    }
    compareTo(e) {
      return vt(this.binaryString, e.binaryString);
    }
    isEqual(e) {
      return this.binaryString === e.binaryString;
    }
  }
  Zn.EMPTY_BYTE_STRING = new Zn("");
  const ED = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
  function Aa(n) {
    if ($t(!!n), typeof n == "string") {
      let e = 0;
      const t = ED.exec(n);
      if ($t(!!t), t[1]) {
        let i = t[1];
        i = (i + "000000000").substr(0, 9), e = Number(i);
      }
      const r = new Date(n);
      return {
        seconds: Math.floor(r.getTime() / 1e3),
        nanos: e
      };
    }
    return {
      seconds: un(n.seconds),
      nanos: un(n.nanos)
    };
  }
  function un(n) {
    return typeof n == "number" ? n : typeof n == "string" ? Number(n) : 0;
  }
  function Ra(n) {
    return typeof n == "string" ? Zn.fromBase64String(n) : Zn.fromUint8Array(n);
  }
  const A2 = "server_timestamp", R2 = "__type__", N2 = "__previous_value__", P2 = "__local_write_time__";
  function r1(n) {
    var e, t;
    return ((t = (((e = n == null ? void 0 : n.mapValue) === null || e === void 0 ? void 0 : e.fields) || {})[R2]) === null || t === void 0 ? void 0 : t.stringValue) === A2;
  }
  function vm(n) {
    const e = n.mapValue.fields[N2];
    return r1(e) ? vm(e) : e;
  }
  function Af(n) {
    const e = Aa(n.mapValue.fields[P2].timestampValue);
    return new An(e.seconds, e.nanos);
  }
  class bD {
    constructor(e, t, r, i, l, c, f, m, y) {
      this.databaseId = e, this.appId = t, this.persistenceKey = r, this.host = i, this.ssl = l, this.forceLongPolling = c, this.autoDetectLongPolling = f, this.longPollingOptions = m, this.useFetchStreams = y;
    }
  }
  const Ug = "(default)";
  class Rf {
    constructor(e, t) {
      this.projectId = e, this.database = t || Ug;
    }
    static empty() {
      return new Rf("", "");
    }
    get isDefaultDatabase() {
      return this.database === Ug;
    }
    isEqual(e) {
      return e instanceof Rf && e.projectId === this.projectId && e.database === this.database;
    }
  }
  const D2 = "__type__", TD = "__max__", cg = {
    mapValue: {}
  }, j2 = "__vector__", Bg = "value";
  function Na(n) {
    return "nullValue" in n ? 0 : "booleanValue" in n ? 1 : "integerValue" in n || "doubleValue" in n ? 2 : "timestampValue" in n ? 3 : "stringValue" in n ? 5 : "bytesValue" in n ? 6 : "referenceValue" in n ? 7 : "geoPointValue" in n ? 8 : "arrayValue" in n ? 9 : "mapValue" in n ? r1(n) ? 4 : SD(n) ? 9007199254740991 : CD(n) ? 10 : 11 : st();
  }
  function Ui(n, e) {
    if (n === e) return true;
    const t = Na(n);
    if (t !== Na(e)) return false;
    switch (t) {
      case 0:
      case 9007199254740991:
        return true;
      case 1:
        return n.booleanValue === e.booleanValue;
      case 4:
        return Af(n).isEqual(Af(e));
      case 3:
        return function(i, l) {
          if (typeof i.timestampValue == "string" && typeof l.timestampValue == "string" && i.timestampValue.length === l.timestampValue.length) return i.timestampValue === l.timestampValue;
          const c = Aa(i.timestampValue), f = Aa(l.timestampValue);
          return c.seconds === f.seconds && c.nanos === f.nanos;
        }(n, e);
      case 5:
        return n.stringValue === e.stringValue;
      case 6:
        return function(i, l) {
          return Ra(i.bytesValue).isEqual(Ra(l.bytesValue));
        }(n, e);
      case 7:
        return n.referenceValue === e.referenceValue;
      case 8:
        return function(i, l) {
          return un(i.geoPointValue.latitude) === un(l.geoPointValue.latitude) && un(i.geoPointValue.longitude) === un(l.geoPointValue.longitude);
        }(n, e);
      case 2:
        return function(i, l) {
          if ("integerValue" in i && "integerValue" in l) return un(i.integerValue) === un(l.integerValue);
          if ("doubleValue" in i && "doubleValue" in l) {
            const c = un(i.doubleValue), f = un(l.doubleValue);
            return c === f ? zg(c) === zg(f) : isNaN(c) && isNaN(f);
          }
          return false;
        }(n, e);
      case 9:
        return mu(n.arrayValue.values || [], e.arrayValue.values || [], Ui);
      case 10:
      case 11:
        return function(i, l) {
          const c = i.mapValue.fields || {}, f = l.mapValue.fields || {};
          if (yx(c) !== yx(f)) return false;
          for (const m in c) if (c.hasOwnProperty(m) && (f[m] === void 0 || !Ui(c[m], f[m]))) return false;
          return true;
        }(n, e);
      default:
        return st();
    }
  }
  function Nf(n, e) {
    return (n.values || []).find((t) => Ui(t, e)) !== void 0;
  }
  function vu(n, e) {
    if (n === e) return 0;
    const t = Na(n), r = Na(e);
    if (t !== r) return vt(t, r);
    switch (t) {
      case 0:
      case 9007199254740991:
        return 0;
      case 1:
        return vt(n.booleanValue, e.booleanValue);
      case 2:
        return function(l, c) {
          const f = un(l.integerValue || l.doubleValue), m = un(c.integerValue || c.doubleValue);
          return f < m ? -1 : f > m ? 1 : f === m ? 0 : isNaN(f) ? isNaN(m) ? 0 : -1 : 1;
        }(n, e);
      case 3:
        return _x(n.timestampValue, e.timestampValue);
      case 4:
        return _x(Af(n), Af(e));
      case 5:
        return ey(n.stringValue, e.stringValue);
      case 6:
        return function(l, c) {
          const f = Ra(l), m = Ra(c);
          return f.compareTo(m);
        }(n.bytesValue, e.bytesValue);
      case 7:
        return function(l, c) {
          const f = l.split("/"), m = c.split("/");
          for (let y = 0; y < f.length && y < m.length; y++) {
            const x = vt(f[y], m[y]);
            if (x !== 0) return x;
          }
          return vt(f.length, m.length);
        }(n.referenceValue, e.referenceValue);
      case 8:
        return function(l, c) {
          const f = vt(un(l.latitude), un(c.latitude));
          return f !== 0 ? f : vt(un(l.longitude), un(c.longitude));
        }(n.geoPointValue, e.geoPointValue);
      case 9:
        return xx(n.arrayValue, e.arrayValue);
      case 10:
        return function(l, c) {
          var f, m, y, x;
          const C = l.fields || {}, S = c.fields || {}, N = (f = C[Bg]) === null || f === void 0 ? void 0 : f.arrayValue, P = (m = S[Bg]) === null || m === void 0 ? void 0 : m.arrayValue, O = vt(((y = N == null ? void 0 : N.values) === null || y === void 0 ? void 0 : y.length) || 0, ((x = P == null ? void 0 : P.values) === null || x === void 0 ? void 0 : x.length) || 0);
          return O !== 0 ? O : xx(N, P);
        }(n.mapValue, e.mapValue);
      case 11:
        return function(l, c) {
          if (l === cg.mapValue && c === cg.mapValue) return 0;
          if (l === cg.mapValue) return 1;
          if (c === cg.mapValue) return -1;
          const f = l.fields || {}, m = Object.keys(f), y = c.fields || {}, x = Object.keys(y);
          m.sort(), x.sort();
          for (let C = 0; C < m.length && C < x.length; ++C) {
            const S = ey(m[C], x[C]);
            if (S !== 0) return S;
            const N = vu(f[m[C]], y[x[C]]);
            if (N !== 0) return N;
          }
          return vt(m.length, x.length);
        }(n.mapValue, e.mapValue);
      default:
        throw st();
    }
  }
  function _x(n, e) {
    if (typeof n == "string" && typeof e == "string" && n.length === e.length) return vt(n, e);
    const t = Aa(n), r = Aa(e), i = vt(t.seconds, r.seconds);
    return i !== 0 ? i : vt(t.nanos, r.nanos);
  }
  function xx(n, e) {
    const t = n.values || [], r = e.values || [];
    for (let i = 0; i < t.length && i < r.length; ++i) {
      const l = vu(t[i], r[i]);
      if (l) return l;
    }
    return vt(t.length, r.length);
  }
  function yu(n) {
    return ty(n);
  }
  function ty(n) {
    return "nullValue" in n ? "null" : "booleanValue" in n ? "" + n.booleanValue : "integerValue" in n ? "" + n.integerValue : "doubleValue" in n ? "" + n.doubleValue : "timestampValue" in n ? function(t) {
      const r = Aa(t);
      return `time(${r.seconds},${r.nanos})`;
    }(n.timestampValue) : "stringValue" in n ? n.stringValue : "bytesValue" in n ? function(t) {
      return Ra(t).toBase64();
    }(n.bytesValue) : "referenceValue" in n ? function(t) {
      return Ze.fromName(t).toString();
    }(n.referenceValue) : "geoPointValue" in n ? function(t) {
      return `geo(${t.latitude},${t.longitude})`;
    }(n.geoPointValue) : "arrayValue" in n ? function(t) {
      let r = "[", i = true;
      for (const l of t.values || []) i ? i = false : r += ",", r += ty(l);
      return r + "]";
    }(n.arrayValue) : "mapValue" in n ? function(t) {
      const r = Object.keys(t.fields || {}).sort();
      let i = "{", l = true;
      for (const c of r) l ? l = false : i += ",", i += `${c}:${ty(t.fields[c])}`;
      return i + "}";
    }(n.mapValue) : st();
  }
  function bg(n) {
    switch (Na(n)) {
      case 0:
      case 1:
        return 4;
      case 2:
        return 8;
      case 3:
      case 8:
        return 16;
      case 4:
        const e = vm(n);
        return e ? 16 + bg(e) : 16;
      case 5:
        return 2 * n.stringValue.length;
      case 6:
        return Ra(n.bytesValue).approximateByteSize();
      case 7:
        return n.referenceValue.length;
      case 9:
        return function(r) {
          return (r.values || []).reduce((i, l) => i + bg(l), 0);
        }(n.arrayValue);
      case 10:
      case 11:
        return function(r) {
          let i = 0;
          return La(r.fields, (l, c) => {
            i += l.length + bg(c);
          }), i;
        }(n.mapValue);
      default:
        throw st();
    }
  }
  function Ex(n, e) {
    return {
      referenceValue: `projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`
    };
  }
  function ny(n) {
    return !!n && "integerValue" in n;
  }
  function s1(n) {
    return !!n && "arrayValue" in n;
  }
  function bx(n) {
    return !!n && "nullValue" in n;
  }
  function Tx(n) {
    return !!n && "doubleValue" in n && isNaN(Number(n.doubleValue));
  }
  function Tg(n) {
    return !!n && "mapValue" in n;
  }
  function CD(n) {
    var e, t;
    return ((t = (((e = n == null ? void 0 : n.mapValue) === null || e === void 0 ? void 0 : e.fields) || {})[D2]) === null || t === void 0 ? void 0 : t.stringValue) === j2;
  }
  function vf(n) {
    if (n.geoPointValue) return {
      geoPointValue: Object.assign({}, n.geoPointValue)
    };
    if (n.timestampValue && typeof n.timestampValue == "object") return {
      timestampValue: Object.assign({}, n.timestampValue)
    };
    if (n.mapValue) {
      const e = {
        mapValue: {
          fields: {}
        }
      };
      return La(n.mapValue.fields, (t, r) => e.mapValue.fields[t] = vf(r)), e;
    }
    if (n.arrayValue) {
      const e = {
        arrayValue: {
          values: []
        }
      };
      for (let t = 0; t < (n.arrayValue.values || []).length; ++t) e.arrayValue.values[t] = vf(n.arrayValue.values[t]);
      return e;
    }
    return Object.assign({}, n);
  }
  function SD(n) {
    return (((n.mapValue || {}).fields || {}).__type__ || {}).stringValue === TD;
  }
  class Qr {
    constructor(e) {
      this.value = e;
    }
    static empty() {
      return new Qr({
        mapValue: {}
      });
    }
    field(e) {
      if (e.isEmpty()) return this.value;
      {
        let t = this.value;
        for (let r = 0; r < e.length - 1; ++r) if (t = (t.mapValue.fields || {})[e.get(r)], !Tg(t)) return null;
        return t = (t.mapValue.fields || {})[e.lastSegment()], t || null;
      }
    }
    set(e, t) {
      this.getFieldsMap(e.popLast())[e.lastSegment()] = vf(t);
    }
    setAll(e) {
      let t = Jn.emptyPath(), r = {}, i = [];
      e.forEach((c, f) => {
        if (!t.isImmediateParentOf(f)) {
          const m = this.getFieldsMap(t);
          this.applyChanges(m, r, i), r = {}, i = [], t = f.popLast();
        }
        c ? r[f.lastSegment()] = vf(c) : i.push(f.lastSegment());
      });
      const l = this.getFieldsMap(t);
      this.applyChanges(l, r, i);
    }
    delete(e) {
      const t = this.field(e.popLast());
      Tg(t) && t.mapValue.fields && delete t.mapValue.fields[e.lastSegment()];
    }
    isEqual(e) {
      return Ui(this.value, e.value);
    }
    getFieldsMap(e) {
      let t = this.value;
      t.mapValue.fields || (t.mapValue = {
        fields: {}
      });
      for (let r = 0; r < e.length; ++r) {
        let i = t.mapValue.fields[e.get(r)];
        Tg(i) && i.mapValue.fields || (i = {
          mapValue: {
            fields: {}
          }
        }, t.mapValue.fields[e.get(r)] = i), t = i;
      }
      return t.mapValue.fields;
    }
    applyChanges(e, t, r) {
      La(t, (i, l) => e[i] = l);
      for (const i of r) delete e[i];
    }
    clone() {
      return new Qr(vf(this.value));
    }
  }
  function O2(n) {
    const e = [];
    return La(n.fields, (t, r) => {
      const i = new Jn([
        t
      ]);
      if (Tg(r)) {
        const l = O2(r.mapValue).fields;
        if (l.length === 0) e.push(i);
        else for (const c of l) e.push(i.child(c));
      } else e.push(i);
    }), new fs(e);
  }
  class pr {
    constructor(e, t, r, i, l, c, f) {
      this.key = e, this.documentType = t, this.version = r, this.readTime = i, this.createTime = l, this.data = c, this.documentState = f;
    }
    static newInvalidDocument(e) {
      return new pr(e, 0, ot.min(), ot.min(), ot.min(), Qr.empty(), 0);
    }
    static newFoundDocument(e, t, r, i) {
      return new pr(e, 1, t, ot.min(), r, i, 0);
    }
    static newNoDocument(e, t) {
      return new pr(e, 2, t, ot.min(), ot.min(), Qr.empty(), 0);
    }
    static newUnknownDocument(e, t) {
      return new pr(e, 3, t, ot.min(), ot.min(), Qr.empty(), 2);
    }
    convertToFoundDocument(e, t) {
      return !this.createTime.isEqual(ot.min()) || this.documentType !== 2 && this.documentType !== 0 || (this.createTime = e), this.version = e, this.documentType = 1, this.data = t, this.documentState = 0, this;
    }
    convertToNoDocument(e) {
      return this.version = e, this.documentType = 2, this.data = Qr.empty(), this.documentState = 0, this;
    }
    convertToUnknownDocument(e) {
      return this.version = e, this.documentType = 3, this.data = Qr.empty(), this.documentState = 2, this;
    }
    setHasCommittedMutations() {
      return this.documentState = 2, this;
    }
    setHasLocalMutations() {
      return this.documentState = 1, this.version = ot.min(), this;
    }
    setReadTime(e) {
      return this.readTime = e, this;
    }
    get hasLocalMutations() {
      return this.documentState === 1;
    }
    get hasCommittedMutations() {
      return this.documentState === 2;
    }
    get hasPendingWrites() {
      return this.hasLocalMutations || this.hasCommittedMutations;
    }
    isValidDocument() {
      return this.documentType !== 0;
    }
    isFoundDocument() {
      return this.documentType === 1;
    }
    isNoDocument() {
      return this.documentType === 2;
    }
    isUnknownDocument() {
      return this.documentType === 3;
    }
    isEqual(e) {
      return e instanceof pr && this.key.isEqual(e.key) && this.version.isEqual(e.version) && this.documentType === e.documentType && this.documentState === e.documentState && this.data.isEqual(e.data);
    }
    mutableCopy() {
      return new pr(this.key, this.documentType, this.version, this.readTime, this.createTime, this.data.clone(), this.documentState);
    }
    toString() {
      return `Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`;
    }
  }
  class Wg {
    constructor(e, t) {
      this.position = e, this.inclusive = t;
    }
  }
  function Cx(n, e, t) {
    let r = 0;
    for (let i = 0; i < n.position.length; i++) {
      const l = e[i], c = n.position[i];
      if (l.field.isKeyField() ? r = Ze.comparator(Ze.fromName(c.referenceValue), t.key) : r = vu(c, t.data.field(l.field)), l.dir === "desc" && (r *= -1), r !== 0) break;
    }
    return r;
  }
  function Sx(n, e) {
    if (n === null) return e === null;
    if (e === null || n.inclusive !== e.inclusive || n.position.length !== e.position.length) return false;
    for (let t = 0; t < n.position.length; t++) if (!Ui(n.position[t], e.position[t])) return false;
    return true;
  }
  class Hg {
    constructor(e, t = "asc") {
      this.field = e, this.dir = t;
    }
  }
  function ID(n, e) {
    return n.dir === e.dir && n.field.isEqual(e.field);
  }
  class L2 {
  }
  class _n extends L2 {
    constructor(e, t, r) {
      super(), this.field = e, this.op = t, this.value = r;
    }
    static create(e, t, r) {
      return e.isKeyField() ? t === "in" || t === "not-in" ? this.createKeyFieldInFilter(e, t, r) : new AD(e, t, r) : t === "array-contains" ? new PD(e, r) : t === "in" ? new DD(e, r) : t === "not-in" ? new jD(e, r) : t === "array-contains-any" ? new OD(e, r) : new _n(e, t, r);
    }
    static createKeyFieldInFilter(e, t, r) {
      return t === "in" ? new RD(e, r) : new ND(e, r);
    }
    matches(e) {
      const t = e.data.field(this.field);
      return this.op === "!=" ? t !== null && this.matchesComparison(vu(t, this.value)) : t !== null && Na(this.value) === Na(t) && this.matchesComparison(vu(t, this.value));
    }
    matchesComparison(e) {
      switch (this.op) {
        case "<":
          return e < 0;
        case "<=":
          return e <= 0;
        case "==":
          return e === 0;
        case "!=":
          return e !== 0;
        case ">":
          return e > 0;
        case ">=":
          return e >= 0;
        default:
          return st();
      }
    }
    isInequality() {
      return [
        "<",
        "<=",
        ">",
        ">=",
        "!=",
        "not-in"
      ].indexOf(this.op) >= 0;
    }
    getFlattenedFilters() {
      return [
        this
      ];
    }
    getFilters() {
      return [
        this
      ];
    }
  }
  class li extends L2 {
    constructor(e, t) {
      super(), this.filters = e, this.op = t, this.ce = null;
    }
    static create(e, t) {
      return new li(e, t);
    }
    matches(e) {
      return M2(this) ? this.filters.find((t) => !t.matches(e)) === void 0 : this.filters.find((t) => t.matches(e)) !== void 0;
    }
    getFlattenedFilters() {
      return this.ce !== null || (this.ce = this.filters.reduce((e, t) => e.concat(t.getFlattenedFilters()), [])), this.ce;
    }
    getFilters() {
      return Object.assign([], this.filters);
    }
  }
  function M2(n) {
    return n.op === "and";
  }
  function $2(n) {
    return kD(n) && M2(n);
  }
  function kD(n) {
    for (const e of n.filters) if (e instanceof li) return false;
    return true;
  }
  function ry(n) {
    if (n instanceof _n) return n.field.canonicalString() + n.op.toString() + yu(n.value);
    if ($2(n)) return n.filters.map((e) => ry(e)).join(",");
    {
      const e = n.filters.map((t) => ry(t)).join(",");
      return `${n.op}(${e})`;
    }
  }
  function V2(n, e) {
    return n instanceof _n ? function(r, i) {
      return i instanceof _n && r.op === i.op && r.field.isEqual(i.field) && Ui(r.value, i.value);
    }(n, e) : n instanceof li ? function(r, i) {
      return i instanceof li && r.op === i.op && r.filters.length === i.filters.length ? r.filters.reduce((l, c, f) => l && V2(c, i.filters[f]), true) : false;
    }(n, e) : void st();
  }
  function F2(n) {
    return n instanceof _n ? function(t) {
      return `${t.field.canonicalString()} ${t.op} ${yu(t.value)}`;
    }(n) : n instanceof li ? function(t) {
      return t.op.toString() + " {" + t.getFilters().map(F2).join(" ,") + "}";
    }(n) : "Filter";
  }
  class AD extends _n {
    constructor(e, t, r) {
      super(e, t, r), this.key = Ze.fromName(r.referenceValue);
    }
    matches(e) {
      const t = Ze.comparator(e.key, this.key);
      return this.matchesComparison(t);
    }
  }
  class RD extends _n {
    constructor(e, t) {
      super(e, "in", t), this.keys = z2("in", t);
    }
    matches(e) {
      return this.keys.some((t) => t.isEqual(e.key));
    }
  }
  class ND extends _n {
    constructor(e, t) {
      super(e, "not-in", t), this.keys = z2("not-in", t);
    }
    matches(e) {
      return !this.keys.some((t) => t.isEqual(e.key));
    }
  }
  function z2(n, e) {
    var t;
    return (((t = e.arrayValue) === null || t === void 0 ? void 0 : t.values) || []).map((r) => Ze.fromName(r.referenceValue));
  }
  class PD extends _n {
    constructor(e, t) {
      super(e, "array-contains", t);
    }
    matches(e) {
      const t = e.data.field(this.field);
      return s1(t) && Nf(t.arrayValue, this.value);
    }
  }
  class DD extends _n {
    constructor(e, t) {
      super(e, "in", t);
    }
    matches(e) {
      const t = e.data.field(this.field);
      return t !== null && Nf(this.value.arrayValue, t);
    }
  }
  class jD extends _n {
    constructor(e, t) {
      super(e, "not-in", t);
    }
    matches(e) {
      if (Nf(this.value.arrayValue, {
        nullValue: "NULL_VALUE"
      })) return false;
      const t = e.data.field(this.field);
      return t !== null && !Nf(this.value.arrayValue, t);
    }
  }
  class OD extends _n {
    constructor(e, t) {
      super(e, "array-contains-any", t);
    }
    matches(e) {
      const t = e.data.field(this.field);
      return !(!s1(t) || !t.arrayValue.values) && t.arrayValue.values.some((r) => Nf(this.value.arrayValue, r));
    }
  }
  class LD {
    constructor(e, t = null, r = [], i = [], l = null, c = null, f = null) {
      this.path = e, this.collectionGroup = t, this.orderBy = r, this.filters = i, this.limit = l, this.startAt = c, this.endAt = f, this.le = null;
    }
  }
  function Ix(n, e = null, t = [], r = [], i = null, l = null, c = null) {
    return new LD(n, e, t, r, i, l, c);
  }
  function i1(n) {
    const e = ct(n);
    if (e.le === null) {
      let t = e.path.canonicalString();
      e.collectionGroup !== null && (t += "|cg:" + e.collectionGroup), t += "|f:", t += e.filters.map((r) => ry(r)).join(","), t += "|ob:", t += e.orderBy.map((r) => function(l) {
        return l.field.canonicalString() + l.dir;
      }(r)).join(","), mm(e.limit) || (t += "|l:", t += e.limit), e.startAt && (t += "|lb:", t += e.startAt.inclusive ? "b:" : "a:", t += e.startAt.position.map((r) => yu(r)).join(",")), e.endAt && (t += "|ub:", t += e.endAt.inclusive ? "a:" : "b:", t += e.endAt.position.map((r) => yu(r)).join(",")), e.le = t;
    }
    return e.le;
  }
  function o1(n, e) {
    if (n.limit !== e.limit || n.orderBy.length !== e.orderBy.length) return false;
    for (let t = 0; t < n.orderBy.length; t++) if (!ID(n.orderBy[t], e.orderBy[t])) return false;
    if (n.filters.length !== e.filters.length) return false;
    for (let t = 0; t < n.filters.length; t++) if (!V2(n.filters[t], e.filters[t])) return false;
    return n.collectionGroup === e.collectionGroup && !!n.path.isEqual(e.path) && !!Sx(n.startAt, e.startAt) && Sx(n.endAt, e.endAt);
  }
  function sy(n) {
    return Ze.isDocumentKey(n.path) && n.collectionGroup === null && n.filters.length === 0;
  }
  class zf {
    constructor(e, t = null, r = [], i = [], l = null, c = "F", f = null, m = null) {
      this.path = e, this.collectionGroup = t, this.explicitOrderBy = r, this.filters = i, this.limit = l, this.limitType = c, this.startAt = f, this.endAt = m, this.he = null, this.Pe = null, this.Te = null, this.startAt, this.endAt;
    }
  }
  function MD(n, e, t, r, i, l, c, f) {
    return new zf(n, e, t, r, i, l, c, f);
  }
  function a1(n) {
    return new zf(n);
  }
  function kx(n) {
    return n.filters.length === 0 && n.limit === null && n.startAt == null && n.endAt == null && (n.explicitOrderBy.length === 0 || n.explicitOrderBy.length === 1 && n.explicitOrderBy[0].field.isKeyField());
  }
  function U2(n) {
    return n.collectionGroup !== null;
  }
  function yf(n) {
    const e = ct(n);
    if (e.he === null) {
      e.he = [];
      const t = /* @__PURE__ */ new Set();
      for (const l of e.explicitOrderBy) e.he.push(l), t.add(l.field.canonicalString());
      const r = e.explicitOrderBy.length > 0 ? e.explicitOrderBy[e.explicitOrderBy.length - 1].dir : "asc";
      (function(c) {
        let f = new Rn(Jn.comparator);
        return c.filters.forEach((m) => {
          m.getFlattenedFilters().forEach((y) => {
            y.isInequality() && (f = f.add(y.field));
          });
        }), f;
      })(e).forEach((l) => {
        t.has(l.canonicalString()) || l.isKeyField() || e.he.push(new Hg(l, r));
      }), t.has(Jn.keyField().canonicalString()) || e.he.push(new Hg(Jn.keyField(), r));
    }
    return e.he;
  }
  function Vi(n) {
    const e = ct(n);
    return e.Pe || (e.Pe = $D(e, yf(n))), e.Pe;
  }
  function $D(n, e) {
    if (n.limitType === "F") return Ix(n.path, n.collectionGroup, e, n.filters, n.limit, n.startAt, n.endAt);
    {
      e = e.map((i) => {
        const l = i.dir === "desc" ? "asc" : "desc";
        return new Hg(i.field, l);
      });
      const t = n.endAt ? new Wg(n.endAt.position, n.endAt.inclusive) : null, r = n.startAt ? new Wg(n.startAt.position, n.startAt.inclusive) : null;
      return Ix(n.path, n.collectionGroup, e, n.filters, n.limit, t, r);
    }
  }
  function iy(n, e) {
    const t = n.filters.concat([
      e
    ]);
    return new zf(n.path, n.collectionGroup, n.explicitOrderBy.slice(), t, n.limit, n.limitType, n.startAt, n.endAt);
  }
  function oy(n, e, t) {
    return new zf(n.path, n.collectionGroup, n.explicitOrderBy.slice(), n.filters.slice(), e, t, n.startAt, n.endAt);
  }
  function ym(n, e) {
    return o1(Vi(n), Vi(e)) && n.limitType === e.limitType;
  }
  function B2(n) {
    return `${i1(Vi(n))}|lt:${n.limitType}`;
  }
  function ou(n) {
    return `Query(target=${function(t) {
      let r = t.path.canonicalString();
      return t.collectionGroup !== null && (r += " collectionGroup=" + t.collectionGroup), t.filters.length > 0 && (r += `, filters: [${t.filters.map((i) => F2(i)).join(", ")}]`), mm(t.limit) || (r += ", limit: " + t.limit), t.orderBy.length > 0 && (r += `, orderBy: [${t.orderBy.map((i) => function(c) {
        return `${c.field.canonicalString()} (${c.dir})`;
      }(i)).join(", ")}]`), t.startAt && (r += ", startAt: ", r += t.startAt.inclusive ? "b:" : "a:", r += t.startAt.position.map((i) => yu(i)).join(",")), t.endAt && (r += ", endAt: ", r += t.endAt.inclusive ? "a:" : "b:", r += t.endAt.position.map((i) => yu(i)).join(",")), `Target(${r})`;
    }(Vi(n))}; limitType=${n.limitType})`;
  }
  function wm(n, e) {
    return e.isFoundDocument() && function(r, i) {
      const l = i.key.path;
      return r.collectionGroup !== null ? i.key.hasCollectionId(r.collectionGroup) && r.path.isPrefixOf(l) : Ze.isDocumentKey(r.path) ? r.path.isEqual(l) : r.path.isImmediateParentOf(l);
    }(n, e) && function(r, i) {
      for (const l of yf(r)) if (!l.field.isKeyField() && i.data.field(l.field) === null) return false;
      return true;
    }(n, e) && function(r, i) {
      for (const l of r.filters) if (!l.matches(i)) return false;
      return true;
    }(n, e) && function(r, i) {
      return !(r.startAt && !function(c, f, m) {
        const y = Cx(c, f, m);
        return c.inclusive ? y <= 0 : y < 0;
      }(r.startAt, yf(r), i) || r.endAt && !function(c, f, m) {
        const y = Cx(c, f, m);
        return c.inclusive ? y >= 0 : y > 0;
      }(r.endAt, yf(r), i));
    }(n, e);
  }
  function VD(n) {
    return n.collectionGroup || (n.path.length % 2 == 1 ? n.path.lastSegment() : n.path.get(n.path.length - 2));
  }
  function W2(n) {
    return (e, t) => {
      let r = false;
      for (const i of yf(n)) {
        const l = FD(i, e, t);
        if (l !== 0) return l;
        r = r || i.field.isKeyField();
      }
      return 0;
    };
  }
  function FD(n, e, t) {
    const r = n.field.isKeyField() ? Ze.comparator(e.key, t.key) : function(l, c, f) {
      const m = c.data.field(l), y = f.data.field(l);
      return m !== null && y !== null ? vu(m, y) : st();
    }(n.field, e, t);
    switch (n.dir) {
      case "asc":
        return r;
      case "desc":
        return -1 * r;
      default:
        return st();
    }
  }
  class ql {
    constructor(e, t) {
      this.mapKeyFn = e, this.equalsFn = t, this.inner = {}, this.innerSize = 0;
    }
    get(e) {
      const t = this.mapKeyFn(e), r = this.inner[t];
      if (r !== void 0) {
        for (const [i, l] of r) if (this.equalsFn(i, e)) return l;
      }
    }
    has(e) {
      return this.get(e) !== void 0;
    }
    set(e, t) {
      const r = this.mapKeyFn(e), i = this.inner[r];
      if (i === void 0) return this.inner[r] = [
        [
          e,
          t
        ]
      ], void this.innerSize++;
      for (let l = 0; l < i.length; l++) if (this.equalsFn(i[l][0], e)) return void (i[l] = [
        e,
        t
      ]);
      i.push([
        e,
        t
      ]), this.innerSize++;
    }
    delete(e) {
      const t = this.mapKeyFn(e), r = this.inner[t];
      if (r === void 0) return false;
      for (let i = 0; i < r.length; i++) if (this.equalsFn(r[i][0], e)) return r.length === 1 ? delete this.inner[t] : r.splice(i, 1), this.innerSize--, true;
      return false;
    }
    forEach(e) {
      La(this.inner, (t, r) => {
        for (const [i, l] of r) e(i, l);
      });
    }
    isEmpty() {
      return I2(this.inner);
    }
    size() {
      return this.innerSize;
    }
  }
  const zD = new sn(Ze.comparator);
  function Ao() {
    return zD;
  }
  const H2 = new sn(Ze.comparator);
  function df(...n) {
    let e = H2;
    for (const t of n) e = e.insert(t.key, t);
    return e;
  }
  function q2(n) {
    let e = H2;
    return n.forEach((t, r) => e = e.insert(t, r.overlayedDocument)), e;
  }
  function Dl() {
    return wf();
  }
  function K2() {
    return wf();
  }
  function wf() {
    return new ql((n) => n.toString(), (n, e) => n.isEqual(e));
  }
  const UD = new sn(Ze.comparator), BD = new Rn(Ze.comparator);
  function Ct(...n) {
    let e = BD;
    for (const t of n) e = e.add(t);
    return e;
  }
  const WD = new Rn(vt);
  function HD() {
    return WD;
  }
  function l1(n, e) {
    if (n.useProto3Json) {
      if (isNaN(e)) return {
        doubleValue: "NaN"
      };
      if (e === 1 / 0) return {
        doubleValue: "Infinity"
      };
      if (e === -1 / 0) return {
        doubleValue: "-Infinity"
      };
    }
    return {
      doubleValue: zg(e) ? "-0" : e
    };
  }
  function G2(n) {
    return {
      integerValue: "" + n
    };
  }
  function qD(n, e) {
    return wD(e) ? G2(e) : l1(n, e);
  }
  class _m {
    constructor() {
      this._ = void 0;
    }
  }
  function KD(n, e, t) {
    return n instanceof qg ? function(i, l) {
      const c = {
        fields: {
          [R2]: {
            stringValue: A2
          },
          [P2]: {
            timestampValue: {
              seconds: i.seconds,
              nanos: i.nanoseconds
            }
          }
        }
      };
      return l && r1(l) && (l = vm(l)), l && (c.fields[N2] = l), {
        mapValue: c
      };
    }(t, e) : n instanceof Pf ? Y2(n, e) : n instanceof Df ? X2(n, e) : function(i, l) {
      const c = Q2(i, l), f = Ax(c) + Ax(i.Ie);
      return ny(c) && ny(i.Ie) ? G2(f) : l1(i.serializer, f);
    }(n, e);
  }
  function GD(n, e, t) {
    return n instanceof Pf ? Y2(n, e) : n instanceof Df ? X2(n, e) : t;
  }
  function Q2(n, e) {
    return n instanceof Kg ? function(r) {
      return ny(r) || function(l) {
        return !!l && "doubleValue" in l;
      }(r);
    }(e) ? e : {
      integerValue: 0
    } : null;
  }
  class qg extends _m {
  }
  class Pf extends _m {
    constructor(e) {
      super(), this.elements = e;
    }
  }
  function Y2(n, e) {
    const t = J2(e);
    for (const r of n.elements) t.some((i) => Ui(i, r)) || t.push(r);
    return {
      arrayValue: {
        values: t
      }
    };
  }
  class Df extends _m {
    constructor(e) {
      super(), this.elements = e;
    }
  }
  function X2(n, e) {
    let t = J2(e);
    for (const r of n.elements) t = t.filter((i) => !Ui(i, r));
    return {
      arrayValue: {
        values: t
      }
    };
  }
  class Kg extends _m {
    constructor(e, t) {
      super(), this.serializer = e, this.Ie = t;
    }
  }
  function Ax(n) {
    return un(n.integerValue || n.doubleValue);
  }
  function J2(n) {
    return s1(n) && n.arrayValue.values ? n.arrayValue.values.slice() : [];
  }
  function QD(n, e) {
    return n.field.isEqual(e.field) && function(r, i) {
      return r instanceof Pf && i instanceof Pf || r instanceof Df && i instanceof Df ? mu(r.elements, i.elements, Ui) : r instanceof Kg && i instanceof Kg ? Ui(r.Ie, i.Ie) : r instanceof qg && i instanceof qg;
    }(n.transform, e.transform);
  }
  class YD {
    constructor(e, t) {
      this.version = e, this.transformResults = t;
    }
  }
  class ii {
    constructor(e, t) {
      this.updateTime = e, this.exists = t;
    }
    static none() {
      return new ii();
    }
    static exists(e) {
      return new ii(void 0, e);
    }
    static updateTime(e) {
      return new ii(e);
    }
    get isNone() {
      return this.updateTime === void 0 && this.exists === void 0;
    }
    isEqual(e) {
      return this.exists === e.exists && (this.updateTime ? !!e.updateTime && this.updateTime.isEqual(e.updateTime) : !e.updateTime);
    }
  }
  function Cg(n, e) {
    return n.updateTime !== void 0 ? e.isFoundDocument() && e.version.isEqual(n.updateTime) : n.exists === void 0 || n.exists === e.isFoundDocument();
  }
  class xm {
  }
  function Z2(n, e) {
    if (!n.hasLocalMutations || e && e.fields.length === 0) return null;
    if (e === null) return n.isNoDocument() ? new c1(n.key, ii.none()) : new Uf(n.key, n.data, ii.none());
    {
      const t = n.data, r = Qr.empty();
      let i = new Rn(Jn.comparator);
      for (let l of e.fields) if (!i.has(l)) {
        let c = t.field(l);
        c === null && l.length > 1 && (l = l.popLast(), c = t.field(l)), c === null ? r.delete(l) : r.set(l, c), i = i.add(l);
      }
      return new Ma(n.key, r, new fs(i.toArray()), ii.none());
    }
  }
  function XD(n, e, t) {
    n instanceof Uf ? function(i, l, c) {
      const f = i.value.clone(), m = Nx(i.fieldTransforms, l, c.transformResults);
      f.setAll(m), l.convertToFoundDocument(c.version, f).setHasCommittedMutations();
    }(n, e, t) : n instanceof Ma ? function(i, l, c) {
      if (!Cg(i.precondition, l)) return void l.convertToUnknownDocument(c.version);
      const f = Nx(i.fieldTransforms, l, c.transformResults), m = l.data;
      m.setAll(eT(i)), m.setAll(f), l.convertToFoundDocument(c.version, m).setHasCommittedMutations();
    }(n, e, t) : function(i, l, c) {
      l.convertToNoDocument(c.version).setHasCommittedMutations();
    }(0, e, t);
  }
  function _f(n, e, t, r) {
    return n instanceof Uf ? function(l, c, f, m) {
      if (!Cg(l.precondition, c)) return f;
      const y = l.value.clone(), x = Px(l.fieldTransforms, m, c);
      return y.setAll(x), c.convertToFoundDocument(c.version, y).setHasLocalMutations(), null;
    }(n, e, t, r) : n instanceof Ma ? function(l, c, f, m) {
      if (!Cg(l.precondition, c)) return f;
      const y = Px(l.fieldTransforms, m, c), x = c.data;
      return x.setAll(eT(l)), x.setAll(y), c.convertToFoundDocument(c.version, x).setHasLocalMutations(), f === null ? null : f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((C) => C.field));
    }(n, e, t, r) : function(l, c, f) {
      return Cg(l.precondition, c) ? (c.convertToNoDocument(c.version).setHasLocalMutations(), null) : f;
    }(n, e, t);
  }
  function JD(n, e) {
    let t = null;
    for (const r of n.fieldTransforms) {
      const i = e.data.field(r.field), l = Q2(r.transform, i || null);
      l != null && (t === null && (t = Qr.empty()), t.set(r.field, l));
    }
    return t || null;
  }
  function Rx(n, e) {
    return n.type === e.type && !!n.key.isEqual(e.key) && !!n.precondition.isEqual(e.precondition) && !!function(r, i) {
      return r === void 0 && i === void 0 || !(!r || !i) && mu(r, i, (l, c) => QD(l, c));
    }(n.fieldTransforms, e.fieldTransforms) && (n.type === 0 ? n.value.isEqual(e.value) : n.type !== 1 || n.data.isEqual(e.data) && n.fieldMask.isEqual(e.fieldMask));
  }
  class Uf extends xm {
    constructor(e, t, r, i = []) {
      super(), this.key = e, this.value = t, this.precondition = r, this.fieldTransforms = i, this.type = 0;
    }
    getFieldMask() {
      return null;
    }
  }
  class Ma extends xm {
    constructor(e, t, r, i, l = []) {
      super(), this.key = e, this.data = t, this.fieldMask = r, this.precondition = i, this.fieldTransforms = l, this.type = 1;
    }
    getFieldMask() {
      return this.fieldMask;
    }
  }
  function eT(n) {
    const e = /* @__PURE__ */ new Map();
    return n.fieldMask.fields.forEach((t) => {
      if (!t.isEmpty()) {
        const r = n.data.field(t);
        e.set(t, r);
      }
    }), e;
  }
  function Nx(n, e, t) {
    const r = /* @__PURE__ */ new Map();
    $t(n.length === t.length);
    for (let i = 0; i < t.length; i++) {
      const l = n[i], c = l.transform, f = e.data.field(l.field);
      r.set(l.field, GD(c, f, t[i]));
    }
    return r;
  }
  function Px(n, e, t) {
    const r = /* @__PURE__ */ new Map();
    for (const i of n) {
      const l = i.transform, c = t.data.field(i.field);
      r.set(i.field, KD(l, c, e));
    }
    return r;
  }
  class c1 extends xm {
    constructor(e, t) {
      super(), this.key = e, this.precondition = t, this.type = 2, this.fieldTransforms = [];
    }
    getFieldMask() {
      return null;
    }
  }
  class ZD extends xm {
    constructor(e, t) {
      super(), this.key = e, this.precondition = t, this.type = 3, this.fieldTransforms = [];
    }
    getFieldMask() {
      return null;
    }
  }
  class ej {
    constructor(e, t, r, i) {
      this.batchId = e, this.localWriteTime = t, this.baseMutations = r, this.mutations = i;
    }
    applyToRemoteDocument(e, t) {
      const r = t.mutationResults;
      for (let i = 0; i < this.mutations.length; i++) {
        const l = this.mutations[i];
        l.key.isEqual(e.key) && XD(l, e, r[i]);
      }
    }
    applyToLocalView(e, t) {
      for (const r of this.baseMutations) r.key.isEqual(e.key) && (t = _f(r, e, t, this.localWriteTime));
      for (const r of this.mutations) r.key.isEqual(e.key) && (t = _f(r, e, t, this.localWriteTime));
      return t;
    }
    applyToLocalDocumentSet(e, t) {
      const r = K2();
      return this.mutations.forEach((i) => {
        const l = e.get(i.key), c = l.overlayedDocument;
        let f = this.applyToLocalView(c, l.mutatedFields);
        f = t.has(i.key) ? null : f;
        const m = Z2(c, f);
        m !== null && r.set(i.key, m), c.isValidDocument() || c.convertToNoDocument(ot.min());
      }), r;
    }
    keys() {
      return this.mutations.reduce((e, t) => e.add(t.key), Ct());
    }
    isEqual(e) {
      return this.batchId === e.batchId && mu(this.mutations, e.mutations, (t, r) => Rx(t, r)) && mu(this.baseMutations, e.baseMutations, (t, r) => Rx(t, r));
    }
  }
  class u1 {
    constructor(e, t, r, i) {
      this.batch = e, this.commitVersion = t, this.mutationResults = r, this.docVersions = i;
    }
    static from(e, t, r) {
      $t(e.mutations.length === r.length);
      let i = /* @__PURE__ */ function() {
        return UD;
      }();
      const l = e.mutations;
      for (let c = 0; c < l.length; c++) i = i.insert(l[c].key, r[c].version);
      return new u1(e, t, r, i);
    }
  }
  class tj {
    constructor(e, t) {
      this.largestBatchId = e, this.mutation = t;
    }
    getKey() {
      return this.mutation.key;
    }
    isEqual(e) {
      return e !== null && this.mutation === e.mutation;
    }
    toString() {
      return `Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`;
    }
  }
  class nj {
    constructor(e, t) {
      this.count = e, this.unchangedNames = t;
    }
  }
  var wn, Nt;
  function rj(n) {
    switch (n) {
      case _e.OK:
        return st();
      case _e.CANCELLED:
      case _e.UNKNOWN:
      case _e.DEADLINE_EXCEEDED:
      case _e.RESOURCE_EXHAUSTED:
      case _e.INTERNAL:
      case _e.UNAVAILABLE:
      case _e.UNAUTHENTICATED:
        return false;
      case _e.INVALID_ARGUMENT:
      case _e.NOT_FOUND:
      case _e.ALREADY_EXISTS:
      case _e.PERMISSION_DENIED:
      case _e.FAILED_PRECONDITION:
      case _e.ABORTED:
      case _e.OUT_OF_RANGE:
      case _e.UNIMPLEMENTED:
      case _e.DATA_LOSS:
        return true;
      default:
        return st();
    }
  }
  function tT(n) {
    if (n === void 0) return ko("GRPC error has no .code"), _e.UNKNOWN;
    switch (n) {
      case wn.OK:
        return _e.OK;
      case wn.CANCELLED:
        return _e.CANCELLED;
      case wn.UNKNOWN:
        return _e.UNKNOWN;
      case wn.DEADLINE_EXCEEDED:
        return _e.DEADLINE_EXCEEDED;
      case wn.RESOURCE_EXHAUSTED:
        return _e.RESOURCE_EXHAUSTED;
      case wn.INTERNAL:
        return _e.INTERNAL;
      case wn.UNAVAILABLE:
        return _e.UNAVAILABLE;
      case wn.UNAUTHENTICATED:
        return _e.UNAUTHENTICATED;
      case wn.INVALID_ARGUMENT:
        return _e.INVALID_ARGUMENT;
      case wn.NOT_FOUND:
        return _e.NOT_FOUND;
      case wn.ALREADY_EXISTS:
        return _e.ALREADY_EXISTS;
      case wn.PERMISSION_DENIED:
        return _e.PERMISSION_DENIED;
      case wn.FAILED_PRECONDITION:
        return _e.FAILED_PRECONDITION;
      case wn.ABORTED:
        return _e.ABORTED;
      case wn.OUT_OF_RANGE:
        return _e.OUT_OF_RANGE;
      case wn.UNIMPLEMENTED:
        return _e.UNIMPLEMENTED;
      case wn.DATA_LOSS:
        return _e.DATA_LOSS;
      default:
        return st();
    }
  }
  (Nt = wn || (wn = {}))[Nt.OK = 0] = "OK", Nt[Nt.CANCELLED = 1] = "CANCELLED", Nt[Nt.UNKNOWN = 2] = "UNKNOWN", Nt[Nt.INVALID_ARGUMENT = 3] = "INVALID_ARGUMENT", Nt[Nt.DEADLINE_EXCEEDED = 4] = "DEADLINE_EXCEEDED", Nt[Nt.NOT_FOUND = 5] = "NOT_FOUND", Nt[Nt.ALREADY_EXISTS = 6] = "ALREADY_EXISTS", Nt[Nt.PERMISSION_DENIED = 7] = "PERMISSION_DENIED", Nt[Nt.UNAUTHENTICATED = 16] = "UNAUTHENTICATED", Nt[Nt.RESOURCE_EXHAUSTED = 8] = "RESOURCE_EXHAUSTED", Nt[Nt.FAILED_PRECONDITION = 9] = "FAILED_PRECONDITION", Nt[Nt.ABORTED = 10] = "ABORTED", Nt[Nt.OUT_OF_RANGE = 11] = "OUT_OF_RANGE", Nt[Nt.UNIMPLEMENTED = 12] = "UNIMPLEMENTED", Nt[Nt.INTERNAL = 13] = "INTERNAL", Nt[Nt.UNAVAILABLE = 14] = "UNAVAILABLE", Nt[Nt.DATA_LOSS = 15] = "DATA_LOSS";
  const sj = new Ca([
    4294967295,
    4294967295
  ], 0);
  function Dx(n) {
    const e = T2().encode(n), t = new v2();
    return t.update(e), new Uint8Array(t.digest());
  }
  function jx(n) {
    const e = new DataView(n.buffer), t = e.getUint32(0, true), r = e.getUint32(4, true), i = e.getUint32(8, true), l = e.getUint32(12, true);
    return [
      new Ca([
        t,
        r
      ], 0),
      new Ca([
        i,
        l
      ], 0)
    ];
  }
  class d1 {
    constructor(e, t, r) {
      if (this.bitmap = e, this.padding = t, this.hashCount = r, t < 0 || t >= 8) throw new ff(`Invalid padding: ${t}`);
      if (r < 0) throw new ff(`Invalid hash count: ${r}`);
      if (e.length > 0 && this.hashCount === 0) throw new ff(`Invalid hash count: ${r}`);
      if (e.length === 0 && t !== 0) throw new ff(`Invalid padding when bitmap length is 0: ${t}`);
      this.Ee = 8 * e.length - t, this.de = Ca.fromNumber(this.Ee);
    }
    Ae(e, t, r) {
      let i = e.add(t.multiply(Ca.fromNumber(r)));
      return i.compare(sj) === 1 && (i = new Ca([
        i.getBits(0),
        i.getBits(1)
      ], 0)), i.modulo(this.de).toNumber();
    }
    Re(e) {
      return !!(this.bitmap[Math.floor(e / 8)] & 1 << e % 8);
    }
    mightContain(e) {
      if (this.Ee === 0) return false;
      const t = Dx(e), [r, i] = jx(t);
      for (let l = 0; l < this.hashCount; l++) {
        const c = this.Ae(r, i, l);
        if (!this.Re(c)) return false;
      }
      return true;
    }
    static create(e, t, r) {
      const i = e % 8 == 0 ? 0 : 8 - e % 8, l = new Uint8Array(Math.ceil(e / 8)), c = new d1(l, i, t);
      return r.forEach((f) => c.insert(f)), c;
    }
    insert(e) {
      if (this.Ee === 0) return;
      const t = Dx(e), [r, i] = jx(t);
      for (let l = 0; l < this.hashCount; l++) {
        const c = this.Ae(r, i, l);
        this.Ve(c);
      }
    }
    Ve(e) {
      const t = Math.floor(e / 8), r = e % 8;
      this.bitmap[t] |= 1 << r;
    }
  }
  class ff extends Error {
    constructor() {
      super(...arguments), this.name = "BloomFilterError";
    }
  }
  class Em {
    constructor(e, t, r, i, l) {
      this.snapshotVersion = e, this.targetChanges = t, this.targetMismatches = r, this.documentUpdates = i, this.resolvedLimboDocuments = l;
    }
    static createSynthesizedRemoteEventForCurrentChange(e, t, r) {
      const i = /* @__PURE__ */ new Map();
      return i.set(e, Bf.createSynthesizedTargetChangeForCurrentChange(e, t, r)), new Em(ot.min(), i, new sn(vt), Ao(), Ct());
    }
  }
  class Bf {
    constructor(e, t, r, i, l) {
      this.resumeToken = e, this.current = t, this.addedDocuments = r, this.modifiedDocuments = i, this.removedDocuments = l;
    }
    static createSynthesizedTargetChangeForCurrentChange(e, t, r) {
      return new Bf(r, t, Ct(), Ct(), Ct());
    }
  }
  class Sg {
    constructor(e, t, r, i) {
      this.me = e, this.removedTargetIds = t, this.key = r, this.fe = i;
    }
  }
  class nT {
    constructor(e, t) {
      this.targetId = e, this.ge = t;
    }
  }
  class rT {
    constructor(e, t, r = Zn.EMPTY_BYTE_STRING, i = null) {
      this.state = e, this.targetIds = t, this.resumeToken = r, this.cause = i;
    }
  }
  class Ox {
    constructor() {
      this.pe = 0, this.ye = Lx(), this.we = Zn.EMPTY_BYTE_STRING, this.Se = false, this.be = true;
    }
    get current() {
      return this.Se;
    }
    get resumeToken() {
      return this.we;
    }
    get De() {
      return this.pe !== 0;
    }
    get ve() {
      return this.be;
    }
    Ce(e) {
      e.approximateByteSize() > 0 && (this.be = true, this.we = e);
    }
    Fe() {
      let e = Ct(), t = Ct(), r = Ct();
      return this.ye.forEach((i, l) => {
        switch (l) {
          case 0:
            e = e.add(i);
            break;
          case 2:
            t = t.add(i);
            break;
          case 1:
            r = r.add(i);
            break;
          default:
            st();
        }
      }), new Bf(this.we, this.Se, e, t, r);
    }
    Me() {
      this.be = false, this.ye = Lx();
    }
    xe(e, t) {
      this.be = true, this.ye = this.ye.insert(e, t);
    }
    Oe(e) {
      this.be = true, this.ye = this.ye.remove(e);
    }
    Ne() {
      this.pe += 1;
    }
    Be() {
      this.pe -= 1, $t(this.pe >= 0);
    }
    Le() {
      this.be = true, this.Se = true;
    }
  }
  class ij {
    constructor(e) {
      this.ke = e, this.qe = /* @__PURE__ */ new Map(), this.Qe = Ao(), this.$e = ug(), this.Ue = ug(), this.Ke = new sn(vt);
    }
    We(e) {
      for (const t of e.me) e.fe && e.fe.isFoundDocument() ? this.Ge(t, e.fe) : this.ze(t, e.key, e.fe);
      for (const t of e.removedTargetIds) this.ze(t, e.key, e.fe);
    }
    je(e) {
      this.forEachTarget(e, (t) => {
        const r = this.He(t);
        switch (e.state) {
          case 0:
            this.Je(t) && r.Ce(e.resumeToken);
            break;
          case 1:
            r.Be(), r.De || r.Me(), r.Ce(e.resumeToken);
            break;
          case 2:
            r.Be(), r.De || this.removeTarget(t);
            break;
          case 3:
            this.Je(t) && (r.Le(), r.Ce(e.resumeToken));
            break;
          case 4:
            this.Je(t) && (this.Ye(t), r.Ce(e.resumeToken));
            break;
          default:
            st();
        }
      });
    }
    forEachTarget(e, t) {
      e.targetIds.length > 0 ? e.targetIds.forEach(t) : this.qe.forEach((r, i) => {
        this.Je(i) && t(i);
      });
    }
    Ze(e) {
      const t = e.targetId, r = e.ge.count, i = this.Xe(t);
      if (i) {
        const l = i.target;
        if (sy(l)) if (r === 0) {
          const c = new Ze(l.path);
          this.ze(t, c, pr.newNoDocument(c, ot.min()));
        } else $t(r === 1);
        else {
          const c = this.et(t);
          if (c !== r) {
            const f = this.tt(e), m = f ? this.nt(f, e, c) : 1;
            if (m !== 0) {
              this.Ye(t);
              const y = m === 2 ? "TargetPurposeExistenceFilterMismatchBloom" : "TargetPurposeExistenceFilterMismatch";
              this.Ke = this.Ke.insert(t, y);
            }
          }
        }
      }
    }
    tt(e) {
      const t = e.ge.unchangedNames;
      if (!t || !t.bits) return null;
      const { bits: { bitmap: r = "", padding: i = 0 }, hashCount: l = 0 } = t;
      let c, f;
      try {
        c = Ra(r).toUint8Array();
      } catch (m) {
        if (m instanceof k2) return gu("Decoding the base64 bloom filter in existence filter failed (" + m.message + "); ignoring the bloom filter and falling back to full re-query."), null;
        throw m;
      }
      try {
        f = new d1(c, i, l);
      } catch (m) {
        return gu(m instanceof ff ? "BloomFilter error: " : "Applying bloom filter failed: ", m), null;
      }
      return f.Ee === 0 ? null : f;
    }
    nt(e, t, r) {
      return t.ge.count === r - this.st(e, t.targetId) ? 0 : 2;
    }
    st(e, t) {
      const r = this.ke.getRemoteKeysForTarget(t);
      let i = 0;
      return r.forEach((l) => {
        const c = this.ke.it(), f = `projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;
        e.mightContain(f) || (this.ze(t, l, null), i++);
      }), i;
    }
    ot(e) {
      const t = /* @__PURE__ */ new Map();
      this.qe.forEach((l, c) => {
        const f = this.Xe(c);
        if (f) {
          if (l.current && sy(f.target)) {
            const m = new Ze(f.target.path);
            this._t(m).has(c) || this.ut(c, m) || this.ze(c, m, pr.newNoDocument(m, e));
          }
          l.ve && (t.set(c, l.Fe()), l.Me());
        }
      });
      let r = Ct();
      this.Ue.forEach((l, c) => {
        let f = true;
        c.forEachWhile((m) => {
          const y = this.Xe(m);
          return !y || y.purpose === "TargetPurposeLimboResolution" || (f = false, false);
        }), f && (r = r.add(l));
      }), this.Qe.forEach((l, c) => c.setReadTime(e));
      const i = new Em(e, t, this.Ke, this.Qe, r);
      return this.Qe = Ao(), this.$e = ug(), this.Ue = ug(), this.Ke = new sn(vt), i;
    }
    Ge(e, t) {
      if (!this.Je(e)) return;
      const r = this.ut(e, t.key) ? 2 : 0;
      this.He(e).xe(t.key, r), this.Qe = this.Qe.insert(t.key, t), this.$e = this.$e.insert(t.key, this._t(t.key).add(e)), this.Ue = this.Ue.insert(t.key, this.ct(t.key).add(e));
    }
    ze(e, t, r) {
      if (!this.Je(e)) return;
      const i = this.He(e);
      this.ut(e, t) ? i.xe(t, 1) : i.Oe(t), this.Ue = this.Ue.insert(t, this.ct(t).delete(e)), this.Ue = this.Ue.insert(t, this.ct(t).add(e)), r && (this.Qe = this.Qe.insert(t, r));
    }
    removeTarget(e) {
      this.qe.delete(e);
    }
    et(e) {
      const t = this.He(e).Fe();
      return this.ke.getRemoteKeysForTarget(e).size + t.addedDocuments.size - t.removedDocuments.size;
    }
    Ne(e) {
      this.He(e).Ne();
    }
    He(e) {
      let t = this.qe.get(e);
      return t || (t = new Ox(), this.qe.set(e, t)), t;
    }
    ct(e) {
      let t = this.Ue.get(e);
      return t || (t = new Rn(vt), this.Ue = this.Ue.insert(e, t)), t;
    }
    _t(e) {
      let t = this.$e.get(e);
      return t || (t = new Rn(vt), this.$e = this.$e.insert(e, t)), t;
    }
    Je(e) {
      const t = this.Xe(e) !== null;
      return t || Ue("WatchChangeAggregator", "Detected inactive target", e), t;
    }
    Xe(e) {
      const t = this.qe.get(e);
      return t && t.De ? null : this.ke.lt(e);
    }
    Ye(e) {
      this.qe.set(e, new Ox()), this.ke.getRemoteKeysForTarget(e).forEach((t) => {
        this.ze(e, t, null);
      });
    }
    ut(e, t) {
      return this.ke.getRemoteKeysForTarget(e).has(t);
    }
  }
  function ug() {
    return new sn(Ze.comparator);
  }
  function Lx() {
    return new sn(Ze.comparator);
  }
  const oj = {
    asc: "ASCENDING",
    desc: "DESCENDING"
  }, aj = {
    "<": "LESS_THAN",
    "<=": "LESS_THAN_OR_EQUAL",
    ">": "GREATER_THAN",
    ">=": "GREATER_THAN_OR_EQUAL",
    "==": "EQUAL",
    "!=": "NOT_EQUAL",
    "array-contains": "ARRAY_CONTAINS",
    in: "IN",
    "not-in": "NOT_IN",
    "array-contains-any": "ARRAY_CONTAINS_ANY"
  }, lj = {
    and: "AND",
    or: "OR"
  };
  class cj {
    constructor(e, t) {
      this.databaseId = e, this.useProto3Json = t;
    }
  }
  function ay(n, e) {
    return n.useProto3Json || mm(e) ? e : {
      value: e
    };
  }
  function Gg(n, e) {
    return n.useProto3Json ? `${new Date(1e3 * e.seconds).toISOString().replace(/\.\d*/, "").replace("Z", "")}.${("000000000" + e.nanoseconds).slice(-9)}Z` : {
      seconds: "" + e.seconds,
      nanos: e.nanoseconds
    };
  }
  function sT(n, e) {
    return n.useProto3Json ? e.toBase64() : e.toUint8Array();
  }
  function uj(n, e) {
    return Gg(n, e.toTimestamp());
  }
  function Fi(n) {
    return $t(!!n), ot.fromTimestamp(function(t) {
      const r = Aa(t);
      return new An(r.seconds, r.nanos);
    }(n));
  }
  function f1(n, e) {
    return ly(n, e).canonicalString();
  }
  function ly(n, e) {
    const t = function(i) {
      return new Xt([
        "projects",
        i.projectId,
        "databases",
        i.database
      ]);
    }(n).child("documents");
    return e === void 0 ? t : t.child(e);
  }
  function iT(n) {
    const e = Xt.fromString(n);
    return $t(uT(e)), e;
  }
  function cy(n, e) {
    return f1(n.databaseId, e.path);
  }
  function vv(n, e) {
    const t = iT(e);
    if (t.get(1) !== n.databaseId.projectId) throw new He(_e.INVALID_ARGUMENT, "Tried to deserialize key from different project: " + t.get(1) + " vs " + n.databaseId.projectId);
    if (t.get(3) !== n.databaseId.database) throw new He(_e.INVALID_ARGUMENT, "Tried to deserialize key from different database: " + t.get(3) + " vs " + n.databaseId.database);
    return new Ze(aT(t));
  }
  function oT(n, e) {
    return f1(n.databaseId, e);
  }
  function dj(n) {
    const e = iT(n);
    return e.length === 4 ? Xt.emptyPath() : aT(e);
  }
  function uy(n) {
    return new Xt([
      "projects",
      n.databaseId.projectId,
      "databases",
      n.databaseId.database
    ]).canonicalString();
  }
  function aT(n) {
    return $t(n.length > 4 && n.get(4) === "documents"), n.popFirst(5);
  }
  function Mx(n, e, t) {
    return {
      name: cy(n, e),
      fields: t.value.mapValue.fields
    };
  }
  function fj(n, e) {
    let t;
    if ("targetChange" in e) {
      e.targetChange;
      const r = function(y) {
        return y === "NO_CHANGE" ? 0 : y === "ADD" ? 1 : y === "REMOVE" ? 2 : y === "CURRENT" ? 3 : y === "RESET" ? 4 : st();
      }(e.targetChange.targetChangeType || "NO_CHANGE"), i = e.targetChange.targetIds || [], l = function(y, x) {
        return y.useProto3Json ? ($t(x === void 0 || typeof x == "string"), Zn.fromBase64String(x || "")) : ($t(x === void 0 || x instanceof Buffer || x instanceof Uint8Array), Zn.fromUint8Array(x || new Uint8Array()));
      }(n, e.targetChange.resumeToken), c = e.targetChange.cause, f = c && function(y) {
        const x = y.code === void 0 ? _e.UNKNOWN : tT(y.code);
        return new He(x, y.message || "");
      }(c);
      t = new rT(r, i, l, f || null);
    } else if ("documentChange" in e) {
      e.documentChange;
      const r = e.documentChange;
      r.document, r.document.name, r.document.updateTime;
      const i = vv(n, r.document.name), l = Fi(r.document.updateTime), c = r.document.createTime ? Fi(r.document.createTime) : ot.min(), f = new Qr({
        mapValue: {
          fields: r.document.fields
        }
      }), m = pr.newFoundDocument(i, l, c, f), y = r.targetIds || [], x = r.removedTargetIds || [];
      t = new Sg(y, x, m.key, m);
    } else if ("documentDelete" in e) {
      e.documentDelete;
      const r = e.documentDelete;
      r.document;
      const i = vv(n, r.document), l = r.readTime ? Fi(r.readTime) : ot.min(), c = pr.newNoDocument(i, l), f = r.removedTargetIds || [];
      t = new Sg([], f, c.key, c);
    } else if ("documentRemove" in e) {
      e.documentRemove;
      const r = e.documentRemove;
      r.document;
      const i = vv(n, r.document), l = r.removedTargetIds || [];
      t = new Sg([], l, i, null);
    } else {
      if (!("filter" in e)) return st();
      {
        e.filter;
        const r = e.filter;
        r.targetId;
        const { count: i = 0, unchangedNames: l } = r, c = new nj(i, l), f = r.targetId;
        t = new nT(f, c);
      }
    }
    return t;
  }
  function hj(n, e) {
    let t;
    if (e instanceof Uf) t = {
      update: Mx(n, e.key, e.value)
    };
    else if (e instanceof c1) t = {
      delete: cy(n, e.key)
    };
    else if (e instanceof Ma) t = {
      update: Mx(n, e.key, e.data),
      updateMask: Ej(e.fieldMask)
    };
    else {
      if (!(e instanceof ZD)) return st();
      t = {
        verify: cy(n, e.key)
      };
    }
    return e.fieldTransforms.length > 0 && (t.updateTransforms = e.fieldTransforms.map((r) => function(l, c) {
      const f = c.transform;
      if (f instanceof qg) return {
        fieldPath: c.field.canonicalString(),
        setToServerValue: "REQUEST_TIME"
      };
      if (f instanceof Pf) return {
        fieldPath: c.field.canonicalString(),
        appendMissingElements: {
          values: f.elements
        }
      };
      if (f instanceof Df) return {
        fieldPath: c.field.canonicalString(),
        removeAllFromArray: {
          values: f.elements
        }
      };
      if (f instanceof Kg) return {
        fieldPath: c.field.canonicalString(),
        increment: f.Ie
      };
      throw st();
    }(0, r))), e.precondition.isNone || (t.currentDocument = function(i, l) {
      return l.updateTime !== void 0 ? {
        updateTime: uj(i, l.updateTime)
      } : l.exists !== void 0 ? {
        exists: l.exists
      } : st();
    }(n, e.precondition)), t;
  }
  function pj(n, e) {
    return n && n.length > 0 ? ($t(e !== void 0), n.map((t) => function(i, l) {
      let c = i.updateTime ? Fi(i.updateTime) : Fi(l);
      return c.isEqual(ot.min()) && (c = Fi(l)), new YD(c, i.transformResults || []);
    }(t, e))) : [];
  }
  function gj(n, e) {
    return {
      documents: [
        oT(n, e.path)
      ]
    };
  }
  function mj(n, e) {
    const t = {
      structuredQuery: {}
    }, r = e.path;
    let i;
    e.collectionGroup !== null ? (i = r, t.structuredQuery.from = [
      {
        collectionId: e.collectionGroup,
        allDescendants: true
      }
    ]) : (i = r.popLast(), t.structuredQuery.from = [
      {
        collectionId: r.lastSegment()
      }
    ]), t.parent = oT(n, i);
    const l = function(y) {
      if (y.length !== 0) return cT(li.create(y, "and"));
    }(e.filters);
    l && (t.structuredQuery.where = l);
    const c = function(y) {
      if (y.length !== 0) return y.map((x) => function(S) {
        return {
          field: au(S.field),
          direction: wj(S.dir)
        };
      }(x));
    }(e.orderBy);
    c && (t.structuredQuery.orderBy = c);
    const f = ay(n, e.limit);
    return f !== null && (t.structuredQuery.limit = f), e.startAt && (t.structuredQuery.startAt = function(y) {
      return {
        before: y.inclusive,
        values: y.position
      };
    }(e.startAt)), e.endAt && (t.structuredQuery.endAt = function(y) {
      return {
        before: !y.inclusive,
        values: y.position
      };
    }(e.endAt)), {
      ht: t,
      parent: i
    };
  }
  function vj(n) {
    let e = dj(n.parent);
    const t = n.structuredQuery, r = t.from ? t.from.length : 0;
    let i = null;
    if (r > 0) {
      $t(r === 1);
      const x = t.from[0];
      x.allDescendants ? i = x.collectionId : e = e.child(x.collectionId);
    }
    let l = [];
    t.where && (l = function(C) {
      const S = lT(C);
      return S instanceof li && $2(S) ? S.getFilters() : [
        S
      ];
    }(t.where));
    let c = [];
    t.orderBy && (c = function(C) {
      return C.map((S) => function(P) {
        return new Hg(lu(P.field), function(L) {
          switch (L) {
            case "ASCENDING":
              return "asc";
            case "DESCENDING":
              return "desc";
            default:
              return;
          }
        }(P.direction));
      }(S));
    }(t.orderBy));
    let f = null;
    t.limit && (f = function(C) {
      let S;
      return S = typeof C == "object" ? C.value : C, mm(S) ? null : S;
    }(t.limit));
    let m = null;
    t.startAt && (m = function(C) {
      const S = !!C.before, N = C.values || [];
      return new Wg(N, S);
    }(t.startAt));
    let y = null;
    return t.endAt && (y = function(C) {
      const S = !C.before, N = C.values || [];
      return new Wg(N, S);
    }(t.endAt)), MD(e, i, c, l, f, "F", m, y);
  }
  function yj(n, e) {
    const t = function(i) {
      switch (i) {
        case "TargetPurposeListen":
          return null;
        case "TargetPurposeExistenceFilterMismatch":
          return "existence-filter-mismatch";
        case "TargetPurposeExistenceFilterMismatchBloom":
          return "existence-filter-mismatch-bloom";
        case "TargetPurposeLimboResolution":
          return "limbo-document";
        default:
          return st();
      }
    }(e.purpose);
    return t == null ? null : {
      "goog-listen-tags": t
    };
  }
  function lT(n) {
    return n.unaryFilter !== void 0 ? function(t) {
      switch (t.unaryFilter.op) {
        case "IS_NAN":
          const r = lu(t.unaryFilter.field);
          return _n.create(r, "==", {
            doubleValue: NaN
          });
        case "IS_NULL":
          const i = lu(t.unaryFilter.field);
          return _n.create(i, "==", {
            nullValue: "NULL_VALUE"
          });
        case "IS_NOT_NAN":
          const l = lu(t.unaryFilter.field);
          return _n.create(l, "!=", {
            doubleValue: NaN
          });
        case "IS_NOT_NULL":
          const c = lu(t.unaryFilter.field);
          return _n.create(c, "!=", {
            nullValue: "NULL_VALUE"
          });
        default:
          return st();
      }
    }(n) : n.fieldFilter !== void 0 ? function(t) {
      return _n.create(lu(t.fieldFilter.field), function(i) {
        switch (i) {
          case "EQUAL":
            return "==";
          case "NOT_EQUAL":
            return "!=";
          case "GREATER_THAN":
            return ">";
          case "GREATER_THAN_OR_EQUAL":
            return ">=";
          case "LESS_THAN":
            return "<";
          case "LESS_THAN_OR_EQUAL":
            return "<=";
          case "ARRAY_CONTAINS":
            return "array-contains";
          case "IN":
            return "in";
          case "NOT_IN":
            return "not-in";
          case "ARRAY_CONTAINS_ANY":
            return "array-contains-any";
          default:
            return st();
        }
      }(t.fieldFilter.op), t.fieldFilter.value);
    }(n) : n.compositeFilter !== void 0 ? function(t) {
      return li.create(t.compositeFilter.filters.map((r) => lT(r)), function(i) {
        switch (i) {
          case "AND":
            return "and";
          case "OR":
            return "or";
          default:
            return st();
        }
      }(t.compositeFilter.op));
    }(n) : st();
  }
  function wj(n) {
    return oj[n];
  }
  function _j(n) {
    return aj[n];
  }
  function xj(n) {
    return lj[n];
  }
  function au(n) {
    return {
      fieldPath: n.canonicalString()
    };
  }
  function lu(n) {
    return Jn.fromServerFormat(n.fieldPath);
  }
  function cT(n) {
    return n instanceof _n ? function(t) {
      if (t.op === "==") {
        if (Tx(t.value)) return {
          unaryFilter: {
            field: au(t.field),
            op: "IS_NAN"
          }
        };
        if (bx(t.value)) return {
          unaryFilter: {
            field: au(t.field),
            op: "IS_NULL"
          }
        };
      } else if (t.op === "!=") {
        if (Tx(t.value)) return {
          unaryFilter: {
            field: au(t.field),
            op: "IS_NOT_NAN"
          }
        };
        if (bx(t.value)) return {
          unaryFilter: {
            field: au(t.field),
            op: "IS_NOT_NULL"
          }
        };
      }
      return {
        fieldFilter: {
          field: au(t.field),
          op: _j(t.op),
          value: t.value
        }
      };
    }(n) : n instanceof li ? function(t) {
      const r = t.getFilters().map((i) => cT(i));
      return r.length === 1 ? r[0] : {
        compositeFilter: {
          op: xj(t.op),
          filters: r
        }
      };
    }(n) : st();
  }
  function Ej(n) {
    const e = [];
    return n.fields.forEach((t) => e.push(t.canonicalString())), {
      fieldPaths: e
    };
  }
  function uT(n) {
    return n.length >= 4 && n.get(0) === "projects" && n.get(2) === "databases";
  }
  class xa {
    constructor(e, t, r, i, l = ot.min(), c = ot.min(), f = Zn.EMPTY_BYTE_STRING, m = null) {
      this.target = e, this.targetId = t, this.purpose = r, this.sequenceNumber = i, this.snapshotVersion = l, this.lastLimboFreeSnapshotVersion = c, this.resumeToken = f, this.expectedCount = m;
    }
    withSequenceNumber(e) {
      return new xa(this.target, this.targetId, this.purpose, e, this.snapshotVersion, this.lastLimboFreeSnapshotVersion, this.resumeToken, this.expectedCount);
    }
    withResumeToken(e, t) {
      return new xa(this.target, this.targetId, this.purpose, this.sequenceNumber, t, this.lastLimboFreeSnapshotVersion, e, null);
    }
    withExpectedCount(e) {
      return new xa(this.target, this.targetId, this.purpose, this.sequenceNumber, this.snapshotVersion, this.lastLimboFreeSnapshotVersion, this.resumeToken, e);
    }
    withLastLimboFreeSnapshotVersion(e) {
      return new xa(this.target, this.targetId, this.purpose, this.sequenceNumber, this.snapshotVersion, e, this.resumeToken, this.expectedCount);
    }
  }
  class bj {
    constructor(e) {
      this.Tt = e;
    }
  }
  function Tj(n) {
    const e = vj({
      parent: n.parent,
      structuredQuery: n.structuredQuery
    });
    return n.limitType === "LAST" ? oy(e, e.limit, "L") : e;
  }
  class Cj {
    constructor() {
      this.Tn = new Sj();
    }
    addToCollectionParentIndex(e, t) {
      return this.Tn.add(t), we.resolve();
    }
    getCollectionParents(e, t) {
      return we.resolve(this.Tn.getEntries(t));
    }
    addFieldIndex(e, t) {
      return we.resolve();
    }
    deleteFieldIndex(e, t) {
      return we.resolve();
    }
    deleteAllFieldIndexes(e) {
      return we.resolve();
    }
    createTargetIndexes(e, t) {
      return we.resolve();
    }
    getDocumentsMatchingTarget(e, t) {
      return we.resolve(null);
    }
    getIndexType(e, t) {
      return we.resolve(0);
    }
    getFieldIndexes(e, t) {
      return we.resolve([]);
    }
    getNextCollectionGroupToUpdate(e) {
      return we.resolve(null);
    }
    getMinOffset(e, t) {
      return we.resolve(ka.min());
    }
    getMinOffsetFromCollectionGroup(e, t) {
      return we.resolve(ka.min());
    }
    updateCollectionGroup(e, t, r) {
      return we.resolve();
    }
    updateIndexEntries(e, t) {
      return we.resolve();
    }
  }
  class Sj {
    constructor() {
      this.index = {};
    }
    add(e) {
      const t = e.lastSegment(), r = e.popLast(), i = this.index[t] || new Rn(Xt.comparator), l = !i.has(r);
      return this.index[t] = i.add(r), l;
    }
    has(e) {
      const t = e.lastSegment(), r = e.popLast(), i = this.index[t];
      return i && i.has(r);
    }
    getEntries(e) {
      return (this.index[e] || new Rn(Xt.comparator)).toArray();
    }
  }
  const $x = {
    didRun: false,
    sequenceNumbersCollected: 0,
    targetsRemoved: 0,
    documentsRemoved: 0
  }, dT = 41943040;
  class Gr {
    static withCacheSize(e) {
      return new Gr(e, Gr.DEFAULT_COLLECTION_PERCENTILE, Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);
    }
    constructor(e, t, r) {
      this.cacheSizeCollectionThreshold = e, this.percentileToCollect = t, this.maximumSequenceNumbersToCollect = r;
    }
  }
  Gr.DEFAULT_COLLECTION_PERCENTILE = 10, Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3, Gr.DEFAULT = new Gr(dT, Gr.DEFAULT_COLLECTION_PERCENTILE, Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT), Gr.DISABLED = new Gr(-1, 0, 0);
  class wu {
    constructor(e) {
      this.$n = e;
    }
    next() {
      return this.$n += 2, this.$n;
    }
    static Un() {
      return new wu(0);
    }
    static Kn() {
      return new wu(-1);
    }
  }
  const Vx = "LruGarbageCollector", Ij = 1048576;
  function Fx([n, e], [t, r]) {
    const i = vt(n, t);
    return i === 0 ? vt(e, r) : i;
  }
  class kj {
    constructor(e) {
      this.Hn = e, this.buffer = new Rn(Fx), this.Jn = 0;
    }
    Yn() {
      return ++this.Jn;
    }
    Zn(e) {
      const t = [
        e,
        this.Yn()
      ];
      if (this.buffer.size < this.Hn) this.buffer = this.buffer.add(t);
      else {
        const r = this.buffer.last();
        Fx(t, r) < 0 && (this.buffer = this.buffer.delete(r).add(t));
      }
    }
    get maxValue() {
      return this.buffer.last()[0];
    }
  }
  class Aj {
    constructor(e, t, r) {
      this.garbageCollector = e, this.asyncQueue = t, this.localStore = r, this.Xn = null;
    }
    start() {
      this.garbageCollector.params.cacheSizeCollectionThreshold !== -1 && this.er(6e4);
    }
    stop() {
      this.Xn && (this.Xn.cancel(), this.Xn = null);
    }
    get started() {
      return this.Xn !== null;
    }
    er(e) {
      Ue(Vx, `Garbage collection scheduled in ${e}ms`), this.Xn = this.asyncQueue.enqueueAfterDelay("lru_garbage_collection", e, async () => {
        this.Xn = null;
        try {
          await this.localStore.collectGarbage(this.garbageCollector);
        } catch (t) {
          Ru(t) ? Ue(Vx, "Ignoring IndexedDB error during garbage collection: ", t) : await Au(t);
        }
        await this.er(3e5);
      });
    }
  }
  class Rj {
    constructor(e, t) {
      this.tr = e, this.params = t;
    }
    calculateTargetCount(e, t) {
      return this.tr.nr(e).next((r) => Math.floor(t / 100 * r));
    }
    nthSequenceNumber(e, t) {
      if (t === 0) return we.resolve(gm.ae);
      const r = new kj(t);
      return this.tr.forEachTarget(e, (i) => r.Zn(i.sequenceNumber)).next(() => this.tr.rr(e, (i) => r.Zn(i))).next(() => r.maxValue);
    }
    removeTargets(e, t, r) {
      return this.tr.removeTargets(e, t, r);
    }
    removeOrphanedDocuments(e, t) {
      return this.tr.removeOrphanedDocuments(e, t);
    }
    collect(e, t) {
      return this.params.cacheSizeCollectionThreshold === -1 ? (Ue("LruGarbageCollector", "Garbage collection skipped; disabled"), we.resolve($x)) : this.getCacheSize(e).next((r) => r < this.params.cacheSizeCollectionThreshold ? (Ue("LruGarbageCollector", `Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`), $x) : this.ir(e, t));
    }
    getCacheSize(e) {
      return this.tr.getCacheSize(e);
    }
    ir(e, t) {
      let r, i, l, c, f, m, y;
      const x = Date.now();
      return this.calculateTargetCount(e, this.params.percentileToCollect).next((C) => (C > this.params.maximumSequenceNumbersToCollect ? (Ue("LruGarbageCollector", `Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`), i = this.params.maximumSequenceNumbersToCollect) : i = C, c = Date.now(), this.nthSequenceNumber(e, i))).next((C) => (r = C, f = Date.now(), this.removeTargets(e, r, t))).next((C) => (l = C, m = Date.now(), this.removeOrphanedDocuments(e, r))).next((C) => (y = Date.now(), iu() <= Tt.DEBUG && Ue("LruGarbageCollector", `LRU Garbage Collection
	Counted targets in ${c - x}ms
	Determined least recently used ${i} in ` + (f - c) + `ms
	Removed ${l} targets in ` + (m - f) + `ms
	Removed ${C} documents in ` + (y - m) + `ms
Total Duration: ${y - x}ms`), we.resolve({
        didRun: true,
        sequenceNumbersCollected: i,
        targetsRemoved: l,
        documentsRemoved: C
      })));
    }
  }
  function Nj(n, e) {
    return new Rj(n, e);
  }
  class Pj {
    constructor() {
      this.changes = new ql((e) => e.toString(), (e, t) => e.isEqual(t)), this.changesApplied = false;
    }
    addEntry(e) {
      this.assertNotApplied(), this.changes.set(e.key, e);
    }
    removeEntry(e, t) {
      this.assertNotApplied(), this.changes.set(e, pr.newInvalidDocument(e).setReadTime(t));
    }
    getEntry(e, t) {
      this.assertNotApplied();
      const r = this.changes.get(t);
      return r !== void 0 ? we.resolve(r) : this.getFromCache(e, t);
    }
    getEntries(e, t) {
      return this.getAllFromCache(e, t);
    }
    apply(e) {
      return this.assertNotApplied(), this.changesApplied = true, this.applyChanges(e);
    }
    assertNotApplied() {
    }
  }
  class Dj {
    constructor(e, t) {
      this.overlayedDocument = e, this.mutatedFields = t;
    }
  }
  class jj {
    constructor(e, t, r, i) {
      this.remoteDocumentCache = e, this.mutationQueue = t, this.documentOverlayCache = r, this.indexManager = i;
    }
    getDocument(e, t) {
      let r = null;
      return this.documentOverlayCache.getOverlay(e, t).next((i) => (r = i, this.remoteDocumentCache.getEntry(e, t))).next((i) => (r !== null && _f(r.mutation, i, fs.empty(), An.now()), i));
    }
    getDocuments(e, t) {
      return this.remoteDocumentCache.getEntries(e, t).next((r) => this.getLocalViewOfDocuments(e, r, Ct()).next(() => r));
    }
    getLocalViewOfDocuments(e, t, r = Ct()) {
      const i = Dl();
      return this.populateOverlays(e, i, t).next(() => this.computeViews(e, t, i, r).next((l) => {
        let c = df();
        return l.forEach((f, m) => {
          c = c.insert(f, m.overlayedDocument);
        }), c;
      }));
    }
    getOverlayedDocuments(e, t) {
      const r = Dl();
      return this.populateOverlays(e, r, t).next(() => this.computeViews(e, t, r, Ct()));
    }
    populateOverlays(e, t, r) {
      const i = [];
      return r.forEach((l) => {
        t.has(l) || i.push(l);
      }), this.documentOverlayCache.getOverlays(e, i).next((l) => {
        l.forEach((c, f) => {
          t.set(c, f);
        });
      });
    }
    computeViews(e, t, r, i) {
      let l = Ao();
      const c = wf(), f = function() {
        return wf();
      }();
      return t.forEach((m, y) => {
        const x = r.get(y.key);
        i.has(y.key) && (x === void 0 || x.mutation instanceof Ma) ? l = l.insert(y.key, y) : x !== void 0 ? (c.set(y.key, x.mutation.getFieldMask()), _f(x.mutation, y, x.mutation.getFieldMask(), An.now())) : c.set(y.key, fs.empty());
      }), this.recalculateAndSaveOverlays(e, l).next((m) => (m.forEach((y, x) => c.set(y, x)), t.forEach((y, x) => {
        var C;
        return f.set(y, new Dj(x, (C = c.get(y)) !== null && C !== void 0 ? C : null));
      }), f));
    }
    recalculateAndSaveOverlays(e, t) {
      const r = wf();
      let i = new sn((c, f) => c - f), l = Ct();
      return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e, t).next((c) => {
        for (const f of c) f.keys().forEach((m) => {
          const y = t.get(m);
          if (y === null) return;
          let x = r.get(m) || fs.empty();
          x = f.applyToLocalView(y, x), r.set(m, x);
          const C = (i.get(f.batchId) || Ct()).add(m);
          i = i.insert(f.batchId, C);
        });
      }).next(() => {
        const c = [], f = i.getReverseIterator();
        for (; f.hasNext(); ) {
          const m = f.getNext(), y = m.key, x = m.value, C = K2();
          x.forEach((S) => {
            if (!l.has(S)) {
              const N = Z2(t.get(S), r.get(S));
              N !== null && C.set(S, N), l = l.add(S);
            }
          }), c.push(this.documentOverlayCache.saveOverlays(e, y, C));
        }
        return we.waitFor(c);
      }).next(() => r);
    }
    recalculateAndSaveOverlaysForDocumentKeys(e, t) {
      return this.remoteDocumentCache.getEntries(e, t).next((r) => this.recalculateAndSaveOverlays(e, r));
    }
    getDocumentsMatchingQuery(e, t, r, i) {
      return function(c) {
        return Ze.isDocumentKey(c.path) && c.collectionGroup === null && c.filters.length === 0;
      }(t) ? this.getDocumentsMatchingDocumentQuery(e, t.path) : U2(t) ? this.getDocumentsMatchingCollectionGroupQuery(e, t, r, i) : this.getDocumentsMatchingCollectionQuery(e, t, r, i);
    }
    getNextDocuments(e, t, r, i) {
      return this.remoteDocumentCache.getAllFromCollectionGroup(e, t, r, i).next((l) => {
        const c = i - l.size > 0 ? this.documentOverlayCache.getOverlaysForCollectionGroup(e, t, r.largestBatchId, i - l.size) : we.resolve(Dl());
        let f = kf, m = l;
        return c.next((y) => we.forEach(y, (x, C) => (f < C.largestBatchId && (f = C.largestBatchId), l.get(x) ? we.resolve() : this.remoteDocumentCache.getEntry(e, x).next((S) => {
          m = m.insert(x, S);
        }))).next(() => this.populateOverlays(e, y, l)).next(() => this.computeViews(e, m, y, Ct())).next((x) => ({
          batchId: f,
          changes: q2(x)
        })));
      });
    }
    getDocumentsMatchingDocumentQuery(e, t) {
      return this.getDocument(e, new Ze(t)).next((r) => {
        let i = df();
        return r.isFoundDocument() && (i = i.insert(r.key, r)), i;
      });
    }
    getDocumentsMatchingCollectionGroupQuery(e, t, r, i) {
      const l = t.collectionGroup;
      let c = df();
      return this.indexManager.getCollectionParents(e, l).next((f) => we.forEach(f, (m) => {
        const y = function(C, S) {
          return new zf(S, null, C.explicitOrderBy.slice(), C.filters.slice(), C.limit, C.limitType, C.startAt, C.endAt);
        }(t, m.child(l));
        return this.getDocumentsMatchingCollectionQuery(e, y, r, i).next((x) => {
          x.forEach((C, S) => {
            c = c.insert(C, S);
          });
        });
      }).next(() => c));
    }
    getDocumentsMatchingCollectionQuery(e, t, r, i) {
      let l;
      return this.documentOverlayCache.getOverlaysForCollection(e, t.path, r.largestBatchId).next((c) => (l = c, this.remoteDocumentCache.getDocumentsMatchingQuery(e, t, r, l, i))).next((c) => {
        l.forEach((m, y) => {
          const x = y.getKey();
          c.get(x) === null && (c = c.insert(x, pr.newInvalidDocument(x)));
        });
        let f = df();
        return c.forEach((m, y) => {
          const x = l.get(m);
          x !== void 0 && _f(x.mutation, y, fs.empty(), An.now()), wm(t, y) && (f = f.insert(m, y));
        }), f;
      });
    }
  }
  class Oj {
    constructor(e) {
      this.serializer = e, this.dr = /* @__PURE__ */ new Map(), this.Ar = /* @__PURE__ */ new Map();
    }
    getBundleMetadata(e, t) {
      return we.resolve(this.dr.get(t));
    }
    saveBundleMetadata(e, t) {
      return this.dr.set(t.id, function(i) {
        return {
          id: i.id,
          version: i.version,
          createTime: Fi(i.createTime)
        };
      }(t)), we.resolve();
    }
    getNamedQuery(e, t) {
      return we.resolve(this.Ar.get(t));
    }
    saveNamedQuery(e, t) {
      return this.Ar.set(t.name, function(i) {
        return {
          name: i.name,
          query: Tj(i.bundledQuery),
          readTime: Fi(i.readTime)
        };
      }(t)), we.resolve();
    }
  }
  class Lj {
    constructor() {
      this.overlays = new sn(Ze.comparator), this.Rr = /* @__PURE__ */ new Map();
    }
    getOverlay(e, t) {
      return we.resolve(this.overlays.get(t));
    }
    getOverlays(e, t) {
      const r = Dl();
      return we.forEach(t, (i) => this.getOverlay(e, i).next((l) => {
        l !== null && r.set(i, l);
      })).next(() => r);
    }
    saveOverlays(e, t, r) {
      return r.forEach((i, l) => {
        this.Et(e, t, l);
      }), we.resolve();
    }
    removeOverlaysForBatchId(e, t, r) {
      const i = this.Rr.get(r);
      return i !== void 0 && (i.forEach((l) => this.overlays = this.overlays.remove(l)), this.Rr.delete(r)), we.resolve();
    }
    getOverlaysForCollection(e, t, r) {
      const i = Dl(), l = t.length + 1, c = new Ze(t.child("")), f = this.overlays.getIteratorFrom(c);
      for (; f.hasNext(); ) {
        const m = f.getNext().value, y = m.getKey();
        if (!t.isPrefixOf(y.path)) break;
        y.path.length === l && m.largestBatchId > r && i.set(m.getKey(), m);
      }
      return we.resolve(i);
    }
    getOverlaysForCollectionGroup(e, t, r, i) {
      let l = new sn((y, x) => y - x);
      const c = this.overlays.getIterator();
      for (; c.hasNext(); ) {
        const y = c.getNext().value;
        if (y.getKey().getCollectionGroup() === t && y.largestBatchId > r) {
          let x = l.get(y.largestBatchId);
          x === null && (x = Dl(), l = l.insert(y.largestBatchId, x)), x.set(y.getKey(), y);
        }
      }
      const f = Dl(), m = l.getIterator();
      for (; m.hasNext() && (m.getNext().value.forEach((y, x) => f.set(y, x)), !(f.size() >= i)); ) ;
      return we.resolve(f);
    }
    Et(e, t, r) {
      const i = this.overlays.get(r.key);
      if (i !== null) {
        const c = this.Rr.get(i.largestBatchId).delete(r.key);
        this.Rr.set(i.largestBatchId, c);
      }
      this.overlays = this.overlays.insert(r.key, new tj(t, r));
      let l = this.Rr.get(t);
      l === void 0 && (l = Ct(), this.Rr.set(t, l)), this.Rr.set(t, l.add(r.key));
    }
  }
  class Mj {
    constructor() {
      this.sessionToken = Zn.EMPTY_BYTE_STRING;
    }
    getSessionToken(e) {
      return we.resolve(this.sessionToken);
    }
    setSessionToken(e, t) {
      return this.sessionToken = t, we.resolve();
    }
  }
  class h1 {
    constructor() {
      this.Vr = new Rn(Un.mr), this.gr = new Rn(Un.pr);
    }
    isEmpty() {
      return this.Vr.isEmpty();
    }
    addReference(e, t) {
      const r = new Un(e, t);
      this.Vr = this.Vr.add(r), this.gr = this.gr.add(r);
    }
    yr(e, t) {
      e.forEach((r) => this.addReference(r, t));
    }
    removeReference(e, t) {
      this.wr(new Un(e, t));
    }
    Sr(e, t) {
      e.forEach((r) => this.removeReference(r, t));
    }
    br(e) {
      const t = new Ze(new Xt([])), r = new Un(t, e), i = new Un(t, e + 1), l = [];
      return this.gr.forEachInRange([
        r,
        i
      ], (c) => {
        this.wr(c), l.push(c.key);
      }), l;
    }
    Dr() {
      this.Vr.forEach((e) => this.wr(e));
    }
    wr(e) {
      this.Vr = this.Vr.delete(e), this.gr = this.gr.delete(e);
    }
    vr(e) {
      const t = new Ze(new Xt([])), r = new Un(t, e), i = new Un(t, e + 1);
      let l = Ct();
      return this.gr.forEachInRange([
        r,
        i
      ], (c) => {
        l = l.add(c.key);
      }), l;
    }
    containsKey(e) {
      const t = new Un(e, 0), r = this.Vr.firstAfterOrEqual(t);
      return r !== null && e.isEqual(r.key);
    }
  }
  class Un {
    constructor(e, t) {
      this.key = e, this.Cr = t;
    }
    static mr(e, t) {
      return Ze.comparator(e.key, t.key) || vt(e.Cr, t.Cr);
    }
    static pr(e, t) {
      return vt(e.Cr, t.Cr) || Ze.comparator(e.key, t.key);
    }
  }
  class $j {
    constructor(e, t) {
      this.indexManager = e, this.referenceDelegate = t, this.mutationQueue = [], this.Fr = 1, this.Mr = new Rn(Un.mr);
    }
    checkEmpty(e) {
      return we.resolve(this.mutationQueue.length === 0);
    }
    addMutationBatch(e, t, r, i) {
      const l = this.Fr;
      this.Fr++, this.mutationQueue.length > 0 && this.mutationQueue[this.mutationQueue.length - 1];
      const c = new ej(l, t, r, i);
      this.mutationQueue.push(c);
      for (const f of i) this.Mr = this.Mr.add(new Un(f.key, l)), this.indexManager.addToCollectionParentIndex(e, f.key.path.popLast());
      return we.resolve(c);
    }
    lookupMutationBatch(e, t) {
      return we.resolve(this.Or(t));
    }
    getNextMutationBatchAfterBatchId(e, t) {
      const r = t + 1, i = this.Nr(r), l = i < 0 ? 0 : i;
      return we.resolve(this.mutationQueue.length > l ? this.mutationQueue[l] : null);
    }
    getHighestUnacknowledgedBatchId() {
      return we.resolve(this.mutationQueue.length === 0 ? n1 : this.Fr - 1);
    }
    getAllMutationBatches(e) {
      return we.resolve(this.mutationQueue.slice());
    }
    getAllMutationBatchesAffectingDocumentKey(e, t) {
      const r = new Un(t, 0), i = new Un(t, Number.POSITIVE_INFINITY), l = [];
      return this.Mr.forEachInRange([
        r,
        i
      ], (c) => {
        const f = this.Or(c.Cr);
        l.push(f);
      }), we.resolve(l);
    }
    getAllMutationBatchesAffectingDocumentKeys(e, t) {
      let r = new Rn(vt);
      return t.forEach((i) => {
        const l = new Un(i, 0), c = new Un(i, Number.POSITIVE_INFINITY);
        this.Mr.forEachInRange([
          l,
          c
        ], (f) => {
          r = r.add(f.Cr);
        });
      }), we.resolve(this.Br(r));
    }
    getAllMutationBatchesAffectingQuery(e, t) {
      const r = t.path, i = r.length + 1;
      let l = r;
      Ze.isDocumentKey(l) || (l = l.child(""));
      const c = new Un(new Ze(l), 0);
      let f = new Rn(vt);
      return this.Mr.forEachWhile((m) => {
        const y = m.key.path;
        return !!r.isPrefixOf(y) && (y.length === i && (f = f.add(m.Cr)), true);
      }, c), we.resolve(this.Br(f));
    }
    Br(e) {
      const t = [];
      return e.forEach((r) => {
        const i = this.Or(r);
        i !== null && t.push(i);
      }), t;
    }
    removeMutationBatch(e, t) {
      $t(this.Lr(t.batchId, "removed") === 0), this.mutationQueue.shift();
      let r = this.Mr;
      return we.forEach(t.mutations, (i) => {
        const l = new Un(i.key, t.batchId);
        return r = r.delete(l), this.referenceDelegate.markPotentiallyOrphaned(e, i.key);
      }).next(() => {
        this.Mr = r;
      });
    }
    qn(e) {
    }
    containsKey(e, t) {
      const r = new Un(t, 0), i = this.Mr.firstAfterOrEqual(r);
      return we.resolve(t.isEqual(i && i.key));
    }
    performConsistencyCheck(e) {
      return this.mutationQueue.length, we.resolve();
    }
    Lr(e, t) {
      return this.Nr(e);
    }
    Nr(e) {
      return this.mutationQueue.length === 0 ? 0 : e - this.mutationQueue[0].batchId;
    }
    Or(e) {
      const t = this.Nr(e);
      return t < 0 || t >= this.mutationQueue.length ? null : this.mutationQueue[t];
    }
  }
  class Vj {
    constructor(e) {
      this.kr = e, this.docs = function() {
        return new sn(Ze.comparator);
      }(), this.size = 0;
    }
    setIndexManager(e) {
      this.indexManager = e;
    }
    addEntry(e, t) {
      const r = t.key, i = this.docs.get(r), l = i ? i.size : 0, c = this.kr(t);
      return this.docs = this.docs.insert(r, {
        document: t.mutableCopy(),
        size: c
      }), this.size += c - l, this.indexManager.addToCollectionParentIndex(e, r.path.popLast());
    }
    removeEntry(e) {
      const t = this.docs.get(e);
      t && (this.docs = this.docs.remove(e), this.size -= t.size);
    }
    getEntry(e, t) {
      const r = this.docs.get(t);
      return we.resolve(r ? r.document.mutableCopy() : pr.newInvalidDocument(t));
    }
    getEntries(e, t) {
      let r = Ao();
      return t.forEach((i) => {
        const l = this.docs.get(i);
        r = r.insert(i, l ? l.document.mutableCopy() : pr.newInvalidDocument(i));
      }), we.resolve(r);
    }
    getDocumentsMatchingQuery(e, t, r, i) {
      let l = Ao();
      const c = t.path, f = new Ze(c.child("__id-9223372036854775808__")), m = this.docs.getIteratorFrom(f);
      for (; m.hasNext(); ) {
        const { key: y, value: { document: x } } = m.getNext();
        if (!c.isPrefixOf(y.path)) break;
        y.path.length > c.length + 1 || gD(pD(x), r) <= 0 || (i.has(x.key) || wm(t, x)) && (l = l.insert(x.key, x.mutableCopy()));
      }
      return we.resolve(l);
    }
    getAllFromCollectionGroup(e, t, r, i) {
      st();
    }
    qr(e, t) {
      return we.forEach(this.docs, (r) => t(r));
    }
    newChangeBuffer(e) {
      return new Fj(this);
    }
    getSize(e) {
      return we.resolve(this.size);
    }
  }
  class Fj extends Pj {
    constructor(e) {
      super(), this.Ir = e;
    }
    applyChanges(e) {
      const t = [];
      return this.changes.forEach((r, i) => {
        i.isValidDocument() ? t.push(this.Ir.addEntry(e, i)) : this.Ir.removeEntry(r);
      }), we.waitFor(t);
    }
    getFromCache(e, t) {
      return this.Ir.getEntry(e, t);
    }
    getAllFromCache(e, t) {
      return this.Ir.getEntries(e, t);
    }
  }
  class zj {
    constructor(e) {
      this.persistence = e, this.Qr = new ql((t) => i1(t), o1), this.lastRemoteSnapshotVersion = ot.min(), this.highestTargetId = 0, this.$r = 0, this.Ur = new h1(), this.targetCount = 0, this.Kr = wu.Un();
    }
    forEachTarget(e, t) {
      return this.Qr.forEach((r, i) => t(i)), we.resolve();
    }
    getLastRemoteSnapshotVersion(e) {
      return we.resolve(this.lastRemoteSnapshotVersion);
    }
    getHighestSequenceNumber(e) {
      return we.resolve(this.$r);
    }
    allocateTargetId(e) {
      return this.highestTargetId = this.Kr.next(), we.resolve(this.highestTargetId);
    }
    setTargetsMetadata(e, t, r) {
      return r && (this.lastRemoteSnapshotVersion = r), t > this.$r && (this.$r = t), we.resolve();
    }
    zn(e) {
      this.Qr.set(e.target, e);
      const t = e.targetId;
      t > this.highestTargetId && (this.Kr = new wu(t), this.highestTargetId = t), e.sequenceNumber > this.$r && (this.$r = e.sequenceNumber);
    }
    addTargetData(e, t) {
      return this.zn(t), this.targetCount += 1, we.resolve();
    }
    updateTargetData(e, t) {
      return this.zn(t), we.resolve();
    }
    removeTargetData(e, t) {
      return this.Qr.delete(t.target), this.Ur.br(t.targetId), this.targetCount -= 1, we.resolve();
    }
    removeTargets(e, t, r) {
      let i = 0;
      const l = [];
      return this.Qr.forEach((c, f) => {
        f.sequenceNumber <= t && r.get(f.targetId) === null && (this.Qr.delete(c), l.push(this.removeMatchingKeysForTargetId(e, f.targetId)), i++);
      }), we.waitFor(l).next(() => i);
    }
    getTargetCount(e) {
      return we.resolve(this.targetCount);
    }
    getTargetData(e, t) {
      const r = this.Qr.get(t) || null;
      return we.resolve(r);
    }
    addMatchingKeys(e, t, r) {
      return this.Ur.yr(t, r), we.resolve();
    }
    removeMatchingKeys(e, t, r) {
      this.Ur.Sr(t, r);
      const i = this.persistence.referenceDelegate, l = [];
      return i && t.forEach((c) => {
        l.push(i.markPotentiallyOrphaned(e, c));
      }), we.waitFor(l);
    }
    removeMatchingKeysForTargetId(e, t) {
      return this.Ur.br(t), we.resolve();
    }
    getMatchingKeysForTargetId(e, t) {
      const r = this.Ur.vr(t);
      return we.resolve(r);
    }
    containsKey(e, t) {
      return we.resolve(this.Ur.containsKey(t));
    }
  }
  class fT {
    constructor(e, t) {
      this.Wr = {}, this.overlays = {}, this.Gr = new gm(0), this.zr = false, this.zr = true, this.jr = new Mj(), this.referenceDelegate = e(this), this.Hr = new zj(this), this.indexManager = new Cj(), this.remoteDocumentCache = function(i) {
        return new Vj(i);
      }((r) => this.referenceDelegate.Jr(r)), this.serializer = new bj(t), this.Yr = new Oj(this.serializer);
    }
    start() {
      return Promise.resolve();
    }
    shutdown() {
      return this.zr = false, Promise.resolve();
    }
    get started() {
      return this.zr;
    }
    setDatabaseDeletedListener() {
    }
    setNetworkEnabled() {
    }
    getIndexManager(e) {
      return this.indexManager;
    }
    getDocumentOverlayCache(e) {
      let t = this.overlays[e.toKey()];
      return t || (t = new Lj(), this.overlays[e.toKey()] = t), t;
    }
    getMutationQueue(e, t) {
      let r = this.Wr[e.toKey()];
      return r || (r = new $j(t, this.referenceDelegate), this.Wr[e.toKey()] = r), r;
    }
    getGlobalsCache() {
      return this.jr;
    }
    getTargetCache() {
      return this.Hr;
    }
    getRemoteDocumentCache() {
      return this.remoteDocumentCache;
    }
    getBundleCache() {
      return this.Yr;
    }
    runTransaction(e, t, r) {
      Ue("MemoryPersistence", "Starting transaction:", e);
      const i = new Uj(this.Gr.next());
      return this.referenceDelegate.Zr(), r(i).next((l) => this.referenceDelegate.Xr(i).next(() => l)).toPromise().then((l) => (i.raiseOnCommittedEvent(), l));
    }
    ei(e, t) {
      return we.or(Object.values(this.Wr).map((r) => () => r.containsKey(e, t)));
    }
  }
  class Uj extends vD {
    constructor(e) {
      super(), this.currentSequenceNumber = e;
    }
  }
  class p1 {
    constructor(e) {
      this.persistence = e, this.ti = new h1(), this.ni = null;
    }
    static ri(e) {
      return new p1(e);
    }
    get ii() {
      if (this.ni) return this.ni;
      throw st();
    }
    addReference(e, t, r) {
      return this.ti.addReference(r, t), this.ii.delete(r.toString()), we.resolve();
    }
    removeReference(e, t, r) {
      return this.ti.removeReference(r, t), this.ii.add(r.toString()), we.resolve();
    }
    markPotentiallyOrphaned(e, t) {
      return this.ii.add(t.toString()), we.resolve();
    }
    removeTarget(e, t) {
      this.ti.br(t.targetId).forEach((i) => this.ii.add(i.toString()));
      const r = this.persistence.getTargetCache();
      return r.getMatchingKeysForTargetId(e, t.targetId).next((i) => {
        i.forEach((l) => this.ii.add(l.toString()));
      }).next(() => r.removeTargetData(e, t));
    }
    Zr() {
      this.ni = /* @__PURE__ */ new Set();
    }
    Xr(e) {
      const t = this.persistence.getRemoteDocumentCache().newChangeBuffer();
      return we.forEach(this.ii, (r) => {
        const i = Ze.fromPath(r);
        return this.si(e, i).next((l) => {
          l || t.removeEntry(i, ot.min());
        });
      }).next(() => (this.ni = null, t.apply(e)));
    }
    updateLimboDocument(e, t) {
      return this.si(e, t).next((r) => {
        r ? this.ii.delete(t.toString()) : this.ii.add(t.toString());
      });
    }
    Jr(e) {
      return 0;
    }
    si(e, t) {
      return we.or([
        () => we.resolve(this.ti.containsKey(t)),
        () => this.persistence.getTargetCache().containsKey(e, t),
        () => this.persistence.ei(e, t)
      ]);
    }
  }
  class Qg {
    constructor(e, t) {
      this.persistence = e, this.oi = new ql((r) => _D(r.path), (r, i) => r.isEqual(i)), this.garbageCollector = Nj(this, t);
    }
    static ri(e, t) {
      return new Qg(e, t);
    }
    Zr() {
    }
    Xr(e) {
      return we.resolve();
    }
    forEachTarget(e, t) {
      return this.persistence.getTargetCache().forEachTarget(e, t);
    }
    nr(e) {
      const t = this.sr(e);
      return this.persistence.getTargetCache().getTargetCount(e).next((r) => t.next((i) => r + i));
    }
    sr(e) {
      let t = 0;
      return this.rr(e, (r) => {
        t++;
      }).next(() => t);
    }
    rr(e, t) {
      return we.forEach(this.oi, (r, i) => this.ar(e, r, i).next((l) => l ? we.resolve() : t(i)));
    }
    removeTargets(e, t, r) {
      return this.persistence.getTargetCache().removeTargets(e, t, r);
    }
    removeOrphanedDocuments(e, t) {
      let r = 0;
      const i = this.persistence.getRemoteDocumentCache(), l = i.newChangeBuffer();
      return i.qr(e, (c) => this.ar(e, c, t).next((f) => {
        f || (r++, l.removeEntry(c, ot.min()));
      })).next(() => l.apply(e)).next(() => r);
    }
    markPotentiallyOrphaned(e, t) {
      return this.oi.set(t, e.currentSequenceNumber), we.resolve();
    }
    removeTarget(e, t) {
      const r = t.withSequenceNumber(e.currentSequenceNumber);
      return this.persistence.getTargetCache().updateTargetData(e, r);
    }
    addReference(e, t, r) {
      return this.oi.set(r, e.currentSequenceNumber), we.resolve();
    }
    removeReference(e, t, r) {
      return this.oi.set(r, e.currentSequenceNumber), we.resolve();
    }
    updateLimboDocument(e, t) {
      return this.oi.set(t, e.currentSequenceNumber), we.resolve();
    }
    Jr(e) {
      let t = e.key.toString().length;
      return e.isFoundDocument() && (t += bg(e.data.value)), t;
    }
    ar(e, t, r) {
      return we.or([
        () => this.persistence.ei(e, t),
        () => this.persistence.getTargetCache().containsKey(e, t),
        () => {
          const i = this.oi.get(t);
          return we.resolve(i !== void 0 && i > r);
        }
      ]);
    }
    getCacheSize(e) {
      return this.persistence.getRemoteDocumentCache().getSize(e);
    }
  }
  class g1 {
    constructor(e, t, r, i) {
      this.targetId = e, this.fromCache = t, this.Hi = r, this.Ji = i;
    }
    static Yi(e, t) {
      let r = Ct(), i = Ct();
      for (const l of t.docChanges) switch (l.type) {
        case 0:
          r = r.add(l.doc.key);
          break;
        case 1:
          i = i.add(l.doc.key);
      }
      return new g1(e, t.fromCache, r, i);
    }
  }
  class Bj {
    constructor() {
      this._documentReadCount = 0;
    }
    get documentReadCount() {
      return this._documentReadCount;
    }
    incrementDocumentReadCount(e) {
      this._documentReadCount += e;
    }
  }
  class Wj {
    constructor() {
      this.Zi = false, this.Xi = false, this.es = 100, this.ts = function() {
        return E4() ? 8 : yD(gr()) > 0 ? 6 : 4;
      }();
    }
    initialize(e, t) {
      this.ns = e, this.indexManager = t, this.Zi = true;
    }
    getDocumentsMatchingQuery(e, t, r, i) {
      const l = {
        result: null
      };
      return this.rs(e, t).next((c) => {
        l.result = c;
      }).next(() => {
        if (!l.result) return this.ss(e, t, i, r).next((c) => {
          l.result = c;
        });
      }).next(() => {
        if (l.result) return;
        const c = new Bj();
        return this._s(e, t, c).next((f) => {
          if (l.result = f, this.Xi) return this.us(e, t, c, f.size);
        });
      }).next(() => l.result);
    }
    us(e, t, r, i) {
      return r.documentReadCount < this.es ? (iu() <= Tt.DEBUG && Ue("QueryEngine", "SDK will not create cache indexes for query:", ou(t), "since it only creates cache indexes for collection contains", "more than or equal to", this.es, "documents"), we.resolve()) : (iu() <= Tt.DEBUG && Ue("QueryEngine", "Query:", ou(t), "scans", r.documentReadCount, "local documents and returns", i, "documents as results."), r.documentReadCount > this.ts * i ? (iu() <= Tt.DEBUG && Ue("QueryEngine", "The SDK decides to create cache indexes for query:", ou(t), "as using cache indexes may help improve performance."), this.indexManager.createTargetIndexes(e, Vi(t))) : we.resolve());
    }
    rs(e, t) {
      if (kx(t)) return we.resolve(null);
      let r = Vi(t);
      return this.indexManager.getIndexType(e, r).next((i) => i === 0 ? null : (t.limit !== null && i === 1 && (t = oy(t, null, "F"), r = Vi(t)), this.indexManager.getDocumentsMatchingTarget(e, r).next((l) => {
        const c = Ct(...l);
        return this.ns.getDocuments(e, c).next((f) => this.indexManager.getMinOffset(e, r).next((m) => {
          const y = this.cs(t, f);
          return this.ls(t, y, c, m.readTime) ? this.rs(e, oy(t, null, "F")) : this.hs(e, y, t, m);
        }));
      })));
    }
    ss(e, t, r, i) {
      return kx(t) || i.isEqual(ot.min()) ? we.resolve(null) : this.ns.getDocuments(e, r).next((l) => {
        const c = this.cs(t, l);
        return this.ls(t, c, r, i) ? we.resolve(null) : (iu() <= Tt.DEBUG && Ue("QueryEngine", "Re-using previous result from %s to execute query: %s", i.toString(), ou(t)), this.hs(e, c, t, hD(i, kf)).next((f) => f));
      });
    }
    cs(e, t) {
      let r = new Rn(W2(e));
      return t.forEach((i, l) => {
        wm(e, l) && (r = r.add(l));
      }), r;
    }
    ls(e, t, r, i) {
      if (e.limit === null) return false;
      if (r.size !== t.size) return true;
      const l = e.limitType === "F" ? t.last() : t.first();
      return !!l && (l.hasPendingWrites || l.version.compareTo(i) > 0);
    }
    _s(e, t, r) {
      return iu() <= Tt.DEBUG && Ue("QueryEngine", "Using full collection scan to execute query:", ou(t)), this.ns.getDocumentsMatchingQuery(e, t, ka.min(), r);
    }
    hs(e, t, r, i) {
      return this.ns.getDocumentsMatchingQuery(e, r, i).next((l) => (t.forEach((c) => {
        l = l.insert(c.key, c);
      }), l));
    }
  }
  const m1 = "LocalStore", Hj = 3e8;
  class qj {
    constructor(e, t, r, i) {
      this.persistence = e, this.Ps = t, this.serializer = i, this.Ts = new sn(vt), this.Is = new ql((l) => i1(l), o1), this.Es = /* @__PURE__ */ new Map(), this.ds = e.getRemoteDocumentCache(), this.Hr = e.getTargetCache(), this.Yr = e.getBundleCache(), this.As(r);
    }
    As(e) {
      this.documentOverlayCache = this.persistence.getDocumentOverlayCache(e), this.indexManager = this.persistence.getIndexManager(e), this.mutationQueue = this.persistence.getMutationQueue(e, this.indexManager), this.localDocuments = new jj(this.ds, this.mutationQueue, this.documentOverlayCache, this.indexManager), this.ds.setIndexManager(this.indexManager), this.Ps.initialize(this.localDocuments, this.indexManager);
    }
    collectGarbage(e) {
      return this.persistence.runTransaction("Collect garbage", "readwrite-primary", (t) => e.collect(t, this.Ts));
    }
  }
  function Kj(n, e, t, r) {
    return new qj(n, e, t, r);
  }
  async function hT(n, e) {
    const t = ct(n);
    return await t.persistence.runTransaction("Handle user change", "readonly", (r) => {
      let i;
      return t.mutationQueue.getAllMutationBatches(r).next((l) => (i = l, t.As(e), t.mutationQueue.getAllMutationBatches(r))).next((l) => {
        const c = [], f = [];
        let m = Ct();
        for (const y of i) {
          c.push(y.batchId);
          for (const x of y.mutations) m = m.add(x.key);
        }
        for (const y of l) {
          f.push(y.batchId);
          for (const x of y.mutations) m = m.add(x.key);
        }
        return t.localDocuments.getDocuments(r, m).next((y) => ({
          Rs: y,
          removedBatchIds: c,
          addedBatchIds: f
        }));
      });
    });
  }
  function Gj(n, e) {
    const t = ct(n);
    return t.persistence.runTransaction("Acknowledge batch", "readwrite-primary", (r) => {
      const i = e.batch.keys(), l = t.ds.newChangeBuffer({
        trackRemovals: true
      });
      return function(f, m, y, x) {
        const C = y.batch, S = C.keys();
        let N = we.resolve();
        return S.forEach((P) => {
          N = N.next(() => x.getEntry(m, P)).next((O) => {
            const L = y.docVersions.get(P);
            $t(L !== null), O.version.compareTo(L) < 0 && (C.applyToRemoteDocument(O, y), O.isValidDocument() && (O.setReadTime(y.commitVersion), x.addEntry(O)));
          });
        }), N.next(() => f.mutationQueue.removeMutationBatch(m, C));
      }(t, r, e, l).next(() => l.apply(r)).next(() => t.mutationQueue.performConsistencyCheck(r)).next(() => t.documentOverlayCache.removeOverlaysForBatchId(r, i, e.batch.batchId)).next(() => t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r, function(f) {
        let m = Ct();
        for (let y = 0; y < f.mutationResults.length; ++y) f.mutationResults[y].transformResults.length > 0 && (m = m.add(f.batch.mutations[y].key));
        return m;
      }(e))).next(() => t.localDocuments.getDocuments(r, i));
    });
  }
  function pT(n) {
    const e = ct(n);
    return e.persistence.runTransaction("Get last remote snapshot version", "readonly", (t) => e.Hr.getLastRemoteSnapshotVersion(t));
  }
  function Qj(n, e) {
    const t = ct(n), r = e.snapshotVersion;
    let i = t.Ts;
    return t.persistence.runTransaction("Apply remote event", "readwrite-primary", (l) => {
      const c = t.ds.newChangeBuffer({
        trackRemovals: true
      });
      i = t.Ts;
      const f = [];
      e.targetChanges.forEach((x, C) => {
        const S = i.get(C);
        if (!S) return;
        f.push(t.Hr.removeMatchingKeys(l, x.removedDocuments, C).next(() => t.Hr.addMatchingKeys(l, x.addedDocuments, C)));
        let N = S.withSequenceNumber(l.currentSequenceNumber);
        e.targetMismatches.get(C) !== null ? N = N.withResumeToken(Zn.EMPTY_BYTE_STRING, ot.min()).withLastLimboFreeSnapshotVersion(ot.min()) : x.resumeToken.approximateByteSize() > 0 && (N = N.withResumeToken(x.resumeToken, r)), i = i.insert(C, N), function(O, L, H) {
          return O.resumeToken.approximateByteSize() === 0 || L.snapshotVersion.toMicroseconds() - O.snapshotVersion.toMicroseconds() >= Hj ? true : H.addedDocuments.size + H.modifiedDocuments.size + H.removedDocuments.size > 0;
        }(S, N, x) && f.push(t.Hr.updateTargetData(l, N));
      });
      let m = Ao(), y = Ct();
      if (e.documentUpdates.forEach((x) => {
        e.resolvedLimboDocuments.has(x) && f.push(t.persistence.referenceDelegate.updateLimboDocument(l, x));
      }), f.push(Yj(l, c, e.documentUpdates).next((x) => {
        m = x.Vs, y = x.fs;
      })), !r.isEqual(ot.min())) {
        const x = t.Hr.getLastRemoteSnapshotVersion(l).next((C) => t.Hr.setTargetsMetadata(l, l.currentSequenceNumber, r));
        f.push(x);
      }
      return we.waitFor(f).next(() => c.apply(l)).next(() => t.localDocuments.getLocalViewOfDocuments(l, m, y)).next(() => m);
    }).then((l) => (t.Ts = i, l));
  }
  function Yj(n, e, t) {
    let r = Ct(), i = Ct();
    return t.forEach((l) => r = r.add(l)), e.getEntries(n, r).next((l) => {
      let c = Ao();
      return t.forEach((f, m) => {
        const y = l.get(f);
        m.isFoundDocument() !== y.isFoundDocument() && (i = i.add(f)), m.isNoDocument() && m.version.isEqual(ot.min()) ? (e.removeEntry(f, m.readTime), c = c.insert(f, m)) : !y.isValidDocument() || m.version.compareTo(y.version) > 0 || m.version.compareTo(y.version) === 0 && y.hasPendingWrites ? (e.addEntry(m), c = c.insert(f, m)) : Ue(m1, "Ignoring outdated watch update for ", f, ". Current version:", y.version, " Watch version:", m.version);
      }), {
        Vs: c,
        fs: i
      };
    });
  }
  function Xj(n, e) {
    const t = ct(n);
    return t.persistence.runTransaction("Get next mutation batch", "readonly", (r) => (e === void 0 && (e = n1), t.mutationQueue.getNextMutationBatchAfterBatchId(r, e)));
  }
  function Jj(n, e) {
    const t = ct(n);
    return t.persistence.runTransaction("Allocate target", "readwrite", (r) => {
      let i;
      return t.Hr.getTargetData(r, e).next((l) => l ? (i = l, we.resolve(i)) : t.Hr.allocateTargetId(r).next((c) => (i = new xa(e, c, "TargetPurposeListen", r.currentSequenceNumber), t.Hr.addTargetData(r, i).next(() => i))));
    }).then((r) => {
      const i = t.Ts.get(r.targetId);
      return (i === null || r.snapshotVersion.compareTo(i.snapshotVersion) > 0) && (t.Ts = t.Ts.insert(r.targetId, r), t.Is.set(e, r.targetId)), r;
    });
  }
  async function dy(n, e, t) {
    const r = ct(n), i = r.Ts.get(e), l = t ? "readwrite" : "readwrite-primary";
    try {
      t || await r.persistence.runTransaction("Release target", l, (c) => r.persistence.referenceDelegate.removeTarget(c, i));
    } catch (c) {
      if (!Ru(c)) throw c;
      Ue(m1, `Failed to update sequence numbers for target ${e}: ${c}`);
    }
    r.Ts = r.Ts.remove(e), r.Is.delete(i.target);
  }
  function zx(n, e, t) {
    const r = ct(n);
    let i = ot.min(), l = Ct();
    return r.persistence.runTransaction("Execute query", "readwrite", (c) => function(m, y, x) {
      const C = ct(m), S = C.Is.get(x);
      return S !== void 0 ? we.resolve(C.Ts.get(S)) : C.Hr.getTargetData(y, x);
    }(r, c, Vi(e)).next((f) => {
      if (f) return i = f.lastLimboFreeSnapshotVersion, r.Hr.getMatchingKeysForTargetId(c, f.targetId).next((m) => {
        l = m;
      });
    }).next(() => r.Ps.getDocumentsMatchingQuery(c, e, t ? i : ot.min(), t ? l : Ct())).next((f) => (Zj(r, VD(e), f), {
      documents: f,
      gs: l
    })));
  }
  function Zj(n, e, t) {
    let r = n.Es.get(e) || ot.min();
    t.forEach((i, l) => {
      l.readTime.compareTo(r) > 0 && (r = l.readTime);
    }), n.Es.set(e, r);
  }
  class Ux {
    constructor() {
      this.activeTargetIds = HD();
    }
    Ds(e) {
      this.activeTargetIds = this.activeTargetIds.add(e);
    }
    vs(e) {
      this.activeTargetIds = this.activeTargetIds.delete(e);
    }
    bs() {
      const e = {
        activeTargetIds: this.activeTargetIds.toArray(),
        updateTimeMs: Date.now()
      };
      return JSON.stringify(e);
    }
  }
  class eO {
    constructor() {
      this.ho = new Ux(), this.Po = {}, this.onlineStateHandler = null, this.sequenceNumberHandler = null;
    }
    addPendingMutation(e) {
    }
    updateMutationState(e, t, r) {
    }
    addLocalQueryTarget(e, t = true) {
      return t && this.ho.Ds(e), this.Po[e] || "not-current";
    }
    updateQueryState(e, t, r) {
      this.Po[e] = t;
    }
    removeLocalQueryTarget(e) {
      this.ho.vs(e);
    }
    isLocalQueryTarget(e) {
      return this.ho.activeTargetIds.has(e);
    }
    clearQueryState(e) {
      delete this.Po[e];
    }
    getAllActiveQueryTargets() {
      return this.ho.activeTargetIds;
    }
    isActiveQueryTarget(e) {
      return this.ho.activeTargetIds.has(e);
    }
    start() {
      return this.ho = new Ux(), Promise.resolve();
    }
    handleUserChange(e, t, r) {
    }
    setOnlineState(e) {
    }
    shutdown() {
    }
    writeSequenceNumber(e) {
    }
    notifyBundleLoaded(e) {
    }
  }
  class tO {
    To(e) {
    }
    shutdown() {
    }
  }
  const Bx = "ConnectivityMonitor";
  class Wx {
    constructor() {
      this.Io = () => this.Eo(), this.Ao = () => this.Ro(), this.Vo = [], this.mo();
    }
    To(e) {
      this.Vo.push(e);
    }
    shutdown() {
      window.removeEventListener("online", this.Io), window.removeEventListener("offline", this.Ao);
    }
    mo() {
      window.addEventListener("online", this.Io), window.addEventListener("offline", this.Ao);
    }
    Eo() {
      Ue(Bx, "Network connectivity changed: AVAILABLE");
      for (const e of this.Vo) e(0);
    }
    Ro() {
      Ue(Bx, "Network connectivity changed: UNAVAILABLE");
      for (const e of this.Vo) e(1);
    }
    static D() {
      return typeof window < "u" && window.addEventListener !== void 0 && window.removeEventListener !== void 0;
    }
  }
  let dg = null;
  function fy() {
    return dg === null ? dg = function() {
      return 268435456 + Math.round(2147483648 * Math.random());
    }() : dg++, "0x" + dg.toString(16);
  }
  const yv = "RestConnection", nO = {
    BatchGetDocuments: "batchGet",
    Commit: "commit",
    RunQuery: "runQuery",
    RunAggregationQuery: "runAggregationQuery"
  };
  class rO {
    get fo() {
      return false;
    }
    constructor(e) {
      this.databaseInfo = e, this.databaseId = e.databaseId;
      const t = e.ssl ? "https" : "http", r = encodeURIComponent(this.databaseId.projectId), i = encodeURIComponent(this.databaseId.database);
      this.po = t + "://" + e.host, this.yo = `projects/${r}/databases/${i}`, this.wo = this.databaseId.database === Ug ? `project_id=${r}` : `project_id=${r}&database_id=${i}`;
    }
    So(e, t, r, i, l) {
      const c = fy(), f = this.bo(e, t.toUriEncodedString());
      Ue(yv, `Sending RPC '${e}' ${c}:`, f, r);
      const m = {
        "google-cloud-resource-prefix": this.yo,
        "x-goog-request-params": this.wo
      };
      return this.Do(m, i, l), this.vo(e, f, m, r).then((y) => (Ue(yv, `Received RPC '${e}' ${c}: `, y), y), (y) => {
        throw gu(yv, `RPC '${e}' ${c} failed with error: `, y, "url: ", f, "request:", r), y;
      });
    }
    Co(e, t, r, i, l, c) {
      return this.So(e, t, r, i, l);
    }
    Do(e, t, r) {
      e["X-Goog-Api-Client"] = function() {
        return "gl-js/ fire/" + ku;
      }(), e["Content-Type"] = "text/plain", this.databaseInfo.appId && (e["X-Firebase-GMPID"] = this.databaseInfo.appId), t && t.headers.forEach((i, l) => e[l] = i), r && r.headers.forEach((i, l) => e[l] = i);
    }
    bo(e, t) {
      const r = nO[e];
      return `${this.po}/v1/${t}:${r}`;
    }
    terminate() {
    }
  }
  class sO {
    constructor(e) {
      this.Fo = e.Fo, this.Mo = e.Mo;
    }
    xo(e) {
      this.Oo = e;
    }
    No(e) {
      this.Bo = e;
    }
    Lo(e) {
      this.ko = e;
    }
    onMessage(e) {
      this.qo = e;
    }
    close() {
      this.Mo();
    }
    send(e) {
      this.Fo(e);
    }
    Qo() {
      this.Oo();
    }
    $o() {
      this.Bo();
    }
    Uo(e) {
      this.ko(e);
    }
    Ko(e) {
      this.qo(e);
    }
  }
  const ur = "WebChannelConnection";
  class iO extends rO {
    constructor(e) {
      super(e), this.forceLongPolling = e.forceLongPolling, this.autoDetectLongPolling = e.autoDetectLongPolling, this.useFetchStreams = e.useFetchStreams, this.longPollingOptions = e.longPollingOptions;
    }
    vo(e, t, r, i) {
      const l = fy();
      return new Promise((c, f) => {
        const m = new y2();
        m.setWithCredentials(true), m.listenOnce(w2.COMPLETE, () => {
          try {
            switch (m.getLastErrorCode()) {
              case Eg.NO_ERROR:
                const x = m.getResponseJson();
                Ue(ur, `XHR for RPC '${e}' ${l} received:`, JSON.stringify(x)), c(x);
                break;
              case Eg.TIMEOUT:
                Ue(ur, `RPC '${e}' ${l} timed out`), f(new He(_e.DEADLINE_EXCEEDED, "Request time out"));
                break;
              case Eg.HTTP_ERROR:
                const C = m.getStatus();
                if (Ue(ur, `RPC '${e}' ${l} failed with status:`, C, "response text:", m.getResponseText()), C > 0) {
                  let S = m.getResponseJson();
                  Array.isArray(S) && (S = S[0]);
                  const N = S == null ? void 0 : S.error;
                  if (N && N.status && N.message) {
                    const P = function(L) {
                      const H = L.toLowerCase().replace(/_/g, "-");
                      return Object.values(_e).indexOf(H) >= 0 ? H : _e.UNKNOWN;
                    }(N.status);
                    f(new He(P, N.message));
                  } else f(new He(_e.UNKNOWN, "Server responded with status " + m.getStatus()));
                } else f(new He(_e.UNAVAILABLE, "Connection failed."));
                break;
              default:
                st();
            }
          } finally {
            Ue(ur, `RPC '${e}' ${l} completed.`);
          }
        });
        const y = JSON.stringify(i);
        Ue(ur, `RPC '${e}' ${l} sending request:`, i), m.send(t, "POST", y, r, 15);
      });
    }
    Wo(e, t, r) {
      const i = fy(), l = [
        this.po,
        "/",
        "google.firestore.v1.Firestore",
        "/",
        e,
        "/channel"
      ], c = E2(), f = x2(), m = {
        httpSessionIdParam: "gsessionid",
        initMessageHeaders: {},
        messageUrlParams: {
          database: `projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`
        },
        sendRawJson: true,
        supportsCrossDomainXhr: true,
        internalChannelParams: {
          forwardChannelRequestTimeoutMs: 6e5
        },
        forceLongPolling: this.forceLongPolling,
        detectBufferingProxy: this.autoDetectLongPolling
      }, y = this.longPollingOptions.timeoutSeconds;
      y !== void 0 && (m.longPollingTimeout = Math.round(1e3 * y)), this.useFetchStreams && (m.useFetchStreams = true), this.Do(m.initMessageHeaders, t, r), m.encodeInitMessageHeaders = true;
      const x = l.join("");
      Ue(ur, `Creating RPC '${e}' stream ${i}: ${x}`, m);
      const C = c.createWebChannel(x, m);
      let S = false, N = false;
      const P = new sO({
        Fo: (L) => {
          N ? Ue(ur, `Not sending because RPC '${e}' stream ${i} is closed:`, L) : (S || (Ue(ur, `Opening RPC '${e}' stream ${i} transport.`), C.open(), S = true), Ue(ur, `RPC '${e}' stream ${i} sending:`, L), C.send(L));
        },
        Mo: () => C.close()
      }), O = (L, H, W) => {
        L.listen(H, (T) => {
          try {
            W(T);
          } catch (Y) {
            setTimeout(() => {
              throw Y;
            }, 0);
          }
        });
      };
      return O(C, uf.EventType.OPEN, () => {
        N || (Ue(ur, `RPC '${e}' stream ${i} transport opened.`), P.Qo());
      }), O(C, uf.EventType.CLOSE, () => {
        N || (N = true, Ue(ur, `RPC '${e}' stream ${i} transport closed`), P.Uo());
      }), O(C, uf.EventType.ERROR, (L) => {
        N || (N = true, gu(ur, `RPC '${e}' stream ${i} transport errored:`, L), P.Uo(new He(_e.UNAVAILABLE, "The operation could not be completed")));
      }), O(C, uf.EventType.MESSAGE, (L) => {
        var H;
        if (!N) {
          const W = L.data[0];
          $t(!!W);
          const T = W, Y = (T == null ? void 0 : T.error) || ((H = T[0]) === null || H === void 0 ? void 0 : H.error);
          if (Y) {
            Ue(ur, `RPC '${e}' stream ${i} received error:`, Y);
            const u = Y.status;
            let ge = function(V) {
              const B = wn[V];
              if (B !== void 0) return tT(B);
            }(u), j = Y.message;
            ge === void 0 && (ge = _e.INTERNAL, j = "Unknown error status: " + u + " with message " + Y.message), N = true, P.Uo(new He(ge, j)), C.close();
          } else Ue(ur, `RPC '${e}' stream ${i} received:`, W), P.Ko(W);
        }
      }), O(f, _2.STAT_EVENT, (L) => {
        L.stat === Zv.PROXY ? Ue(ur, `RPC '${e}' stream ${i} detected buffering proxy`) : L.stat === Zv.NOPROXY && Ue(ur, `RPC '${e}' stream ${i} detected no buffering proxy`);
      }), setTimeout(() => {
        P.$o();
      }, 0), P;
    }
  }
  function wv() {
    return typeof document < "u" ? document : null;
  }
  function bm(n) {
    return new cj(n, true);
  }
  class gT {
    constructor(e, t, r = 1e3, i = 1.5, l = 6e4) {
      this.Ti = e, this.timerId = t, this.Go = r, this.zo = i, this.jo = l, this.Ho = 0, this.Jo = null, this.Yo = Date.now(), this.reset();
    }
    reset() {
      this.Ho = 0;
    }
    Zo() {
      this.Ho = this.jo;
    }
    Xo(e) {
      this.cancel();
      const t = Math.floor(this.Ho + this.e_()), r = Math.max(0, Date.now() - this.Yo), i = Math.max(0, t - r);
      i > 0 && Ue("ExponentialBackoff", `Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`), this.Jo = this.Ti.enqueueAfterDelay(this.timerId, i, () => (this.Yo = Date.now(), e())), this.Ho *= this.zo, this.Ho < this.Go && (this.Ho = this.Go), this.Ho > this.jo && (this.Ho = this.jo);
    }
    t_() {
      this.Jo !== null && (this.Jo.skipDelay(), this.Jo = null);
    }
    cancel() {
      this.Jo !== null && (this.Jo.cancel(), this.Jo = null);
    }
    e_() {
      return (Math.random() - 0.5) * this.Ho;
    }
  }
  const Hx = "PersistentStream";
  class mT {
    constructor(e, t, r, i, l, c, f, m) {
      this.Ti = e, this.n_ = r, this.r_ = i, this.connection = l, this.authCredentialsProvider = c, this.appCheckCredentialsProvider = f, this.listener = m, this.state = 0, this.i_ = 0, this.s_ = null, this.o_ = null, this.stream = null, this.__ = 0, this.a_ = new gT(e, t);
    }
    u_() {
      return this.state === 1 || this.state === 5 || this.c_();
    }
    c_() {
      return this.state === 2 || this.state === 3;
    }
    start() {
      this.__ = 0, this.state !== 4 ? this.auth() : this.l_();
    }
    async stop() {
      this.u_() && await this.close(0);
    }
    h_() {
      this.state = 0, this.a_.reset();
    }
    P_() {
      this.c_() && this.s_ === null && (this.s_ = this.Ti.enqueueAfterDelay(this.n_, 6e4, () => this.T_()));
    }
    I_(e) {
      this.E_(), this.stream.send(e);
    }
    async T_() {
      if (this.c_()) return this.close(0);
    }
    E_() {
      this.s_ && (this.s_.cancel(), this.s_ = null);
    }
    d_() {
      this.o_ && (this.o_.cancel(), this.o_ = null);
    }
    async close(e, t) {
      this.E_(), this.d_(), this.a_.cancel(), this.i_++, e !== 4 ? this.a_.reset() : t && t.code === _e.RESOURCE_EXHAUSTED ? (ko(t.toString()), ko("Using maximum backoff delay to prevent overloading the backend."), this.a_.Zo()) : t && t.code === _e.UNAUTHENTICATED && this.state !== 3 && (this.authCredentialsProvider.invalidateToken(), this.appCheckCredentialsProvider.invalidateToken()), this.stream !== null && (this.A_(), this.stream.close(), this.stream = null), this.state = e, await this.listener.Lo(t);
    }
    A_() {
    }
    auth() {
      this.state = 1;
      const e = this.R_(this.i_), t = this.i_;
      Promise.all([
        this.authCredentialsProvider.getToken(),
        this.appCheckCredentialsProvider.getToken()
      ]).then(([r, i]) => {
        this.i_ === t && this.V_(r, i);
      }, (r) => {
        e(() => {
          const i = new He(_e.UNKNOWN, "Fetching auth token failed: " + r.message);
          return this.m_(i);
        });
      });
    }
    V_(e, t) {
      const r = this.R_(this.i_);
      this.stream = this.f_(e, t), this.stream.xo(() => {
        r(() => this.listener.xo());
      }), this.stream.No(() => {
        r(() => (this.state = 2, this.o_ = this.Ti.enqueueAfterDelay(this.r_, 1e4, () => (this.c_() && (this.state = 3), Promise.resolve())), this.listener.No()));
      }), this.stream.Lo((i) => {
        r(() => this.m_(i));
      }), this.stream.onMessage((i) => {
        r(() => ++this.__ == 1 ? this.g_(i) : this.onNext(i));
      });
    }
    l_() {
      this.state = 5, this.a_.Xo(async () => {
        this.state = 0, this.start();
      });
    }
    m_(e) {
      return Ue(Hx, `close with error: ${e}`), this.stream = null, this.close(4, e);
    }
    R_(e) {
      return (t) => {
        this.Ti.enqueueAndForget(() => this.i_ === e ? t() : (Ue(Hx, "stream callback skipped by getCloseGuardedDispatcher."), Promise.resolve()));
      };
    }
  }
  class oO extends mT {
    constructor(e, t, r, i, l, c) {
      super(e, "listen_stream_connection_backoff", "listen_stream_idle", "health_check_timeout", t, r, i, c), this.serializer = l;
    }
    f_(e, t) {
      return this.connection.Wo("Listen", e, t);
    }
    g_(e) {
      return this.onNext(e);
    }
    onNext(e) {
      this.a_.reset();
      const t = fj(this.serializer, e), r = function(l) {
        if (!("targetChange" in l)) return ot.min();
        const c = l.targetChange;
        return c.targetIds && c.targetIds.length ? ot.min() : c.readTime ? Fi(c.readTime) : ot.min();
      }(e);
      return this.listener.p_(t, r);
    }
    y_(e) {
      const t = {};
      t.database = uy(this.serializer), t.addTarget = function(l, c) {
        let f;
        const m = c.target;
        if (f = sy(m) ? {
          documents: gj(l, m)
        } : {
          query: mj(l, m).ht
        }, f.targetId = c.targetId, c.resumeToken.approximateByteSize() > 0) {
          f.resumeToken = sT(l, c.resumeToken);
          const y = ay(l, c.expectedCount);
          y !== null && (f.expectedCount = y);
        } else if (c.snapshotVersion.compareTo(ot.min()) > 0) {
          f.readTime = Gg(l, c.snapshotVersion.toTimestamp());
          const y = ay(l, c.expectedCount);
          y !== null && (f.expectedCount = y);
        }
        return f;
      }(this.serializer, e);
      const r = yj(this.serializer, e);
      r && (t.labels = r), this.I_(t);
    }
    w_(e) {
      const t = {};
      t.database = uy(this.serializer), t.removeTarget = e, this.I_(t);
    }
  }
  class aO extends mT {
    constructor(e, t, r, i, l, c) {
      super(e, "write_stream_connection_backoff", "write_stream_idle", "health_check_timeout", t, r, i, c), this.serializer = l;
    }
    get S_() {
      return this.__ > 0;
    }
    start() {
      this.lastStreamToken = void 0, super.start();
    }
    A_() {
      this.S_ && this.b_([]);
    }
    f_(e, t) {
      return this.connection.Wo("Write", e, t);
    }
    g_(e) {
      return $t(!!e.streamToken), this.lastStreamToken = e.streamToken, $t(!e.writeResults || e.writeResults.length === 0), this.listener.D_();
    }
    onNext(e) {
      $t(!!e.streamToken), this.lastStreamToken = e.streamToken, this.a_.reset();
      const t = pj(e.writeResults, e.commitTime), r = Fi(e.commitTime);
      return this.listener.v_(r, t);
    }
    C_() {
      const e = {};
      e.database = uy(this.serializer), this.I_(e);
    }
    b_(e) {
      const t = {
        streamToken: this.lastStreamToken,
        writes: e.map((r) => hj(this.serializer, r))
      };
      this.I_(t);
    }
  }
  class lO {
  }
  class cO extends lO {
    constructor(e, t, r, i) {
      super(), this.authCredentials = e, this.appCheckCredentials = t, this.connection = r, this.serializer = i, this.F_ = false;
    }
    M_() {
      if (this.F_) throw new He(_e.FAILED_PRECONDITION, "The client has already been terminated.");
    }
    So(e, t, r, i) {
      return this.M_(), Promise.all([
        this.authCredentials.getToken(),
        this.appCheckCredentials.getToken()
      ]).then(([l, c]) => this.connection.So(e, ly(t, r), i, l, c)).catch((l) => {
        throw l.name === "FirebaseError" ? (l.code === _e.UNAUTHENTICATED && (this.authCredentials.invalidateToken(), this.appCheckCredentials.invalidateToken()), l) : new He(_e.UNKNOWN, l.toString());
      });
    }
    Co(e, t, r, i, l) {
      return this.M_(), Promise.all([
        this.authCredentials.getToken(),
        this.appCheckCredentials.getToken()
      ]).then(([c, f]) => this.connection.Co(e, ly(t, r), i, c, f, l)).catch((c) => {
        throw c.name === "FirebaseError" ? (c.code === _e.UNAUTHENTICATED && (this.authCredentials.invalidateToken(), this.appCheckCredentials.invalidateToken()), c) : new He(_e.UNKNOWN, c.toString());
      });
    }
    terminate() {
      this.F_ = true, this.connection.terminate();
    }
  }
  class uO {
    constructor(e, t) {
      this.asyncQueue = e, this.onlineStateHandler = t, this.state = "Unknown", this.x_ = 0, this.O_ = null, this.N_ = true;
    }
    B_() {
      this.x_ === 0 && (this.L_("Unknown"), this.O_ = this.asyncQueue.enqueueAfterDelay("online_state_timeout", 1e4, () => (this.O_ = null, this.k_("Backend didn't respond within 10 seconds."), this.L_("Offline"), Promise.resolve())));
    }
    q_(e) {
      this.state === "Online" ? this.L_("Unknown") : (this.x_++, this.x_ >= 1 && (this.Q_(), this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`), this.L_("Offline")));
    }
    set(e) {
      this.Q_(), this.x_ = 0, e === "Online" && (this.N_ = false), this.L_(e);
    }
    L_(e) {
      e !== this.state && (this.state = e, this.onlineStateHandler(e));
    }
    k_(e) {
      const t = `Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;
      this.N_ ? (ko(t), this.N_ = false) : Ue("OnlineStateTracker", t);
    }
    Q_() {
      this.O_ !== null && (this.O_.cancel(), this.O_ = null);
    }
  }
  const Fl = "RemoteStore";
  class dO {
    constructor(e, t, r, i, l) {
      this.localStore = e, this.datastore = t, this.asyncQueue = r, this.remoteSyncer = {}, this.U_ = [], this.K_ = /* @__PURE__ */ new Map(), this.W_ = /* @__PURE__ */ new Set(), this.G_ = [], this.z_ = l, this.z_.To((c) => {
        r.enqueueAndForget(async () => {
          Kl(this) && (Ue(Fl, "Restarting streams for network reachability change."), await async function(m) {
            const y = ct(m);
            y.W_.add(4), await Wf(y), y.j_.set("Unknown"), y.W_.delete(4), await Tm(y);
          }(this));
        });
      }), this.j_ = new uO(r, i);
    }
  }
  async function Tm(n) {
    if (Kl(n)) for (const e of n.G_) await e(true);
  }
  async function Wf(n) {
    for (const e of n.G_) await e(false);
  }
  function vT(n, e) {
    const t = ct(n);
    t.K_.has(e.targetId) || (t.K_.set(e.targetId, e), _1(t) ? w1(t) : Nu(t).c_() && y1(t, e));
  }
  function v1(n, e) {
    const t = ct(n), r = Nu(t);
    t.K_.delete(e), r.c_() && yT(t, e), t.K_.size === 0 && (r.c_() ? r.P_() : Kl(t) && t.j_.set("Unknown"));
  }
  function y1(n, e) {
    if (n.H_.Ne(e.targetId), e.resumeToken.approximateByteSize() > 0 || e.snapshotVersion.compareTo(ot.min()) > 0) {
      const t = n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;
      e = e.withExpectedCount(t);
    }
    Nu(n).y_(e);
  }
  function yT(n, e) {
    n.H_.Ne(e), Nu(n).w_(e);
  }
  function w1(n) {
    n.H_ = new ij({
      getRemoteKeysForTarget: (e) => n.remoteSyncer.getRemoteKeysForTarget(e),
      lt: (e) => n.K_.get(e) || null,
      it: () => n.datastore.serializer.databaseId
    }), Nu(n).start(), n.j_.B_();
  }
  function _1(n) {
    return Kl(n) && !Nu(n).u_() && n.K_.size > 0;
  }
  function Kl(n) {
    return ct(n).W_.size === 0;
  }
  function wT(n) {
    n.H_ = void 0;
  }
  async function fO(n) {
    n.j_.set("Online");
  }
  async function hO(n) {
    n.K_.forEach((e, t) => {
      y1(n, e);
    });
  }
  async function pO(n, e) {
    wT(n), _1(n) ? (n.j_.q_(e), w1(n)) : n.j_.set("Unknown");
  }
  async function gO(n, e, t) {
    if (n.j_.set("Online"), e instanceof rT && e.state === 2 && e.cause) try {
      await async function(i, l) {
        const c = l.cause;
        for (const f of l.targetIds) i.K_.has(f) && (await i.remoteSyncer.rejectListen(f, c), i.K_.delete(f), i.H_.removeTarget(f));
      }(n, e);
    } catch (r) {
      Ue(Fl, "Failed to remove targets %s: %s ", e.targetIds.join(","), r), await Yg(n, r);
    }
    else if (e instanceof Sg ? n.H_.We(e) : e instanceof nT ? n.H_.Ze(e) : n.H_.je(e), !t.isEqual(ot.min())) try {
      const r = await pT(n.localStore);
      t.compareTo(r) >= 0 && await function(l, c) {
        const f = l.H_.ot(c);
        return f.targetChanges.forEach((m, y) => {
          if (m.resumeToken.approximateByteSize() > 0) {
            const x = l.K_.get(y);
            x && l.K_.set(y, x.withResumeToken(m.resumeToken, c));
          }
        }), f.targetMismatches.forEach((m, y) => {
          const x = l.K_.get(m);
          if (!x) return;
          l.K_.set(m, x.withResumeToken(Zn.EMPTY_BYTE_STRING, x.snapshotVersion)), yT(l, m);
          const C = new xa(x.target, m, y, x.sequenceNumber);
          y1(l, C);
        }), l.remoteSyncer.applyRemoteEvent(f);
      }(n, t);
    } catch (r) {
      Ue(Fl, "Failed to raise snapshot:", r), await Yg(n, r);
    }
  }
  async function Yg(n, e, t) {
    if (!Ru(e)) throw e;
    n.W_.add(1), await Wf(n), n.j_.set("Offline"), t || (t = () => pT(n.localStore)), n.asyncQueue.enqueueRetryable(async () => {
      Ue(Fl, "Retrying IndexedDB access"), await t(), n.W_.delete(1), await Tm(n);
    });
  }
  function _T(n, e) {
    return e().catch((t) => Yg(n, t, e));
  }
  async function Cm(n) {
    const e = ct(n), t = Pa(e);
    let r = e.U_.length > 0 ? e.U_[e.U_.length - 1].batchId : n1;
    for (; mO(e); ) try {
      const i = await Xj(e.localStore, r);
      if (i === null) {
        e.U_.length === 0 && t.P_();
        break;
      }
      r = i.batchId, vO(e, i);
    } catch (i) {
      await Yg(e, i);
    }
    xT(e) && ET(e);
  }
  function mO(n) {
    return Kl(n) && n.U_.length < 10;
  }
  function vO(n, e) {
    n.U_.push(e);
    const t = Pa(n);
    t.c_() && t.S_ && t.b_(e.mutations);
  }
  function xT(n) {
    return Kl(n) && !Pa(n).u_() && n.U_.length > 0;
  }
  function ET(n) {
    Pa(n).start();
  }
  async function yO(n) {
    Pa(n).C_();
  }
  async function wO(n) {
    const e = Pa(n);
    for (const t of n.U_) e.b_(t.mutations);
  }
  async function _O(n, e, t) {
    const r = n.U_.shift(), i = u1.from(r, e, t);
    await _T(n, () => n.remoteSyncer.applySuccessfulWrite(i)), await Cm(n);
  }
  async function xO(n, e) {
    e && Pa(n).S_ && await async function(r, i) {
      if (function(c) {
        return rj(c) && c !== _e.ABORTED;
      }(i.code)) {
        const l = r.U_.shift();
        Pa(r).h_(), await _T(r, () => r.remoteSyncer.rejectFailedWrite(l.batchId, i)), await Cm(r);
      }
    }(n, e), xT(n) && ET(n);
  }
  async function qx(n, e) {
    const t = ct(n);
    t.asyncQueue.verifyOperationInProgress(), Ue(Fl, "RemoteStore received new credentials");
    const r = Kl(t);
    t.W_.add(3), await Wf(t), r && t.j_.set("Unknown"), await t.remoteSyncer.handleCredentialChange(e), t.W_.delete(3), await Tm(t);
  }
  async function EO(n, e) {
    const t = ct(n);
    e ? (t.W_.delete(2), await Tm(t)) : e || (t.W_.add(2), await Wf(t), t.j_.set("Unknown"));
  }
  function Nu(n) {
    return n.J_ || (n.J_ = function(t, r, i) {
      const l = ct(t);
      return l.M_(), new oO(r, l.connection, l.authCredentials, l.appCheckCredentials, l.serializer, i);
    }(n.datastore, n.asyncQueue, {
      xo: fO.bind(null, n),
      No: hO.bind(null, n),
      Lo: pO.bind(null, n),
      p_: gO.bind(null, n)
    }), n.G_.push(async (e) => {
      e ? (n.J_.h_(), _1(n) ? w1(n) : n.j_.set("Unknown")) : (await n.J_.stop(), wT(n));
    })), n.J_;
  }
  function Pa(n) {
    return n.Y_ || (n.Y_ = function(t, r, i) {
      const l = ct(t);
      return l.M_(), new aO(r, l.connection, l.authCredentials, l.appCheckCredentials, l.serializer, i);
    }(n.datastore, n.asyncQueue, {
      xo: () => Promise.resolve(),
      No: yO.bind(null, n),
      Lo: xO.bind(null, n),
      D_: wO.bind(null, n),
      v_: _O.bind(null, n)
    }), n.G_.push(async (e) => {
      e ? (n.Y_.h_(), await Cm(n)) : (await n.Y_.stop(), n.U_.length > 0 && (Ue(Fl, `Stopping write stream with ${n.U_.length} pending writes`), n.U_ = []));
    })), n.Y_;
  }
  class x1 {
    constructor(e, t, r, i, l) {
      this.asyncQueue = e, this.timerId = t, this.targetTimeMs = r, this.op = i, this.removalCallback = l, this.deferred = new To(), this.then = this.deferred.promise.then.bind(this.deferred.promise), this.deferred.promise.catch((c) => {
      });
    }
    get promise() {
      return this.deferred.promise;
    }
    static createAndSchedule(e, t, r, i, l) {
      const c = Date.now() + r, f = new x1(e, t, c, i, l);
      return f.start(r), f;
    }
    start(e) {
      this.timerHandle = setTimeout(() => this.handleDelayElapsed(), e);
    }
    skipDelay() {
      return this.handleDelayElapsed();
    }
    cancel(e) {
      this.timerHandle !== null && (this.clearTimeout(), this.deferred.reject(new He(_e.CANCELLED, "Operation cancelled" + (e ? ": " + e : ""))));
    }
    handleDelayElapsed() {
      this.asyncQueue.enqueueAndForget(() => this.timerHandle !== null ? (this.clearTimeout(), this.op().then((e) => this.deferred.resolve(e))) : Promise.resolve());
    }
    clearTimeout() {
      this.timerHandle !== null && (this.removalCallback(this), clearTimeout(this.timerHandle), this.timerHandle = null);
    }
  }
  function E1(n, e) {
    if (ko("AsyncQueue", `${e}: ${n}`), Ru(n)) return new He(_e.UNAVAILABLE, `${e}: ${n}`);
    throw n;
  }
  class fu {
    static emptySet(e) {
      return new fu(e.comparator);
    }
    constructor(e) {
      this.comparator = e ? (t, r) => e(t, r) || Ze.comparator(t.key, r.key) : (t, r) => Ze.comparator(t.key, r.key), this.keyedMap = df(), this.sortedSet = new sn(this.comparator);
    }
    has(e) {
      return this.keyedMap.get(e) != null;
    }
    get(e) {
      return this.keyedMap.get(e);
    }
    first() {
      return this.sortedSet.minKey();
    }
    last() {
      return this.sortedSet.maxKey();
    }
    isEmpty() {
      return this.sortedSet.isEmpty();
    }
    indexOf(e) {
      const t = this.keyedMap.get(e);
      return t ? this.sortedSet.indexOf(t) : -1;
    }
    get size() {
      return this.sortedSet.size;
    }
    forEach(e) {
      this.sortedSet.inorderTraversal((t, r) => (e(t), false));
    }
    add(e) {
      const t = this.delete(e.key);
      return t.copy(t.keyedMap.insert(e.key, e), t.sortedSet.insert(e, null));
    }
    delete(e) {
      const t = this.get(e);
      return t ? this.copy(this.keyedMap.remove(e), this.sortedSet.remove(t)) : this;
    }
    isEqual(e) {
      if (!(e instanceof fu) || this.size !== e.size) return false;
      const t = this.sortedSet.getIterator(), r = e.sortedSet.getIterator();
      for (; t.hasNext(); ) {
        const i = t.getNext().key, l = r.getNext().key;
        if (!i.isEqual(l)) return false;
      }
      return true;
    }
    toString() {
      const e = [];
      return this.forEach((t) => {
        e.push(t.toString());
      }), e.length === 0 ? "DocumentSet ()" : `DocumentSet (
  ` + e.join(`  
`) + `
)`;
    }
    copy(e, t) {
      const r = new fu();
      return r.comparator = this.comparator, r.keyedMap = e, r.sortedSet = t, r;
    }
  }
  class Kx {
    constructor() {
      this.Z_ = new sn(Ze.comparator);
    }
    track(e) {
      const t = e.doc.key, r = this.Z_.get(t);
      r ? e.type !== 0 && r.type === 3 ? this.Z_ = this.Z_.insert(t, e) : e.type === 3 && r.type !== 1 ? this.Z_ = this.Z_.insert(t, {
        type: r.type,
        doc: e.doc
      }) : e.type === 2 && r.type === 2 ? this.Z_ = this.Z_.insert(t, {
        type: 2,
        doc: e.doc
      }) : e.type === 2 && r.type === 0 ? this.Z_ = this.Z_.insert(t, {
        type: 0,
        doc: e.doc
      }) : e.type === 1 && r.type === 0 ? this.Z_ = this.Z_.remove(t) : e.type === 1 && r.type === 2 ? this.Z_ = this.Z_.insert(t, {
        type: 1,
        doc: r.doc
      }) : e.type === 0 && r.type === 1 ? this.Z_ = this.Z_.insert(t, {
        type: 2,
        doc: e.doc
      }) : st() : this.Z_ = this.Z_.insert(t, e);
    }
    X_() {
      const e = [];
      return this.Z_.inorderTraversal((t, r) => {
        e.push(r);
      }), e;
    }
  }
  class _u {
    constructor(e, t, r, i, l, c, f, m, y) {
      this.query = e, this.docs = t, this.oldDocs = r, this.docChanges = i, this.mutatedKeys = l, this.fromCache = c, this.syncStateChanged = f, this.excludesMetadataChanges = m, this.hasCachedResults = y;
    }
    static fromInitialDocuments(e, t, r, i, l) {
      const c = [];
      return t.forEach((f) => {
        c.push({
          type: 0,
          doc: f
        });
      }), new _u(e, t, fu.emptySet(t), c, r, i, true, false, l);
    }
    get hasPendingWrites() {
      return !this.mutatedKeys.isEmpty();
    }
    isEqual(e) {
      if (!(this.fromCache === e.fromCache && this.hasCachedResults === e.hasCachedResults && this.syncStateChanged === e.syncStateChanged && this.mutatedKeys.isEqual(e.mutatedKeys) && ym(this.query, e.query) && this.docs.isEqual(e.docs) && this.oldDocs.isEqual(e.oldDocs))) return false;
      const t = this.docChanges, r = e.docChanges;
      if (t.length !== r.length) return false;
      for (let i = 0; i < t.length; i++) if (t[i].type !== r[i].type || !t[i].doc.isEqual(r[i].doc)) return false;
      return true;
    }
  }
  class bO {
    constructor() {
      this.ea = void 0, this.ta = [];
    }
    na() {
      return this.ta.some((e) => e.ra());
    }
  }
  class TO {
    constructor() {
      this.queries = Gx(), this.onlineState = "Unknown", this.ia = /* @__PURE__ */ new Set();
    }
    terminate() {
      (function(t, r) {
        const i = ct(t), l = i.queries;
        i.queries = Gx(), l.forEach((c, f) => {
          for (const m of f.ta) m.onError(r);
        });
      })(this, new He(_e.ABORTED, "Firestore shutting down"));
    }
  }
  function Gx() {
    return new ql((n) => B2(n), ym);
  }
  async function bT(n, e) {
    const t = ct(n);
    let r = 3;
    const i = e.query;
    let l = t.queries.get(i);
    l ? !l.na() && e.ra() && (r = 2) : (l = new bO(), r = e.ra() ? 0 : 1);
    try {
      switch (r) {
        case 0:
          l.ea = await t.onListen(i, true);
          break;
        case 1:
          l.ea = await t.onListen(i, false);
          break;
        case 2:
          await t.onFirstRemoteStoreListen(i);
      }
    } catch (c) {
      const f = E1(c, `Initialization of query '${ou(e.query)}' failed`);
      return void e.onError(f);
    }
    t.queries.set(i, l), l.ta.push(e), e.sa(t.onlineState), l.ea && e.oa(l.ea) && b1(t);
  }
  async function TT(n, e) {
    const t = ct(n), r = e.query;
    let i = 3;
    const l = t.queries.get(r);
    if (l) {
      const c = l.ta.indexOf(e);
      c >= 0 && (l.ta.splice(c, 1), l.ta.length === 0 ? i = e.ra() ? 0 : 1 : !l.na() && e.ra() && (i = 2));
    }
    switch (i) {
      case 0:
        return t.queries.delete(r), t.onUnlisten(r, true);
      case 1:
        return t.queries.delete(r), t.onUnlisten(r, false);
      case 2:
        return t.onLastRemoteStoreUnlisten(r);
      default:
        return;
    }
  }
  function CO(n, e) {
    const t = ct(n);
    let r = false;
    for (const i of e) {
      const l = i.query, c = t.queries.get(l);
      if (c) {
        for (const f of c.ta) f.oa(i) && (r = true);
        c.ea = i;
      }
    }
    r && b1(t);
  }
  function SO(n, e, t) {
    const r = ct(n), i = r.queries.get(e);
    if (i) for (const l of i.ta) l.onError(t);
    r.queries.delete(e);
  }
  function b1(n) {
    n.ia.forEach((e) => {
      e.next();
    });
  }
  var hy, Qx;
  (Qx = hy || (hy = {}))._a = "default", Qx.Cache = "cache";
  class CT {
    constructor(e, t, r) {
      this.query = e, this.aa = t, this.ua = false, this.ca = null, this.onlineState = "Unknown", this.options = r || {};
    }
    oa(e) {
      if (!this.options.includeMetadataChanges) {
        const r = [];
        for (const i of e.docChanges) i.type !== 3 && r.push(i);
        e = new _u(e.query, e.docs, e.oldDocs, r, e.mutatedKeys, e.fromCache, e.syncStateChanged, true, e.hasCachedResults);
      }
      let t = false;
      return this.ua ? this.la(e) && (this.aa.next(e), t = true) : this.ha(e, this.onlineState) && (this.Pa(e), t = true), this.ca = e, t;
    }
    onError(e) {
      this.aa.error(e);
    }
    sa(e) {
      this.onlineState = e;
      let t = false;
      return this.ca && !this.ua && this.ha(this.ca, e) && (this.Pa(this.ca), t = true), t;
    }
    ha(e, t) {
      if (!e.fromCache || !this.ra()) return true;
      const r = t !== "Offline";
      return (!this.options.Ta || !r) && (!e.docs.isEmpty() || e.hasCachedResults || t === "Offline");
    }
    la(e) {
      if (e.docChanges.length > 0) return true;
      const t = this.ca && this.ca.hasPendingWrites !== e.hasPendingWrites;
      return !(!e.syncStateChanged && !t) && this.options.includeMetadataChanges === true;
    }
    Pa(e) {
      e = _u.fromInitialDocuments(e.query, e.docs, e.mutatedKeys, e.fromCache, e.hasCachedResults), this.ua = true, this.aa.next(e);
    }
    ra() {
      return this.options.source !== hy.Cache;
    }
  }
  class ST {
    constructor(e) {
      this.key = e;
    }
  }
  class IT {
    constructor(e) {
      this.key = e;
    }
  }
  class IO {
    constructor(e, t) {
      this.query = e, this.fa = t, this.ga = null, this.hasCachedResults = false, this.current = false, this.pa = Ct(), this.mutatedKeys = Ct(), this.ya = W2(e), this.wa = new fu(this.ya);
    }
    get Sa() {
      return this.fa;
    }
    ba(e, t) {
      const r = t ? t.Da : new Kx(), i = t ? t.wa : this.wa;
      let l = t ? t.mutatedKeys : this.mutatedKeys, c = i, f = false;
      const m = this.query.limitType === "F" && i.size === this.query.limit ? i.last() : null, y = this.query.limitType === "L" && i.size === this.query.limit ? i.first() : null;
      if (e.inorderTraversal((x, C) => {
        const S = i.get(x), N = wm(this.query, C) ? C : null, P = !!S && this.mutatedKeys.has(S.key), O = !!N && (N.hasLocalMutations || this.mutatedKeys.has(N.key) && N.hasCommittedMutations);
        let L = false;
        S && N ? S.data.isEqual(N.data) ? P !== O && (r.track({
          type: 3,
          doc: N
        }), L = true) : this.va(S, N) || (r.track({
          type: 2,
          doc: N
        }), L = true, (m && this.ya(N, m) > 0 || y && this.ya(N, y) < 0) && (f = true)) : !S && N ? (r.track({
          type: 0,
          doc: N
        }), L = true) : S && !N && (r.track({
          type: 1,
          doc: S
        }), L = true, (m || y) && (f = true)), L && (N ? (c = c.add(N), l = O ? l.add(x) : l.delete(x)) : (c = c.delete(x), l = l.delete(x)));
      }), this.query.limit !== null) for (; c.size > this.query.limit; ) {
        const x = this.query.limitType === "F" ? c.last() : c.first();
        c = c.delete(x.key), l = l.delete(x.key), r.track({
          type: 1,
          doc: x
        });
      }
      return {
        wa: c,
        Da: r,
        ls: f,
        mutatedKeys: l
      };
    }
    va(e, t) {
      return e.hasLocalMutations && t.hasCommittedMutations && !t.hasLocalMutations;
    }
    applyChanges(e, t, r, i) {
      const l = this.wa;
      this.wa = e.wa, this.mutatedKeys = e.mutatedKeys;
      const c = e.Da.X_();
      c.sort((x, C) => function(N, P) {
        const O = (L) => {
          switch (L) {
            case 0:
              return 1;
            case 2:
            case 3:
              return 2;
            case 1:
              return 0;
            default:
              return st();
          }
        };
        return O(N) - O(P);
      }(x.type, C.type) || this.ya(x.doc, C.doc)), this.Ca(r), i = i != null && i;
      const f = t && !i ? this.Fa() : [], m = this.pa.size === 0 && this.current && !i ? 1 : 0, y = m !== this.ga;
      return this.ga = m, c.length !== 0 || y ? {
        snapshot: new _u(this.query, e.wa, l, c, e.mutatedKeys, m === 0, y, false, !!r && r.resumeToken.approximateByteSize() > 0),
        Ma: f
      } : {
        Ma: f
      };
    }
    sa(e) {
      return this.current && e === "Offline" ? (this.current = false, this.applyChanges({
        wa: this.wa,
        Da: new Kx(),
        mutatedKeys: this.mutatedKeys,
        ls: false
      }, false)) : {
        Ma: []
      };
    }
    xa(e) {
      return !this.fa.has(e) && !!this.wa.has(e) && !this.wa.get(e).hasLocalMutations;
    }
    Ca(e) {
      e && (e.addedDocuments.forEach((t) => this.fa = this.fa.add(t)), e.modifiedDocuments.forEach((t) => {
      }), e.removedDocuments.forEach((t) => this.fa = this.fa.delete(t)), this.current = e.current);
    }
    Fa() {
      if (!this.current) return [];
      const e = this.pa;
      this.pa = Ct(), this.wa.forEach((r) => {
        this.xa(r.key) && (this.pa = this.pa.add(r.key));
      });
      const t = [];
      return e.forEach((r) => {
        this.pa.has(r) || t.push(new IT(r));
      }), this.pa.forEach((r) => {
        e.has(r) || t.push(new ST(r));
      }), t;
    }
    Oa(e) {
      this.fa = e.gs, this.pa = Ct();
      const t = this.ba(e.documents);
      return this.applyChanges(t, true);
    }
    Na() {
      return _u.fromInitialDocuments(this.query, this.wa, this.mutatedKeys, this.ga === 0, this.hasCachedResults);
    }
  }
  const T1 = "SyncEngine";
  class kO {
    constructor(e, t, r) {
      this.query = e, this.targetId = t, this.view = r;
    }
  }
  class AO {
    constructor(e) {
      this.key = e, this.Ba = false;
    }
  }
  class RO {
    constructor(e, t, r, i, l, c) {
      this.localStore = e, this.remoteStore = t, this.eventManager = r, this.sharedClientState = i, this.currentUser = l, this.maxConcurrentLimboResolutions = c, this.La = {}, this.ka = new ql((f) => B2(f), ym), this.qa = /* @__PURE__ */ new Map(), this.Qa = /* @__PURE__ */ new Set(), this.$a = new sn(Ze.comparator), this.Ua = /* @__PURE__ */ new Map(), this.Ka = new h1(), this.Wa = {}, this.Ga = /* @__PURE__ */ new Map(), this.za = wu.Kn(), this.onlineState = "Unknown", this.ja = void 0;
    }
    get isPrimaryClient() {
      return this.ja === true;
    }
  }
  async function NO(n, e, t = true) {
    const r = DT(n);
    let i;
    const l = r.ka.get(e);
    return l ? (r.sharedClientState.addLocalQueryTarget(l.targetId), i = l.view.Na()) : i = await kT(r, e, t, true), i;
  }
  async function PO(n, e) {
    const t = DT(n);
    await kT(t, e, true, false);
  }
  async function kT(n, e, t, r) {
    const i = await Jj(n.localStore, Vi(e)), l = i.targetId, c = n.sharedClientState.addLocalQueryTarget(l, t);
    let f;
    return r && (f = await DO(n, e, l, c === "current", i.resumeToken)), n.isPrimaryClient && t && vT(n.remoteStore, i), f;
  }
  async function DO(n, e, t, r, i) {
    n.Ha = (C, S, N) => async function(O, L, H, W) {
      let T = L.view.ba(H);
      T.ls && (T = await zx(O.localStore, L.query, false).then(({ documents: j }) => L.view.ba(j, T)));
      const Y = W && W.targetChanges.get(L.targetId), u = W && W.targetMismatches.get(L.targetId) != null, ge = L.view.applyChanges(T, O.isPrimaryClient, Y, u);
      return Xx(O, L.targetId, ge.Ma), ge.snapshot;
    }(n, C, S, N);
    const l = await zx(n.localStore, e, true), c = new IO(e, l.gs), f = c.ba(l.documents), m = Bf.createSynthesizedTargetChangeForCurrentChange(t, r && n.onlineState !== "Offline", i), y = c.applyChanges(f, n.isPrimaryClient, m);
    Xx(n, t, y.Ma);
    const x = new kO(e, t, c);
    return n.ka.set(e, x), n.qa.has(t) ? n.qa.get(t).push(e) : n.qa.set(t, [
      e
    ]), y.snapshot;
  }
  async function jO(n, e, t) {
    const r = ct(n), i = r.ka.get(e), l = r.qa.get(i.targetId);
    if (l.length > 1) return r.qa.set(i.targetId, l.filter((c) => !ym(c, e))), void r.ka.delete(e);
    r.isPrimaryClient ? (r.sharedClientState.removeLocalQueryTarget(i.targetId), r.sharedClientState.isActiveQueryTarget(i.targetId) || await dy(r.localStore, i.targetId, false).then(() => {
      r.sharedClientState.clearQueryState(i.targetId), t && v1(r.remoteStore, i.targetId), py(r, i.targetId);
    }).catch(Au)) : (py(r, i.targetId), await dy(r.localStore, i.targetId, true));
  }
  async function OO(n, e) {
    const t = ct(n), r = t.ka.get(e), i = t.qa.get(r.targetId);
    t.isPrimaryClient && i.length === 1 && (t.sharedClientState.removeLocalQueryTarget(r.targetId), v1(t.remoteStore, r.targetId));
  }
  async function LO(n, e, t) {
    const r = BO(n);
    try {
      const i = await function(c, f) {
        const m = ct(c), y = An.now(), x = f.reduce((N, P) => N.add(P.key), Ct());
        let C, S;
        return m.persistence.runTransaction("Locally write mutations", "readwrite", (N) => {
          let P = Ao(), O = Ct();
          return m.ds.getEntries(N, x).next((L) => {
            P = L, P.forEach((H, W) => {
              W.isValidDocument() || (O = O.add(H));
            });
          }).next(() => m.localDocuments.getOverlayedDocuments(N, P)).next((L) => {
            C = L;
            const H = [];
            for (const W of f) {
              const T = JD(W, C.get(W.key).overlayedDocument);
              T != null && H.push(new Ma(W.key, T, O2(T.value.mapValue), ii.exists(true)));
            }
            return m.mutationQueue.addMutationBatch(N, y, H, f);
          }).next((L) => {
            S = L;
            const H = L.applyToLocalDocumentSet(C, O);
            return m.documentOverlayCache.saveOverlays(N, L.batchId, H);
          });
        }).then(() => ({
          batchId: S.batchId,
          changes: q2(C)
        }));
      }(r.localStore, e);
      r.sharedClientState.addPendingMutation(i.batchId), function(c, f, m) {
        let y = c.Wa[c.currentUser.toKey()];
        y || (y = new sn(vt)), y = y.insert(f, m), c.Wa[c.currentUser.toKey()] = y;
      }(r, i.batchId, t), await Hf(r, i.changes), await Cm(r.remoteStore);
    } catch (i) {
      const l = E1(i, "Failed to persist write");
      t.reject(l);
    }
  }
  async function AT(n, e) {
    const t = ct(n);
    try {
      const r = await Qj(t.localStore, e);
      e.targetChanges.forEach((i, l) => {
        const c = t.Ua.get(l);
        c && ($t(i.addedDocuments.size + i.modifiedDocuments.size + i.removedDocuments.size <= 1), i.addedDocuments.size > 0 ? c.Ba = true : i.modifiedDocuments.size > 0 ? $t(c.Ba) : i.removedDocuments.size > 0 && ($t(c.Ba), c.Ba = false));
      }), await Hf(t, r, e);
    } catch (r) {
      await Au(r);
    }
  }
  function Yx(n, e, t) {
    const r = ct(n);
    if (r.isPrimaryClient && t === 0 || !r.isPrimaryClient && t === 1) {
      const i = [];
      r.ka.forEach((l, c) => {
        const f = c.view.sa(e);
        f.snapshot && i.push(f.snapshot);
      }), function(c, f) {
        const m = ct(c);
        m.onlineState = f;
        let y = false;
        m.queries.forEach((x, C) => {
          for (const S of C.ta) S.sa(f) && (y = true);
        }), y && b1(m);
      }(r.eventManager, e), i.length && r.La.p_(i), r.onlineState = e, r.isPrimaryClient && r.sharedClientState.setOnlineState(e);
    }
  }
  async function MO(n, e, t) {
    const r = ct(n);
    r.sharedClientState.updateQueryState(e, "rejected", t);
    const i = r.Ua.get(e), l = i && i.key;
    if (l) {
      let c = new sn(Ze.comparator);
      c = c.insert(l, pr.newNoDocument(l, ot.min()));
      const f = Ct().add(l), m = new Em(ot.min(), /* @__PURE__ */ new Map(), new sn(vt), c, f);
      await AT(r, m), r.$a = r.$a.remove(l), r.Ua.delete(e), C1(r);
    } else await dy(r.localStore, e, false).then(() => py(r, e, t)).catch(Au);
  }
  async function $O(n, e) {
    const t = ct(n), r = e.batch.batchId;
    try {
      const i = await Gj(t.localStore, e);
      NT(t, r, null), RT(t, r), t.sharedClientState.updateMutationState(r, "acknowledged"), await Hf(t, i);
    } catch (i) {
      await Au(i);
    }
  }
  async function VO(n, e, t) {
    const r = ct(n);
    try {
      const i = await function(c, f) {
        const m = ct(c);
        return m.persistence.runTransaction("Reject batch", "readwrite-primary", (y) => {
          let x;
          return m.mutationQueue.lookupMutationBatch(y, f).next((C) => ($t(C !== null), x = C.keys(), m.mutationQueue.removeMutationBatch(y, C))).next(() => m.mutationQueue.performConsistencyCheck(y)).next(() => m.documentOverlayCache.removeOverlaysForBatchId(y, x, f)).next(() => m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y, x)).next(() => m.localDocuments.getDocuments(y, x));
        });
      }(r.localStore, e);
      NT(r, e, t), RT(r, e), r.sharedClientState.updateMutationState(e, "rejected", t), await Hf(r, i);
    } catch (i) {
      await Au(i);
    }
  }
  function RT(n, e) {
    (n.Ga.get(e) || []).forEach((t) => {
      t.resolve();
    }), n.Ga.delete(e);
  }
  function NT(n, e, t) {
    const r = ct(n);
    let i = r.Wa[r.currentUser.toKey()];
    if (i) {
      const l = i.get(e);
      l && (t ? l.reject(t) : l.resolve(), i = i.remove(e)), r.Wa[r.currentUser.toKey()] = i;
    }
  }
  function py(n, e, t = null) {
    n.sharedClientState.removeLocalQueryTarget(e);
    for (const r of n.qa.get(e)) n.ka.delete(r), t && n.La.Ja(r, t);
    n.qa.delete(e), n.isPrimaryClient && n.Ka.br(e).forEach((r) => {
      n.Ka.containsKey(r) || PT(n, r);
    });
  }
  function PT(n, e) {
    n.Qa.delete(e.path.canonicalString());
    const t = n.$a.get(e);
    t !== null && (v1(n.remoteStore, t), n.$a = n.$a.remove(e), n.Ua.delete(t), C1(n));
  }
  function Xx(n, e, t) {
    for (const r of t) r instanceof ST ? (n.Ka.addReference(r.key, e), FO(n, r)) : r instanceof IT ? (Ue(T1, "Document no longer in limbo: " + r.key), n.Ka.removeReference(r.key, e), n.Ka.containsKey(r.key) || PT(n, r.key)) : st();
  }
  function FO(n, e) {
    const t = e.key, r = t.path.canonicalString();
    n.$a.get(t) || n.Qa.has(r) || (Ue(T1, "New document in limbo: " + t), n.Qa.add(r), C1(n));
  }
  function C1(n) {
    for (; n.Qa.size > 0 && n.$a.size < n.maxConcurrentLimboResolutions; ) {
      const e = n.Qa.values().next().value;
      n.Qa.delete(e);
      const t = new Ze(Xt.fromString(e)), r = n.za.next();
      n.Ua.set(r, new AO(t)), n.$a = n.$a.insert(t, r), vT(n.remoteStore, new xa(Vi(a1(t.path)), r, "TargetPurposeLimboResolution", gm.ae));
    }
  }
  async function Hf(n, e, t) {
    const r = ct(n), i = [], l = [], c = [];
    r.ka.isEmpty() || (r.ka.forEach((f, m) => {
      c.push(r.Ha(m, e, t).then((y) => {
        var x;
        if ((y || t) && r.isPrimaryClient) {
          const C = y ? !y.fromCache : (x = t == null ? void 0 : t.targetChanges.get(m.targetId)) === null || x === void 0 ? void 0 : x.current;
          r.sharedClientState.updateQueryState(m.targetId, C ? "current" : "not-current");
        }
        if (y) {
          i.push(y);
          const C = g1.Yi(m.targetId, y);
          l.push(C);
        }
      }));
    }), await Promise.all(c), r.La.p_(i), await async function(m, y) {
      const x = ct(m);
      try {
        await x.persistence.runTransaction("notifyLocalViewChanges", "readwrite", (C) => we.forEach(y, (S) => we.forEach(S.Hi, (N) => x.persistence.referenceDelegate.addReference(C, S.targetId, N)).next(() => we.forEach(S.Ji, (N) => x.persistence.referenceDelegate.removeReference(C, S.targetId, N)))));
      } catch (C) {
        if (!Ru(C)) throw C;
        Ue(m1, "Failed to update sequence numbers: " + C);
      }
      for (const C of y) {
        const S = C.targetId;
        if (!C.fromCache) {
          const N = x.Ts.get(S), P = N.snapshotVersion, O = N.withLastLimboFreeSnapshotVersion(P);
          x.Ts = x.Ts.insert(S, O);
        }
      }
    }(r.localStore, l));
  }
  async function zO(n, e) {
    const t = ct(n);
    if (!t.currentUser.isEqual(e)) {
      Ue(T1, "User change. New user:", e.toKey());
      const r = await hT(t.localStore, e);
      t.currentUser = e, function(l, c) {
        l.Ga.forEach((f) => {
          f.forEach((m) => {
            m.reject(new He(_e.CANCELLED, c));
          });
        }), l.Ga.clear();
      }(t, "'waitForPendingWrites' promise is rejected due to a user change."), t.sharedClientState.handleUserChange(e, r.removedBatchIds, r.addedBatchIds), await Hf(t, r.Rs);
    }
  }
  function UO(n, e) {
    const t = ct(n), r = t.Ua.get(e);
    if (r && r.Ba) return Ct().add(r.key);
    {
      let i = Ct();
      const l = t.qa.get(e);
      if (!l) return i;
      for (const c of l) {
        const f = t.ka.get(c);
        i = i.unionWith(f.view.Sa);
      }
      return i;
    }
  }
  function DT(n) {
    const e = ct(n);
    return e.remoteStore.remoteSyncer.applyRemoteEvent = AT.bind(null, e), e.remoteStore.remoteSyncer.getRemoteKeysForTarget = UO.bind(null, e), e.remoteStore.remoteSyncer.rejectListen = MO.bind(null, e), e.La.p_ = CO.bind(null, e.eventManager), e.La.Ja = SO.bind(null, e.eventManager), e;
  }
  function BO(n) {
    const e = ct(n);
    return e.remoteStore.remoteSyncer.applySuccessfulWrite = $O.bind(null, e), e.remoteStore.remoteSyncer.rejectFailedWrite = VO.bind(null, e), e;
  }
  class Xg {
    constructor() {
      this.kind = "memory", this.synchronizeTabs = false;
    }
    async initialize(e) {
      this.serializer = bm(e.databaseInfo.databaseId), this.sharedClientState = this.Za(e), this.persistence = this.Xa(e), await this.persistence.start(), this.localStore = this.eu(e), this.gcScheduler = this.tu(e, this.localStore), this.indexBackfillerScheduler = this.nu(e, this.localStore);
    }
    tu(e, t) {
      return null;
    }
    nu(e, t) {
      return null;
    }
    eu(e) {
      return Kj(this.persistence, new Wj(), e.initialUser, this.serializer);
    }
    Xa(e) {
      return new fT(p1.ri, this.serializer);
    }
    Za(e) {
      return new eO();
    }
    async terminate() {
      var e, t;
      (e = this.gcScheduler) === null || e === void 0 || e.stop(), (t = this.indexBackfillerScheduler) === null || t === void 0 || t.stop(), this.sharedClientState.shutdown(), await this.persistence.shutdown();
    }
  }
  Xg.provider = {
    build: () => new Xg()
  };
  class WO extends Xg {
    constructor(e) {
      super(), this.cacheSizeBytes = e;
    }
    tu(e, t) {
      $t(this.persistence.referenceDelegate instanceof Qg);
      const r = this.persistence.referenceDelegate.garbageCollector;
      return new Aj(r, e.asyncQueue, t);
    }
    Xa(e) {
      const t = this.cacheSizeBytes !== void 0 ? Gr.withCacheSize(this.cacheSizeBytes) : Gr.DEFAULT;
      return new fT((r) => Qg.ri(r, t), this.serializer);
    }
  }
  class gy {
    async initialize(e, t) {
      this.localStore || (this.localStore = e.localStore, this.sharedClientState = e.sharedClientState, this.datastore = this.createDatastore(t), this.remoteStore = this.createRemoteStore(t), this.eventManager = this.createEventManager(t), this.syncEngine = this.createSyncEngine(t, !e.synchronizeTabs), this.sharedClientState.onlineStateHandler = (r) => Yx(this.syncEngine, r, 1), this.remoteStore.remoteSyncer.handleCredentialChange = zO.bind(null, this.syncEngine), await EO(this.remoteStore, this.syncEngine.isPrimaryClient));
    }
    createEventManager(e) {
      return function() {
        return new TO();
      }();
    }
    createDatastore(e) {
      const t = bm(e.databaseInfo.databaseId), r = function(l) {
        return new iO(l);
      }(e.databaseInfo);
      return function(l, c, f, m) {
        return new cO(l, c, f, m);
      }(e.authCredentials, e.appCheckCredentials, r, t);
    }
    createRemoteStore(e) {
      return function(r, i, l, c, f) {
        return new dO(r, i, l, c, f);
      }(this.localStore, this.datastore, e.asyncQueue, (t) => Yx(this.syncEngine, t, 0), function() {
        return Wx.D() ? new Wx() : new tO();
      }());
    }
    createSyncEngine(e, t) {
      return function(i, l, c, f, m, y, x) {
        const C = new RO(i, l, c, f, m, y);
        return x && (C.ja = true), C;
      }(this.localStore, this.remoteStore, this.eventManager, this.sharedClientState, e.initialUser, e.maxConcurrentLimboResolutions, t);
    }
    async terminate() {
      var e, t;
      await async function(i) {
        const l = ct(i);
        Ue(Fl, "RemoteStore shutting down."), l.W_.add(5), await Wf(l), l.z_.shutdown(), l.j_.set("Unknown");
      }(this.remoteStore), (e = this.datastore) === null || e === void 0 || e.terminate(), (t = this.eventManager) === null || t === void 0 || t.terminate();
    }
  }
  gy.provider = {
    build: () => new gy()
  };
  class jT {
    constructor(e) {
      this.observer = e, this.muted = false;
    }
    next(e) {
      this.muted || this.observer.next && this.iu(this.observer.next, e);
    }
    error(e) {
      this.muted || (this.observer.error ? this.iu(this.observer.error, e) : ko("Uncaught Error in snapshot listener:", e.toString()));
    }
    su() {
      this.muted = true;
    }
    iu(e, t) {
      setTimeout(() => {
        this.muted || e(t);
      }, 0);
    }
  }
  const Da = "FirestoreClient";
  class HO {
    constructor(e, t, r, i, l) {
      this.authCredentials = e, this.appCheckCredentials = t, this.asyncQueue = r, this.databaseInfo = i, this.user = hr.UNAUTHENTICATED, this.clientId = C2.newId(), this.authCredentialListener = () => Promise.resolve(), this.appCheckCredentialListener = () => Promise.resolve(), this._uninitializedComponentsProvider = l, this.authCredentials.start(r, async (c) => {
        Ue(Da, "Received user=", c.uid), await this.authCredentialListener(c), this.user = c;
      }), this.appCheckCredentials.start(r, (c) => (Ue(Da, "Received new app check token=", c), this.appCheckCredentialListener(c, this.user)));
    }
    get configuration() {
      return {
        asyncQueue: this.asyncQueue,
        databaseInfo: this.databaseInfo,
        clientId: this.clientId,
        authCredentials: this.authCredentials,
        appCheckCredentials: this.appCheckCredentials,
        initialUser: this.user,
        maxConcurrentLimboResolutions: 100
      };
    }
    setCredentialChangeListener(e) {
      this.authCredentialListener = e;
    }
    setAppCheckTokenChangeListener(e) {
      this.appCheckCredentialListener = e;
    }
    terminate() {
      this.asyncQueue.enterRestrictedMode();
      const e = new To();
      return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async () => {
        try {
          this._onlineComponents && await this._onlineComponents.terminate(), this._offlineComponents && await this._offlineComponents.terminate(), this.authCredentials.shutdown(), this.appCheckCredentials.shutdown(), e.resolve();
        } catch (t) {
          const r = E1(t, "Failed to shutdown persistence");
          e.reject(r);
        }
      }), e.promise;
    }
  }
  async function _v(n, e) {
    n.asyncQueue.verifyOperationInProgress(), Ue(Da, "Initializing OfflineComponentProvider");
    const t = n.configuration;
    await e.initialize(t);
    let r = t.initialUser;
    n.setCredentialChangeListener(async (i) => {
      r.isEqual(i) || (await hT(e.localStore, i), r = i);
    }), e.persistence.setDatabaseDeletedListener(() => n.terminate()), n._offlineComponents = e;
  }
  async function Jx(n, e) {
    n.asyncQueue.verifyOperationInProgress();
    const t = await qO(n);
    Ue(Da, "Initializing OnlineComponentProvider"), await e.initialize(t, n.configuration), n.setCredentialChangeListener((r) => qx(e.remoteStore, r)), n.setAppCheckTokenChangeListener((r, i) => qx(e.remoteStore, i)), n._onlineComponents = e;
  }
  async function qO(n) {
    if (!n._offlineComponents) if (n._uninitializedComponentsProvider) {
      Ue(Da, "Using user provided OfflineComponentProvider");
      try {
        await _v(n, n._uninitializedComponentsProvider._offline);
      } catch (e) {
        const t = e;
        if (!function(i) {
          return i.name === "FirebaseError" ? i.code === _e.FAILED_PRECONDITION || i.code === _e.UNIMPLEMENTED : !(typeof DOMException < "u" && i instanceof DOMException) || i.code === 22 || i.code === 20 || i.code === 11;
        }(t)) throw t;
        gu("Error using user provided cache. Falling back to memory cache: " + t), await _v(n, new Xg());
      }
    } else Ue(Da, "Using default OfflineComponentProvider"), await _v(n, new WO(void 0));
    return n._offlineComponents;
  }
  async function OT(n) {
    return n._onlineComponents || (n._uninitializedComponentsProvider ? (Ue(Da, "Using user provided OnlineComponentProvider"), await Jx(n, n._uninitializedComponentsProvider._online)) : (Ue(Da, "Using default OnlineComponentProvider"), await Jx(n, new gy()))), n._onlineComponents;
  }
  function KO(n) {
    return OT(n).then((e) => e.syncEngine);
  }
  async function LT(n) {
    const e = await OT(n), t = e.eventManager;
    return t.onListen = NO.bind(null, e.syncEngine), t.onUnlisten = jO.bind(null, e.syncEngine), t.onFirstRemoteStoreListen = PO.bind(null, e.syncEngine), t.onLastRemoteStoreUnlisten = OO.bind(null, e.syncEngine), t;
  }
  function GO(n, e, t = {}) {
    const r = new To();
    return n.asyncQueue.enqueueAndForget(async () => function(l, c, f, m, y) {
      const x = new jT({
        next: (S) => {
          x.su(), c.enqueueAndForget(() => TT(l, C));
          const N = S.docs.has(f);
          !N && S.fromCache ? y.reject(new He(_e.UNAVAILABLE, "Failed to get document because the client is offline.")) : N && S.fromCache && m && m.source === "server" ? y.reject(new He(_e.UNAVAILABLE, 'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')) : y.resolve(S);
        },
        error: (S) => y.reject(S)
      }), C = new CT(a1(f.path), x, {
        includeMetadataChanges: true,
        Ta: true
      });
      return bT(l, C);
    }(await LT(n), n.asyncQueue, e, t, r)), r.promise;
  }
  function QO(n, e, t = {}) {
    const r = new To();
    return n.asyncQueue.enqueueAndForget(async () => function(l, c, f, m, y) {
      const x = new jT({
        next: (S) => {
          x.su(), c.enqueueAndForget(() => TT(l, C)), S.fromCache && m.source === "server" ? y.reject(new He(_e.UNAVAILABLE, 'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')) : y.resolve(S);
        },
        error: (S) => y.reject(S)
      }), C = new CT(f, x, {
        includeMetadataChanges: true,
        Ta: true
      });
      return bT(l, C);
    }(await LT(n), n.asyncQueue, e, t, r)), r.promise;
  }
  function MT(n) {
    const e = {};
    return n.timeoutSeconds !== void 0 && (e.timeoutSeconds = n.timeoutSeconds), e;
  }
  const Zx = /* @__PURE__ */ new Map();
  function $T(n, e, t) {
    if (!t) throw new He(_e.INVALID_ARGUMENT, `Function ${n}() cannot be called with an empty ${e}.`);
  }
  function YO(n, e, t, r) {
    if (e === true && r === true) throw new He(_e.INVALID_ARGUMENT, `${n} and ${t} cannot be used together.`);
  }
  function eE(n) {
    if (!Ze.isDocumentKey(n)) throw new He(_e.INVALID_ARGUMENT, `Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`);
  }
  function tE(n) {
    if (Ze.isDocumentKey(n)) throw new He(_e.INVALID_ARGUMENT, `Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`);
  }
  function Sm(n) {
    if (n === void 0) return "undefined";
    if (n === null) return "null";
    if (typeof n == "string") return n.length > 20 && (n = `${n.substring(0, 20)}...`), JSON.stringify(n);
    if (typeof n == "number" || typeof n == "boolean") return "" + n;
    if (typeof n == "object") {
      if (n instanceof Array) return "an array";
      {
        const e = function(r) {
          return r.constructor ? r.constructor.name : null;
        }(n);
        return e ? `a custom ${e} object` : "an object";
      }
    }
    return typeof n == "function" ? "a function" : st();
  }
  function Bi(n, e) {
    if ("_delegate" in n && (n = n._delegate), !(n instanceof e)) {
      if (e.name === n.constructor.name) throw new He(_e.INVALID_ARGUMENT, "Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");
      {
        const t = Sm(n);
        throw new He(_e.INVALID_ARGUMENT, `Expected type '${e.name}', but it was: ${t}`);
      }
    }
    return n;
  }
  const VT = "firestore.googleapis.com", nE = true;
  class rE {
    constructor(e) {
      var t, r;
      if (e.host === void 0) {
        if (e.ssl !== void 0) throw new He(_e.INVALID_ARGUMENT, "Can't provide ssl option if host option is not set");
        this.host = VT, this.ssl = nE;
      } else this.host = e.host, this.ssl = (t = e.ssl) !== null && t !== void 0 ? t : nE;
      if (this.credentials = e.credentials, this.ignoreUndefinedProperties = !!e.ignoreUndefinedProperties, this.localCache = e.localCache, e.cacheSizeBytes === void 0) this.cacheSizeBytes = dT;
      else {
        if (e.cacheSizeBytes !== -1 && e.cacheSizeBytes < Ij) throw new He(_e.INVALID_ARGUMENT, "cacheSizeBytes must be at least 1048576");
        this.cacheSizeBytes = e.cacheSizeBytes;
      }
      YO("experimentalForceLongPolling", e.experimentalForceLongPolling, "experimentalAutoDetectLongPolling", e.experimentalAutoDetectLongPolling), this.experimentalForceLongPolling = !!e.experimentalForceLongPolling, this.experimentalForceLongPolling ? this.experimentalAutoDetectLongPolling = false : e.experimentalAutoDetectLongPolling === void 0 ? this.experimentalAutoDetectLongPolling = true : this.experimentalAutoDetectLongPolling = !!e.experimentalAutoDetectLongPolling, this.experimentalLongPollingOptions = MT((r = e.experimentalLongPollingOptions) !== null && r !== void 0 ? r : {}), function(l) {
        if (l.timeoutSeconds !== void 0) {
          if (isNaN(l.timeoutSeconds)) throw new He(_e.INVALID_ARGUMENT, `invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);
          if (l.timeoutSeconds < 5) throw new He(_e.INVALID_ARGUMENT, `invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);
          if (l.timeoutSeconds > 30) throw new He(_e.INVALID_ARGUMENT, `invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`);
        }
      }(this.experimentalLongPollingOptions), this.useFetchStreams = !!e.useFetchStreams;
    }
    isEqual(e) {
      return this.host === e.host && this.ssl === e.ssl && this.credentials === e.credentials && this.cacheSizeBytes === e.cacheSizeBytes && this.experimentalForceLongPolling === e.experimentalForceLongPolling && this.experimentalAutoDetectLongPolling === e.experimentalAutoDetectLongPolling && function(r, i) {
        return r.timeoutSeconds === i.timeoutSeconds;
      }(this.experimentalLongPollingOptions, e.experimentalLongPollingOptions) && this.ignoreUndefinedProperties === e.ignoreUndefinedProperties && this.useFetchStreams === e.useFetchStreams;
    }
  }
  class Im {
    constructor(e, t, r, i) {
      this._authCredentials = e, this._appCheckCredentials = t, this._databaseId = r, this._app = i, this.type = "firestore-lite", this._persistenceKey = "(lite)", this._settings = new rE({}), this._settingsFrozen = false, this._emulatorOptions = {}, this._terminateTask = "notTerminated";
    }
    get app() {
      if (!this._app) throw new He(_e.FAILED_PRECONDITION, "Firestore was not initialized using the Firebase SDK. 'app' is not available");
      return this._app;
    }
    get _initialized() {
      return this._settingsFrozen;
    }
    get _terminated() {
      return this._terminateTask !== "notTerminated";
    }
    _setSettings(e) {
      if (this._settingsFrozen) throw new He(_e.FAILED_PRECONDITION, "Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");
      this._settings = new rE(e), this._emulatorOptions = e.emulatorOptions || {}, e.credentials !== void 0 && (this._authCredentials = function(r) {
        if (!r) return new sD();
        switch (r.type) {
          case "firstParty":
            return new lD(r.sessionIndex || "0", r.iamToken || null, r.authTokenFactory || null);
          case "provider":
            return r.client;
          default:
            throw new He(_e.INVALID_ARGUMENT, "makeAuthCredentialsProvider failed due to invalid credential type");
        }
      }(e.credentials));
    }
    _getSettings() {
      return this._settings;
    }
    _getEmulatorOptions() {
      return this._emulatorOptions;
    }
    _freezeSettings() {
      return this._settingsFrozen = true, this._settings;
    }
    _delete() {
      return this._terminateTask === "notTerminated" && (this._terminateTask = this._terminate()), this._terminateTask;
    }
    async _restart() {
      this._terminateTask === "notTerminated" ? await this._terminate() : this._terminateTask = "notTerminated";
    }
    toJSON() {
      return {
        app: this._app,
        databaseId: this._databaseId,
        settings: this._settings
      };
    }
    _terminate() {
      return function(t) {
        const r = Zx.get(t);
        r && (Ue("ComponentProvider", "Removing Datastore"), Zx.delete(t), r.terminate());
      }(this), Promise.resolve();
    }
  }
  function XO(n, e, t, r = {}) {
    var i;
    const l = (n = Bi(n, Im))._getSettings(), c = Object.assign(Object.assign({}, l), {
      emulatorOptions: n._getEmulatorOptions()
    }), f = `${e}:${t}`;
    l.host !== VT && l.host !== f && gu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");
    const m = Object.assign(Object.assign({}, l), {
      host: f,
      ssl: false,
      emulatorOptions: r
    });
    if (!Ia(m, c) && (n._setSettings(m), r.mockUserToken)) {
      let y, x;
      if (typeof r.mockUserToken == "string") y = r.mockUserToken, x = hr.MOCK_USER;
      else {
        y = m4(r.mockUserToken, (i = n._app) === null || i === void 0 ? void 0 : i.options.projectId);
        const C = r.mockUserToken.sub || r.mockUserToken.user_id;
        if (!C) throw new He(_e.INVALID_ARGUMENT, "mockUserToken must contain 'sub' or 'user_id' field!");
        x = new hr(C);
      }
      n._authCredentials = new iD(new b2(y, x));
    }
  }
  class Pu {
    constructor(e, t, r) {
      this.converter = t, this._query = r, this.type = "query", this.firestore = e;
    }
    withConverter(e) {
      return new Pu(this.firestore, e, this._query);
    }
  }
  class Sr {
    constructor(e, t, r) {
      this.converter = t, this._key = r, this.type = "document", this.firestore = e;
    }
    get _path() {
      return this._key.path;
    }
    get id() {
      return this._key.path.lastSegment();
    }
    get path() {
      return this._key.path.canonicalString();
    }
    get parent() {
      return new Sa(this.firestore, this.converter, this._key.path.popLast());
    }
    withConverter(e) {
      return new Sr(this.firestore, e, this._key);
    }
  }
  class Sa extends Pu {
    constructor(e, t, r) {
      super(e, t, a1(r)), this._path = r, this.type = "collection";
    }
    get id() {
      return this._query.path.lastSegment();
    }
    get path() {
      return this._query.path.canonicalString();
    }
    get parent() {
      const e = this._path.popLast();
      return e.isEmpty() ? null : new Sr(this.firestore, null, new Ze(e));
    }
    withConverter(e) {
      return new Sa(this.firestore, e, this._path);
    }
  }
  function S1(n, e, ...t) {
    if (n = xn(n), $T("collection", "path", e), n instanceof Im) {
      const r = Xt.fromString(e, ...t);
      return tE(r), new Sa(n, null, r);
    }
    {
      if (!(n instanceof Sr || n instanceof Sa)) throw new He(_e.INVALID_ARGUMENT, "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");
      const r = n._path.child(Xt.fromString(e, ...t));
      return tE(r), new Sa(n.firestore, null, r);
    }
  }
  function mo(n, e, ...t) {
    if (n = xn(n), arguments.length === 1 && (e = C2.newId()), $T("doc", "path", e), n instanceof Im) {
      const r = Xt.fromString(e, ...t);
      return eE(r), new Sr(n, null, new Ze(r));
    }
    {
      if (!(n instanceof Sr || n instanceof Sa)) throw new He(_e.INVALID_ARGUMENT, "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");
      const r = n._path.child(Xt.fromString(e, ...t));
      return eE(r), new Sr(n.firestore, n instanceof Sa ? n.converter : null, new Ze(r));
    }
  }
  const sE = "AsyncQueue";
  class iE {
    constructor(e = Promise.resolve()) {
      this.Vu = [], this.mu = false, this.fu = [], this.gu = null, this.pu = false, this.yu = false, this.wu = [], this.a_ = new gT(this, "async_queue_retry"), this.Su = () => {
        const r = wv();
        r && Ue(sE, "Visibility state changed to " + r.visibilityState), this.a_.t_();
      }, this.bu = e;
      const t = wv();
      t && typeof t.addEventListener == "function" && t.addEventListener("visibilitychange", this.Su);
    }
    get isShuttingDown() {
      return this.mu;
    }
    enqueueAndForget(e) {
      this.enqueue(e);
    }
    enqueueAndForgetEvenWhileRestricted(e) {
      this.Du(), this.vu(e);
    }
    enterRestrictedMode(e) {
      if (!this.mu) {
        this.mu = true, this.yu = e || false;
        const t = wv();
        t && typeof t.removeEventListener == "function" && t.removeEventListener("visibilitychange", this.Su);
      }
    }
    enqueue(e) {
      if (this.Du(), this.mu) return new Promise(() => {
      });
      const t = new To();
      return this.vu(() => this.mu && this.yu ? Promise.resolve() : (e().then(t.resolve, t.reject), t.promise)).then(() => t.promise);
    }
    enqueueRetryable(e) {
      this.enqueueAndForget(() => (this.Vu.push(e), this.Cu()));
    }
    async Cu() {
      if (this.Vu.length !== 0) {
        try {
          await this.Vu[0](), this.Vu.shift(), this.a_.reset();
        } catch (e) {
          if (!Ru(e)) throw e;
          Ue(sE, "Operation failed with retryable error: " + e);
        }
        this.Vu.length > 0 && this.a_.Xo(() => this.Cu());
      }
    }
    vu(e) {
      const t = this.bu.then(() => (this.pu = true, e().catch((r) => {
        this.gu = r, this.pu = false;
        const i = function(c) {
          let f = c.message || "";
          return c.stack && (f = c.stack.includes(c.message) ? c.stack : c.message + `
` + c.stack), f;
        }(r);
        throw ko("INTERNAL UNHANDLED ERROR: ", i), r;
      }).then((r) => (this.pu = false, r))));
      return this.bu = t, t;
    }
    enqueueAfterDelay(e, t, r) {
      this.Du(), this.wu.indexOf(e) > -1 && (t = 0);
      const i = x1.createAndSchedule(this, e, t, r, (l) => this.Fu(l));
      return this.fu.push(i), i;
    }
    Du() {
      this.gu && st();
    }
    verifyOperationInProgress() {
    }
    async Mu() {
      let e;
      do
        e = this.bu, await e;
      while (e !== this.bu);
    }
    xu(e) {
      for (const t of this.fu) if (t.timerId === e) return true;
      return false;
    }
    Ou(e) {
      return this.Mu().then(() => {
        this.fu.sort((t, r) => t.targetTimeMs - r.targetTimeMs);
        for (const t of this.fu) if (t.skipDelay(), e !== "all" && t.timerId === e) break;
        return this.Mu();
      });
    }
    Nu(e) {
      this.wu.push(e);
    }
    Fu(e) {
      const t = this.fu.indexOf(e);
      this.fu.splice(t, 1);
    }
  }
  class Du extends Im {
    constructor(e, t, r, i) {
      super(e, t, r, i), this.type = "firestore", this._queue = new iE(), this._persistenceKey = (i == null ? void 0 : i.name) || "[DEFAULT]";
    }
    async _terminate() {
      if (this._firestoreClient) {
        const e = this._firestoreClient.terminate();
        this._queue = new iE(e), this._firestoreClient = void 0, await e;
      }
    }
  }
  function JO(n, e) {
    const t = typeof n == "object" ? n : By(), r = typeof n == "string" ? n : Ug, i = Hl(t, "firestore").getImmediate({
      identifier: r
    });
    if (!i._initialized) {
      const l = p4("firestore");
      l && XO(i, ...l);
    }
    return i;
  }
  function I1(n) {
    if (n._terminated) throw new He(_e.FAILED_PRECONDITION, "The client has already been terminated.");
    return n._firestoreClient || ZO(n), n._firestoreClient;
  }
  function ZO(n) {
    var e, t, r;
    const i = n._freezeSettings(), l = function(f, m, y, x) {
      return new bD(f, m, y, x.host, x.ssl, x.experimentalForceLongPolling, x.experimentalAutoDetectLongPolling, MT(x.experimentalLongPollingOptions), x.useFetchStreams);
    }(n._databaseId, ((e = n._app) === null || e === void 0 ? void 0 : e.options.appId) || "", n._persistenceKey, i);
    n._componentsProvider || !((t = i.localCache) === null || t === void 0) && t._offlineComponentProvider && (!((r = i.localCache) === null || r === void 0) && r._onlineComponentProvider) && (n._componentsProvider = {
      _offline: i.localCache._offlineComponentProvider,
      _online: i.localCache._onlineComponentProvider
    }), n._firestoreClient = new HO(n._authCredentials, n._appCheckCredentials, n._queue, l, n._componentsProvider && function(f) {
      const m = f == null ? void 0 : f._online.build();
      return {
        _offline: f == null ? void 0 : f._offline.build(m),
        _online: m
      };
    }(n._componentsProvider));
  }
  class xu {
    constructor(e) {
      this._byteString = e;
    }
    static fromBase64String(e) {
      try {
        return new xu(Zn.fromBase64String(e));
      } catch (t) {
        throw new He(_e.INVALID_ARGUMENT, "Failed to construct data from Base64 string: " + t);
      }
    }
    static fromUint8Array(e) {
      return new xu(Zn.fromUint8Array(e));
    }
    toBase64() {
      return this._byteString.toBase64();
    }
    toUint8Array() {
      return this._byteString.toUint8Array();
    }
    toString() {
      return "Bytes(base64: " + this.toBase64() + ")";
    }
    isEqual(e) {
      return this._byteString.isEqual(e._byteString);
    }
  }
  class km {
    constructor(...e) {
      for (let t = 0; t < e.length; ++t) if (e[t].length === 0) throw new He(_e.INVALID_ARGUMENT, "Invalid field name at argument $(i + 1). Field names must not be empty.");
      this._internalPath = new Jn(e);
    }
    isEqual(e) {
      return this._internalPath.isEqual(e._internalPath);
    }
  }
  class k1 {
    constructor(e) {
      this._methodName = e;
    }
  }
  class A1 {
    constructor(e, t) {
      if (!isFinite(e) || e < -90 || e > 90) throw new He(_e.INVALID_ARGUMENT, "Latitude must be a number between -90 and 90, but was: " + e);
      if (!isFinite(t) || t < -180 || t > 180) throw new He(_e.INVALID_ARGUMENT, "Longitude must be a number between -180 and 180, but was: " + t);
      this._lat = e, this._long = t;
    }
    get latitude() {
      return this._lat;
    }
    get longitude() {
      return this._long;
    }
    isEqual(e) {
      return this._lat === e._lat && this._long === e._long;
    }
    toJSON() {
      return {
        latitude: this._lat,
        longitude: this._long
      };
    }
    _compareTo(e) {
      return vt(this._lat, e._lat) || vt(this._long, e._long);
    }
  }
  class R1 {
    constructor(e) {
      this._values = (e || []).map((t) => t);
    }
    toArray() {
      return this._values.map((e) => e);
    }
    isEqual(e) {
      return function(r, i) {
        if (r.length !== i.length) return false;
        for (let l = 0; l < r.length; ++l) if (r[l] !== i[l]) return false;
        return true;
      }(this._values, e._values);
    }
  }
  const eL = /^__.*__$/;
  class tL {
    constructor(e, t, r) {
      this.data = e, this.fieldMask = t, this.fieldTransforms = r;
    }
    toMutation(e, t) {
      return this.fieldMask !== null ? new Ma(e, this.data, this.fieldMask, t, this.fieldTransforms) : new Uf(e, this.data, t, this.fieldTransforms);
    }
  }
  class FT {
    constructor(e, t, r) {
      this.data = e, this.fieldMask = t, this.fieldTransforms = r;
    }
    toMutation(e, t) {
      return new Ma(e, this.data, this.fieldMask, t, this.fieldTransforms);
    }
  }
  function zT(n) {
    switch (n) {
      case 0:
      case 2:
      case 1:
        return true;
      case 3:
      case 4:
        return false;
      default:
        throw st();
    }
  }
  class N1 {
    constructor(e, t, r, i, l, c) {
      this.settings = e, this.databaseId = t, this.serializer = r, this.ignoreUndefinedProperties = i, l === void 0 && this.Bu(), this.fieldTransforms = l || [], this.fieldMask = c || [];
    }
    get path() {
      return this.settings.path;
    }
    get Lu() {
      return this.settings.Lu;
    }
    ku(e) {
      return new N1(Object.assign(Object.assign({}, this.settings), e), this.databaseId, this.serializer, this.ignoreUndefinedProperties, this.fieldTransforms, this.fieldMask);
    }
    qu(e) {
      var t;
      const r = (t = this.path) === null || t === void 0 ? void 0 : t.child(e), i = this.ku({
        path: r,
        Qu: false
      });
      return i.$u(e), i;
    }
    Uu(e) {
      var t;
      const r = (t = this.path) === null || t === void 0 ? void 0 : t.child(e), i = this.ku({
        path: r,
        Qu: false
      });
      return i.Bu(), i;
    }
    Ku(e) {
      return this.ku({
        path: void 0,
        Qu: true
      });
    }
    Wu(e) {
      return Jg(e, this.settings.methodName, this.settings.Gu || false, this.path, this.settings.zu);
    }
    contains(e) {
      return this.fieldMask.find((t) => e.isPrefixOf(t)) !== void 0 || this.fieldTransforms.find((t) => e.isPrefixOf(t.field)) !== void 0;
    }
    Bu() {
      if (this.path) for (let e = 0; e < this.path.length; e++) this.$u(this.path.get(e));
    }
    $u(e) {
      if (e.length === 0) throw this.Wu("Document fields must not be empty");
      if (zT(this.Lu) && eL.test(e)) throw this.Wu('Document fields cannot begin and end with "__"');
    }
  }
  class nL {
    constructor(e, t, r) {
      this.databaseId = e, this.ignoreUndefinedProperties = t, this.serializer = r || bm(e);
    }
    ju(e, t, r, i = false) {
      return new N1({
        Lu: e,
        methodName: t,
        zu: r,
        path: Jn.emptyPath(),
        Qu: false,
        Gu: i
      }, this.databaseId, this.serializer, this.ignoreUndefinedProperties);
    }
  }
  function P1(n) {
    const e = n._freezeSettings(), t = bm(n._databaseId);
    return new nL(n._databaseId, !!e.ignoreUndefinedProperties, t);
  }
  function rL(n, e, t, r, i, l = {}) {
    const c = n.ju(l.merge || l.mergeFields ? 2 : 0, e, t, i);
    D1("Data must be an object, but it was:", c, r);
    const f = UT(r, c);
    let m, y;
    if (l.merge) m = new fs(c.fieldMask), y = c.fieldTransforms;
    else if (l.mergeFields) {
      const x = [];
      for (const C of l.mergeFields) {
        const S = my(e, C, t);
        if (!c.contains(S)) throw new He(_e.INVALID_ARGUMENT, `Field '${S}' is specified in your field mask but missing from your input data.`);
        WT(x, S) || x.push(S);
      }
      m = new fs(x), y = c.fieldTransforms.filter((C) => m.covers(C.field));
    } else m = null, y = c.fieldTransforms;
    return new tL(new Qr(f), m, y);
  }
  class Am extends k1 {
    _toFieldTransform(e) {
      if (e.Lu !== 2) throw e.Lu === 1 ? e.Wu(`${this._methodName}() can only appear at the top level of your update data`) : e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);
      return e.fieldMask.push(e.path), null;
    }
    isEqual(e) {
      return e instanceof Am;
    }
  }
  function sL(n, e, t, r) {
    const i = n.ju(1, e, t);
    D1("Data must be an object, but it was:", i, r);
    const l = [], c = Qr.empty();
    La(r, (m, y) => {
      const x = j1(e, m, t);
      y = xn(y);
      const C = i.Uu(x);
      if (y instanceof Am) l.push(x);
      else {
        const S = qf(y, C);
        S != null && (l.push(x), c.set(x, S));
      }
    });
    const f = new fs(l);
    return new FT(c, f, i.fieldTransforms);
  }
  function iL(n, e, t, r, i, l) {
    const c = n.ju(1, e, t), f = [
      my(e, r, t)
    ], m = [
      i
    ];
    if (l.length % 2 != 0) throw new He(_e.INVALID_ARGUMENT, `Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);
    for (let S = 0; S < l.length; S += 2) f.push(my(e, l[S])), m.push(l[S + 1]);
    const y = [], x = Qr.empty();
    for (let S = f.length - 1; S >= 0; --S) if (!WT(y, f[S])) {
      const N = f[S];
      let P = m[S];
      P = xn(P);
      const O = c.Uu(N);
      if (P instanceof Am) y.push(N);
      else {
        const L = qf(P, O);
        L != null && (y.push(N), x.set(N, L));
      }
    }
    const C = new fs(y);
    return new FT(x, C, c.fieldTransforms);
  }
  function oL(n, e, t, r = false) {
    return qf(t, n.ju(r ? 4 : 3, e));
  }
  function qf(n, e) {
    if (BT(n = xn(n))) return D1("Unsupported field value:", e, n), UT(n, e);
    if (n instanceof k1) return function(r, i) {
      if (!zT(i.Lu)) throw i.Wu(`${r._methodName}() can only be used with update() and set()`);
      if (!i.path) throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);
      const l = r._toFieldTransform(i);
      l && i.fieldTransforms.push(l);
    }(n, e), null;
    if (n === void 0 && e.ignoreUndefinedProperties) return null;
    if (e.path && e.fieldMask.push(e.path), n instanceof Array) {
      if (e.settings.Qu && e.Lu !== 4) throw e.Wu("Nested arrays are not supported");
      return function(r, i) {
        const l = [];
        let c = 0;
        for (const f of r) {
          let m = qf(f, i.Ku(c));
          m == null && (m = {
            nullValue: "NULL_VALUE"
          }), l.push(m), c++;
        }
        return {
          arrayValue: {
            values: l
          }
        };
      }(n, e);
    }
    return function(r, i) {
      if ((r = xn(r)) === null) return {
        nullValue: "NULL_VALUE"
      };
      if (typeof r == "number") return qD(i.serializer, r);
      if (typeof r == "boolean") return {
        booleanValue: r
      };
      if (typeof r == "string") return {
        stringValue: r
      };
      if (r instanceof Date) {
        const l = An.fromDate(r);
        return {
          timestampValue: Gg(i.serializer, l)
        };
      }
      if (r instanceof An) {
        const l = new An(r.seconds, 1e3 * Math.floor(r.nanoseconds / 1e3));
        return {
          timestampValue: Gg(i.serializer, l)
        };
      }
      if (r instanceof A1) return {
        geoPointValue: {
          latitude: r.latitude,
          longitude: r.longitude
        }
      };
      if (r instanceof xu) return {
        bytesValue: sT(i.serializer, r._byteString)
      };
      if (r instanceof Sr) {
        const l = i.databaseId, c = r.firestore._databaseId;
        if (!c.isEqual(l)) throw i.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);
        return {
          referenceValue: f1(r.firestore._databaseId || i.databaseId, r._key.path)
        };
      }
      if (r instanceof R1) return function(c, f) {
        return {
          mapValue: {
            fields: {
              [D2]: {
                stringValue: j2
              },
              [Bg]: {
                arrayValue: {
                  values: c.toArray().map((y) => {
                    if (typeof y != "number") throw f.Wu("VectorValues must only contain numeric values.");
                    return l1(f.serializer, y);
                  })
                }
              }
            }
          }
        };
      }(r, i);
      throw i.Wu(`Unsupported field value: ${Sm(r)}`);
    }(n, e);
  }
  function UT(n, e) {
    const t = {};
    return I2(n) ? e.path && e.path.length > 0 && e.fieldMask.push(e.path) : La(n, (r, i) => {
      const l = qf(i, e.qu(r));
      l != null && (t[r] = l);
    }), {
      mapValue: {
        fields: t
      }
    };
  }
  function BT(n) {
    return !(typeof n != "object" || n === null || n instanceof Array || n instanceof Date || n instanceof An || n instanceof A1 || n instanceof xu || n instanceof Sr || n instanceof k1 || n instanceof R1);
  }
  function D1(n, e, t) {
    if (!BT(t) || !function(i) {
      return typeof i == "object" && i !== null && (Object.getPrototypeOf(i) === Object.prototype || Object.getPrototypeOf(i) === null);
    }(t)) {
      const r = Sm(t);
      throw r === "an object" ? e.Wu(n + " a custom object") : e.Wu(n + " " + r);
    }
  }
  function my(n, e, t) {
    if ((e = xn(e)) instanceof km) return e._internalPath;
    if (typeof e == "string") return j1(n, e);
    throw Jg("Field path arguments must be of type string or ", n, false, void 0, t);
  }
  const aL = new RegExp("[~\\*/\\[\\]]");
  function j1(n, e, t) {
    if (e.search(aL) >= 0) throw Jg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`, n, false, void 0, t);
    try {
      return new km(...e.split("."))._internalPath;
    } catch {
      throw Jg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`, n, false, void 0, t);
    }
  }
  function Jg(n, e, t, r, i) {
    const l = r && !r.isEmpty(), c = i !== void 0;
    let f = `Function ${e}() called with invalid data`;
    t && (f += " (via `toFirestore()`)"), f += ". ";
    let m = "";
    return (l || c) && (m += " (found", l && (m += ` in field ${r}`), c && (m += ` in document ${i}`), m += ")"), new He(_e.INVALID_ARGUMENT, f + n + m);
  }
  function WT(n, e) {
    return n.some((t) => t.isEqual(e));
  }
  class HT {
    constructor(e, t, r, i, l) {
      this._firestore = e, this._userDataWriter = t, this._key = r, this._document = i, this._converter = l;
    }
    get id() {
      return this._key.path.lastSegment();
    }
    get ref() {
      return new Sr(this._firestore, this._converter, this._key);
    }
    exists() {
      return this._document !== null;
    }
    data() {
      if (this._document) {
        if (this._converter) {
          const e = new lL(this._firestore, this._userDataWriter, this._key, this._document, null);
          return this._converter.fromFirestore(e);
        }
        return this._userDataWriter.convertValue(this._document.data.value);
      }
    }
    get(e) {
      if (this._document) {
        const t = this._document.data.field(O1("DocumentSnapshot.get", e));
        if (t !== null) return this._userDataWriter.convertValue(t);
      }
    }
  }
  class lL extends HT {
    data() {
      return super.data();
    }
  }
  function O1(n, e) {
    return typeof e == "string" ? j1(n, e) : e instanceof km ? e._internalPath : e._delegate._internalPath;
  }
  function cL(n) {
    if (n.limitType === "L" && n.explicitOrderBy.length === 0) throw new He(_e.UNIMPLEMENTED, "limitToLast() queries require specifying at least one orderBy() clause");
  }
  class L1 {
  }
  class uL extends L1 {
  }
  function dL(n, e, ...t) {
    let r = [];
    e instanceof L1 && r.push(e), r = r.concat(t), function(l) {
      const c = l.filter((m) => m instanceof M1).length, f = l.filter((m) => m instanceof Rm).length;
      if (c > 1 || c > 0 && f > 0) throw new He(_e.INVALID_ARGUMENT, "InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.");
    }(r);
    for (const i of r) n = i._apply(n);
    return n;
  }
  class Rm extends uL {
    constructor(e, t, r) {
      super(), this._field = e, this._op = t, this._value = r, this.type = "where";
    }
    static _create(e, t, r) {
      return new Rm(e, t, r);
    }
    _apply(e) {
      const t = this._parse(e);
      return qT(e._query, t), new Pu(e.firestore, e.converter, iy(e._query, t));
    }
    _parse(e) {
      const t = P1(e.firestore);
      return function(l, c, f, m, y, x, C) {
        let S;
        if (y.isKeyField()) {
          if (x === "array-contains" || x === "array-contains-any") throw new He(_e.INVALID_ARGUMENT, `Invalid Query. You can't perform '${x}' queries on documentId().`);
          if (x === "in" || x === "not-in") {
            aE(C, x);
            const P = [];
            for (const O of C) P.push(oE(m, l, O));
            S = {
              arrayValue: {
                values: P
              }
            };
          } else S = oE(m, l, C);
        } else x !== "in" && x !== "not-in" && x !== "array-contains-any" || aE(C, x), S = oL(f, c, C, x === "in" || x === "not-in");
        return _n.create(y, x, S);
      }(e._query, "where", t, e.firestore._databaseId, this._field, this._op, this._value);
    }
  }
  function fL(n, e, t) {
    const r = e, i = O1("where", n);
    return Rm._create(i, r, t);
  }
  class M1 extends L1 {
    constructor(e, t) {
      super(), this.type = e, this._queryConstraints = t;
    }
    static _create(e, t) {
      return new M1(e, t);
    }
    _parse(e) {
      const t = this._queryConstraints.map((r) => r._parse(e)).filter((r) => r.getFilters().length > 0);
      return t.length === 1 ? t[0] : li.create(t, this._getOperator());
    }
    _apply(e) {
      const t = this._parse(e);
      return t.getFilters().length === 0 ? e : (function(i, l) {
        let c = i;
        const f = l.getFlattenedFilters();
        for (const m of f) qT(c, m), c = iy(c, m);
      }(e._query, t), new Pu(e.firestore, e.converter, iy(e._query, t)));
    }
    _getQueryConstraints() {
      return this._queryConstraints;
    }
    _getOperator() {
      return this.type === "and" ? "and" : "or";
    }
  }
  function oE(n, e, t) {
    if (typeof (t = xn(t)) == "string") {
      if (t === "") throw new He(_e.INVALID_ARGUMENT, "Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");
      if (!U2(e) && t.indexOf("/") !== -1) throw new He(_e.INVALID_ARGUMENT, `Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);
      const r = e.path.child(Xt.fromString(t));
      if (!Ze.isDocumentKey(r)) throw new He(_e.INVALID_ARGUMENT, `Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);
      return Ex(n, new Ze(r));
    }
    if (t instanceof Sr) return Ex(n, t._key);
    throw new He(_e.INVALID_ARGUMENT, `Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sm(t)}.`);
  }
  function aE(n, e) {
    if (!Array.isArray(n) || n.length === 0) throw new He(_e.INVALID_ARGUMENT, `Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);
  }
  function qT(n, e) {
    const t = function(i, l) {
      for (const c of i) for (const f of c.getFlattenedFilters()) if (l.indexOf(f.op) >= 0) return f.op;
      return null;
    }(n.filters, function(i) {
      switch (i) {
        case "!=":
          return [
            "!=",
            "not-in"
          ];
        case "array-contains-any":
        case "in":
          return [
            "not-in"
          ];
        case "not-in":
          return [
            "array-contains-any",
            "in",
            "not-in",
            "!="
          ];
        default:
          return [];
      }
    }(e.op));
    if (t !== null) throw t === e.op ? new He(_e.INVALID_ARGUMENT, `Invalid query. You cannot use more than one '${e.op.toString()}' filter.`) : new He(_e.INVALID_ARGUMENT, `Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`);
  }
  class hL {
    convertValue(e, t = "none") {
      switch (Na(e)) {
        case 0:
          return null;
        case 1:
          return e.booleanValue;
        case 2:
          return un(e.integerValue || e.doubleValue);
        case 3:
          return this.convertTimestamp(e.timestampValue);
        case 4:
          return this.convertServerTimestamp(e, t);
        case 5:
          return e.stringValue;
        case 6:
          return this.convertBytes(Ra(e.bytesValue));
        case 7:
          return this.convertReference(e.referenceValue);
        case 8:
          return this.convertGeoPoint(e.geoPointValue);
        case 9:
          return this.convertArray(e.arrayValue, t);
        case 11:
          return this.convertObject(e.mapValue, t);
        case 10:
          return this.convertVectorValue(e.mapValue);
        default:
          throw st();
      }
    }
    convertObject(e, t) {
      return this.convertObjectMap(e.fields, t);
    }
    convertObjectMap(e, t = "none") {
      const r = {};
      return La(e, (i, l) => {
        r[i] = this.convertValue(l, t);
      }), r;
    }
    convertVectorValue(e) {
      var t, r, i;
      const l = (i = (r = (t = e.fields) === null || t === void 0 ? void 0 : t[Bg].arrayValue) === null || r === void 0 ? void 0 : r.values) === null || i === void 0 ? void 0 : i.map((c) => un(c.doubleValue));
      return new R1(l);
    }
    convertGeoPoint(e) {
      return new A1(un(e.latitude), un(e.longitude));
    }
    convertArray(e, t) {
      return (e.values || []).map((r) => this.convertValue(r, t));
    }
    convertServerTimestamp(e, t) {
      switch (t) {
        case "previous":
          const r = vm(e);
          return r == null ? null : this.convertValue(r, t);
        case "estimate":
          return this.convertTimestamp(Af(e));
        default:
          return null;
      }
    }
    convertTimestamp(e) {
      const t = Aa(e);
      return new An(t.seconds, t.nanos);
    }
    convertDocumentKey(e, t) {
      const r = Xt.fromString(e);
      $t(uT(r));
      const i = new Rf(r.get(1), r.get(3)), l = new Ze(r.popFirst(5));
      return i.isEqual(t) || ko(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`), l;
    }
  }
  function pL(n, e, t) {
    let r;
    return r = n ? n.toFirestore(e) : e, r;
  }
  class hf {
    constructor(e, t) {
      this.hasPendingWrites = e, this.fromCache = t;
    }
    isEqual(e) {
      return this.hasPendingWrites === e.hasPendingWrites && this.fromCache === e.fromCache;
    }
  }
  class KT extends HT {
    constructor(e, t, r, i, l, c) {
      super(e, t, r, i, c), this._firestore = e, this._firestoreImpl = e, this.metadata = l;
    }
    exists() {
      return super.exists();
    }
    data(e = {}) {
      if (this._document) {
        if (this._converter) {
          const t = new Ig(this._firestore, this._userDataWriter, this._key, this._document, this.metadata, null);
          return this._converter.fromFirestore(t, e);
        }
        return this._userDataWriter.convertValue(this._document.data.value, e.serverTimestamps);
      }
    }
    get(e, t = {}) {
      if (this._document) {
        const r = this._document.data.field(O1("DocumentSnapshot.get", e));
        if (r !== null) return this._userDataWriter.convertValue(r, t.serverTimestamps);
      }
    }
  }
  class Ig extends KT {
    data(e = {}) {
      return super.data(e);
    }
  }
  class gL {
    constructor(e, t, r, i) {
      this._firestore = e, this._userDataWriter = t, this._snapshot = i, this.metadata = new hf(i.hasPendingWrites, i.fromCache), this.query = r;
    }
    get docs() {
      const e = [];
      return this.forEach((t) => e.push(t)), e;
    }
    get size() {
      return this._snapshot.docs.size;
    }
    get empty() {
      return this.size === 0;
    }
    forEach(e, t) {
      this._snapshot.docs.forEach((r) => {
        e.call(t, new Ig(this._firestore, this._userDataWriter, r.key, r, new hf(this._snapshot.mutatedKeys.has(r.key), this._snapshot.fromCache), this.query.converter));
      });
    }
    docChanges(e = {}) {
      const t = !!e.includeMetadataChanges;
      if (t && this._snapshot.excludesMetadataChanges) throw new He(_e.INVALID_ARGUMENT, "To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");
      return this._cachedChanges && this._cachedChangesIncludeMetadataChanges === t || (this._cachedChanges = function(i, l) {
        if (i._snapshot.oldDocs.isEmpty()) {
          let c = 0;
          return i._snapshot.docChanges.map((f) => {
            const m = new Ig(i._firestore, i._userDataWriter, f.doc.key, f.doc, new hf(i._snapshot.mutatedKeys.has(f.doc.key), i._snapshot.fromCache), i.query.converter);
            return f.doc, {
              type: "added",
              doc: m,
              oldIndex: -1,
              newIndex: c++
            };
          });
        }
        {
          let c = i._snapshot.oldDocs;
          return i._snapshot.docChanges.filter((f) => l || f.type !== 3).map((f) => {
            const m = new Ig(i._firestore, i._userDataWriter, f.doc.key, f.doc, new hf(i._snapshot.mutatedKeys.has(f.doc.key), i._snapshot.fromCache), i.query.converter);
            let y = -1, x = -1;
            return f.type !== 0 && (y = c.indexOf(f.doc.key), c = c.delete(f.doc.key)), f.type !== 1 && (c = c.add(f.doc), x = c.indexOf(f.doc.key)), {
              type: mL(f.type),
              doc: m,
              oldIndex: y,
              newIndex: x
            };
          });
        }
      }(this, t), this._cachedChangesIncludeMetadataChanges = t), this._cachedChanges;
    }
  }
  function mL(n) {
    switch (n) {
      case 0:
        return "added";
      case 2:
      case 3:
        return "modified";
      case 1:
        return "removed";
      default:
        return st();
    }
  }
  function GT(n) {
    n = Bi(n, Sr);
    const e = Bi(n.firestore, Du);
    return GO(I1(e), n._key).then((t) => wL(e, n, t));
  }
  class QT extends hL {
    constructor(e) {
      super(), this.firestore = e;
    }
    convertBytes(e) {
      return new xu(e);
    }
    convertReference(e) {
      const t = this.convertDocumentKey(e, this.firestore._databaseId);
      return new Sr(this.firestore, null, t);
    }
  }
  function vL(n) {
    n = Bi(n, Pu);
    const e = Bi(n.firestore, Du), t = I1(e), r = new QT(e);
    return cL(n._query), QO(t, n._query).then((i) => new gL(e, r, n, i));
  }
  function $1(n, e, t) {
    n = Bi(n, Sr);
    const r = Bi(n.firestore, Du), i = pL(n.converter, e);
    return V1(r, [
      rL(P1(r), "setDoc", n._key, i, n.converter !== null, t).toMutation(n._key, ii.none())
    ]);
  }
  function kg(n, e, t, ...r) {
    n = Bi(n, Sr);
    const i = Bi(n.firestore, Du), l = P1(i);
    let c;
    return c = typeof (e = xn(e)) == "string" || e instanceof km ? iL(l, "updateDoc", n._key, e, t, r) : sL(l, "updateDoc", n._key, e), V1(i, [
      c.toMutation(n._key, ii.exists(true))
    ]);
  }
  function yL(n) {
    return V1(Bi(n.firestore, Du), [
      new c1(n._key, ii.none())
    ]);
  }
  function V1(n, e) {
    return function(r, i) {
      const l = new To();
      return r.asyncQueue.enqueueAndForget(async () => LO(await KO(r), i, l)), l.promise;
    }(I1(n), e);
  }
  function wL(n, e, t) {
    const r = t.docs.get(e._key), i = new QT(n);
    return new KT(n, i, e._key, r, new hf(t.hasPendingWrites, t.fromCache), e.converter);
  }
  (function(e, t = true) {
    (function(i) {
      ku = i;
    })(Su), zi(new ai("firestore", (r, { instanceIdentifier: i, options: l }) => {
      const c = r.getProvider("app").getImmediate(), f = new Du(new oD(r.getProvider("auth-internal")), new cD(c, r.getProvider("app-check-internal")), function(y, x) {
        if (!Object.prototype.hasOwnProperty.apply(y.options, [
          "projectId"
        ])) throw new He(_e.INVALID_ARGUMENT, '"projectId" not provided in firebase.initializeApp.');
        return new Rf(y.options.projectId, x);
      }(c, i), c);
      return l = Object.assign({
        useFetchStreams: t
      }, l), f._setSettings(l), f;
    }, "PUBLIC").setMultipleInstances(true)), Ns(ux, dx, e), Ns(ux, dx, "esm2017");
  })();
  const YT = "@firebase/installations", F1 = "0.6.13";
  const XT = 1e4, JT = `w:${F1}`, ZT = "FIS_v2", _L = "https://firebaseinstallations.googleapis.com/v1", xL = 60 * 60 * 1e3, EL = "installations", bL = "Installations";
  const TL = {
    "missing-app-config-values": 'Missing App configuration value: "{$valueName}"',
    "not-registered": "Firebase Installation is not registered.",
    "installation-not-found": "Firebase Installation not found.",
    "request-failed": '{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',
    "app-offline": "Could not process request. Application offline.",
    "delete-pending-registration": "Can't delete installation while there is a pending registration request."
  }, zl = new Wl(EL, bL, TL);
  function eC(n) {
    return n instanceof ui && n.code.includes("request-failed");
  }
  function tC({ projectId: n }) {
    return `${_L}/projects/${n}/installations`;
  }
  function nC(n) {
    return {
      token: n.token,
      requestStatus: 2,
      expiresIn: SL(n.expiresIn),
      creationTime: Date.now()
    };
  }
  async function rC(n, e) {
    const r = (await e.json()).error;
    return zl.create("request-failed", {
      requestName: n,
      serverCode: r.code,
      serverMessage: r.message,
      serverStatus: r.status
    });
  }
  function sC({ apiKey: n }) {
    return new Headers({
      "Content-Type": "application/json",
      Accept: "application/json",
      "x-goog-api-key": n
    });
  }
  function CL(n, { refreshToken: e }) {
    const t = sC(n);
    return t.append("Authorization", IL(e)), t;
  }
  async function iC(n) {
    const e = await n();
    return e.status >= 500 && e.status < 600 ? n() : e;
  }
  function SL(n) {
    return Number(n.replace("s", "000"));
  }
  function IL(n) {
    return `${ZT} ${n}`;
  }
  async function kL({ appConfig: n, heartbeatServiceProvider: e }, { fid: t }) {
    const r = tC(n), i = sC(n), l = e.getImmediate({
      optional: true
    });
    if (l) {
      const y = await l.getHeartbeatsHeader();
      y && i.append("x-firebase-client", y);
    }
    const c = {
      fid: t,
      authVersion: ZT,
      appId: n.appId,
      sdkVersion: JT
    }, f = {
      method: "POST",
      headers: i,
      body: JSON.stringify(c)
    }, m = await iC(() => fetch(r, f));
    if (m.ok) {
      const y = await m.json();
      return {
        fid: y.fid || t,
        registrationStatus: 2,
        refreshToken: y.refreshToken,
        authToken: nC(y.authToken)
      };
    } else throw await rC("Create Installation", m);
  }
  function oC(n) {
    return new Promise((e) => {
      setTimeout(e, n);
    });
  }
  function AL(n) {
    return btoa(String.fromCharCode(...n)).replace(/\+/g, "-").replace(/\//g, "_");
  }
  const RL = /^[cdef][\w-]{21}$/, vy = "";
  function NL() {
    try {
      const n = new Uint8Array(17);
      (self.crypto || self.msCrypto).getRandomValues(n), n[0] = 112 + n[0] % 16;
      const t = PL(n);
      return RL.test(t) ? t : vy;
    } catch {
      return vy;
    }
  }
  function PL(n) {
    return AL(n).substr(0, 22);
  }
  function Nm(n) {
    return `${n.appName}!${n.appId}`;
  }
  const aC = /* @__PURE__ */ new Map();
  function lC(n, e) {
    const t = Nm(n);
    cC(t, e), DL(t, e);
  }
  function cC(n, e) {
    const t = aC.get(n);
    if (t) for (const r of t) r(e);
  }
  function DL(n, e) {
    const t = jL();
    t && t.postMessage({
      key: n,
      fid: e
    }), OL();
  }
  let jl = null;
  function jL() {
    return !jl && "BroadcastChannel" in self && (jl = new BroadcastChannel("[Firebase] FID Change"), jl.onmessage = (n) => {
      cC(n.data.key, n.data.fid);
    }), jl;
  }
  function OL() {
    aC.size === 0 && jl && (jl.close(), jl = null);
  }
  const LL = "firebase-installations-database", ML = 1, Ul = "firebase-installations-store";
  let xv = null;
  function z1() {
    return xv || (xv = Db(LL, ML, {
      upgrade: (n, e) => {
        switch (e) {
          case 0:
            n.createObjectStore(Ul);
        }
      }
    })), xv;
  }
  async function Zg(n, e) {
    const t = Nm(n), i = (await z1()).transaction(Ul, "readwrite"), l = i.objectStore(Ul), c = await l.get(t);
    return await l.put(e, t), await i.done, (!c || c.fid !== e.fid) && lC(n, e.fid), e;
  }
  async function uC(n) {
    const e = Nm(n), r = (await z1()).transaction(Ul, "readwrite");
    await r.objectStore(Ul).delete(e), await r.done;
  }
  async function Pm(n, e) {
    const t = Nm(n), i = (await z1()).transaction(Ul, "readwrite"), l = i.objectStore(Ul), c = await l.get(t), f = e(c);
    return f === void 0 ? await l.delete(t) : await l.put(f, t), await i.done, f && (!c || c.fid !== f.fid) && lC(n, f.fid), f;
  }
  async function U1(n) {
    let e;
    const t = await Pm(n.appConfig, (r) => {
      const i = $L(r), l = VL(n, i);
      return e = l.registrationPromise, l.installationEntry;
    });
    return t.fid === vy ? {
      installationEntry: await e
    } : {
      installationEntry: t,
      registrationPromise: e
    };
  }
  function $L(n) {
    const e = n || {
      fid: NL(),
      registrationStatus: 0
    };
    return dC(e);
  }
  function VL(n, e) {
    if (e.registrationStatus === 0) {
      if (!navigator.onLine) {
        const i = Promise.reject(zl.create("app-offline"));
        return {
          installationEntry: e,
          registrationPromise: i
        };
      }
      const t = {
        fid: e.fid,
        registrationStatus: 1,
        registrationTime: Date.now()
      }, r = FL(n, t);
      return {
        installationEntry: t,
        registrationPromise: r
      };
    } else return e.registrationStatus === 1 ? {
      installationEntry: e,
      registrationPromise: zL(n)
    } : {
      installationEntry: e
    };
  }
  async function FL(n, e) {
    try {
      const t = await kL(n, e);
      return Zg(n.appConfig, t);
    } catch (t) {
      throw eC(t) && t.customData.serverCode === 409 ? await uC(n.appConfig) : await Zg(n.appConfig, {
        fid: e.fid,
        registrationStatus: 0
      }), t;
    }
  }
  async function zL(n) {
    let e = await lE(n.appConfig);
    for (; e.registrationStatus === 1; ) await oC(100), e = await lE(n.appConfig);
    if (e.registrationStatus === 0) {
      const { installationEntry: t, registrationPromise: r } = await U1(n);
      return r || t;
    }
    return e;
  }
  function lE(n) {
    return Pm(n, (e) => {
      if (!e) throw zl.create("installation-not-found");
      return dC(e);
    });
  }
  function dC(n) {
    return UL(n) ? {
      fid: n.fid,
      registrationStatus: 0
    } : n;
  }
  function UL(n) {
    return n.registrationStatus === 1 && n.registrationTime + XT < Date.now();
  }
  async function BL({ appConfig: n, heartbeatServiceProvider: e }, t) {
    const r = WL(n, t), i = CL(n, t), l = e.getImmediate({
      optional: true
    });
    if (l) {
      const y = await l.getHeartbeatsHeader();
      y && i.append("x-firebase-client", y);
    }
    const c = {
      installation: {
        sdkVersion: JT,
        appId: n.appId
      }
    }, f = {
      method: "POST",
      headers: i,
      body: JSON.stringify(c)
    }, m = await iC(() => fetch(r, f));
    if (m.ok) {
      const y = await m.json();
      return nC(y);
    } else throw await rC("Generate Auth Token", m);
  }
  function WL(n, { fid: e }) {
    return `${tC(n)}/${e}/authTokens:generate`;
  }
  async function B1(n, e = false) {
    let t;
    const r = await Pm(n.appConfig, (l) => {
      if (!fC(l)) throw zl.create("not-registered");
      const c = l.authToken;
      if (!e && KL(c)) return l;
      if (c.requestStatus === 1) return t = HL(n, e), l;
      {
        if (!navigator.onLine) throw zl.create("app-offline");
        const f = QL(l);
        return t = qL(n, f), f;
      }
    });
    return t ? await t : r.authToken;
  }
  async function HL(n, e) {
    let t = await cE(n.appConfig);
    for (; t.authToken.requestStatus === 1; ) await oC(100), t = await cE(n.appConfig);
    const r = t.authToken;
    return r.requestStatus === 0 ? B1(n, e) : r;
  }
  function cE(n) {
    return Pm(n, (e) => {
      if (!fC(e)) throw zl.create("not-registered");
      const t = e.authToken;
      return YL(t) ? Object.assign(Object.assign({}, e), {
        authToken: {
          requestStatus: 0
        }
      }) : e;
    });
  }
  async function qL(n, e) {
    try {
      const t = await BL(n, e), r = Object.assign(Object.assign({}, e), {
        authToken: t
      });
      return await Zg(n.appConfig, r), t;
    } catch (t) {
      if (eC(t) && (t.customData.serverCode === 401 || t.customData.serverCode === 404)) await uC(n.appConfig);
      else {
        const r = Object.assign(Object.assign({}, e), {
          authToken: {
            requestStatus: 0
          }
        });
        await Zg(n.appConfig, r);
      }
      throw t;
    }
  }
  function fC(n) {
    return n !== void 0 && n.registrationStatus === 2;
  }
  function KL(n) {
    return n.requestStatus === 2 && !GL(n);
  }
  function GL(n) {
    const e = Date.now();
    return e < n.creationTime || n.creationTime + n.expiresIn < e + xL;
  }
  function QL(n) {
    const e = {
      requestStatus: 1,
      requestTime: Date.now()
    };
    return Object.assign(Object.assign({}, n), {
      authToken: e
    });
  }
  function YL(n) {
    return n.requestStatus === 1 && n.requestTime + XT < Date.now();
  }
  async function XL(n) {
    const e = n, { installationEntry: t, registrationPromise: r } = await U1(e);
    return r ? r.catch(console.error) : B1(e).catch(console.error), t.fid;
  }
  async function JL(n, e = false) {
    const t = n;
    return await ZL(t), (await B1(t, e)).token;
  }
  async function ZL(n) {
    const { registrationPromise: e } = await U1(n);
    e && await e;
  }
  function eM(n) {
    if (!n || !n.options) throw Ev("App Configuration");
    if (!n.name) throw Ev("App Name");
    const e = [
      "projectId",
      "apiKey",
      "appId"
    ];
    for (const t of e) if (!n.options[t]) throw Ev(t);
    return {
      appName: n.name,
      projectId: n.options.projectId,
      apiKey: n.options.apiKey,
      appId: n.options.appId
    };
  }
  function Ev(n) {
    return zl.create("missing-app-config-values", {
      valueName: n
    });
  }
  const hC = "installations", tM = "installations-internal", nM = (n) => {
    const e = n.getProvider("app").getImmediate(), t = eM(e), r = Hl(e, "heartbeat");
    return {
      app: e,
      appConfig: t,
      heartbeatServiceProvider: r,
      _delete: () => Promise.resolve()
    };
  }, rM = (n) => {
    const e = n.getProvider("app").getImmediate(), t = Hl(e, hC).getImmediate();
    return {
      getId: () => XL(t),
      getToken: (i) => JL(t, i)
    };
  };
  function sM() {
    zi(new ai(hC, nM, "PUBLIC")), zi(new ai(tM, rM, "PRIVATE"));
  }
  sM();
  Ns(YT, F1);
  Ns(YT, F1, "esm2017");
  const em = "analytics", iM = "firebase_id", oM = "origin", aM = 60 * 1e3, lM = "https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig", W1 = "https://www.googletagmanager.com/gtag/js";
  const Yr = new dm("@firebase/analytics");
  const cM = {
    "already-exists": "A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",
    "already-initialized": "initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.",
    "already-initialized-settings": "Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",
    "interop-component-reg-failed": "Firebase Analytics Interop Component failed to instantiate: {$reason}",
    "invalid-analytics-context": "Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",
    "indexeddb-unavailable": "IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",
    "fetch-throttle": "The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",
    "config-fetch-failed": "Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",
    "no-api-key": 'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',
    "no-app-id": 'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',
    "no-client-id": 'The "client_id" field is empty.',
    "invalid-gtag-resource": "Trusted Types detected an invalid gtag resource: {$gtagURL}."
  }, hs = new Wl("analytics", "Analytics", cM);
  function uM(n) {
    if (!n.startsWith(W1)) {
      const e = hs.create("invalid-gtag-resource", {
        gtagURL: n
      });
      return Yr.warn(e.message), "";
    }
    return n;
  }
  function pC(n) {
    return Promise.all(n.map((e) => e.catch((t) => t)));
  }
  function dM(n, e) {
    let t;
    return window.trustedTypes && (t = window.trustedTypes.createPolicy(n, e)), t;
  }
  function fM(n, e) {
    const t = dM("firebase-js-sdk-policy", {
      createScriptURL: uM
    }), r = document.createElement("script"), i = `${W1}?l=${n}&id=${e}`;
    r.src = t ? t == null ? void 0 : t.createScriptURL(i) : i, r.async = true, document.head.appendChild(r);
  }
  function hM(n) {
    let e = [];
    return Array.isArray(window[n]) ? e = window[n] : window[n] = e, e;
  }
  async function pM(n, e, t, r, i, l) {
    const c = r[i];
    try {
      if (c) await e[c];
      else {
        const m = (await pC(t)).find((y) => y.measurementId === i);
        m && await e[m.appId];
      }
    } catch (f) {
      Yr.error(f);
    }
    n("config", i, l);
  }
  async function gM(n, e, t, r, i) {
    try {
      let l = [];
      if (i && i.send_to) {
        let c = i.send_to;
        Array.isArray(c) || (c = [
          c
        ]);
        const f = await pC(t);
        for (const m of c) {
          const y = f.find((C) => C.measurementId === m), x = y && e[y.appId];
          if (x) l.push(x);
          else {
            l = [];
            break;
          }
        }
      }
      l.length === 0 && (l = Object.values(e)), await Promise.all(l), n("event", r, i || {});
    } catch (l) {
      Yr.error(l);
    }
  }
  function mM(n, e, t, r) {
    async function i(l, ...c) {
      try {
        if (l === "event") {
          const [f, m] = c;
          await gM(n, e, t, f, m);
        } else if (l === "config") {
          const [f, m] = c;
          await pM(n, e, t, r, f, m);
        } else if (l === "consent") {
          const [f, m] = c;
          n("consent", f, m);
        } else if (l === "get") {
          const [f, m, y] = c;
          n("get", f, m, y);
        } else if (l === "set") {
          const [f] = c;
          n("set", f);
        } else n(l, ...c);
      } catch (f) {
        Yr.error(f);
      }
    }
    return i;
  }
  function vM(n, e, t, r, i) {
    let l = function(...c) {
      window[r].push(arguments);
    };
    return window[i] && typeof window[i] == "function" && (l = window[i]), window[i] = mM(l, n, e, t), {
      gtagCore: l,
      wrappedGtag: window[i]
    };
  }
  function yM(n) {
    const e = window.document.getElementsByTagName("script");
    for (const t of Object.values(e)) if (t.src && t.src.includes(W1) && t.src.includes(n)) return t;
    return null;
  }
  const wM = 30, _M = 1e3;
  class xM {
    constructor(e = {}, t = _M) {
      this.throttleMetadata = e, this.intervalMillis = t;
    }
    getThrottleMetadata(e) {
      return this.throttleMetadata[e];
    }
    setThrottleMetadata(e, t) {
      this.throttleMetadata[e] = t;
    }
    deleteThrottleMetadata(e) {
      delete this.throttleMetadata[e];
    }
  }
  const gC = new xM();
  function EM(n) {
    return new Headers({
      Accept: "application/json",
      "x-goog-api-key": n
    });
  }
  async function bM(n) {
    var e;
    const { appId: t, apiKey: r } = n, i = {
      method: "GET",
      headers: EM(r)
    }, l = lM.replace("{app-id}", t), c = await fetch(l, i);
    if (c.status !== 200 && c.status !== 304) {
      let f = "";
      try {
        const m = await c.json();
        !((e = m.error) === null || e === void 0) && e.message && (f = m.error.message);
      } catch {
      }
      throw hs.create("config-fetch-failed", {
        httpStatus: c.status,
        responseMessage: f
      });
    }
    return c.json();
  }
  async function TM(n, e = gC, t) {
    const { appId: r, apiKey: i, measurementId: l } = n.options;
    if (!r) throw hs.create("no-app-id");
    if (!i) {
      if (l) return {
        measurementId: l,
        appId: r
      };
      throw hs.create("no-api-key");
    }
    const c = e.getThrottleMetadata(r) || {
      backoffCount: 0,
      throttleEndTimeMillis: Date.now()
    }, f = new IM();
    return setTimeout(async () => {
      f.abort();
    }, aM), mC({
      appId: r,
      apiKey: i,
      measurementId: l
    }, c, f, e);
  }
  async function mC(n, { throttleEndTimeMillis: e, backoffCount: t }, r, i = gC) {
    var l;
    const { appId: c, measurementId: f } = n;
    try {
      await CM(r, e);
    } catch (m) {
      if (f) return Yr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m == null ? void 0 : m.message}]`), {
        appId: c,
        measurementId: f
      };
      throw m;
    }
    try {
      const m = await bM(n);
      return i.deleteThrottleMetadata(c), m;
    } catch (m) {
      const y = m;
      if (!SM(y)) {
        if (i.deleteThrottleMetadata(c), f) return Yr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y == null ? void 0 : y.message}]`), {
          appId: c,
          measurementId: f
        };
        throw m;
      }
      const x = Number((l = y == null ? void 0 : y.customData) === null || l === void 0 ? void 0 : l.httpStatus) === 503 ? O_(t, i.intervalMillis, wM) : O_(t, i.intervalMillis), C = {
        throttleEndTimeMillis: Date.now() + x,
        backoffCount: t + 1
      };
      return i.setThrottleMetadata(c, C), Yr.debug(`Calling attemptFetch again in ${x} millis`), mC(n, C, r, i);
    }
  }
  function CM(n, e) {
    return new Promise((t, r) => {
      const i = Math.max(e - Date.now(), 0), l = setTimeout(t, i);
      n.addEventListener(() => {
        clearTimeout(l), r(hs.create("fetch-throttle", {
          throttleEndTimeMillis: e
        }));
      });
    });
  }
  function SM(n) {
    if (!(n instanceof ui) || !n.customData) return false;
    const e = Number(n.customData.httpStatus);
    return e === 429 || e === 500 || e === 503 || e === 504;
  }
  class IM {
    constructor() {
      this.listeners = [];
    }
    addEventListener(e) {
      this.listeners.push(e);
    }
    abort() {
      this.listeners.forEach((e) => e());
    }
  }
  async function kM(n, e, t, r, i) {
    if (i && i.global) {
      n("event", t, r);
      return;
    } else {
      const l = await e, c = Object.assign(Object.assign({}, r), {
        send_to: l
      });
      n("event", t, c);
    }
  }
  async function AM() {
    if (Ab()) try {
      await Rb();
    } catch (n) {
      return Yr.warn(hs.create("indexeddb-unavailable", {
        errorInfo: n == null ? void 0 : n.toString()
      }).message), false;
    }
    else return Yr.warn(hs.create("indexeddb-unavailable", {
      errorInfo: "IndexedDB is not available in this environment."
    }).message), false;
    return true;
  }
  async function RM(n, e, t, r, i, l, c) {
    var f;
    const m = TM(n);
    m.then((N) => {
      t[N.measurementId] = N.appId, n.options.measurementId && N.measurementId !== n.options.measurementId && Yr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`);
    }).catch((N) => Yr.error(N)), e.push(m);
    const y = AM().then((N) => {
      if (N) return r.getId();
    }), [x, C] = await Promise.all([
      m,
      y
    ]);
    yM(l) || fM(l, x.measurementId), i("js", /* @__PURE__ */ new Date());
    const S = (f = c == null ? void 0 : c.config) !== null && f !== void 0 ? f : {};
    return S[oM] = "firebase", S.update = true, C != null && (S[iM] = C), i("config", x.measurementId, S), x.measurementId;
  }
  class NM {
    constructor(e) {
      this.app = e;
    }
    _delete() {
      return delete xf[this.app.options.appId], Promise.resolve();
    }
  }
  let xf = {}, uE = [];
  const dE = {};
  let bv = "dataLayer", PM = "gtag", fE, vC, hE = false;
  function DM() {
    const n = [];
    if (kb() && n.push("This is a browser extension environment."), b4() || n.push("Cookies are not available."), n.length > 0) {
      const e = n.map((r, i) => `(${i + 1}) ${r}`).join(" "), t = hs.create("invalid-analytics-context", {
        errorInfo: e
      });
      Yr.warn(t.message);
    }
  }
  function jM(n, e, t) {
    DM();
    const r = n.options.appId;
    if (!r) throw hs.create("no-app-id");
    if (!n.options.apiKey) if (n.options.measurementId) Yr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);
    else throw hs.create("no-api-key");
    if (xf[r] != null) throw hs.create("already-exists", {
      id: r
    });
    if (!hE) {
      hM(bv);
      const { wrappedGtag: l, gtagCore: c } = vM(xf, uE, dE, bv, PM);
      vC = l, fE = c, hE = true;
    }
    return xf[r] = RM(n, uE, dE, e, fE, bv, t), new NM(n);
  }
  function OM(n = By()) {
    n = xn(n);
    const e = Hl(n, em);
    return e.isInitialized() ? e.getImmediate() : LM(n);
  }
  function LM(n, e = {}) {
    const t = Hl(n, em);
    if (t.isInitialized()) {
      const i = t.getImmediate();
      if (Ia(e, t.getOptions())) return i;
      throw hs.create("already-initialized");
    }
    return t.initialize({
      options: e
    });
  }
  function MM(n, e, t, r) {
    n = xn(n), kM(vC, xf[n.app.options.appId], e, t, r).catch((i) => Yr.error(i));
  }
  const pE = "@firebase/analytics", gE = "0.10.12";
  function $M() {
    zi(new ai(em, (e, { options: t }) => {
      const r = e.getProvider("app").getImmediate(), i = e.getProvider("installations-internal").getImmediate();
      return jM(r, i, t);
    }, "PUBLIC")), zi(new ai("analytics-internal", n, "PRIVATE")), Ns(pE, gE), Ns(pE, gE, "esm2017");
    function n(e) {
      try {
        const t = e.getProvider(em).getImmediate();
        return {
          logEvent: (r, i, l) => MM(t, r, i, l)
        };
      } catch (t) {
        throw hs.create("interop-component-reg-failed", {
          reason: t
        });
      }
    }
  }
  $M();
  var VM = "firebase", FM = "11.6.0";
  Ns(VM, FM, "app");
  const zM = {
    apiKey: "AIzaSyBDdAvwL6tHB3BKYbY9rb2GsTH8yIQZtvg",
    authDomain: "chessnotes-a9726.firebaseapp.com",
    projectId: "chessnotes-a9726",
    storageBucket: "chessnotes-a9726.firebasestorage.app",
    messagingSenderId: "881905560245",
    appId: "1:881905560245:web:c89505509f701637522cfc",
    measurementId: "G-HK33PNXNPR"
  }, H1 = jb(zM);
  OM(H1);
  const vo = nD(H1), yC = new yo(), Mi = JO(H1), wC = R.createContext(), Dm = () => R.useContext(wC), UM = ({ children: n }) => {
    const [e, t] = R.useState(null), [r, i] = R.useState(true), [l, c] = R.useState(null), [f, m] = R.useState([]), [y, x] = R.useState(true), C = async (L) => {
      if (!L) return null;
      try {
        const H = mo(Mi, "users", L.uid), W = await GT(H);
        if (W.exists()) return {
          uid: L.uid,
          email: L.email,
          createdAt: W.data().createdAt || (/* @__PURE__ */ new Date()).toISOString()
        };
        {
          const T = {
            uid: L.uid,
            email: L.email,
            createdAt: (/* @__PURE__ */ new Date()).toISOString()
          };
          return await $1(H, T), T;
        }
      } catch (H) {
        return console.error("Errore nel recupero dei dati utente:", H), null;
      }
    }, S = async (L) => {
      if (!L) return [];
      try {
        const H = S1(Mi, "chessRepertoires"), W = dL(H, fL("uid", "==", L)), T = await vL(W), Y = [];
        return T.forEach((u) => {
          const ge = u.data();
          Y.push({
            id: u.id,
            title: ge.title || "",
            canvasData: ge.canvasData || "",
            createdAt: ge.createdAt || null,
            updatedAt: ge.updatedAt || null,
            uid: ge.uid
          });
        }), Y.sort((u, ge) => {
          const j = u.updatedAt ? new Date(u.updatedAt) : /* @__PURE__ */ new Date(0);
          return (ge.updatedAt ? new Date(ge.updatedAt) : /* @__PURE__ */ new Date(0)) - j;
        });
      } catch (H) {
        return console.error("Errore nel recupero dei repertori:", H), [];
      }
    }, N = (L) => {
    };
    R.useEffect(() => {
      x(true);
      const L = q5(vo, async (H) => {
        if (t(H), H) try {
          x(true);
          const [W, T] = await Promise.all([
            C(H),
            S(H.uid)
          ]);
          c(W), m(T), N(H.uid), console.log("Dati utente caricati con successo:", W ? "s\xEC" : "no"), console.log("Repertori trovati:", T.length);
        } catch (W) {
          console.error("Errore durante il caricamento dei dati:", W);
        } finally {
          x(false), i(false);
        }
        else c(null), m([]), x(false), i(false);
      });
      return () => L();
    }, []);
    const O = {
      currentUser: e,
      userData: l,
      userRepertoires: f,
      isLoadingUserData: y,
      loading: r,
      refreshRepertoires: async () => {
        if (e) {
          x(true);
          try {
            const L = await S(e.uid);
            m(L);
          } catch (L) {
            console.error("Errore nell'aggiornamento dei repertori:", L);
          } finally {
            x(false);
          }
        }
      }
    };
    return h.jsx(wC.Provider, {
      value: O,
      children: !r && n
    });
  };
  class BM {
    constructor() {
      this.pendingChanges = false, this.lastSaveTime = Date.now(), this.saveInterval = 6e4, this.minTimeBetweenSaves = 3e4, this.timer = null, this.currentlyFlushing = false, this.canvasData = null, this.userId = null, this.repertoireId = null, this.isSavingEnabled = true;
    }
    initialize(e, t, r) {
      return this.userId = e, this.repertoireId = t, this.canvasData = r, this.startSaveTimer(), this.registerPageExitHandlers(), console.log(`DatabaseSaver inizializzato con repertorio ID: ${t}`), this;
    }
    setCanvasData(e) {
      this.canvasData = e, this.pendingChanges = true;
    }
    startSaveTimer() {
      this.timer && clearInterval(this.timer), this.timer = setInterval(() => this.checkAndSave(), this.saveInterval);
    }
    async checkAndSave() {
      !this.isSavingEnabled || !this.pendingChanges || Date.now() - this.lastSaveTime < this.minTimeBetweenSaves || await this.flushToDatabase();
    }
    async forceSave() {
      return !this.userId || !this.repertoireId || !this.canvasData ? (console.warn("Impossibile salvare: dati insufficienti", {
        userId: !!this.userId,
        repertoireId: this.repertoireId,
        hasCanvasData: !!this.canvasData
      }), false) : this.flushToDatabase();
    }
    async flushToDatabase() {
      if (this.currentlyFlushing) return false;
      try {
        this.currentlyFlushing = true;
        const e = mo(Mi, "chessRepertoires", this.repertoireId), t = {
          canvasData: JSON.stringify(this.canvasData),
          updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
          uid: this.userId
        };
        return await kg(e, t), this.lastSaveTime = Date.now(), this.pendingChanges = false, console.log("Salvataggio nel database completato", (/* @__PURE__ */ new Date()).toLocaleTimeString()), true;
      } catch (e) {
        return console.error("Errore durante il salvataggio nel database:", e), false;
      } finally {
        this.currentlyFlushing = false;
      }
    }
    async createNewRepertoire(e) {
      if (!this.userId || !this.canvasData) return console.warn("Impossibile creare repertorio: dati insufficienti"), null;
      try {
        const t = mo(S1(Mi, "chessRepertoires")), r = {
          title: e || "Nuovo Repertorio",
          canvasData: JSON.stringify(this.canvasData),
          createdAt: (/* @__PURE__ */ new Date()).toISOString(),
          updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
          uid: this.userId
        };
        return await $1(t, r), this.repertoireId = t.id, this.lastSaveTime = Date.now(), this.pendingChanges = false, t.id;
      } catch (t) {
        return console.error("Errore nella creazione del repertorio:", t), null;
      }
    }
    changeActiveRepertoire(e, t) {
      this.pendingChanges && this.repertoireId && this.forceSave(), this.repertoireId = e, this.canvasData = t, this.pendingChanges = false;
    }
    registerPageExitHandlers() {
      window.addEventListener("beforeunload", this.handleBeforeUnload.bind(this)), window.addEventListener("visibilitychange", this.handleVisibilityChange.bind(this));
    }
    removePageExitHandlers() {
      window.removeEventListener("beforeunload", this.handleBeforeUnload.bind(this)), window.removeEventListener("visibilitychange", this.handleVisibilityChange.bind(this));
    }
    handleBeforeUnload(e) {
      if (this.pendingChanges) {
        this.forceSave();
        const t = "Hai modifiche non salvate. Sei sicuro di voler lasciare la pagina?";
        return e.returnValue = t, t;
      }
    }
    handleVisibilityChange() {
      document.visibilityState === "hidden" && this.pendingChanges && this.forceSave();
    }
    cleanup() {
      this.timer && clearInterval(this.timer), this.removePageExitHandlers();
    }
  }
  const kn = new BM(), yy = ({ onLoadRepertoire: n, canvasData: e, onCreateNew: t, activeRepertoireId: r, setActiveRepertoireId: i }) => {
    const [l, c] = R.useState(false), { currentUser: f, userRepertoires: m, isLoadingUserData: y, refreshRepertoires: x } = Dm(), [C, S] = R.useState(""), [N, P] = R.useState(null), O = R.useRef(null), L = R.useRef(null);
    R.useEffect(() => {
      const j = (M) => {
        O.current && L.current && !O.current.contains(M.target) && !L.current.contains(M.target) && c(false);
      };
      return document.addEventListener("mousedown", j), () => {
        document.removeEventListener("mousedown", j);
      };
    }, []);
    const H = () => {
      c(!l);
    }, W = async (j) => {
      if (!(j.id === r && !window.confirm("Ricaricare questa apertura?"))) {
        P(j.id);
        try {
          if (r && r !== j.id && e && (kn == null ? void 0 : kn.pendingChanges) && window.confirm("Hai modifiche non salvate nel repertorio corrente. Vuoi salvarle prima di passare a un altro repertorio?")) if (kn) await kn.forceSave();
          else {
            const F = mo(Mi, "chessRepertoires", r);
            await kg(F, {
              canvasData: JSON.stringify(e),
              updatedAt: (/* @__PURE__ */ new Date()).toISOString()
            });
          }
          const M = mo(Mi, "chessRepertoires", j.id), V = await GT(M);
          if (!V.exists()) throw new Error("Il repertorio richiesto non esiste pi\xF9 nel database");
          const B = V.data();
          let q;
          typeof B.canvasData == "string" ? q = JSON.parse(B.canvasData) : q = B.canvasData, n(q, B.title), i(j.id), kn && kn.changeActiveRepertoire(j.id, q), c(false);
        } catch (M) {
          console.error("Errore nel caricamento del repertorio:", M), alert(`Errore nel caricamento di "${j.title}": ${M.message}`);
        } finally {
          P(null);
        }
      }
    }, T = async (j) => {
      if (f) {
        P(j);
        try {
          const M = mo(Mi, "chessRepertoires", j);
          await yL(M), await x(), j === r && (i(null), kn && (kn.repertoireId = null, kn.canvasData = null, kn.pendingChanges = false), t({
            nodes: [],
            connections: [],
            annotations: []
          }));
        } catch (M) {
          console.error("Errore nella cancellazione del repertorio:", M), alert(`Errore nella cancellazione: ${M.message}`);
        } finally {
          P(null);
        }
      }
    }, Y = async (j, M) => {
      if (f) {
        P(j);
        try {
          const V = mo(Mi, "chessRepertoires", j);
          await kg(V, {
            title: M,
            updatedAt: (/* @__PURE__ */ new Date()).toISOString()
          }), await x();
        } catch (V) {
          console.error("Errore nel rinominare il repertorio:", V), alert(`Errore nel rinominare: ${V.message}`);
        } finally {
          P(null);
        }
      }
    }, u = async () => {
      if (e && f && r && (kn == null ? void 0 : kn.pendingChanges) && window.confirm("Vuoi salvare le modifiche correnti prima di creare un nuovo repertorio?")) {
        P("creating");
        try {
          if (kn) await kn.forceSave();
          else {
            const M = mo(Mi, "chessRepertoires", r);
            await kg(M, {
              canvasData: JSON.stringify(e),
              updatedAt: (/* @__PURE__ */ new Date()).toISOString()
            });
          }
        } catch (M) {
          console.error("Errore nel salvataggio:", M), alert(`Errore nel salvataggio: ${M.message}`), P(null);
          return;
        }
      }
      try {
        const j = window.prompt("Nome della nuova apertura:", "Nuova Apertura");
        if (!j) {
          P(null);
          return;
        }
        P("creating");
        const M = {
          nodes: [],
          connections: [],
          annotations: []
        };
        if (f) {
          const V = mo(S1(Mi, "chessRepertoires")), B = {
            title: j,
            canvasData: JSON.stringify(M),
            createdAt: (/* @__PURE__ */ new Date()).toISOString(),
            updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
            uid: f.uid
          };
          await $1(V, B);
          const q = V.id;
          i(q), kn && kn.initialize(f.uid, q, M), x(), alert(`Apertura "${j}" creata con successo!`);
        }
        t(M), c(false);
      } catch (j) {
        console.error("Errore nella creazione del nuovo repertorio:", j), alert(`Errore: ${j.message}`);
      } finally {
        P(null);
      }
    }, ge = m ? m.filter((j) => j.title && j.title.toLowerCase().includes(C.toLowerCase())) : [];
    return h.jsxs("div", {
      className: "relative",
      children: [
        h.jsxs("button", {
          ref: L,
          onClick: H,
          className: `w-full bg-gray-800 hover:bg-gray-700 transition-colors text-white mb-3 py-2 px-4 rounded-md flex items-center justify-between ${l ? "rounded-b-none border-b border-gray-700" : ""}`,
          children: [
            h.jsxs("div", {
              className: "flex items-center",
              children: [
                h.jsx("svg", {
                  xmlns: "http://www.w3.org/2000/svg",
                  className: "h-5 w-5 mr-2",
                  fill: "none",
                  viewBox: "0 0 24 24",
                  stroke: "currentColor",
                  children: h.jsx("path", {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                  })
                }),
                "Le mie aperture"
              ]
            }),
            h.jsx("svg", {
              className: `w-5 h-5 transition-transform ${l ? "transform rotate-180" : ""}`,
              fill: "none",
              stroke: "currentColor",
              viewBox: "0 0 24 24",
              children: h.jsx("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M19 9l-7 7-7-7"
              })
            })
          ]
        }),
        l && h.jsxs("div", {
          ref: O,
          className: "absolute left-0 right-0 bg-gray-800 border border-gray-700 border-t-0 rounded-b-md shadow-lg z-30 max-h-[70vh] overflow-auto p-4 pt-2",
          children: [
            h.jsxs("div", {
              className: "flex items-center justify-between mb-4",
              children: [
                h.jsxs("div", {
                  className: "relative flex-grow mr-2",
                  children: [
                    h.jsx("input", {
                      type: "text",
                      placeholder: "Cerca aperture...",
                      value: C,
                      onChange: (j) => S(j.target.value),
                      className: "w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-blue-500"
                    }),
                    h.jsx("svg", {
                      xmlns: "http://www.w3.org/2000/svg",
                      className: "h-4 w-4 absolute right-3 top-2.5 text-gray-400",
                      fill: "none",
                      viewBox: "0 0 24 24",
                      stroke: "currentColor",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                      })
                    })
                  ]
                }),
                h.jsx("button", {
                  onClick: u,
                  disabled: N === "creating",
                  className: "p-1.5 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-full flex-shrink-0 transition-colors border border-gray-600",
                  title: "Nuova apertura",
                  children: N === "creating" ? h.jsxs("svg", {
                    className: "animate-spin h-5 w-5",
                    xmlns: "http://www.w3.org/2000/svg",
                    fill: "none",
                    viewBox: "0 0 24 24",
                    children: [
                      h.jsx("circle", {
                        className: "opacity-25",
                        cx: "12",
                        cy: "12",
                        r: "10",
                        stroke: "currentColor",
                        strokeWidth: "4"
                      }),
                      h.jsx("path", {
                        className: "opacity-75",
                        fill: "currentColor",
                        d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                      })
                    ]
                  }) : h.jsx("svg", {
                    xmlns: "http://www.w3.org/2000/svg",
                    className: "h-5 w-5",
                    fill: "none",
                    viewBox: "0 0 24 24",
                    stroke: "currentColor",
                    children: h.jsx("path", {
                      strokeLinecap: "round",
                      strokeLinejoin: "round",
                      strokeWidth: 2,
                      d: "M12 4v16m8-8H4"
                    })
                  })
                })
              ]
            }),
            y && h.jsx("div", {
              className: "flex justify-center py-4",
              children: h.jsxs("svg", {
                className: "animate-spin h-6 w-6 text-blue-500",
                xmlns: "http://www.w3.org/2000/svg",
                fill: "none",
                viewBox: "0 0 24 24",
                children: [
                  h.jsx("circle", {
                    className: "opacity-25",
                    cx: "12",
                    cy: "12",
                    r: "10",
                    stroke: "currentColor",
                    strokeWidth: "4"
                  }),
                  h.jsx("path", {
                    className: "opacity-75",
                    fill: "currentColor",
                    d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  })
                ]
              })
            }),
            !y && (!m || m.length === 0) && h.jsxs("div", {
              className: "text-center py-6",
              children: [
                h.jsx("svg", {
                  className: "mx-auto h-10 w-10 text-gray-500 mb-3",
                  fill: "none",
                  stroke: "currentColor",
                  viewBox: "0 0 24 24",
                  children: h.jsx("path", {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                  })
                }),
                h.jsx("p", {
                  className: "text-gray-400 mb-1",
                  children: "Non hai ancora aperture salvate"
                }),
                h.jsx("button", {
                  onClick: u,
                  className: "mt-2 text-blue-400 hover:underline text-sm",
                  children: "Crea la tua prima apertura"
                })
              ]
            }),
            N === "general" && h.jsx("div", {
              className: "flex justify-center py-4",
              children: h.jsxs("svg", {
                className: "animate-spin h-6 w-6 text-blue-500",
                xmlns: "http://www.w3.org/2000/svg",
                fill: "none",
                viewBox: "0 0 24 24",
                children: [
                  h.jsx("circle", {
                    className: "opacity-25",
                    cx: "12",
                    cy: "12",
                    r: "10",
                    stroke: "currentColor",
                    strokeWidth: "4"
                  }),
                  h.jsx("path", {
                    className: "opacity-75",
                    fill: "currentColor",
                    d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  })
                ]
              })
            }),
            N !== "general" && ge.length > 0 ? h.jsx("div", {
              className: "space-y-2",
              children: ge.map((j) => h.jsx(zy, {
                repertoire: j,
                onSelect: W,
                onDelete: T,
                onRename: Y,
                isActive: j.id === r,
                isLoading: N === j.id
              }, j.id))
            }) : N !== "general" && m && m.length > 0 && C && h.jsx("div", {
              className: "text-center py-6 text-gray-400",
              children: h.jsxs("p", {
                children: [
                  'Nessun risultato per "',
                  C,
                  '"'
                ]
              })
            })
          ]
        })
      ]
    });
  };
  yy.propTypes = {
    onLoadRepertoire: fe.func.isRequired,
    canvasData: fe.object,
    onCreateNew: fe.func.isRequired,
    activeRepertoireId: fe.string,
    setActiveRepertoireId: fe.func.isRequired
  };
  const _C = ({ onAddNode: n, onAddAnnotation: e, selectedNode: t, updateNode: r, canvasData: i, currentPGN: l, onOpenChessboard: c, onStartDrillMode: f, setCanvasData: m, onDeleteNode: y, onSaveRepertoire: x, isSaving: C, lastSaved: S }) => {
    const [N, P] = R.useState(false), O = R.useRef(null), L = R.useRef(null), [H, W] = R.useState(window.innerHeight), [T, Y] = R.useState(false), [u, ge] = R.useState(false), [j, M] = R.useState(null), { userRepertoires: V } = Dm(), B = (pe) => {
      m(pe), console.log("Nuova apertura creata");
    }, q = (pe, X) => {
      pe && (m(pe), console.log(`Repertorio "${X}" caricato con successo`));
    };
    R.useEffect(() => {
      const pe = () => {
        W(window.innerHeight);
      };
      return window.addEventListener("resize", pe), window.addEventListener("orientationchange", pe), pe(), () => {
        window.removeEventListener("resize", pe), window.removeEventListener("orientationchange", pe);
      };
    }, []);
    const G = (pe) => {
      t && r({
        ...t,
        description: pe.target.value
      });
    }, F = (pe) => {
      pe.key === "Enter" && !pe.shiftKey && (pe.preventDefault(), pe.target.blur());
    }, Oe = () => {
      t && window.confirm(`\u26A0\uFE0F Eliminare "${t.label || "nodo senza nome"}" e tutti i figli?
Questa azione \xE8 irreversibile!`) && y(t.id, true);
    }, Le = () => {
      l && (navigator.clipboard.writeText(l), alert("PGN copiato negli appunti!"));
    }, Ge = (pe) => (pe == null ? void 0 : pe.replace(/\[\w+ ".*?"\]\n/g, "").trim()) || "", Ye = (pe) => {
      const X = pe.target.files[0];
      if (!X) return;
      const oe = new FileReader();
      oe.onload = ({ target: Se }) => {
        try {
          const me = JSON.parse(Se.result);
          m(me), alert("Importazione completata!");
        } catch (me) {
          console.error("Errore durante l'importazione:", me), alert("Errore durante l'importazione. Controlla che il file sia un JSON valido.");
        }
        pe.target.value = null;
      }, oe.readAsText(X);
    }, he = V && V.length > 0, Pe = () => {
      const pe = {
        nodes: [],
        connections: [],
        annotations: []
      }, X = window.prompt("Nome della tua prima apertura:", "Nuova Apertura");
      X && (m(pe), x(X));
    };
    return h.jsxs(h.Fragment, {
      children: [
        h.jsx("button", {
          onClick: () => P(!N),
          className: `md:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 rounded-lg shadow-lg hover:bg-gray-700 transition-colors ${N ? "hidden" : "block"}`,
          children: h.jsxs("svg", {
            className: "w-6 h-6 text-gray-200",
            fill: "none",
            stroke: "currentColor",
            viewBox: "0 0 24 24",
            xmlns: "http://www.w3.org/2000/svg",
            children: [
              h.jsx("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
              }),
              h.jsx("path", {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M15 12a3 3 0 11-6 0 3 3 0 016 0z"
              })
            ]
          })
        }),
        h.jsxs("div", {
          ref: L,
          style: {
            height: `${H}px`,
            maxHeight: `${H}px`
          },
          className: `${N ? "translate-x-0" : "-translate-x-full"} md:translate-x-0 fixed md:relative inset-y-0 left-0 z-40 w-72 flex flex-col bg-gray-900 border-r border-gray-800 transition-transform duration-300 ease-in-out`,
          children: [
            h.jsxs("div", {
              className: "flex-1 overflow-y-auto overflow-x-hidden p-4 flex flex-col gap-4",
              children: [
                h.jsxs("div", {
                  className: "border-b border-gray-800 pb-4",
                  children: [
                    h.jsxs("div", {
                      className: "flex justify-between items-center mb-4",
                      children: [
                        h.jsxs("div", {
                          className: "flex items-center gap-2",
                          children: [
                            h.jsx("img", {
                              src: "/chessnotes.svg",
                              alt: "Chess Notes Logo",
                              className: "w-8 h-8 text-white",
                              style: {
                                filter: "brightness(0) invert(0.9) "
                              }
                            }),
                            h.jsx("h2", {
                              className: "text-xl font- text-gray-100",
                              children: j ? "Strumenti" : "Le tue aperture"
                            })
                          ]
                        }),
                        h.jsx("button", {
                          onClick: () => P(false),
                          className: "md:hidden p-1.5 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-gray-200 transition-colors",
                          children: h.jsx("svg", {
                            className: "w-5 h-5",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                            children: h.jsx("path", {
                              strokeLinecap: "round",
                              strokeLinejoin: "round",
                              strokeWidth: 2,
                              d: "M6 18L18 6M6 6l12 12"
                            })
                          })
                        })
                      ]
                    }),
                    j ? h.jsxs(h.Fragment, {
                      children: [
                        h.jsx(yy, {
                          onLoadRepertoire: q,
                          canvasData: i,
                          onCreateNew: B,
                          activeRepertoireId: j,
                          setActiveRepertoireId: M
                        }),
                        h.jsxs("div", {
                          className: "grid grid-cols-2 gap-2",
                          children: [
                            h.jsxs("button", {
                              onClick: n,
                              className: "group p-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition-all flex flex-col items-center gap-2",
                              children: [
                                h.jsx("svg", {
                                  className: "w-5 h-5 text-emerald-400 group-hover:text-emerald-300",
                                  fill: "none",
                                  stroke: "currentColor",
                                  viewBox: "0 0 24 24",
                                  children: h.jsx("path", {
                                    strokeLinecap: "round",
                                    strokeLinejoin: "round",
                                    strokeWidth: 2,
                                    d: "M12 4v16m8-8H4"
                                  })
                                }),
                                h.jsx("span", {
                                  className: "text-xs font-medium text-gray-300 group-hover:text-gray-100",
                                  children: "Nuovo Nodo"
                                })
                              ]
                            }),
                            h.jsxs("button", {
                              onClick: e,
                              className: "group p-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition-all flex flex-col items-center gap-2",
                              children: [
                                h.jsx("svg", {
                                  className: "w-5 h-5 text-blue-400 group-hover:text-blue-300",
                                  fill: "none",
                                  stroke: "currentColor",
                                  viewBox: "0 0 24 24",
                                  children: h.jsx("path", {
                                    strokeLinecap: "round",
                                    strokeLinejoin: "round",
                                    strokeWidth: 2,
                                    d: "M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"
                                  })
                                }),
                                h.jsx("span", {
                                  className: "text-xs font-medium text-gray-300 group-hover:text-gray-100",
                                  children: "Annotazione"
                                })
                              ]
                            })
                          ]
                        })
                      ]
                    }) : h.jsxs(h.Fragment, {
                      children: [
                        h.jsx(yy, {
                          onLoadRepertoire: q,
                          canvasData: i,
                          onCreateNew: B,
                          activeRepertoireId: j,
                          setActiveRepertoireId: M
                        }),
                        !he && h.jsx("div", {
                          className: "mt-6 text-center",
                          children: h.jsxs("button", {
                            onClick: Pe,
                            className: "w-full py-6 px-4 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all flex flex-col items-center justify-center gap-3 border border-gray-700",
                            children: [
                              h.jsx("svg", {
                                className: "w-10 h-10 text-blue-400",
                                fill: "none",
                                stroke: "currentColor",
                                viewBox: "0 0 24 24",
                                children: h.jsx("path", {
                                  strokeLinecap: "round",
                                  strokeLinejoin: "round",
                                  strokeWidth: 2,
                                  d: "M12 6v6m0 0v6m0-6h6m-6 0H6"
                                })
                              }),
                              h.jsx("span", {
                                className: "text-lg font-medium text-gray-100",
                                children: "Crea la tua prima apertura"
                              }),
                              h.jsx("p", {
                                className: "text-xs text-gray-400",
                                children: "Inizia a costruire il tuo repertorio di aperture"
                              })
                            ]
                          })
                        })
                      ]
                    })
                  ]
                }),
                j && t && h.jsxs("div", {
                  className: "space-y-4",
                  children: [
                    h.jsxs("div", {
                      className: "border-b border-gray-800 pb-4",
                      children: [
                        h.jsx("h3", {
                          className: "text-sm font-semibold text-gray-200 mb-3",
                          children: "Modifica Nodo"
                        }),
                        h.jsxs("div", {
                          className: "space-y-3",
                          children: [
                            h.jsxs("div", {
                              children: [
                                h.jsx("label", {
                                  className: "text-xs text-gray-400 mb-1 block",
                                  children: "Mossa"
                                }),
                                h.jsx("input", {
                                  value: t.label || "",
                                  readOnly: true,
                                  className: "w-full bg-gray-800 text-gray-200 text-sm px-3 py-2 rounded-md cursor-not-allowed"
                                })
                              ]
                            }),
                            h.jsxs("div", {
                              children: [
                                h.jsx("label", {
                                  className: "text-xs text-gray-400 mb-1 block",
                                  children: "Descrizione"
                                }),
                                h.jsx("textarea", {
                                  value: t.description || "",
                                  onChange: G,
                                  onKeyDown: F,
                                  rows: 3,
                                  className: "w-full bg-gray-800 text-gray-200 text-sm px-3 py-2 rounded-md resize-none focus:ring-2 focus:ring-blue-500",
                                  placeholder: "Scrivi note..."
                                })
                              ]
                            }),
                            t.fenPosition && h.jsxs("div", {
                              children: [
                                h.jsx("label", {
                                  className: "text-xs text-gray-400 mb-1 block",
                                  children: "FEN"
                                }),
                                h.jsx("code", {
                                  className: "block p-2 bg-gray-800 text-xs text-gray-400 rounded-md break-all",
                                  children: t.fenPosition
                                })
                              ]
                            })
                          ]
                        })
                      ]
                    }),
                    l && h.jsxs("div", {
                      className: "border-b border-gray-800 pb-4",
                      children: [
                        h.jsxs("div", {
                          className: "flex justify-between items-center mb-2",
                          children: [
                            h.jsx("span", {
                              className: "text-xs text-gray-400",
                              children: "PGN"
                            }),
                            h.jsx("button", {
                              onClick: Le,
                              className: "text-xs px-2 py-1 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-md transition-colors",
                              children: "Copia"
                            })
                          ]
                        }),
                        h.jsx("pre", {
                          className: "p-2 bg-gray-800 text-xs text-gray-400 rounded-md overflow-x-auto",
                          children: Ge(l)
                        })
                      ]
                    })
                  ]
                })
              ]
            }),
            h.jsxs("div", {
              className: "shrink-0 p-4 border-t border-gray-800 bg-gray-900 space-y-2",
              children: [
                j ? h.jsxs(h.Fragment, {
                  children: [
                    h.jsx("button", {
                      onClick: x,
                      disabled: C,
                      className: "w-full flex items-center justify-center gap-2 px-4 py-3 bg-emerald-700/30 hover:bg-emerald-700/40 text-emerald-300 rounded-lg transition-colors border border-emerald-700/50",
                      children: C ? h.jsxs(h.Fragment, {
                        children: [
                          h.jsxs("svg", {
                            className: "animate-spin -ml-1 mr-2 h-5 w-5",
                            xmlns: "http://www.w3.org/2000/svg",
                            fill: "none",
                            viewBox: "0 0 24 24",
                            children: [
                              h.jsx("circle", {
                                className: "opacity-25",
                                cx: "12",
                                cy: "12",
                                r: "10",
                                stroke: "currentColor",
                                strokeWidth: "4"
                              }),
                              h.jsx("path", {
                                className: "opacity-75",
                                fill: "currentColor",
                                d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                              })
                            ]
                          }),
                          "Salvando..."
                        ]
                      }) : h.jsxs(h.Fragment, {
                        children: [
                          h.jsx("svg", {
                            className: "w-5 h-5",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                            children: h.jsx("path", {
                              strokeLinecap: "round",
                              strokeLinejoin: "round",
                              strokeWidth: 2,
                              d: "M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"
                            })
                          }),
                          h.jsx("span", {
                            className: "text-sm",
                            children: "Salva Repertorio"
                          })
                        ]
                      })
                    }),
                    S && h.jsxs("div", {
                      className: "text-center text-xs text-gray-500",
                      children: [
                        "Ultimo salvataggio: ",
                        S.toLocaleTimeString()
                      ]
                    }),
                    h.jsxs("button", {
                      onClick: c,
                      className: "w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 hover:bg-gray-700 text-gray-200 rounded-lg transition-colors",
                      children: [
                        h.jsx("svg", {
                          className: "w-5 h-5 text-blue-400",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                          children: h.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"
                          })
                        }),
                        h.jsx("span", {
                          className: "text-sm",
                          children: "Scacchiera"
                        })
                      ]
                    }),
                    h.jsxs("div", {
                      className: "grid grid-cols-2 gap-2",
                      children: [
                        h.jsxs("button", {
                          onClick: f,
                          className: "flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 hover:bg-gray-700 text-gray-200 rounded-lg transition-colors",
                          children: [
                            h.jsxs("svg", {
                              className: "w-5 h-5 text-purple-400",
                              fill: "none",
                              stroke: "currentColor",
                              viewBox: "0 0 24 24",
                              strokeWidth: "1.5",
                              children: [
                                h.jsx("circle", {
                                  cx: "12",
                                  cy: "12",
                                  r: "9"
                                }),
                                h.jsx("circle", {
                                  cx: "12",
                                  cy: "12",
                                  r: "6"
                                }),
                                h.jsx("circle", {
                                  cx: "12",
                                  cy: "12",
                                  r: "3"
                                }),
                                h.jsx("circle", {
                                  cx: "12",
                                  cy: "12",
                                  r: "1",
                                  fill: "currentColor"
                                }),
                                h.jsx("line", {
                                  x1: "3",
                                  y1: "3",
                                  x2: "9.5",
                                  y2: "9.5",
                                  strokeWidth: "2"
                                }),
                                h.jsx("path", {
                                  d: "M3 3 L1 5 L3 5 L3 7 L5 5 L3 3",
                                  fill: "currentColor"
                                })
                              ]
                            }),
                            h.jsx("span", {
                              className: "text-sm",
                              children: "Drill"
                            })
                          ]
                        }),
                        h.jsxs("button", {
                          onClick: () => O.current.click(),
                          className: "flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 hover:bg-gray-700 text-gray-200 rounded-lg transition-colors",
                          children: [
                            h.jsx("svg", {
                              className: "w-5 h-5 text-green-400",
                              fill: "none",
                              stroke: "currentColor",
                              viewBox: "0 0 24 24",
                              children: h.jsx("path", {
                                strokeLinecap: "round",
                                strokeLinejoin: "round",
                                strokeWidth: 2,
                                d: "M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
                              })
                            }),
                            h.jsx("span", {
                              className: "text-sm",
                              children: "Importa"
                            })
                          ]
                        })
                      ]
                    }),
                    t && h.jsxs("button", {
                      onClick: Oe,
                      className: "w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-800/30 hover:bg-red-800/40 text-red-400 rounded-lg transition-colors border border-red-800/50",
                      children: [
                        h.jsx("svg", {
                          className: "w-5 h-5",
                          fill: "none",
                          stroke: "currentColor",
                          viewBox: "0 0 24 24",
                          children: h.jsx("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                          })
                        }),
                        h.jsx("span", {
                          className: "text-sm",
                          children: "Elimina Nodo"
                        })
                      ]
                    })
                  ]
                }) : h.jsxs("button", {
                  onClick: Pe,
                  className: "w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-700/30 hover:bg-blue-700/40 text-blue-300 rounded-lg transition-colors border border-blue-700/50",
                  children: [
                    h.jsx("svg", {
                      className: "w-5 h-5",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M12 4v16m8-8H4"
                      })
                    }),
                    h.jsx("span", {
                      className: "text-sm",
                      children: "Nuova Apertura"
                    })
                  ]
                }),
                h.jsxs("button", {
                  onClick: () => Y(true),
                  className: "w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 hover:bg-gray-700 text-gray-200 rounded-lg transition-colors mt-2",
                  children: [
                    h.jsx("svg", {
                      className: "w-5 h-5 text-amber-400",
                      fill: "none",
                      stroke: "currentColor",
                      viewBox: "0 0 24 24",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                      })
                    }),
                    h.jsx("span", {
                      className: "text-sm",
                      children: "Aiuto"
                    })
                  ]
                })
              ]
            }),
            h.jsx("input", {
              type: "file",
              ref: O,
              onChange: Ye,
              accept: ".json",
              className: "hidden"
            })
          ]
        }),
        u && h.jsx(xb, {
          onClose: () => ge(false),
          setCanvasData: m
        }),
        h.jsx(yb, {
          isOpen: T,
          onClose: () => Y(false)
        })
      ]
    });
  };
  _C.propTypes = {
    onAddNode: fe.func.isRequired,
    onAddAnnotation: fe.func.isRequired,
    selectedNode: fe.object,
    updateNode: fe.func,
    canvasData: fe.object,
    currentPGN: fe.string,
    onOpenChessboard: fe.func,
    onStartDrillMode: fe.func,
    setCanvasData: fe.func.isRequired,
    onDeleteNode: fe.func,
    onSaveRepertoire: fe.func.isRequired,
    isSaving: fe.bool,
    lastSaved: fe.instanceOf(Date)
  };
  function WM() {
    const [n, e] = R.useState({
      nodes: [],
      connections: [],
      annotations: []
    }), [t, r] = R.useState(""), [i, l] = R.useState(null), [c, f] = R.useState(null), [m, y] = R.useState(false), [x, C] = R.useState(false), { currentUser: S, userData: N, userRepertoires: P } = Dm(), O = R.useRef(false), L = R.useRef(false);
    R.useEffect(() => {
      S && N && !O.current && (console.log("Utente autenticato:", {
        uid: S.uid,
        email: S.email
      }), console.log("Dati utente da Firestore:", N), console.log("Repertori utente:", P), O.current = true);
    }, [
      S,
      N,
      P
    ]);
    const [H, W] = R.useState(false), [T, Y] = R.useState(null), u = R.useRef(null), [ge, j] = R.useState(null), M = R.useCallback((ie) => !ie || !ie.nodes || !ie.connections ? [] : ie.nodes.filter((ve) => !ie.connections.some((De) => De.fromId === ve.id)).map((ve) => ve.pgn).filter((ve) => ve && ve.trim() !== ""), []);
    R.useEffect(() => {
      if (S && (P == null ? void 0 : P.length) > 0) {
        const ie = P[0];
        u.current = ie.id;
        try {
          if (ie.canvasData) {
            const ye = JSON.parse(ie.canvasData);
            e(ye), kn.initialize(S.uid, ie.id, ye);
          }
        } catch (ye) {
          console.error("Errore nel parsing dei dati del repertorio:", ye);
        }
      }
      return () => {
        kn.cleanup();
      };
    }, [
      S,
      P
    ]), R.useEffect(() => {
      S && u.current && n && kn.setCanvasData(n);
    }, [
      n,
      S
    ]);
    const V = R.useCallback(async (ie) => {
      if (!S || !u.current) {
        if (S && n) {
          W(true);
          const ve = ie || prompt("Inserisci un nome per il tuo repertorio:", "Nuovo Repertorio");
          if (!ve) {
            W(false);
            return;
          }
          if (ve) {
            const De = await kn.createNewRepertoire(ve);
            De && (u.current = De, Y(/* @__PURE__ */ new Date()), alert(`Repertorio "${ve}" salvato con successo!`));
          }
          W(false);
        }
        return;
      }
      W(true);
      const ye = await kn.forceSave();
      W(false), ye && Y(/* @__PURE__ */ new Date());
    }, [
      S,
      n
    ]), B = (ie, ye, ve) => {
      const De = new Map(ie.map((Ne) => [
        Ne.id,
        Ne
      ])), Be = /* @__PURE__ */ new Map();
      for (const Ne of ye) Be.set(Ne.toId, Ne.fromId);
      const et = [];
      let le = ve;
      for (; le; ) {
        const Ne = De.get(le);
        Ne && Ne.label && et.unshift(Ne.label), le = Be.get(le);
      }
      return et;
    }, q = (ie, ye) => {
      const ve = ie.nodes.find((Be) => Be.id === ye);
      if (ve && ve.pgn && ve.pgn.trim() !== "") return ve.pgn;
      const De = B(ie.nodes, ie.connections, ye);
      return r_(De);
    }, G = (ie) => {
      if (!ie || ie.length === 0) {
        r("");
        return;
      }
      console.log("App: Generazione PGN per percorso:", ie);
      const ye = r_(ie);
      console.log("App: PGN generato:", ye), r(ye);
    }, F = () => {
      const ie = {
        id: Date.now(),
        x: 50,
        y: 50,
        label: "",
        description: "",
        type: "move"
      };
      e((ye) => ({
        ...ye,
        nodes: [
          ...ye.nodes,
          ie
        ]
      }));
    }, Oe = (ie) => {
      if (e((ye) => ({
        ...ye,
        nodes: ye.nodes.map((ve) => ve.id === ie.id ? ie : ve)
      })), i && i.id === ie.id) {
        l(ie);
        const ye = B(n.nodes, n.connections, ie.id);
        G(ye);
      }
    }, Le = R.useCallback((ie) => {
      if (l(n.nodes.find((ye) => ye.id === ie) || null), f(null), ie) {
        if (!L.current) {
          L.current = true;
          const ye = q(n, ie);
          r(ye), setTimeout(() => {
            L.current = false;
          }, 100);
        }
      } else r("");
    }, [
      n
    ]), Ge = () => {
      const ie = {
        id: Date.now(),
        x: 100,
        y: 100,
        width: 250,
        height: 150,
        text: ""
      };
      e((ye) => ({
        ...ye,
        annotations: [
          ...ye.annotations,
          ie
        ]
      }));
    }, Ye = (ie) => {
      e((ye) => ({
        ...ye,
        annotations: ye.annotations.map((ve) => ve.id === ie.id ? ie : ve)
      })), c && c.id === ie.id && f(ie);
    }, he = (ie) => {
      if (ie) {
        const ye = n.annotations.find((ve) => ve.id === ie);
        f(ye || null), l(null);
      } else f(null);
    }, Pe = () => {
      y(false);
    }, pe = (ie) => {
      if (e(ie), i == null ? void 0 : i.id) {
        const ye = ie.nodes.find((ve) => ve.id === i.id);
        ye && l(ye);
      }
    }, X = R.useCallback((ie, ye) => {
      e((ve) => {
        const De = ie || ve;
        if (ye) {
          const Be = De.nodes.find((et) => et.id === ye);
          Be && setTimeout(() => {
            l(Be);
          }, 0);
        }
        return De;
      });
    }, []), [oe, Se] = R.useState([]), me = R.useCallback(() => {
      const ie = M(n);
      Se(ie), C(true);
    }, [
      n,
      M
    ]), Re = () => {
      C(false);
    }, $e = (ie, ye) => {
      if (!ie || !n) return;
      const ve = {
        ...n
      };
      if (ye) {
        const De = /* @__PURE__ */ new Set(), Be = (et) => {
          De.add(et), n.connections.filter((Ne) => Ne.fromId === et).forEach((Ne) => {
            Be(Ne.toId);
          });
        };
        Be(ie), ve.nodes = n.nodes.filter((et) => !De.has(et.id)), ve.connections = n.connections.filter((et) => !De.has(et.fromId) && !De.has(et.toId)), i && De.has(i.id) && l(null);
      }
      e(ve);
    };
    return m && i && (i.description, i.id), R.useEffect(() => {
      const ie = (ye) => {
        ye.key === "b" && ye.ctrlKey && i && (ye.preventDefault(), y(true));
      };
      return window.addEventListener("keydown", ie), () => {
        window.removeEventListener("keydown", ie);
      };
    }, [
      i,
      c
    ]), h.jsxs("div", {
      className: "h-screen w-screen flex bg-gray-900 overflow-hidden max-h-screen max-w-screen",
      children: [
        h.jsx(_C, {
          onAddNode: F,
          onAddAnnotation: Ge,
          selectedNode: i,
          updateNode: Oe,
          canvasData: n,
          currentPGN: t,
          onOpenChessboard: () => y(true),
          onStartDrillMode: me,
          setCanvasData: e,
          onDeleteNode: $e,
          onSaveRepertoire: V,
          isSaving: H,
          lastSaved: T
        }),
        h.jsx(KE, {
          canvasData: n,
          setCanvasData: e,
          onNodeSelect: Le,
          selectedNodeId: (i == null ? void 0 : i.id) || null,
          onAnnotationSelect: he,
          selectedAnnotationId: (c == null ? void 0 : c.id) || null,
          updateAnnotation: Ye,
          onGeneratePGN: G
        }),
        m && i && h.jsx(Uv, {
          pgn: t,
          onClose: Pe,
          nodeDescription: i.description,
          canvasData: n,
          selectedNodeId: i.id,
          onUpdateCanvas: pe,
          onSelectNode: Le,
          onUpdateCanvasAndSelectNode: X
        }),
        x && h.jsx(Fy, {
          fullLines: oe,
          onClose: Re
        })
      ]
    });
  }
  var Tv, mE;
  function HM() {
    if (mE) return Tv;
    mE = 1;
    var n = typeof Element < "u", e = typeof Map == "function", t = typeof Set == "function", r = typeof ArrayBuffer == "function" && !!ArrayBuffer.isView;
    function i(l, c) {
      if (l === c) return true;
      if (l && c && typeof l == "object" && typeof c == "object") {
        if (l.constructor !== c.constructor) return false;
        var f, m, y;
        if (Array.isArray(l)) {
          if (f = l.length, f != c.length) return false;
          for (m = f; m-- !== 0; ) if (!i(l[m], c[m])) return false;
          return true;
        }
        var x;
        if (e && l instanceof Map && c instanceof Map) {
          if (l.size !== c.size) return false;
          for (x = l.entries(); !(m = x.next()).done; ) if (!c.has(m.value[0])) return false;
          for (x = l.entries(); !(m = x.next()).done; ) if (!i(m.value[1], c.get(m.value[0]))) return false;
          return true;
        }
        if (t && l instanceof Set && c instanceof Set) {
          if (l.size !== c.size) return false;
          for (x = l.entries(); !(m = x.next()).done; ) if (!c.has(m.value[0])) return false;
          return true;
        }
        if (r && ArrayBuffer.isView(l) && ArrayBuffer.isView(c)) {
          if (f = l.length, f != c.length) return false;
          for (m = f; m-- !== 0; ) if (l[m] !== c[m]) return false;
          return true;
        }
        if (l.constructor === RegExp) return l.source === c.source && l.flags === c.flags;
        if (l.valueOf !== Object.prototype.valueOf && typeof l.valueOf == "function" && typeof c.valueOf == "function") return l.valueOf() === c.valueOf();
        if (l.toString !== Object.prototype.toString && typeof l.toString == "function" && typeof c.toString == "function") return l.toString() === c.toString();
        if (y = Object.keys(l), f = y.length, f !== Object.keys(c).length) return false;
        for (m = f; m-- !== 0; ) if (!Object.prototype.hasOwnProperty.call(c, y[m])) return false;
        if (n && l instanceof Element) return false;
        for (m = f; m-- !== 0; ) if (!((y[m] === "_owner" || y[m] === "__v" || y[m] === "__o") && l.$$typeof) && !i(l[y[m]], c[y[m]])) return false;
        return true;
      }
      return l !== l && c !== c;
    }
    return Tv = function(c, f) {
      try {
        return i(c, f);
      } catch (m) {
        if ((m.message || "").match(/stack|recursion/i)) return console.warn("react-fast-compare cannot handle circular refs"), false;
        throw m;
      }
    }, Tv;
  }
  var qM = HM();
  const KM = Eu(qM);
  var Cv, vE;
  function GM() {
    if (vE) return Cv;
    vE = 1;
    var n = function(e, t, r, i, l, c, f, m) {
      if (!e) {
        var y;
        if (t === void 0) y = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
        else {
          var x = [
            r,
            i,
            l,
            c,
            f,
            m
          ], C = 0;
          y = new Error(t.replace(/%s/g, function() {
            return x[C++];
          })), y.name = "Invariant Violation";
        }
        throw y.framesToPop = 1, y;
      }
    };
    return Cv = n, Cv;
  }
  var QM = GM();
  const yE = Eu(QM);
  var Sv, wE;
  function YM() {
    return wE || (wE = 1, Sv = function(e, t, r, i) {
      var l = r ? r.call(i, e, t) : void 0;
      if (l !== void 0) return !!l;
      if (e === t) return true;
      if (typeof e != "object" || !e || typeof t != "object" || !t) return false;
      var c = Object.keys(e), f = Object.keys(t);
      if (c.length !== f.length) return false;
      for (var m = Object.prototype.hasOwnProperty.bind(t), y = 0; y < c.length; y++) {
        var x = c[y];
        if (!m(x)) return false;
        var C = e[x], S = t[x];
        if (l = r ? r.call(i, C, S, x) : void 0, l === false || l === void 0 && C !== S) return false;
      }
      return true;
    }), Sv;
  }
  var XM = YM();
  const JM = Eu(XM);
  var xC = ((n) => (n.BASE = "base", n.BODY = "body", n.HEAD = "head", n.HTML = "html", n.LINK = "link", n.META = "meta", n.NOSCRIPT = "noscript", n.SCRIPT = "script", n.STYLE = "style", n.TITLE = "title", n.FRAGMENT = "Symbol(react.fragment)", n))(xC || {}), Iv = {
    link: {
      rel: [
        "amphtml",
        "canonical",
        "alternate"
      ]
    },
    script: {
      type: [
        "application/ld+json"
      ]
    },
    meta: {
      charset: "",
      name: [
        "generator",
        "robots",
        "description"
      ],
      property: [
        "og:type",
        "og:title",
        "og:url",
        "og:image",
        "og:image:alt",
        "og:description",
        "twitter:url",
        "twitter:title",
        "twitter:description",
        "twitter:image",
        "twitter:image:alt",
        "twitter:card",
        "twitter:site"
      ]
    }
  }, _E = Object.values(xC), q1 = {
    accesskey: "accessKey",
    charset: "charSet",
    class: "className",
    contenteditable: "contentEditable",
    contextmenu: "contextMenu",
    "http-equiv": "httpEquiv",
    itemprop: "itemProp",
    tabindex: "tabIndex"
  }, ZM = Object.entries(q1).reduce((n, [e, t]) => (n[t] = e, n), {}), ri = "data-rh", hu = {
    DEFAULT_TITLE: "defaultTitle",
    DEFER: "defer",
    ENCODE_SPECIAL_CHARACTERS: "encodeSpecialCharacters",
    ON_CHANGE_CLIENT_STATE: "onChangeClientState",
    TITLE_TEMPLATE: "titleTemplate",
    PRIORITIZE_SEO_TAGS: "prioritizeSeoTags"
  }, pu = (n, e) => {
    for (let t = n.length - 1; t >= 0; t -= 1) {
      const r = n[t];
      if (Object.prototype.hasOwnProperty.call(r, e)) return r[e];
    }
    return null;
  }, e$ = (n) => {
    let e = pu(n, "title");
    const t = pu(n, hu.TITLE_TEMPLATE);
    if (Array.isArray(e) && (e = e.join("")), t && e) return t.replace(/%s/g, () => e);
    const r = pu(n, hu.DEFAULT_TITLE);
    return e || r || void 0;
  }, t$ = (n) => pu(n, hu.ON_CHANGE_CLIENT_STATE) || (() => {
  }), kv = (n, e) => e.filter((t) => typeof t[n] < "u").map((t) => t[n]).reduce((t, r) => ({
    ...t,
    ...r
  }), {}), n$ = (n, e) => e.filter((t) => typeof t.base < "u").map((t) => t.base).reverse().reduce((t, r) => {
    if (!t.length) {
      const i = Object.keys(r);
      for (let l = 0; l < i.length; l += 1) {
        const f = i[l].toLowerCase();
        if (n.indexOf(f) !== -1 && r[f]) return t.concat(r);
      }
    }
    return t;
  }, []), r$ = (n) => console && typeof console.warn == "function" && console.warn(n), rf = (n, e, t) => {
    const r = {};
    return t.filter((i) => Array.isArray(i[n]) ? true : (typeof i[n] < "u" && r$(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`), false)).map((i) => i[n]).reverse().reduce((i, l) => {
      const c = {};
      l.filter((m) => {
        let y;
        const x = Object.keys(m);
        for (let S = 0; S < x.length; S += 1) {
          const N = x[S], P = N.toLowerCase();
          e.indexOf(P) !== -1 && !(y === "rel" && m[y].toLowerCase() === "canonical") && !(P === "rel" && m[P].toLowerCase() === "stylesheet") && (y = P), e.indexOf(N) !== -1 && (N === "innerHTML" || N === "cssText" || N === "itemprop") && (y = N);
        }
        if (!y || !m[y]) return false;
        const C = m[y].toLowerCase();
        return r[y] || (r[y] = {}), c[y] || (c[y] = {}), r[y][C] ? false : (c[y][C] = true, true);
      }).reverse().forEach((m) => i.push(m));
      const f = Object.keys(c);
      for (let m = 0; m < f.length; m += 1) {
        const y = f[m], x = {
          ...r[y],
          ...c[y]
        };
        r[y] = x;
      }
      return i;
    }, []).reverse();
  }, s$ = (n, e) => {
    if (Array.isArray(n) && n.length) {
      for (let t = 0; t < n.length; t += 1) if (n[t][e]) return true;
    }
    return false;
  }, i$ = (n) => ({
    baseTag: n$([
      "href"
    ], n),
    bodyAttributes: kv("bodyAttributes", n),
    defer: pu(n, hu.DEFER),
    encode: pu(n, hu.ENCODE_SPECIAL_CHARACTERS),
    htmlAttributes: kv("htmlAttributes", n),
    linkTags: rf("link", [
      "rel",
      "href"
    ], n),
    metaTags: rf("meta", [
      "name",
      "charset",
      "http-equiv",
      "property",
      "itemprop"
    ], n),
    noscriptTags: rf("noscript", [
      "innerHTML"
    ], n),
    onChangeClientState: t$(n),
    scriptTags: rf("script", [
      "src",
      "innerHTML"
    ], n),
    styleTags: rf("style", [
      "cssText"
    ], n),
    title: e$(n),
    titleAttributes: kv("titleAttributes", n),
    prioritizeSeoTags: s$(n, hu.PRIORITIZE_SEO_TAGS)
  }), EC = (n) => Array.isArray(n) ? n.join("") : n, o$ = (n, e) => {
    const t = Object.keys(n);
    for (let r = 0; r < t.length; r += 1) if (e[t[r]] && e[t[r]].includes(n[t[r]])) return true;
    return false;
  }, Av = (n, e) => Array.isArray(n) ? n.reduce((t, r) => (o$(r, e) ? t.priority.push(r) : t.default.push(r), t), {
    priority: [],
    default: []
  }) : {
    default: n,
    priority: []
  }, xE = (n, e) => ({
    ...n,
    [e]: void 0
  }), a$ = [
    "noscript",
    "script",
    "style"
  ], wy = (n, e = true) => e === false ? String(n) : String(n).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;"), bC = (n) => Object.keys(n).reduce((e, t) => {
    const r = typeof n[t] < "u" ? `${t}="${n[t]}"` : `${t}`;
    return e ? `${e} ${r}` : r;
  }, ""), l$ = (n, e, t, r) => {
    const i = bC(t), l = EC(e);
    return i ? `<${n} ${ri}="true" ${i}>${wy(l, r)}</${n}>` : `<${n} ${ri}="true">${wy(l, r)}</${n}>`;
  }, c$ = (n, e, t = true) => e.reduce((r, i) => {
    const l = i, c = Object.keys(l).filter((y) => !(y === "innerHTML" || y === "cssText")).reduce((y, x) => {
      const C = typeof l[x] > "u" ? x : `${x}="${wy(l[x], t)}"`;
      return y ? `${y} ${C}` : C;
    }, ""), f = l.innerHTML || l.cssText || "", m = a$.indexOf(n) === -1;
    return `${r}<${n} ${ri}="true" ${c}${m ? "/>" : `>${f}</${n}>`}`;
  }, ""), TC = (n, e = {}) => Object.keys(n).reduce((t, r) => {
    const i = q1[r];
    return t[i || r] = n[r], t;
  }, e), u$ = (n, e, t) => {
    const r = {
      key: e,
      [ri]: true
    }, i = TC(t, r);
    return [
      wo.createElement("title", i, e)
    ];
  }, Ag = (n, e) => e.map((t, r) => {
    const i = {
      key: r,
      [ri]: true
    };
    return Object.keys(t).forEach((l) => {
      const f = q1[l] || l;
      if (f === "innerHTML" || f === "cssText") {
        const m = t.innerHTML || t.cssText;
        i.dangerouslySetInnerHTML = {
          __html: m
        };
      } else i[f] = t[l];
    }), wo.createElement(n, i);
  }), As = (n, e, t = true) => {
    switch (n) {
      case "title":
        return {
          toComponent: () => u$(n, e.title, e.titleAttributes),
          toString: () => l$(n, e.title, e.titleAttributes, t)
        };
      case "bodyAttributes":
      case "htmlAttributes":
        return {
          toComponent: () => TC(e),
          toString: () => bC(e)
        };
      default:
        return {
          toComponent: () => Ag(n, e),
          toString: () => c$(n, e, t)
        };
    }
  }, d$ = ({ metaTags: n, linkTags: e, scriptTags: t, encode: r }) => {
    const i = Av(n, Iv.meta), l = Av(e, Iv.link), c = Av(t, Iv.script);
    return {
      priorityMethods: {
        toComponent: () => [
          ...Ag("meta", i.priority),
          ...Ag("link", l.priority),
          ...Ag("script", c.priority)
        ],
        toString: () => `${As("meta", i.priority, r)} ${As("link", l.priority, r)} ${As("script", c.priority, r)}`
      },
      metaTags: i.default,
      linkTags: l.default,
      scriptTags: c.default
    };
  }, f$ = (n) => {
    const { baseTag: e, bodyAttributes: t, encode: r = true, htmlAttributes: i, noscriptTags: l, styleTags: c, title: f = "", titleAttributes: m, prioritizeSeoTags: y } = n;
    let { linkTags: x, metaTags: C, scriptTags: S } = n, N = {
      toComponent: () => {
      },
      toString: () => ""
    };
    return y && ({ priorityMethods: N, linkTags: x, metaTags: C, scriptTags: S } = d$(n)), {
      priority: N,
      base: As("base", e, r),
      bodyAttributes: As("bodyAttributes", t, r),
      htmlAttributes: As("htmlAttributes", i, r),
      link: As("link", x, r),
      meta: As("meta", C, r),
      noscript: As("noscript", l, r),
      script: As("script", S, r),
      style: As("style", c, r),
      title: As("title", {
        title: f,
        titleAttributes: m
      }, r)
    };
  }, _y = f$, fg = [], CC = !!(typeof window < "u" && window.document && window.document.createElement), xy = class {
    constructor(n, e) {
      __publicField(this, "instances", []);
      __publicField(this, "canUseDOM", CC);
      __publicField(this, "context");
      __publicField(this, "value", {
        setHelmet: (n) => {
          this.context.helmet = n;
        },
        helmetInstances: {
          get: () => this.canUseDOM ? fg : this.instances,
          add: (n) => {
            (this.canUseDOM ? fg : this.instances).push(n);
          },
          remove: (n) => {
            const e = (this.canUseDOM ? fg : this.instances).indexOf(n);
            (this.canUseDOM ? fg : this.instances).splice(e, 1);
          }
        }
      });
      this.context = n, this.canUseDOM = e || false, e || (n.helmet = _y({
        baseTag: [],
        bodyAttributes: {},
        htmlAttributes: {},
        linkTags: [],
        metaTags: [],
        noscriptTags: [],
        scriptTags: [],
        styleTags: [],
        title: "",
        titleAttributes: {}
      }));
    }
  }, h$ = {}, SC = wo.createContext(h$), IC = (_a2 = class extends R.Component {
    constructor(e) {
      super(e);
      __publicField(this, "helmetData");
      this.helmetData = new xy(this.props.context || {}, _a2.canUseDOM);
    }
    render() {
      return wo.createElement(SC.Provider, {
        value: this.helmetData.value
      }, this.props.children);
    }
  }, __publicField(_a2, "canUseDOM", CC), _a2), su = (n, e) => {
    const t = document.head || document.querySelector("head"), r = t.querySelectorAll(`${n}[${ri}]`), i = [].slice.call(r), l = [];
    let c;
    return e && e.length && e.forEach((f) => {
      const m = document.createElement(n);
      for (const y in f) if (Object.prototype.hasOwnProperty.call(f, y)) if (y === "innerHTML") m.innerHTML = f.innerHTML;
      else if (y === "cssText") m.styleSheet ? m.styleSheet.cssText = f.cssText : m.appendChild(document.createTextNode(f.cssText));
      else {
        const x = y, C = typeof f[x] > "u" ? "" : f[x];
        m.setAttribute(y, C);
      }
      m.setAttribute(ri, "true"), i.some((y, x) => (c = x, m.isEqualNode(y))) ? i.splice(c, 1) : l.push(m);
    }), i.forEach((f) => {
      var _a3;
      return (_a3 = f.parentNode) == null ? void 0 : _a3.removeChild(f);
    }), l.forEach((f) => t.appendChild(f)), {
      oldTags: i,
      newTags: l
    };
  }, Ey = (n, e) => {
    const t = document.getElementsByTagName(n)[0];
    if (!t) return;
    const r = t.getAttribute(ri), i = r ? r.split(",") : [], l = [
      ...i
    ], c = Object.keys(e);
    for (const f of c) {
      const m = e[f] || "";
      t.getAttribute(f) !== m && t.setAttribute(f, m), i.indexOf(f) === -1 && i.push(f);
      const y = l.indexOf(f);
      y !== -1 && l.splice(y, 1);
    }
    for (let f = l.length - 1; f >= 0; f -= 1) t.removeAttribute(l[f]);
    i.length === l.length ? t.removeAttribute(ri) : t.getAttribute(ri) !== c.join(",") && t.setAttribute(ri, c.join(","));
  }, p$ = (n, e) => {
    typeof n < "u" && document.title !== n && (document.title = EC(n)), Ey("title", e);
  }, EE = (n, e) => {
    const { baseTag: t, bodyAttributes: r, htmlAttributes: i, linkTags: l, metaTags: c, noscriptTags: f, onChangeClientState: m, scriptTags: y, styleTags: x, title: C, titleAttributes: S } = n;
    Ey("body", r), Ey("html", i), p$(C, S);
    const N = {
      baseTag: su("base", t),
      linkTags: su("link", l),
      metaTags: su("meta", c),
      noscriptTags: su("noscript", f),
      scriptTags: su("script", y),
      styleTags: su("style", x)
    }, P = {}, O = {};
    Object.keys(N).forEach((L) => {
      const { newTags: H, oldTags: W } = N[L];
      H.length && (P[L] = H), W.length && (O[L] = N[L].oldTags);
    }), e && e(), m(n, P, O);
  }, sf = null, g$ = (n) => {
    sf && cancelAnimationFrame(sf), n.defer ? sf = requestAnimationFrame(() => {
      EE(n, () => {
        sf = null;
      });
    }) : (EE(n), sf = null);
  }, m$ = g$, bE = class extends R.Component {
    constructor() {
      super(...arguments);
      __publicField(this, "rendered", false);
    }
    shouldComponentUpdate(n) {
      return !JM(n, this.props);
    }
    componentDidUpdate() {
      this.emitChange();
    }
    componentWillUnmount() {
      const { helmetInstances: n } = this.props.context;
      n.remove(this), this.emitChange();
    }
    emitChange() {
      const { helmetInstances: n, setHelmet: e } = this.props.context;
      let t = null;
      const r = i$(n.get().map((i) => {
        const l = {
          ...i.props
        };
        return delete l.context, l;
      }));
      IC.canUseDOM ? m$(r) : _y && (t = _y(r)), e(t);
    }
    init() {
      if (this.rendered) return;
      this.rendered = true;
      const { helmetInstances: n } = this.props.context;
      n.add(this), this.emitChange();
    }
    render() {
      return this.init(), null;
    }
  }, v$ = (_b2 = class extends R.Component {
    shouldComponentUpdate(n) {
      return !KM(xE(this.props, "helmetData"), xE(n, "helmetData"));
    }
    mapNestedChildrenToProps(n, e) {
      if (!e) return null;
      switch (n.type) {
        case "script":
        case "noscript":
          return {
            innerHTML: e
          };
        case "style":
          return {
            cssText: e
          };
        default:
          throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`);
      }
    }
    flattenArrayTypeChildren(n, e, t, r) {
      return {
        ...e,
        [n.type]: [
          ...e[n.type] || [],
          {
            ...t,
            ...this.mapNestedChildrenToProps(n, r)
          }
        ]
      };
    }
    mapObjectTypeChildren(n, e, t, r) {
      switch (n.type) {
        case "title":
          return {
            ...e,
            [n.type]: r,
            titleAttributes: {
              ...t
            }
          };
        case "body":
          return {
            ...e,
            bodyAttributes: {
              ...t
            }
          };
        case "html":
          return {
            ...e,
            htmlAttributes: {
              ...t
            }
          };
        default:
          return {
            ...e,
            [n.type]: {
              ...t
            }
          };
      }
    }
    mapArrayTypeChildrenToProps(n, e) {
      let t = {
        ...e
      };
      return Object.keys(n).forEach((r) => {
        t = {
          ...t,
          [r]: n[r]
        };
      }), t;
    }
    warnOnInvalidChildren(n, e) {
      return yE(_E.some((t) => n.type === t), typeof n.type == "function" ? "You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information." : `Only elements types ${_E.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`), yE(!e || typeof e == "string" || Array.isArray(e) && !e.some((t) => typeof t != "string"), `Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`), true;
    }
    mapChildrenToProps(n, e) {
      let t = {};
      return wo.Children.forEach(n, (r) => {
        if (!r || !r.props) return;
        const { children: i, ...l } = r.props, c = Object.keys(l).reduce((m, y) => (m[ZM[y] || y] = l[y], m), {});
        let { type: f } = r;
        switch (typeof f == "symbol" ? f = f.toString() : this.warnOnInvalidChildren(r, i), f) {
          case "Symbol(react.fragment)":
            e = this.mapChildrenToProps(i, e);
            break;
          case "link":
          case "meta":
          case "noscript":
          case "script":
          case "style":
            t = this.flattenArrayTypeChildren(r, t, c, i);
            break;
          default:
            e = this.mapObjectTypeChildren(r, e, c, i);
            break;
        }
      }), this.mapArrayTypeChildrenToProps(t, e);
    }
    render() {
      const { children: n, ...e } = this.props;
      let t = {
        ...e
      }, { helmetData: r } = e;
      if (n && (t = this.mapChildrenToProps(n, t)), r && !(r instanceof xy)) {
        const i = r;
        r = new xy(i.context, true), delete t.helmetData;
      }
      return r ? wo.createElement(bE, {
        ...t,
        context: r.value
      }) : wo.createElement(SC.Consumer, null, (i) => wo.createElement(bE, {
        ...t,
        context: i
      }));
    }
  }, __publicField(_b2, "defaultProps", {
    defer: true,
    encodeSpecialCharacters: true,
    prioritizeSeoTags: false
  }), _b2);
  const y$ = "/assets/logo-Db6nyB02.svg", w$ = ({ onClose: n, toggle: e }) => {
    const [t, r] = R.useState(""), [i, l] = R.useState(""), [c, f] = R.useState(""), [m, y] = R.useState(""), [x, C] = R.useState(false), [S, N] = R.useState(""), [P, O] = R.useState(false), L = nm(), H = async (Y) => {
      if (Y.preventDefault(), y(""), N(""), i !== c) {
        y("Le password non coincidono");
        return;
      }
      C(true);
      try {
        const u = await U5(vo, t, i);
        await Xv(u.user), N("Registrazione completata! Per favore controlla la tua email e verifica il tuo account prima di accedere."), O(true);
        const ge = setInterval(async () => {
          var _a3, _b3;
          await ((_a3 = vo.currentUser) == null ? void 0 : _a3.reload()), ((_b3 = vo.currentUser) == null ? void 0 : _b3.emailVerified) && (clearInterval(ge), N("Email verificata! Reindirizzamento..."), setTimeout(() => {
            L("/app");
          }, 1500));
        }, 3e3);
        setTimeout(() => {
          clearInterval(ge);
        }, 3e5);
      } catch (u) {
        console.error("Errore nella registrazione:", u), y(u.message);
      } finally {
        C(false);
      }
    }, W = async () => {
      y(""), N(""), C(true);
      try {
        const Y = await g2(vo, yC);
        console.log("Utente registrato con Google:", Y.user), N("Accesso effettuato con Google! Reindirizzamento..."), setTimeout(() => {
          L("/app");
        }, 1e3);
      } catch (Y) {
        console.error("Errore nell'accesso con Google:", Y), y(Y.message);
      } finally {
        C(false);
      }
    }, T = async () => {
      if (vo.currentUser) try {
        C(true), await Xv(vo.currentUser), N("Email di verifica inviata nuovamente!");
      } catch (Y) {
        y("Errore nell'invio dell'email: " + Y.message);
      } finally {
        C(false);
      }
      else y("Nessun utente attualmente autenticato");
    };
    return h.jsxs("div", {
      className: "text-white",
      children: [
        h.jsxs("h2", {
          className: "text-2xl font-light mb-6 text-center tracking-wide",
          children: [
            "Unisciti a",
            " ",
            h.jsx("span", {
              className: "text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600 font-medium",
              children: "ChessNotes"
            })
          ]
        }),
        m && h.jsx("div", {
          className: "mb-4 text-center text-red-400",
          children: m
        }),
        S && h.jsx("div", {
          className: "mb-4 text-center text-green-400",
          children: S
        }),
        P ? h.jsxs("div", {
          className: "text-center",
          children: [
            h.jsxs("div", {
              className: "bg-blue-900/20 border border-blue-700/30 rounded-lg p-4 mb-4",
              children: [
                h.jsx("p", {
                  className: "text-gray-300 mb-2",
                  children: "Per favore controlla la tua casella email e clicca sul link di verifica."
                }),
                h.jsx("p", {
                  className: "text-sm text-gray-400",
                  children: "Se non vedi l'email, controlla nella cartella spam."
                })
              ]
            }),
            h.jsx("button", {
              onClick: T,
              className: "mt-2 text-blue-400 hover:underline font-light",
              disabled: x,
              children: x ? "Invio in corso..." : "Invia di nuovo l'email di verifica"
            })
          ]
        }) : h.jsxs(h.Fragment, {
          children: [
            h.jsxs("form", {
              onSubmit: H,
              children: [
                h.jsxs("div", {
                  className: "mb-4",
                  children: [
                    h.jsx("label", {
                      htmlFor: "email",
                      className: "block text-gray-300 text-sm mb-2 font-light",
                      children: "Email"
                    }),
                    h.jsx("input", {
                      type: "email",
                      id: "email",
                      className: "w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500 text-white",
                      value: t,
                      onChange: (Y) => r(Y.target.value),
                      placeholder: "example@mail.com",
                      required: true
                    })
                  ]
                }),
                h.jsxs("div", {
                  className: "mb-4",
                  children: [
                    h.jsx("label", {
                      htmlFor: "password",
                      className: "block text-gray-300 text-sm mb-2 font-light",
                      children: "Password"
                    }),
                    h.jsx("input", {
                      type: "password",
                      id: "password",
                      className: "w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500 text-white",
                      value: i,
                      onChange: (Y) => l(Y.target.value),
                      placeholder: "Inserisci la password",
                      required: true
                    })
                  ]
                }),
                h.jsxs("div", {
                  className: "mb-6",
                  children: [
                    h.jsx("label", {
                      htmlFor: "confirmPassword",
                      className: "block text-gray-300 text-sm mb-2 font-light",
                      children: "Conferma Password"
                    }),
                    h.jsx("input", {
                      type: "password",
                      id: "confirmPassword",
                      className: "w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500 text-white",
                      value: c,
                      onChange: (Y) => f(Y.target.value),
                      placeholder: "Ripeti la password",
                      required: true
                    })
                  ]
                }),
                h.jsx("button", {
                  type: "submit",
                  className: "btn-glow w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors disabled:opacity-50 font-light",
                  disabled: x,
                  children: x ? "Caricamento..." : "Registrati"
                })
              ]
            }),
            h.jsxs("div", {
              className: "flex items-center my-6",
              children: [
                h.jsx("div", {
                  className: "flex-grow border-t border-gray-700"
                }),
                h.jsx("span", {
                  className: "mx-4 text-gray-400 font-light text-sm",
                  children: "Oppure"
                }),
                h.jsx("div", {
                  className: "flex-grow border-t border-gray-700"
                })
              ]
            }),
            h.jsxs("button", {
              onClick: W,
              className: "w-full flex items-center justify-center py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 border border-gray-700 font-light",
              disabled: x,
              children: [
                h.jsxs("svg", {
                  xmlns: "http://www.w3.org/2000/svg",
                  className: "h-5 w-5 mr-2",
                  viewBox: "0 0 48 48",
                  children: [
                    h.jsx("path", {
                      fill: "#FFC107",
                      d: "M43.6 20.4H42V20H24v8h11.3C34.4 32.4 29.8 36 24 36c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.4 0 6.5 1.3 8.9 3.4l6.1-6.1C34.6 5.8 29.2 3 24 3 12.4 3 3 12.4 3 24s9.4 21 21 21 21-9.4 21-21c0-1.4-.1-2.8-.4-4.2z"
                    }),
                    h.jsx("path", {
                      fill: "#FF3D00",
                      d: "M6.3 14.7l6.6 4.8C14.2 15.5 18.6 13 24 13c3.4 0 6.5 1.3 8.9 3.4l6.1-6.1C34.6 5.8 29.2 3 24 3 16.3 3 9.4 7.6 6.3 14.7z"
                    }),
                    h.jsx("path", {
                      fill: "#4CAF50",
                      d: "M24 45c5.8 0 10.7-2 14.3-5.5l-6.6-5.5C29.4 36 26 37 24 37c-5.5 0-10.2-3.7-11.9-8.6l-6.6 5.1C9.6 41.4 16.2 45 24 45z"
                    }),
                    h.jsx("path", {
                      fill: "#1976D2",
                      d: "M43.6 20.4H42V20H24v8h11.3c-1 2.7-2.6 5-4.6 6.6l6.6 5.5C38.5 36.6 42 30.9 42 24c0-1.4-.1-2.8-.4-4.2z"
                    })
                  ]
                }),
                x ? "Caricamento..." : "Accedi con Google"
              ]
            })
          ]
        }),
        h.jsx("div", {
          className: "text-center mt-5",
          children: h.jsxs("p", {
            className: "text-sm text-gray-400",
            children: [
              "Hai gi\xE0 un account?",
              " ",
              h.jsx("button", {
                className: "text-blue-400 hover:underline font-light",
                onClick: e,
                children: "Accedi"
              })
            ]
          })
        })
      ]
    });
  }, _$ = ({ onClose: n, toggle: e }) => {
    const [t, r] = R.useState(""), [i, l] = R.useState(""), [c, f] = R.useState(""), [m, y] = R.useState(false), [x, C] = R.useState(""), S = nm(), N = async (O) => {
      O.preventDefault(), f(""), C(""), y(true);
      try {
        const H = (await B5(vo, t, i)).user;
        if (!H.emailVerified) {
          f("Per favore verifica la tua email prima di accedere. Controlla la tua casella email."), await Xv(H), y(false);
          return;
        }
        C("Accesso effettuato! Reindirizzamento..."), setTimeout(() => {
          S("/app");
        }, 1500);
      } catch (L) {
        console.error("Errore nell'accesso:", L), f(L.message);
      } finally {
        y(false);
      }
    }, P = async () => {
      f(""), C(""), y(true);
      try {
        const O = await g2(vo, yC);
        console.log("Utente loggato con Google:", O.user), C("Accesso effettuato con Google! Reindirizzamento..."), setTimeout(() => {
          S("/app");
        }, 1500);
      } catch (O) {
        console.error("Errore nell'accesso con Google:", O), O.code !== "auth/popup-closed-by-user" && f(O.message);
      } finally {
        y(false);
      }
    };
    return h.jsxs("div", {
      className: "text-white",
      children: [
        h.jsxs("h2", {
          className: "text-2xl font-light mb-6 text-center tracking-wide",
          children: [
            "Accedi a",
            " ",
            h.jsx("span", {
              className: "text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600 font-medium",
              children: "ChessNotes"
            })
          ]
        }),
        c && h.jsx("div", {
          className: "mb-4 text-center text-red-400",
          children: c
        }),
        x && h.jsx("div", {
          className: "mb-4 text-center text-green-400",
          children: x
        }),
        h.jsxs("form", {
          onSubmit: N,
          children: [
            h.jsxs("div", {
              className: "mb-4",
              children: [
                h.jsx("label", {
                  htmlFor: "email",
                  className: "block text-gray-300 text-sm mb-2 font-light",
                  children: "Email"
                }),
                h.jsx("input", {
                  type: "email",
                  id: "email",
                  className: "w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500 text-white",
                  value: t,
                  onChange: (O) => r(O.target.value),
                  placeholder: "example@mail.com",
                  required: true
                })
              ]
            }),
            h.jsxs("div", {
              className: "mb-6",
              children: [
                h.jsx("label", {
                  htmlFor: "password",
                  className: "block text-gray-300 text-sm mb-2 font-light",
                  children: "Password"
                }),
                h.jsx("input", {
                  type: "password",
                  id: "password",
                  className: "w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500 text-white",
                  value: i,
                  onChange: (O) => l(O.target.value),
                  placeholder: "Inserisci la password",
                  required: true
                })
              ]
            }),
            h.jsx("button", {
              type: "submit",
              className: "btn-glow w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-colors disabled:opacity-50 font-light",
              disabled: m,
              children: m ? "Caricamento..." : "Accedi"
            })
          ]
        }),
        h.jsxs("div", {
          className: "flex items-center my-6",
          children: [
            h.jsx("div", {
              className: "flex-grow border-t border-gray-700"
            }),
            h.jsx("span", {
              className: "mx-4 text-gray-400 font-light text-sm",
              children: "Oppure"
            }),
            h.jsx("div", {
              className: "flex-grow border-t border-gray-700"
            })
          ]
        }),
        h.jsxs("button", {
          onClick: P,
          className: "w-full flex items-center justify-center py-2 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 border border-gray-700 font-light",
          disabled: m,
          children: [
            h.jsxs("svg", {
              xmlns: "http://www.w3.org/2000/svg",
              className: "h-5 w-5 mr-2",
              viewBox: "0 0 48 48",
              children: [
                h.jsx("path", {
                  fill: "#FFC107",
                  d: "M43.6 20.4H42V20H24v8h11.3C34.4 32.4 29.8 36 24 36c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.4 0 6.5 1.3 8.9 3.4l6.1-6.1C34.6 5.8 29.2 3 24 3 12.4 3 3 12.4 3 24s9.4 21 21 21 21-9.4 21-21c0-1.4-.1-2.8-.4-4.2z"
                }),
                h.jsx("path", {
                  fill: "#FF3D00",
                  d: "M6.3 14.7l6.6 4.8C14.2 15.5 18.6 13 24 13c3.4 0 6.5 1.3 8.9 3.4l6.1-6.1C34.6 5.8 29.2 3 24 3 16.3 3 9.4 7.6 6.3 14.7z"
                }),
                h.jsx("path", {
                  fill: "#4CAF50",
                  d: "M24 45c5.8 0 10.7-2 14.3-5.5l-6.6-5.5C29.4 36 26 37 24 37c-5.5 0-10.2-3.7-11.9-8.6l-6.6 5.1C9.6 41.4 16.2 45 24 45z"
                }),
                h.jsx("path", {
                  fill: "#1976D2",
                  d: "M43.6 20.4H42V20H24v8h11.3c-1 2.7-2.6 5-4.6 6.6l6.6 5.5C38.5 36.6 42 30.9 42 24c0-1.4-.1-2.8-.4-4.2z"
                })
              ]
            }),
            m ? "Caricamento..." : "Accedi con Google"
          ]
        }),
        h.jsx("div", {
          className: "mt-6 text-center",
          children: h.jsxs("span", {
            className: "text-gray-400 font-light text-sm",
            children: [
              "Don't have an account?",
              " ",
              h.jsx("button", {
                className: "text-blue-400 font-semibold",
                onClick: e,
                children: "Sign up"
              })
            ]
          })
        })
      ]
    });
  }, x$ = ({ onClose: n }) => {
    const [e, t] = R.useState(true), r = () => {
      t((i) => !i);
    };
    return h.jsx("div", {
      children: e ? h.jsx(w$, {
        onClose: n,
        toggle: r
      }) : h.jsx(_$, {
        onClose: n,
        toggle: r
      })
    });
  }, E$ = () => h.jsx("div", {
    className: "h-10 w-10 flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 rounded-md text-white font-bold",
    children: "CN"
  }), TE = () => {
    try {
      return h.jsx("img", {
        src: y$,
        alt: "ChessNotes Logo",
        className: "h-10 w-auto"
      });
    } catch {
      return h.jsx(E$, {});
    }
  }, b$ = () => h.jsxs(v$, {
    children: [
      h.jsx("title", {
        children: "Never Forget Your Openings Again - ChessNotes"
      }),
      h.jsx("meta", {
        name: "description",
        content: "ChessNotes is a free platform that allows you to organize, analyze, and train your chess openings with a modern design and impactful animations."
      }),
      h.jsx("meta", {
        name: "keywords",
        content: "chess, openings, chess strategy, chess training, free, mind mapping, position analysis"
      }),
      h.jsx("meta", {
        property: "og:title",
        content: "Never Forget Your Openings Again - ChessNotes"
      }),
      h.jsx("meta", {
        property: "og:description",
        content: "Organize your chess openings and improve your game with ChessNotes. Currently free, the platform adapts to players of all levels."
      }),
      h.jsx("meta", {
        property: "og:type",
        content: "website"
      }),
      h.jsx("meta", {
        property: "og:image",
        content: "/og-image-new.png"
      }),
      h.jsx("meta", {
        name: "twitter:card",
        content: "summary_large_image"
      }),
      h.jsx("link", {
        rel: "canonical",
        href: "https://chessnotes.app"
      })
    ]
  }), T$ = () => {
    const [n, e] = R.useState(false);
    R.useEffect(() => {
      document.title = "Never Forget Your Openings Again - ChessNotes", document.documentElement.classList.remove("app-page");
    }, []);
    const t = () => {
      console.log("Starting application - user entry"), r();
    }, r = () => {
      e(!n);
    };
    return R.useEffect(() => (n ? document.body.style.overflow = "hidden" : document.body.style.overflow = "", () => {
      document.body.style.overflow = "";
    }), [
      n
    ]), h.jsxs("div", {
      className: "bg-gray-900 text-white overflow-visible relative landing",
      children: [
        h.jsx(b$, {}),
        h.jsx("style", {
          children: `
                @keyframes fadeInUp {
                    0% { opacity: 0; transform: translateY(20px); }
                    100% { opacity: 1; transform: translateY(0); }
                }
                
                /* Ensure elements are initially invisible */
                .hidden-initial {
                    opacity: 0;
                }
                
                .fadeInUp {
                    animation: fadeInUp 1s ease-out forwards;
                    will-change: opacity, transform;
                }
                
                /* Glow effect only for the "Never" word */
                @keyframes subtleGlow {
                    0%, 100% { text-shadow: 0 0 10px rgba(79, 129, 251, 0.4); }
                    50% { text-shadow: 0 0 20px rgba(79, 129, 251, 0.7); }
                }
                .subtle-glow {
                    animation: subtleGlow 3s infinite alternate;
                }
                
                /* Floating animation for elements */
                @keyframes float {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-10px); }
                }
                .float {
                    animation: float 6s ease-in-out infinite;
                    will-change: transform;
                }
                
                /* Breathing effect for background shapes */
                @keyframes breathe {
                    0%, 100% { transform: scale(1); opacity: 0.25; }
                    50% { transform: scale(1.05); opacity: 0.4; }
                }
                .breathe {
                    animation: breathe 8s ease-in-out infinite;
                    will-change: transform, opacity;
                }
                
                /* Glowing button effect */
                .btn-glow {
                    position: relative;
                    overflow: hidden;
                    z-index: 1;
                    transition: all 0.3s ease;
                }
                
                .btn-glow:before {
                    content: '';
                    position: absolute;
                    top: -2px; left: -2px; right: -2px; bottom: -2px;
                    border-radius: 0.5rem;
                    background: linear-gradient(45deg, #4f81fb, #9d61ff);
                    z-index: -1;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                }
                
                .btn-glow:hover:before {
                    opacity: 0.8;
                }
                
                .blur-shape {
                    filter: blur(120px);
                }

                /* Modal animation */
                @keyframes fadeIn {
                    0% { opacity: 0; }
                    100% { opacity: 1; }
                }
                
                @keyframes scaleIn {
                    0% { transform: scale(0.9); opacity: 0; }
                    100% { transform: scale(1); opacity: 1; }
                }
                
                .modal-fade-in {
                    animation: fadeIn 0.3s ease-out forwards;
                }
                
                .modal-scale-in {
                    animation: scaleIn 0.4s ease-out forwards;
                }
            `
        }),
        h.jsxs("div", {
          className: "fixed inset-0 overflow-hidden z-0 pointer-events-none",
          children: [
            h.jsx("div", {
              className: "absolute top-[-10%] right-[-5%] w-[40%] h-[40%] rounded-full bg-blue-600 opacity-15 blur-shape breathe"
            }),
            h.jsx("div", {
              className: "absolute bottom-[-15%] left-[-10%] w-[50%] h-[50%] rounded-full bg-purple-600 opacity-10 blur-shape breathe",
              style: {
                animationDelay: "2s"
              }
            }),
            h.jsx("div", {
              className: "absolute top-[30%] left-[10%] w-[25%] h-[25%] rounded-full bg-indigo-500 opacity-8 blur-shape breathe",
              style: {
                animationDelay: "4s"
              }
            }),
            h.jsx("div", {
              className: "absolute bottom-[20%] right-[5%] w-[30%] h-[30%] rounded-full bg-blue-400 opacity-8 blur-shape breathe",
              style: {
                animationDelay: "6s"
              }
            })
          ]
        }),
        h.jsx("header", {
          className: "fixed top-0 left-0 w-full z-50 bg-opacity-70 backdrop-blur-md shadow-md border-b border-gray-800",
          children: h.jsxs("div", {
            className: "container mx-auto flex justify-between items-center py-4 px-6",
            children: [
              h.jsxs("div", {
                className: "flex items-center space-x-3",
                children: [
                  h.jsx(TE, {}),
                  h.jsx("h1", {
                    className: "font-light tracking-wide text-xl bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",
                    children: "ChessNotes"
                  })
                ]
              }),
              h.jsx("nav", {
                children: h.jsxs("ul", {
                  className: "flex items-center space-x-8",
                  children: [
                    h.jsx("li", {
                      children: h.jsx("a", {
                        href: "#features",
                        className: "font-light tracking-wide text-white hover:text-blue-400 transition-colors",
                        children: "Features"
                      })
                    }),
                    h.jsx("li", {
                      children: h.jsx("a", {
                        href: "#demo",
                        className: "font-light tracking-wide text-white hover:text-blue-400 transition-colors",
                        children: "Demo"
                      })
                    }),
                    h.jsx("li", {
                      children: h.jsx("button", {
                        onClick: r,
                        className: "font-light tracking-wide btn-glow px-5 py-2 border border-blue-500 text-white hover:border-blue-400 rounded-lg transition-colors",
                        children: "Sign In"
                      })
                    })
                  ]
                })
              })
            ]
          })
        }),
        h.jsxs("section", {
          className: "pt-32 pb-16 flex flex-col items-center justify-center container mx-auto px-6 min-h-screen relative z-10",
          children: [
            h.jsxs("div", {
              className: "max-w-4xl mx-auto text-center space-y-8",
              children: [
                h.jsxs("h2", {
                  className: "hidden-initial text-5xl md:text-7xl font-light tracking-wide leading-tight fadeInUp",
                  style: {
                    animationDelay: "0.2s"
                  },
                  children: [
                    h.jsx("span", {
                      className: "text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600 font-medium subtle-glow",
                      children: "Never"
                    }),
                    " ",
                    "Forget Your Openings Again"
                  ]
                }),
                h.jsx("p", {
                  className: "hidden-initial text-xl md:text-2xl text-gray-300 font-light tracking-wide fadeInUp max-w-2xl mx-auto",
                  style: {
                    animationDelay: "0.4s"
                  },
                  children: "The free platform to manage and perfect your chess strategies with cutting-edge design."
                }),
                h.jsxs("div", {
                  className: "hidden-initial flex justify-center space-x-6 fadeInUp",
                  style: {
                    animationDelay: "0.6s"
                  },
                  children: [
                    h.jsx("button", {
                      onClick: t,
                      className: "btn-glow inline-flex items-center justify-center text-white bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 px-8 py-4 rounded-lg font-light text-lg tracking-wide shadow-xl transition-all",
                      children: "Start Now \u2013 It's Free"
                    }),
                    h.jsx("a", {
                      href: "#demo",
                      className: "inline-flex items-center justify-center px-8 py-4 border border-gray-700 hover:border-blue-400 rounded-lg font-light text-lg tracking-wide transition-colors",
                      children: "Watch Demo"
                    })
                  ]
                })
              ]
            }),
            h.jsx("div", {
              className: "hidden-initial mt-16 w-full max-w-5xl mx-auto relative fadeInUp float",
              style: {
                animationDelay: "0.8s"
              },
              children: h.jsxs("div", {
                className: "relative w-full aspect-video rounded-xl overflow-hidden shadow-2xl",
                children: [
                  h.jsx("div", {
                    className: "absolute inset-0 bg-[url('/chess-preview.jpg')] bg-cover bg-center opacity-80"
                  }),
                  h.jsx("div", {
                    className: "absolute inset-0 bg-gradient-to-t from-black to-transparent"
                  }),
                  h.jsx("div", {
                    className: "absolute inset-0 flex items-center justify-center",
                    children: h.jsx("span", {
                      className: "px-6 py-3 bg-black bg-opacity-50 backdrop-blur-sm border border-gray-700 rounded-lg text-lg font-light tracking-wider",
                      children: "APP PREVIEW"
                    })
                  }),
                  h.jsx("div", {
                    className: "absolute -bottom-10 -right-10 w-72 h-72 bg-blue-500 opacity-20 rounded-full blur-3xl"
                  }),
                  h.jsx("div", {
                    className: "absolute -top-10 -left-10 w-56 h-56 bg-purple-500 opacity-20 rounded-full blur-3xl"
                  })
                ]
              })
            })
          ]
        }),
        h.jsx("section", {
          id: "features",
          className: "py-24 bg-gray-800 bg-opacity-50 backdrop-blur-sm relative z-10",
          children: h.jsxs("div", {
            className: "container mx-auto px-6",
            children: [
              h.jsxs("div", {
                className: "text-center mb-16",
                children: [
                  h.jsx("h3", {
                    className: "text-3xl font-light tracking-wide mb-6",
                    children: "Cutting-Edge Features"
                  }),
                  h.jsx("p", {
                    className: "text-gray-300 max-w-2xl mx-auto font-light tracking-wide",
                    children: "Organize, analyze, and perfect your chess openings with interactive mind maps, specific training modules, and advanced analysis tools."
                  })
                ]
              }),
              h.jsx("div", {
                className: "grid md:grid-cols-2 lg:grid-cols-3 gap-10",
                children: [
                  {
                    icon: h.jsx("i", {
                      className: "fas fa-project-diagram text-5xl text-blue-400"
                    }),
                    title: "Interactive Mind Maps",
                    description: "Visualize connections between moves in an intuitive and dynamic interface."
                  },
                  {
                    icon: h.jsx("i", {
                      className: "fas fa-chess-board text-5xl text-purple-400"
                    }),
                    title: "Real-Time Analysis",
                    description: "Deepen your strategies with instant analysis and personalized suggestions."
                  },
                  {
                    icon: h.jsx("i", {
                      className: "fas fa-lightbulb text-5xl text-yellow-400"
                    }),
                    title: "Daily Inspiration",
                    description: "Never miss an important move: receive insights and inspiration for every game."
                  }
                ].map((i, l) => h.jsxs("div", {
                  className: "bg-gray-900 bg-opacity-50 backdrop-blur-sm p-8 rounded-2xl shadow-lg border border-gray-700 transition-all fadeInUp hover:border-gray-500",
                  style: {
                    animationDelay: `${0.3 * (l + 1)}s`
                  },
                  children: [
                    h.jsx("div", {
                      className: "mb-6",
                      children: i.icon
                    }),
                    h.jsx("h4", {
                      className: "text-2xl font-light tracking-wide mb-4",
                      children: i.title
                    }),
                    h.jsx("p", {
                      className: "text-gray-300 font-light",
                      children: i.description
                    })
                  ]
                }, l))
              })
            ]
          })
        }),
        h.jsx("section", {
          id: "demo",
          className: "py-24 relative z-10",
          children: h.jsxs("div", {
            className: "container mx-auto px-6",
            children: [
              h.jsxs("div", {
                className: "text-center mb-16",
                children: [
                  h.jsx("h3", {
                    className: "text-3xl font-light tracking-wide",
                    children: "Watch the Demo"
                  }),
                  h.jsx("p", {
                    className: "text-gray-300 max-w-xl mx-auto mt-4 font-light tracking-wide",
                    children: "Discover how ChessNotes transforms the way you study the game of chess with an interactive demo."
                  })
                ]
              }),
              h.jsxs("div", {
                className: "relative mx-auto max-w-5xl aspect-video rounded-xl overflow-hidden shadow-2xl",
                children: [
                  h.jsx("div", {
                    className: "absolute inset-0 bg-[url('/chess-demo.jpg')] bg-cover bg-center opacity-90"
                  }),
                  h.jsx("div", {
                    className: "absolute inset-0 bg-gradient-to-b from-transparent to-gray-900"
                  }),
                  h.jsx("div", {
                    className: "absolute inset-0 flex items-center justify-center",
                    children: h.jsx("button", {
                      onClick: r,
                      className: "btn-glow bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 px-10 py-4 rounded-lg text-xl font-light tracking-wider shadow-xl transition-all",
                      children: "Try Now \u2013 It's Free!"
                    })
                  })
                ]
              })
            ]
          })
        }),
        h.jsx("footer", {
          className: "bg-black bg-opacity-70 backdrop-blur-md border-t border-gray-800 py-16 relative z-10",
          children: h.jsxs("div", {
            className: "container mx-auto px-6",
            children: [
              h.jsxs("div", {
                className: "flex flex-col md:flex-row items-center justify-between",
                children: [
                  h.jsxs("div", {
                    className: "flex items-center space-x-3 mb-6 md:mb-0",
                    children: [
                      h.jsx(TE, {}),
                      h.jsx("span", {
                        className: "font-light tracking-wide text-xl bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600",
                        children: "ChessNotes"
                      })
                    ]
                  }),
                  h.jsxs("div", {
                    className: "flex space-x-6",
                    children: [
                      h.jsx("a", {
                        href: "#",
                        className: "hover:text-blue-400 transition-colors",
                        children: h.jsx("i", {
                          className: "fab fa-twitter text-xl"
                        })
                      }),
                      h.jsx("a", {
                        href: "#",
                        className: "hover:text-blue-400 transition-colors",
                        children: h.jsx("i", {
                          className: "fab fa-github text-xl"
                        })
                      }),
                      h.jsx("a", {
                        href: "#",
                        className: "hover:text-blue-400 transition-colors",
                        children: h.jsx("i", {
                          className: "fab fa-discord text-xl"
                        })
                      })
                    ]
                  })
                ]
              }),
              h.jsxs("div", {
                className: "text-center mt-10 text-gray-500 text-sm border-t border-gray-800 pt-6 font-light",
                children: [
                  "\xA9 ",
                  (/* @__PURE__ */ new Date()).getFullYear(),
                  " ChessNotes. All rights reserved."
                ]
              })
            ]
          })
        }),
        n && h.jsxs("div", {
          className: "fixed inset-0 flex items-center justify-center z-[100] p-4 modal-fade-in",
          children: [
            h.jsx("div", {
              className: "absolute inset-0 bg-gray-900 bg-opacity-80 backdrop-blur-sm",
              onClick: r
            }),
            h.jsx("div", {
              className: "relative z-10 w-full max-w-md modal-scale-in",
              children: h.jsxs("div", {
                className: "relative rounded-xl overflow-hidden shadow-2xl border border-gray-700",
                children: [
                  h.jsx("button", {
                    onClick: r,
                    className: "absolute top-4 right-4 bg-gray-800 bg-opacity-50 rounded-full p-2 text-gray-300 hover:text-white hover:bg-gray-700 transition-colors z-10",
                    "aria-label": "Close",
                    children: h.jsx("svg", {
                      xmlns: "http://www.w3.org/2000/svg",
                      className: "h-6 w-6",
                      fill: "none",
                      viewBox: "0 0 24 24",
                      stroke: "currentColor",
                      children: h.jsx("path", {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M6 18L18 6M6 6l12 12"
                      })
                    })
                  }),
                  h.jsx("div", {
                    className: "absolute top-[-50%] right-[-20%] w-[70%] h-[70%] rounded-full bg-blue-600 opacity-10 blur-shape"
                  }),
                  h.jsx("div", {
                    className: "absolute bottom-[-30%] left-[-20%] w-[60%] h-[60%] rounded-full bg-purple-600 opacity-10 blur-shape"
                  }),
                  h.jsx("div", {
                    className: "bg-gray-900 p-8",
                    children: h.jsx(x$, {
                      onClose: r
                    })
                  })
                ]
              })
            })
          ]
        })
      ]
    });
  }, C$ = ({ children: n }) => {
    const { currentUser: e, loading: t } = Dm();
    return t ? h.jsx("div", {
      className: "flex h-screen w-screen items-center justify-center bg-gray-900",
      children: h.jsx("div", {
        className: "animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500"
      })
    }) : e ? n : h.jsx(OI, {
      to: "/"
    });
  }, S$ = qS.createRoot(document.getElementById("root"));
  S$.render(h.jsx(wo.StrictMode, {
    children: h.jsx(IC, {
      children: h.jsx(ok, {
        children: h.jsx(UM, {
          children: h.jsxs(MI, {
            children: [
              h.jsx(Nv, {
                path: "/",
                element: h.jsx(T$, {})
              }),
              h.jsx(Nv, {
                path: "/app",
                element: h.jsx(C$, {
                  children: h.jsx(WM, {})
                })
              })
            ]
          })
        })
      })
    })
  }));
})();
